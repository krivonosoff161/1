# üìå –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó: –ù–ï–î–û–°–¢–ê–Æ–©–ò–ï –ò –ü–£–°–¢–´–ï –ü–ê–†–ê–ú–ï–¢–†–´

**–î–∞—Ç–∞:** 8 —è–Ω–≤–∞—Ä—è 2026  
**–ü–µ—Ä–∏–æ–¥:** 7 —è–Ω–≤–∞—Ä—è 2026, 21:35 - 8 —è–Ω–≤–∞—Ä—è 2026, 08:33  

---

## üéØ –¢–û–ü 5 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–û–ë–õ–ï–ú

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #1: NoneType –≤ position_manager (17 –æ—à–∏–±–æ–∫)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:**
```
2026-01-07 22:17:47.904 | ERROR | position_manager:close_position_manually:6440
‚ùå –û—à–∏–±–∫–∞ —Ä—É—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏: 'NoneType' object has no attribute 'get'

2026-01-07 22:30:43.983 | ERROR | position_manager:close_position_manually:6440  
2026-01-07 22:39:37.259 | ERROR | position_manager:close_position_manually:6440
2026-01-07 22:50:54.694 | ERROR | position_manager:close_position_manually:6440
[–∏—Ç–æ–≥–æ 17 —Ä–∞–∑]
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
–§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ—Ç `None` –≤–º–µ—Å—Ç–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç API –∏ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å `.get()`:

```python
# –°—Ç—Ä–æ–∫–∞ –≤ logs/errors: "line 6440"
# –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ close_position_manually() –≤ position_manager.py

# –í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–ø—Ä–∏–º–µ—Ä–Ω–æ 6200):
result = await self.client.place_futures_order(...)
if result.get("code") == "0":  # ‚ùå –ï—Å–ª–∏ result=None, –æ—à–∏–±–∫–∞!
```

**–ù–∞–π–¥–µ–Ω–æ –≤ —Ñ–∞–π–ª–µ:**
[src/strategies/scalping/futures/position_manager.py](src/strategies/scalping/futures/position_manager.py) (~—Å—Ç—Ä–æ–∫–∞ 6200-6220)

**–ö–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –í–æ –≤—Ä–µ–º—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫/—Ä–∞–∑—Ä—ã–≤–æ–≤ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –≤–º–µ—Å—Ç–æ JSON
- –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∂–¥—ã–µ 10-15 –º–∏–Ω—É—Ç (—Å 22:17 –ø–æ 22:50)

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #2: TCC 'str' object has no attribute 'get' (58+ –æ—à–∏–±–æ–∫)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫:**
```
2026-01-07 22:36:10.863 | ERROR | trading_control_center:update_state:786
‚ùå TCC: –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: 'str' object has no attribute 'get'

[–ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è 58 —Ä–∞–∑ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º ~1-5 –º–∏–Ω—É—Ç]
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
–í `update_state()` —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏, –Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –∫–∞–∫ —Å–æ —Å–ª–æ–≤–∞—Ä–µ–º.

**–ù–∞–π–¥–µ–Ω–æ –≤ —Ñ–∞–π–ª–µ:**
[src/strategies/scalping/futures/core/trading_control_center.py](src/strategies/scalping/futures/core/trading_control_center.py)  
**–§—É–Ω–∫—Ü–∏—è:** `update_state()` (—Å—Ç—Ä–æ–∫–∞ 525+)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**
```python
# –°—Ç—Ä–æ–∫–∞ ~550-560 (–≤–Ω—É—Ç—Ä–∏ update_state):
for position in positions:
    symbol = position.get("instId", "").replace("-SWAP", "")
    # ‚ùå –ï—Å–ª–∏ position —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∞ –Ω–µ dict, –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞!
```

**–ö–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –° 22:36 –ø–æ 23:00+ (–ø—Ä–∏–º–µ—Ä–Ω–æ —á–∞—Å –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö –æ—à–∏–±–æ–∫)
- –ö–∞–∂–¥—ã–µ 1-5 –º–∏–Ω—É—Ç
- –ö–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–∑–∏—Ü–∏—è—Ö

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #3: –ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–æ–≤ (19 –ø–æ–∑–∏—Ü–∏–π)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
19 –ø–æ–∑–∏—Ü–∏–π –æ—Ç–∫—Ä—ã—Ç—ã, –Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ CSV –ª–æ–≥–µ –ù–ï –ù–ê–ô–î–ï–ù–û.

**–ü—Ä–∏–º–µ—Ä—ã:**
```
BTC-USDT  2026-01-07T18:41:08.567069
SOL-USDT  2026-01-07T18:41:53.381133
[+ 17 –¥—Ä—É–≥–∏—Ö]
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ ‚Üí –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –≤ CSV
- –ù–æ –°–ò–ì–ù–ê–õ–ê, –∫–æ—Ç–æ—Ä—ã–π —ç—Ç—É –ø–æ–∑–∏—Ü–∏—é –≤—ã–∑–≤–∞–ª ‚Üí –ù–ï–¢ –≤ CSV
- –ü–æ—Ç–µ—Ä—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è: –Ω–µ–ª—å–∑—è –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ —ç—Ç–æ—Ç —Å–∏–≥–Ω–∞–ª

**–§–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:**
[src/strategies/scalping/futures/signal_generator.py](src/strategies/scalping/futures/signal_generator.py)

**–í–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
–°–∏–≥–Ω–∞–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è ‚Üí —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è, –Ω–æ —Å–∏–≥–Ω–∞–ª –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ü–û–°–õ–ï (–∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è)

```python
# –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö:
1. –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é  ‚Üê –ú–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –Ω–µ—É–¥–∞—á–µ–π –∏ –Ω–µ –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è
2. –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª  ‚Üê –ú–æ–∂–µ—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ—à–∏–±–∫–∞ –≤—ã—à–µ

# –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö:
1. –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª  ‚Üê –ü–ï–†–í–û–ï - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–∏–≥–Ω–∞–ª –≤ –ª–æ–≥–µ
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
3. –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
```

---

### üü° –ü–†–û–ë–õ–ï–ú–ê #4: –ü—É—Å—Ç—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö (–û–ñ–ò–î–ê–ï–ú–û)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
–í CSV —Å–∏–≥–Ω–∞–ª—ã (record_type='signals') –∏–º–µ—é—Ç –º–Ω–æ–≥–æ –ø—É—Å—Ç—ã—Ö –ø–æ–ª–µ–π:

```
entry_price:  1,446 (100%) –ø—É—Å—Ç–æ
exit_price:   1,446 (100%) –ø—É—Å—Ç–æ
size:         1,446 (100%) –ø—É—Å—Ç–æ
gross_pnl:    1,446 (100%) –ø—É—Å—Ç–æ
commission:   1,446 (100%) –ø—É—Å—Ç–æ
net_pnl:      1,446 (100%) –ø—É—Å—Ç–æ
```

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ?**
‚úÖ **–î–ê!** –°–∏–≥–Ω–∞–ª—ã - —ç—Ç–æ –í–•–û–î–ù–´–ï –¥–∞–Ω–Ω—ã–µ (–ö–£–ü–ò–¢–¨/–ü–†–û–î–ê–¢–¨), –æ–Ω–∏ –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.  
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã entry_price, exit_price, size –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–∑–∏—Ü–∏—è –ó–ê–ö–†–´–í–ê–ï–¢–°–Ø.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ù–µ –ø—Ä–æ–±–ª–µ–º–∞**

---

### üü° –ü–†–û–ë–õ–ï–ú–ê #5: –ü–æ–∑–∏—Ü–∏–∏ –±–µ–∑ –ø–æ—Ä—è–¥–∫–∞_id (5 –ø–æ–∑–∏—Ü–∏–π)

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
5 –ø–æ–∑–∏—Ü–∏–π –æ—Ç–∫—Ä—ã—Ç—ã, –Ω–æ –Ω–µ –∏–º–µ—é—Ç order_id (146/147 –ø–æ–∑–∏—Ü–∏–π –∏–º–µ—é—Ç order_id, 1 –Ω–µ—Ç)

**–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞?**
üü° **–ß–∞—Å—Ç–∏—á–Ω–æ.** –ü–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞, –Ω–æ –µ—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ–º order_id, —Å–ª–æ–∂–Ω–µ–µ –µ—ë –∑–∞–∫—Ä—ã—Ç—å.

**–°—Ç–∞—Ç—É—Å:** üü° **–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç** (—Ç–æ–ª—å–∫–æ 1 –ø–æ–∑–∏—Ü–∏—è –∏–∑ 147)

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–£–°–¢–´–• –ó–ù–ê–ß–ï–ù–ò–ô

### –í –°–ò–ì–ù–ê–õ–ê–• (1,446 —Å–∏–≥–Ω–∞–ª–æ–≤):
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—É—Å—Ç–æ | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| entry_price | 1,446/1,446 (100%) | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ |
| exit_price | 1,446/1,446 (100%) | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ |
| size | 1,446/1,446 (100%) | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ |
| order_id | 1,299/1,446 (89.8%) | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ (–Ω–µ –≤—Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –æ—Ä–¥–µ—Ä—ã) |
| reason | 1,446/1,446 (100%) | ‚úÖ –û–∂–∏–¥–∞–µ–º–æ |

### –í –û–†–î–ï–†–ê–• (147 –æ—Ä–¥–µ—Ä–æ–≤):
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—É—Å—Ç–æ | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| entry_price | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| size | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| symbol | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |

### –í –ü–û–ó–ò–¶–ò–Ø–• (147 –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π):
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ü—É—Å—Ç–æ | –°—Ç–∞—Ç—É—Å |
|----------|-------|--------|
| symbol | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| entry_price | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| size | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| regime | 0/147 (0%) | ‚úÖ –ü–æ–ª–Ω—ã–µ |
| order_id | 146/147 (99.3%) | ‚úÖ –ü–æ—á—Ç–∏ –ø–æ–ª–Ω—ã–µ |

---

## üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–°—Ä–æ—á–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ)

**1Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–∏—Ç—å NoneType –≤ position_manager**
- **–§–∞–π–ª:** [src/strategies/scalping/futures/position_manager.py](src/strategies/scalping/futures/position_manager.py)
- **–§—É–Ω–∫—Ü–∏—è:** `close_position_manually()` (—Å—Ç—Ä–æ–∫–∞ ~6200)
- **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

```python
# –°–ï–ô–ß–ê–° (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
result = await self.client.place_futures_order(...)
if result.get("code") == "0":  # ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å None!

# –î–û–õ–ñ–ù–û –ë–´–¢–¨:
result = await self.client.place_futures_order(...)

# ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –ü–†–û–í–ï–†–ö–£
if not result:
    logger.error("API –≤–µ—Ä–Ω—É–ª None –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏")
    return None

if not isinstance(result, dict):
    logger.error(f"API –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø: {type(result)}")
    return None

if result.get("code") == "0":  # –¢–µ–ø–µ—Ä—å –±–µ–∑–æ–ø–∞—Å–Ω–æ
    logger.info(f"‚úÖ –ü–æ–∑–∏—Ü–∏—è {symbol} —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç–∞")
```

---

**2Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–∏—Ç—å TCC 'str' error**
- **–§–∞–π–ª:** [src/strategies/scalping/futures/core/trading_control_center.py](src/strategies/scalping/futures/core/trading_control_center.py)
- **–§—É–Ω–∫—Ü–∏—è:** `update_state()` (—Å—Ç—Ä–æ–∫–∞ 525+)
- **–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

–ö–æ–¥ —É–∂–µ –∏–º–µ–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É (`if not isinstance(positions, list)`), –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ. 

```python
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ update_state():
for position in positions:
    if not isinstance(position, dict):
        logger.warning(f"–ü—Ä–æ–ø—É—Å–∫: position –Ω–µ dict, –∞ {type(position)}")
        continue
    
    # –¢–æ–ª—å–∫–æ –¢–û–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–µ–º .get()
    symbol = position.get("instId", "").replace("-SWAP", "")
```

---

**3Ô∏è‚É£ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–∏–≥–Ω–∞–ª—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –î–û –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏**
- **–§–∞–π–ª:** [src/strategies/scalping/futures/signal_generator.py](src/strategies/scalping/futures/signal_generator.py)
- **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
- **–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
```python
# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö:

# 1. –°–ù–ê–ß–ê–õ–ê - –ó–∞–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª
logger.info(f"üìä –°–∏–≥–Ω–∞–ª: {symbol} {direction}")
await self.data_registry.log_signal(signal)  # –ó–∞–ø–∏—Å–∞—Ç—å –≤ CSV

# 2. –ü–û–¢–û–ú - –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
result = await order_executor.execute(signal)

# –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Å–∏–≥–Ω–∞–ª –≤ –ª–æ–≥–µ –¥–∞–∂–µ –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è –Ω–µ—É–¥–∞—á–µ–π
```

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ü–†–û–ë–õ–ï–ú

| ‚Ññ | –ü—Ä–æ–±–ª–µ–º–∞ | –û—à–∏–±–æ–∫ | –§–∞–π–ª | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –í—Ä–µ–º—è |
|---|----------|--------|------|-----------|-------|
| 1 | NoneType –≤ position_manager | 17 | position_manager.py | üî¥ –ö–†–ò–¢–ò–ß–ï–ù | 10 –º–∏–Ω |
| 2 | TCC 'str' error | 58+ | trading_control_center.py | üî¥ –ö–†–ò–¢–ò–ß–ï–ù | 15 –º–∏–Ω |
| 3 | –ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–æ–≤ | 19 | signal_generator.py | üî¥ –ö–†–ò–¢–ò–ß–ï–ù | 30 –º–∏–Ω |
| 4 | –ü—É—Å—Ç—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö | 1,446 | CSV logging | ‚úÖ –ù–æ—Ä–º–∞ | N/A |
| 5 | –ü–æ–∑–∏—Ü–∏–∏ –±–µ–∑ order_id | 1 | position_manager.py | üü° –ù–∏–∑–∫–æ | 5 –º–∏–Ω |

**–û–±—â–µ–µ –≤—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ~55 –º–∏–Ω—É—Ç

---

## üìù –í–´–í–û–î–´

### –ß—Ç–æ –†–ê–ë–û–¢–ê–ï–¢ ‚úÖ
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø–æ–ª–Ω—ã–µ (symbol, entry_price, size, regime, order_id)
- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ CSV –ª–æ–≥–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- MTF –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ß—Ç–æ –ù–ï –†–ê–ë–û–¢–ê–ï–¢ ‚ùå
1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API** - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None/–Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–∏–ø –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤** - –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—Ç–µ—Ä–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –ª–æ–≥–µ
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö** - –∫–æ–¥ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç dict, –Ω–æ –∏–Ω–æ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç str/None

### –ì–õ–ê–í–ù–ê–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø
**–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ç–∏–ø –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ü–ï–†–ï–î –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:**

```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –æ–ø–∞—Å–Ω–æ
data = api_call()
value = data['key']

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –±–µ–∑–æ–ø–∞—Å–Ω–æ
data = api_call()
if not data:
    return handle_error()
if not isinstance(data, dict):
    return handle_error()
value = data.get('key', default)
```

