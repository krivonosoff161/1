# –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π (–ø–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º)

## üìä –î–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–π:

### **ETHUSDT:**
- **Entry:** 3,885.95 USDT
- **Current:** 3,897.62 USDT
- **PnL:** +1.08 USDT (+0.89%) ‚úÖ **–ü–†–ï–í–´–®–ê–ï–¢ TP 0.4%!**
- **Margin:** 120.46 USDT
- **Size:** 0.093 ETH
- **Notional:** 0.093 √ó 3,897.62 ‚âà $362.48

### **BTCUSDT:**
- **Entry:** 110,945.9 USDT
- **Current:** 111,123.1 USDT
- **PnL:** +0.58 USDT (+0.47%) ‚úÖ **–ü–†–ï–í–´–®–ê–ï–¢ TP 0.4%!**
- **Margin:** 122.04 USDT
- **Size:** 0.0033 BTC
- **Notional:** 0.0033 √ó 111,123.1 ‚âà $366.70

---

## üêõ –ü–†–û–ë–õ–ï–ú–ê –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ê:

### **–û–±–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ TP 0.4%, –Ω–æ –ù–ï –∑–∞–∫—Ä—ã–ª–∏—Å—å!**

**ETH:**
- PnL: **+0.89%** (–±–æ–ª—å—à–µ TP 0.4%)
- –î–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç—å—Å—è!

**BTC:**
- PnL: **+0.47%** (–±–æ–ª—å—à–µ TP 0.4%)
- –î–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç—å—Å—è!

---

## üîç –ü–û–ß–ï–ú–£ –ù–ï –ó–ê–ö–†–´–í–ê–Æ–¢–°–Ø:

### **–ü—Ä–æ–±–ª–µ–º–∞ 1: TrailingSL –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π TP**

**TrailingSL –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ:**
- –ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ <= trailing stop (–¥–ª—è LONG)
- –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ TP!

**–õ–æ–≥–∏–∫–∞ TrailingSL:**
- –ü–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ (+0.89% –∏ +0.47%)
- TrailingSL —É—Å—Ç–∞–Ω–æ–≤–∏–ª trailing stop –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
- –¶–µ–Ω–∞ –≤—ã—à–µ trailing stop ‚Üí TrailingSL –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å

### **–ü—Ä–æ–±–ª–µ–º–∞ 2: –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫**

**–í `_main_trading_loop`:**
1. `_update_trailing_stop_loss` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ ‚úÖ
2. `_manage_positions` - –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ TP –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å

**–í `_check_tp_only`:**
```python
pnl_percent = (current_price - entry_price) / entry_price * 100
if pnl_percent >= tp_percent:  # 0.89 >= 0.4 ‚úÖ –î–æ–ª–∂–Ω–æ —Å—Ä–∞–±–æ—Ç–∞—Ç—å!
```

**–ù–û!** –ï—Å–ª–∏ —ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ –∏–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ, TP –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üí° –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´:

### 1. **–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è**

**–ï—Å–ª–∏ tp_percent = 0.4 –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ 40%:**
- ETH: 0.89% < 40% ‚ùå (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç)
- BTC: 0.47% < 40% ‚ùå (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç)

### 2. **TrailingSL –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ**

TrailingSL –¥–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –ø—Ä–∏ —Ç—Ä–µ–Ω–¥–µ –∏ –º–æ–∂–µ—Ç "–∑–∞—â–∏—â–∞—Ç—å" –ø—Ä–∏–±—ã–ª—å, –Ω–µ –ø–æ–∑–≤–æ–ª—è—è –∑–∞–∫—Ä—ã—Ç—å—Å—è –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É TP.

### 3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ TP –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —á–∞—Å—Ç–æ**

–ï—Å–ª–∏ `_check_tp_only` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∂–µ, —á–µ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è TrailingSL, TP –º–æ–∂–µ—Ç "–ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å—Å—è".

---

## ‚úÖ –í–´–í–û–î:

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:**
- ‚úÖ –û–±–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ TP 0.4%
- ‚ùå –ù–∏ –æ–¥–Ω–∞ –Ω–µ –∑–∞–∫—Ä—ã–ª–∞—Å—å
- ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π TP –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω–∞:**
- TrailingSL —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É TP
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –Ω–æ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (–≤–æ–∑–º–æ–∂–Ω–æ, –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏–ª–∏ –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫)

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ TP –≤ `_update_trailing_stop_loss` –ü–ï–†–ï–î –ø—Ä–æ–≤–µ—Ä–∫–æ–π TrailingSL
- –ò–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ `_check_tp_only`

