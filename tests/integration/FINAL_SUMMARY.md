# üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å–≤–æ–¥–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–î–∞—Ç–∞:** 2026-01-05  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ü–û–õ–ù–´–ï –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º sandbox –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. –°–æ–∑–¥–∞–Ω—ã –ü–û–õ–ù–´–ï –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ë–ï–ó –º–æ–∫–æ–≤:

**–§–∞–π–ª:** `test_position_size_real_sandbox.py`  
**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É #2: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏**

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –í–°–Æ –¶–ï–ü–û–ß–ö–£:**
1. ‚úÖ **Sandbox API** ‚Üí –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ –±–∏—Ä–∂–µ (get_ticker, get_instrument_details, get_balance)
2. ‚úÖ **OKXFuturesClient** ‚Üí –†–µ–∞–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ sandbox
3. ‚úÖ **RiskManager** ‚Üí –†–µ–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
4. ‚úÖ **DataRegistry** ‚Üí –†–µ–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
5. ‚úÖ **–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** ‚Üí –†–µ–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–Ω–µ—Ç—ã ‚Üî –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

**–ß—Ç–æ –ù–ï –º–æ–∫–∏—Ä—É–µ—Ç—Å—è:**
- ‚úÖ OKXFuturesClient - –†–ï–ê–õ–¨–ù–û–ï –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ RiskManager - –†–ï–ê–õ–¨–ù–´–ô —Ä–∞—Å—á–µ—Ç
- ‚úÖ DataRegistry - –†–ï–ê–õ–¨–ù–û–ï —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—á—Ç–µ–Ω–∏–µ
- ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –∫ API - –†–ï–ê–õ–¨–ù–´–ï –∑–∞–ø—Ä–æ—Å—ã –∫ sandbox

**–ß—Ç–æ –º–æ–∫–∏—Ä—É–µ—Ç—Å—è (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ):**
- ‚ö†Ô∏è ConfigManager - —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```powershell
# Windows PowerShell
$env:OKX_API_KEY="your_sandbox_api_key"
$env:OKX_SECRET_KEY="your_sandbox_secret_key"
$env:OKX_PASSPHRASE="your_sandbox_passphrase"
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã:

```bash
# –í—Å–µ sandbox —Ç–µ—Å—Ç—ã
pytest tests/integration/test_position_size_real_sandbox.py -v -s

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/integration/test_position_size_real_sandbox.py::TestPositionSizeRealSandbox::test_full_chain_sandbox_client_to_risk_manager -v -s
```

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:

### test_full_chain_sandbox_client_to_risk_manager:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ sandbox API (get_ticker, get_balance)
- ‚úÖ RiskManager —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ –ú–û–ù–ï–¢–ê–•
- ‚úÖ –†–∞–∑–º–µ—Ä < 1.0 (—ç—Ç–æ –º–æ–Ω–µ—Ç—ã, –Ω–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DataRegistry
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry

### test_full_chain_sandbox_instrument_details_to_conversion:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ sandbox API (get_instrument_details)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- ‚úÖ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è (–∫–∞–∫ –±—ã–ª–æ –≤ –ø—Ä–æ–±–ª–µ–º–µ #2)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π notional –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –≤ ~100 —Ä–∞–∑

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Å—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É  
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:** API –∫–ª—é—á–∏ –¥–ª—è sandbox  
**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sandbox=True (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥)

---

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –í–°–Ø —Ü–µ–ø–æ—á–∫–∞** - –æ—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ –±–∏—Ä–∂–µ –¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ **–†–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** - –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ–π sandbox –±–∏—Ä–∂–∏
3. ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sandbox —Ä–µ–∂–∏–º
4. ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
5. ‚úÖ **–ü–æ–ª–Ω–æ** - –Ω–µ—Ç –º–æ–∫–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –¢–µ—Å—Ç—ã –º–æ–≥—É—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è –µ—Å–ª–∏ –Ω–µ—Ç API –∫–ª—é—á–µ–π (skipTest)
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **sandbox=True** (–±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥)
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ–π sandbox –±–∏—Ä–∂–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –í–°–Ø —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–±–æ—Ç—ã –ë–ï–ó –º–æ–∫–æ–≤
