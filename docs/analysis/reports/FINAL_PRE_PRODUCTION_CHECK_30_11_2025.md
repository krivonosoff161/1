# –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ —Å—É—Ç–∫–∏ (30.11.2025)

**–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏:** 22:50  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –†–ê–ë–û–¢–ê–Æ–¢**

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:1477-1520`

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
- `_get_regime_params()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å: `scalping_config.adaptive_regime`
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Pydantic –æ–±—ä–µ–∫—Ç–æ–≤
- Fallback –Ω–∞ `orchestrator._get_regime_params()` –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ INFO –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ `sl_percent`
- ‚úÖ WARNING –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback
- ‚úÖ INFO —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ TP/SL —Ü–µ–Ω–∞–º–∏

---

### 2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞** ‚úÖ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢**
```
2025-11-30 22:50:06.095 | DEBUG | regime=ranging
2025-11-30 22:50:06.100 | DEBUG | regime=ranging
2025-11-30 22:50:06.101 | DEBUG | regime=ranging
```

- –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ `signal_generator.regime_managers`
- Fallback –Ω–∞ `"ranging"` –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- WARNING –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback

---

### 3. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏** ‚úÖ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢**
```
2025-11-30 22:50:12.154 | DEBUG | TCC: –ê–Ω–∞–ª–∏–∑ 3 –ø–æ–∑–∏—Ü–∏–π...
2025-11-30 22:50:12.154 | DEBUG | [MANAGE_POSITION] BTC-USDT
2025-11-30 22:50:12.155 | DEBUG | [MANAGE_POSITION] ETH-USDT
2025-11-30 22:50:12.155 | DEBUG | [MANAGE_POSITION] SOL-USDT
```

- PositionRegistry —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
- PositionManager —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
- TradingControlCenter –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –∞–Ω–∞–ª–∏–∑

---

### 4. **–ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã** ‚úÖ

**TrailingStopLoss:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∂–∏–º–∞–º

**ExitAnalyzer:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
- ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏

**PositionManager:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ Profit Harvesting (–ü–†–ò–û–†–ò–¢–ï–¢ #1)
- ‚úÖ Profit Drawdown (–ü–†–ò–û–†–ò–¢–ï–¢ #2)
- ‚úÖ Max Holding (–ü–†–ò–û–†–ò–¢–ï–¢ #3)
- ‚úÖ TP/SL –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

---

### 5. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** ‚úÖ

**–†–µ–∂–∏–º `ranging`:**
- ‚úÖ `sl_percent=2.0%` (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- ‚úÖ `tp_atr_multiplier=0.8`
- ‚úÖ `sl_atr_multiplier=0.5`
- ‚úÖ `max_holding_minutes=20`
- ‚úÖ `profit_drawdown`: base=20.0%, multiplier=1.5, threshold=30.0%

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ `scalping_config.adaptive_regime`
- ‚úÖ Fallback –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚úÖ

**check_interval:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ `1.0` —Å–µ–∫ (–¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞)

**–ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ 3 –ø–æ–∑–∏—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- ‚úÖ –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

**–ü–∞–º—è—Ç—å:**
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ `psutil` (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

---

### 7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚úÖ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ù–ï–¢ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –û–®–ò–ë–û–ö**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤: –Ω–µ—Ç ERROR/CRITICAL/Exception
- –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ

---

## üìä –¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï

### **–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏:**
1. **BTC-USDT:** entry=91432.9, current=91407.8, PnL=-0.27%
2. **ETH-USDT:** entry=3035.10, current=3033.49, PnL=-0.27%
3. **SOL-USDT:** entry=137.71, current=137.52, PnL=-0.14%

### **–†–µ–∂–∏–º —Ä—ã–Ω–∫–∞:**
- –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏: `ranging`
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ `signal_generator.regime_managers`

### **–ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã:**
- ‚úÖ TrailingStopLoss: –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ ExitAnalyzer: –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ PositionManager: —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–∑–∏—Ü–∏—è–º–∏
- ‚úÖ Profit Drawdown: base=20.0%, threshold=30.0%

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `_get_regime_params()` |
| **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞** | ‚úÖ | –†–∞–±–æ—Ç–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ |
| **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π** | ‚úÖ | –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏** | ‚úÖ | PositionManager —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **TrailingStopLoss** | ‚úÖ | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| **ExitAnalyzer** | ‚úÖ | –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ |
| **Profit Drawdown** | ‚úÖ | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | ‚úÖ | –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ | check_interval=1.0 —Å–µ–∫ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ | –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üéØ –í–ï–†–î–ò–ö–¢

### ‚úÖ **–ë–û–¢ –ì–û–¢–û–í –ö –†–ê–ë–û–¢–ï –ù–ê –°–£–¢–ö–ò**

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
1. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
3. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
4. ‚úÖ –í—Å–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –∞–∫—Ç–∏–≤–Ω—ã
5. ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
6. ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –Ω–æ—Ä–º–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–ª—è—Ç—å –±–æ—Ç–∞ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –Ω–∞ —Å—É—Ç–∫–∏
- ‚ö†Ô∏è –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ (—Ä–∞–∑ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤)
- ‚ö†Ô∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–∞–º—è—Ç—å (–µ—Å–ª–∏ `psutil` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ TrailingStopLoss –∏ ExitAnalyzer
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –ø–æ —Ä–µ–∂–∏–º–∞–º
- –ó–∞–∫—Ä—ã—Ç–∏—è –±—É–¥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –ø–æ TP/SL, Profit Drawdown, Max Holding

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í –ö –ü–†–û–î–ê–ö–®–ï–ù–£**


