# üîç –ê–ù–ê–õ–ò–ó –û–ö–†–£–ì–õ–ï–ù–ò–Ø –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ô

**–î–∞—Ç–∞:** 22.11.2025  
**–í–æ–ø—Ä–æ—Å:** –ü–æ—á–µ–º—É —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è —Å `0.054180 ‚Üí 0.054000` –º–æ–Ω–µ—Ç?

---

## ‚úÖ –û–¢–í–ï–¢: –≠–¢–û –ù–û–†–ú–ê–õ–¨–ù–û–ï –ü–û–í–ï–î–ï–ù–ò–ï –ë–ò–†–ñ–ò

**–≠—Ç–æ –ù–ï —Ö–∞—Ä–¥–∫–æ–¥ –∏ –ù–ï –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±–æ—Ç–∞!**  
–≠—Ç–æ **—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–∏—Ä–∂–∏ OKX** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.

---

## üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢

### 1. –ë–æ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–ª–∞–Ω—Å–∞, —Ä–∏—Å–∫–∞, –ª–∏–º–∏—Ç–æ–≤
- –î–ª—è ETH-USDT –ø–æ–ª—É—á–∏–ª–æ—Å—å: **0.054180 –º–æ–Ω–µ—Ç**

### 2. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å –±–∏—Ä–∂–∏
```
üìã –î–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ ETH-USDT:
- ctVal = 0.1    (1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 0.1 ETH)
- lotSz = 0.01   (—à–∞–≥ —Ä–∞–∑–º–µ—Ä–∞ = 0.01)
- minSz = 0.01   (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä = 0.01)
```

### 3. –ë–æ—Ç –æ–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–∏—Ä–∂–∏
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `0.054180 / 0.1 = 0.5418 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤`
- –û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ —à–∞–≥–∞ –ª–æ—Ç–∞: `round(0.5418, 0.01) = 0.54 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤`
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ: `0.54 * 0.1 = 0.054000 –º–æ–Ω–µ—Ç`

### 4. –†–µ–∑—É–ª—å—Ç–∞—Ç
- **–ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 0.054180 –º–æ–Ω–µ—Ç
- **–ü–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è:** 0.054000 –º–æ–Ω–µ—Ç
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** -0.33% (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)

---

## üìã –ü–ê–†–ê–ú–ï–¢–†–´ –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í OKX

### ETH-USDT:
- **ctVal:** 0.1 (1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 0.1 ETH)
- **lotSz:** 0.01 (—à–∞–≥ —Ä–∞–∑–º–µ—Ä–∞ = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- **minSz:** 0.01 (–º–∏–Ω–∏–º—É–º = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = 0.001 ETH)

### BTC-USDT:
- **ctVal:** 0.01 (1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 0.01 BTC)
- **lotSz:** 0.01 (—à–∞–≥ —Ä–∞–∑–º–µ—Ä–∞ = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- **minSz:** 0.01 (–º–∏–Ω–∏–º—É–º = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = 0.0001 BTC)

### SOL-USDT:
- **ctVal:** 1.0 (1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1 SOL)
- **lotSz:** 0.01 (—à–∞–≥ —Ä–∞–∑–º–µ—Ä–∞ = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- **minSz:** 0.01 (–º–∏–Ω–∏–º—É–º = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = 0.01 SOL)

### DOGE-USDT:
- **ctVal:** 1000.0 (1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1000 DOGE)
- **lotSz:** 0.01 (—à–∞–≥ —Ä–∞–∑–º–µ—Ä–∞ = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)
- **minSz:** 0.01 (–º–∏–Ω–∏–º—É–º = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ = 10 DOGE)

---

## üîç –ì–î–ï –≠–¢–û –í –ö–û–î–ï

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:
**–§–∞–π–ª:** `src/clients/futures_client.py`  
**–ú–µ—Ç–æ–¥:** `get_instrument_details()`  
**–°—Ç—Ä–æ–∫–∞:** ~381

```python
instrument_details = await self.client.get_instrument_details(symbol)
ct_val = instrument_details.get("ctVal", 0.01)
lot_sz = instrument_details.get("lotSz", 0.01)
min_sz = instrument_details.get("minSz", 0.01)
```

### 2. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏:
**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–ú–µ—Ç–æ–¥:** `_calculate_position_size()`  
**–°—Ç—Ä–æ–∫–∞:** ~4100-4130

```python
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
size_in_contracts = position_size / ct_val

# –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ lotSz (–∫–∞–∫ –≤ place_futures_order)
rounded_size_in_contracts = round_to_step(size_in_contracts, lot_sz)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
if rounded_size_in_contracts < min_sz:
    rounded_size_in_contracts = min_sz

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã (—Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)
real_position_size = rounded_size_in_contracts * ct_val
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–°—Ç—Ä–æ–∫–∞:** ~4238

```python
logger.warning(
    f"‚ö†Ô∏è –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è/–º–∏–Ω–∏–º—É–º–∞: "
    f"{position_size:.6f} ‚Üí {real_position_size:.6f} –º–æ–Ω–µ—Ç "
    f"({reduction_pct:+.2f}%), "
    f"notional: ${margin_usd * leverage:.2f} ‚Üí ${real_notional_usd:.2f}, "
    f"margin: ${margin_usd:.2f} ‚Üí ${real_margin_usd:.2f}"
)
```

---

## ‚úÖ –≠–¢–û –ù–û–†–ú–ê–õ–¨–ù–û

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–∏—Ä–∂–∏:**
   - –ë–∏—Ä–∂–∞ OKX —Ç—Ä–µ–±—É–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —à–∞–≥–∞ (`lotSz`)
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (`minSz`)
   - –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (`ctVal`)

2. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å:**
   - –ë–∏—Ä–∂–∞ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.054180 ETH)
   - –ù—É–∂–Ω–æ –æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (0.054000 ETH)

3. **–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ (< 1%)
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ç–æ—Ä–≥–æ–≤–ª–∏
   - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –±–∏—Ä–∂–µ–π

---

## üìä –ü–†–ò–ú–ï–†–´ –ò–ó –õ–û–ì–û–í

### ETH-USDT:
```
‚ö†Ô∏è –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è/–º–∏–Ω–∏–º—É–º–∞: 
0.054180 ‚Üí 0.054000 –º–æ–Ω–µ—Ç (+0.33%), 
notional: $150.00 ‚Üí $149.50, 
margin: $30.00 ‚Üí $29.90
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- –ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 0.054180 ETH
- –û–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ: 0.054000 ETH (—à–∞–≥ 0.001 ETH)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ: -0.33% (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

### DOGE-USDT:
```
‚ö†Ô∏è –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è/–º–∏–Ω–∏–º—É–º–∞: 
1076.040172 ‚Üí 1070.000000 –º–æ–Ω–µ—Ç (+0.56%), 
notional: $150.00 ‚Üí $149.16, 
margin: $30.00 ‚Üí $29.83
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- –ò—Å—Ö–æ–¥–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 1076.04 DOGE
- –û–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ: 1070 DOGE (—à–∞–≥ 10 DOGE)
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ: -0.56% (–Ω–æ—Ä–º–∞–ª—å–Ω–æ)

---

## ‚úÖ –í–´–í–û–î

### –≠—Ç–æ –ù–ï –ø—Ä–æ–±–ª–µ–º–∞, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ!

1. **–ù–µ —Ö–∞—Ä–¥–∫–æ–¥** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è —Å –±–∏—Ä–∂–∏
2. **–ù–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –±–æ—Ç–∞** - —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–∏—Ä–∂–∏ OKX
3. **–ù–µ –æ—à–∏–±–∫–∞** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏—Ä–∂–µ–π
4. **–ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ < 1%

### –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–ù–∏—á–µ–≥–æ** - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–∏—Ä–∂–∏
2. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏** - —á—Ç–æ–±—ã –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –±—ã–ª–æ –º–µ–Ω–µ–µ –∑–∞–º–µ—Ç–Ω—ã–º
3. **–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã, –∫—Ä–∞—Ç–Ω—ã–µ —à–∞–≥—É –ª–æ—Ç–∞

---

## üîç –ï–°–õ–ò –•–û–¢–ò–¢–ï –£–ë–†–ê–¢–¨ –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï

–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å `WARNING` –Ω–∞ `DEBUG`:

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–°—Ç—Ä–æ–∫–∞:** ~4238

```python
# –ë—ã–ª–æ:
logger.warning(...)

# –°—Ç–∞–ª–æ:
logger.debug(...)  # –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è
```

–ù–æ —ç—Ç–æ **–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–∏.

---

**–ò—Ç–æ–≥:** –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–∏—Ä–∂–∏ OKX, –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ –∏ –Ω–µ –æ—à–∏–±–∫–∞! ‚úÖ


