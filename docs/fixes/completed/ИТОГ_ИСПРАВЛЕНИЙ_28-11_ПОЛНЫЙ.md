# ‚úÖ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢: –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´

**–î–∞—Ç–∞:** 2025-11-28  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### TODO #1: ‚úÖ –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `entry_price` –∏–∑ —É—Å–ª–æ–≤–∏—è

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/websocket_coordinator.py:273-276`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `"entry_price" in self.active_positions_ref.get(symbol, {})`
- –¢–µ–ø–µ—Ä—å `update_trailing_stop_loss()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –≤ `active_positions_ref`
- –õ–æ–≥–∏–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è `entry_price` –≤ `update_trailing_stop_loss()` —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ TSL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π, –¥–∞–∂–µ –±–µ–∑ `entry_price`

---

### TODO #2: ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π emergency close

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:897-938`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ (–º–∏–Ω–∏–º—É–º 30 —Å–µ–∫—É–Ω–¥)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–±—ã—Ç–∫–∞ –æ—Ç –º–∞—Ä–∂–∏ (–º–∏–Ω–∏–º—É–º 2%)
- Emergency close –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–ª—è –ø–æ–∑–∏—Ü–∏–π, –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ–Ω–µ–µ 30 —Å–µ–∫—É–Ω–¥ –Ω–∞–∑–∞–¥
- Emergency close –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–ª—è –ø–æ–∑–∏—Ü–∏–π —Å —É–±—ã—Ç–∫–æ–º –º–µ–Ω–µ–µ 2% –æ—Ç –º–∞—Ä–∂–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä–∂–∏

---

### TODO #3: ‚úÖ –°–¥–µ–ª–∞—Ç—å loss_cut –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–µ–µ MIN_HOLDING

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py:501-635`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ loss_cut –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –ü–ï–†–ï–î –ø—Ä–æ–≤–µ—Ä–∫–æ–π MIN_HOLDING
- Loss_cut –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π 5 —Å–µ–∫—É–Ω–¥
- MIN_HOLDING –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –º–∞–ª—ã–µ —É–±—ã—Ç–∫–∏, –Ω–æ –Ω–µ –±–æ–ª—å—à–∏–µ (>= loss_cut)

**–õ–æ–≥–∏–∫–∞:**
1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π loss_cut (2x) - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1 (–ø–æ—Å–ª–µ 5 —Å–µ–∫)
2. –û–±—ã—á–Ω—ã–π loss_cut - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2 (–ø–æ—Å–ª–µ 5 —Å–µ–∫, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç MIN_HOLDING)
3. MIN_HOLDING - –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –º–∞–ª—ã–µ —É–±—ã—Ç–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ —Å —É–±—ã—Ç–∫–æ–º >= loss_cut –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç MIN_HOLDING

---

### TODO #4: ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É loss_cut –≤ position_manager

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:1394-1462`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ loss_cut –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –ë–ï–ó TSL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ `_check_tp_only()` –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (loss_cut_percent, leverage)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: 5 —Å–µ–∫—É–Ω–¥

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Loss_cut –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ TSL –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

---

### TODO #5: ‚úÖ –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É entry_price == 0

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/trailing_sl_coordinator.py:425-436`

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ `entry_price == 0`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
- –£—Ç–æ—á–Ω–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ loss_cut –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω –≤ position_manager

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### TODO #6: ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ loss_cut –ø—Ä–æ–≤–µ—Ä–æ–∫ –µ—Å—Ç—å –≤ `trailing_stop_loss.py`
- Debug logger –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö –∏ –ø—Ä–∏—á–∏–Ω–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ loss_cut

---

## üì¶ –î–û–†–ê–ë–û–¢–ö–ê –ë–ê–¢–ù–ò–ö–ê –î–õ–Ø –ê–†–•–ò–í–ê–¶–ò–ò

**–§–∞–π–ª:** `clean_logs.bat`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ZIP –∞—Ä—Ö–∏–≤–∞ –∏–∑ –ø–∞–ø–∫–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –∞—Ä—Ö–∏–≤–∞
3. ‚úÖ –û–ø—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–∏ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ZIP
4. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–§—É–Ω–∫—Ü–∏–∏:**
- –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É –∞—Ä—Ö–∏–≤–∞ —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º: `logs_YYYY-MM-DD_HH-MM-SS`
- –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç –≤—Å–µ –ª–æ–≥–∏, CSV, JSON, ZIP —Ñ–∞–π–ª—ã –≤ –∞—Ä—Ö–∏–≤
- –°–æ–∑–¥–∞–µ—Ç ZIP –∞—Ä—Ö–∏–≤: `logs_YYYY-MM-DD_HH-MM-SS.zip`
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–¥–∞–ª–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—É—é –ø–∞–ø–∫—É –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è ZIP

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è –ª–æ–≥–æ–≤ —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º ZIP —Ñ–∞–π–ª–∞

---

## üîç –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞:
‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –≤–æ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. ‚úÖ `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`
2. ‚úÖ `src/strategies/scalping/futures/position_manager.py`
3. ‚úÖ `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`
4. ‚úÖ `src/strategies/scalping/futures/coordinators/trailing_sl_coordinator.py`
5. ‚úÖ `clean_logs.bat`

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **–ü–æ–∑–∏—Ü–∏–∏ —Å —É–±—ã—Ç–∫–æ–º >= loss_cut (4%) –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥**
   - –ù–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç MIN_HOLDING (35 –º–∏–Ω—É—Ç)
   - –ü—Ä–∏–º–µ—Ä: XRP-USDT —Å -6.17% –¥–æ–ª–∂–µ–Ω –±—ã–ª –∑–∞–∫—Ä—ã—Ç—å—Å—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫

2. ‚úÖ **–ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è**
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π (30 —Å–µ–∫ –º–∏–Ω–∏–º—É–º)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –º–∞–ª—ã—Ö —É–±—ã—Ç–∫–æ–≤ (< 2% –æ—Ç –º–∞—Ä–∂–∏)

3. ‚úÖ **TSL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π**
   - –î–∞–∂–µ –±–µ–∑ `entry_price` (–±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
   - Loss_cut –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞

4. ‚úÖ **Loss_cut —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç TSL**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `position_manager` –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ TSL
   - –î–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è:

1. ‚úÖ –ü–æ–∑–∏—Ü–∏—è —Å —É–±—ã—Ç–∫–æ–º -6% –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 5-10 —Å–µ–∫—É–Ω–¥ (–Ω–µ —á–µ—Ä–µ–∑ 10 —á–∞—Å–æ–≤!)
2. ‚úÖ –ü–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è (–∑–∞—â–∏—Ç–∞ 30 —Å–µ–∫)
3. ‚úÖ Loss_cut —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç MIN_HOLDING
4. ‚úÖ –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ loss_cut (–¥–∞–∂–µ –±–µ–∑ TSL)

---

**–°–¢–ê–¢–£–°:** ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´

**–ì–û–¢–û–í–ù–û–°–¢–¨:** ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

---

**–í–ù–ò–ú–ê–ù–ò–ï:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –±–æ—Ç–∞ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –±–∞–ª–∞–Ω—Å–µ –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω—ã–º –∑–∞–ø—É—Å–∫–æ–º!

