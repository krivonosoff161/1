# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –§–ò–õ–¨–¢–†–ê–¶–ò–ò –°–í–ï–ß–ï–ô

**–î–∞—Ç–∞:** 31.12.2025

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê

–ü–æ –ª–æ–≥–∞–º –≤–∏–¥–Ω–æ:
- **–ò—â–µ–º —Å–≤–µ—á–∏ –¥–ª—è:** `11:42:28 - 11:57:28` (timestamp `1767094948000 - 1767095848000`)
- **API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–µ—á–∏:** `11:42:00, 11:41:00, 11:40:00` (timestamp `1767094920000, 1767094860000...`)

**–ü—Ä–æ–±–ª–µ–º–∞:** OKX –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–µ—á–∏ —Å **timestamp –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã**, –∞ –Ω–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è. –ù–∞–ø—Ä–∏–º–µ—Ä:
- –°–≤–µ—á–∞ –∑–∞ `11:42:00` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥ `11:42:00-11:42:59`
- –ù–æ –º—ã –∏—â–µ–º —Å–≤–µ—á–∏ —Å `11:42:28`, –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ `start_ts <= candle_ts` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

–û–∫—Ä—É–≥–ª—è—Ç—å –≤—Ä–µ–º—è –¥–æ –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

**–ë–´–õ–û:**
```python
start_ts = int(start_time.timestamp() * 1000)
end_ts = int(end_time.timestamp() * 1000)

for candle in candles:
    candle_ts = int(candle[0])
    if start_ts <= candle_ts <= end_ts:  # ‚ùå –°–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ
        filtered_candles.append(...)
```

**–°–¢–ê–õ–û:**
```python
start_ts = int(start_time.timestamp() * 1000)
end_ts = int(end_time.timestamp() * 1000)

# ‚úÖ –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–æ —Å–≤–µ—á–∞–º–∏ OKX)
start_minute_ts = (start_ts // 60000) * 60000  # –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã
end_minute_ts = ((end_ts // 60000) + 1) * 60000  # –î–æ–±–∞–≤–ª—è–µ–º 1 –º–∏–Ω—É—Ç—É –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–π

for candle in candles:
    candle_ts = int(candle[0])
    # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–∫—Ä—É–≥–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    if start_minute_ts <= candle_ts <= end_minute_ts:
        filtered_candles.append(...)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- OKX –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≤–µ—á–∏ —Å timestamp –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `11:42:00`)
- –°–≤–µ—á–∞ –∑–∞ `11:42:00` –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ `11:42:00-11:42:59`
- –ü–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –æ–∫—Ä—É–≥–ª—è—Ç—å `start_time` –¥–æ –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã
- –î–ª—è `end_time` –¥–æ–±–∞–≤–ª—è–µ–º 1 –º–∏–Ω—É—Ç—É, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é —Å–≤–µ—á—É

---

## üìã –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ `start_ts` –¥–æ –Ω–∞—á–∞–ª–∞ –º–∏–Ω—É—Ç—ã
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ `end_ts` –¥–æ –Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—â–µ–π –º–∏–Ω—É—Ç—ã (+1 –º–∏–Ω—É—Ç–∞)
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–∫—Ä—É–≥–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–≤–µ—á–µ–π
4. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é


