# –í–ê–õ–ò–î–ê–¶–ò–Ø –ò –û–ö–†–£–ì–õ–ï–ù–ò–ï LEVERAGE –ü–û –ü–†–ê–í–ò–õ–ê–ú –ë–ò–†–ñ–ò

**–î–∞—Ç–∞:** 2025-12-21  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ

---

## 1. –ü–†–û–ë–õ–ï–ú–ê: –†–ê–ó–ù–´–ï LEVERAGE –î–õ–Ø –†–ê–ó–ù–´–• –°–ò–ú–í–û–õ–û–í

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç OKX

**–ù–∞ OKX —Ä–∞–∑–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage:**
- BTC-USDT: –º–æ–∂–µ—Ç –±—ã—Ç—å 1, 2, 3, 5, 10, 20, 50, 75, 100, 125
- ETH-USDT: –º–æ–∂–µ—Ç –±—ã—Ç—å 1, 2, 3, 5, 10, 20, 50, 75, 100, 125
- SOL-USDT: –º–æ–∂–µ—Ç –±—ã—Ç—å 3, 5, 7, 10, 20, 30, 50, 75, 100
- DOGE-USDT: –º–æ–∂–µ—Ç –±—ã—Ç—å 1, 2, 3, 5, 10, 20, 50, 75, 100
- XRP-USDT: –º–æ–∂–µ—Ç –±—ã—Ç—å 1, 3, 5, 10, 20, 50, 75, 100, 125

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ë–æ—Ç –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å leverage=7x –¥–ª—è SOL (–¥–æ—Å—Ç—É–ø–Ω–æ)
- –ù–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞—Ç—å leverage=7x –¥–ª—è BTC ‚Üí –±–∏—Ä–∂–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è BTC)
- –ù—É–∂–Ω–æ –æ–∫—Ä—É–≥–ª–∏—Ç—å –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5x –∏–ª–∏ 10x)

---

## 2. –†–ï–®–ï–ù–ò–ï: –ü–û–õ–£–ß–ï–ù–ò–ï –î–û–°–¢–£–ü–ù–´–• LEVERAGE –° –ë–ò–†–ñ–ò

### API OKX –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ

**Endpoint:** `GET /api/v5/public/instruments?instType=SWAP`

**–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:**
- `maxLever`: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π leverage –¥–ª—è —Å–∏–º–≤–æ–ª–∞
- –ù–æ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage!

**–ü—Ä–æ–±–ª–µ–º–∞:** OKX API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage, —Ç–æ–ª—å–∫–æ –º–∞–∫—Å–∏–º—É–º.

### –†–µ—à–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage

**–í–∞—Ä–∏–∞–Ω—Ç 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è OKX (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

OKX –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä leverage:
- –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–∏–º–≤–æ–ª–æ–≤: `[1, 2, 3, 5, 10, 20, 50, 75, 100, 125]`
- –ù–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–º–≤–æ–ª—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**–í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–æ–ø—ã—Ç–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏**

–ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å leverage –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—à–∏–±–∫—É, –Ω–æ —ç—Ç–æ –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.

**–í–∞—Ä–∏–∞–Ω—Ç 3: –•–∞—Ä–¥–∫–æ–¥ –ø–æ —Å–∏–º–≤–æ–ª–∞–º (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

–•—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –≤ –∫–æ–¥–µ - –Ω–µ –≥–∏–±–∫–æ.

### ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–û–ï –†–ï–®–ï–ù–ò–ï: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

1. **–ü–æ–ª—É—á–∞–µ–º maxLever —Å –±–∏—Ä–∂–∏** (–∏–∑ `/api/v5/public/instruments`)
2. **–ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä leverage** –¥–æ maxLever
3. **–û–∫—Ä—É–≥–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π leverage** –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ
4. **–õ–æ–≥–∏—Ä—É–µ–º –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## 3. –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø: –ú–ï–¢–û–î–´ –î–õ–Ø –í–ê–õ–ò–î–ê–¶–ò–ò LEVERAGE

### 3.1. –ü–æ–ª—É—á–µ–Ω–∏–µ maxLever —Å –±–∏—Ä–∂–∏

**–î–æ–±–∞–≤–∏—Ç—å –≤ `OKXFuturesClient`:**
```python
async def get_instrument_leverage_info(self, symbol: str) -> Dict[str, Any]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ leverage –¥–ª—è —Å–∏–º–≤–æ–ª–∞.
    
    Returns:
        {
            "max_leverage": int,  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π leverage
            "available_leverages": List[int],  # –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage
        }
    """
    try:
        inst_id = f"{symbol}-SWAP"
        instruments = await self.get_instrument_info()
        
        for inst in instruments.get("data", []):
            if inst.get("instId") == inst_id:
                max_lever_str = inst.get("maxLever", "125")  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 125
                try:
                    max_leverage = int(max_lever_str)
                except (ValueError, TypeError):
                    max_leverage = 125  # Fallback
                
                # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage –¥–æ –º–∞–∫—Å–∏–º—É–º–∞
                available_leverages = self._generate_available_leverages(max_leverage)
                
                logger.info(
                    f"üìä Leverage info –¥–ª—è {symbol}: max={max_leverage}x, "
                    f"–¥–æ—Å—Ç—É–ø–Ω–æ: {available_leverages}"
                )
                
                return {
                    "max_leverage": max_leverage,
                    "available_leverages": available_leverages,
                }
    except Exception as e:
        logger.warning(
            f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å leverage info –¥–ª—è {symbol}: {e}"
        )
    
    # Fallback: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    return {
        "max_leverage": 125,
        "available_leverages": [1, 2, 3, 5, 10, 20, 50, 75, 100, 125],
    }

def _generate_available_leverages(self, max_leverage: int) -> List[int]:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage –¥–æ –º–∞–∫—Å–∏–º—É–º–∞.
    
    –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è OKX: [1, 2, 3, 5, 10, 20, 50, 75, 100, 125]
    """
    standard_leverages = [1, 2, 3, 5, 10, 20, 50, 75, 100, 125]
    
    # –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ, —á—Ç–æ <= max_leverage
    available = [lev for lev in standard_leverages if lev <= max_leverage]
    
    # –ï—Å–ª–∏ max_leverage –Ω–µ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º —Å–ø–∏—Å–∫–µ, –¥–æ–±–∞–≤–ª—è–µ–º –µ–≥–æ
    if max_leverage not in available and max_leverage > 0:
        available.append(max_leverage)
        available.sort()
    
    return available
```

### 3.2. –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ leverage –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ

**–î–æ–±–∞–≤–∏—Ç—å –≤ `OKXFuturesClient`:**
```python
async def round_leverage_to_available(
    self, symbol: str, desired_leverage: int
) -> int:
    """
    –û–∫—Ä—É–≥–ª—è–µ—Ç leverage –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –¥–ª—è —Å–∏–º–≤–æ–ª–∞.
    
    Args:
        symbol: –¢–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª
        desired_leverage: –ñ–µ–ª–∞–µ–º—ã–π leverage
    
    Returns:
        –û–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π leverage (–±–ª–∏–∂–∞–π—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
    """
    # –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage
    leverage_info = await self.get_instrument_leverage_info(symbol)
    available_leverages = leverage_info.get("available_leverages", [])
    max_leverage = leverage_info.get("max_leverage", 125)
    
    # –ï—Å–ª–∏ –∂–µ–ª–∞–µ–º—ã–π leverage –±–æ–ª—å—à–µ –º–∞–∫—Å–∏–º—É–º–∞ - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º
    if desired_leverage > max_leverage:
        logger.warning(
            f"‚ö†Ô∏è Leverage {desired_leverage}x –ø—Ä–µ–≤—ã—à–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º {max_leverage}x –¥–ª—è {symbol}, "
            f"–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ {max_leverage}x"
        )
        return max_leverage
    
    # –ï—Å–ª–∏ –∂–µ–ª–∞–µ–º—ã–π leverage –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∏–Ω–∏–º—É–º
    if desired_leverage < 1:
        logger.warning(
            f"‚ö†Ô∏è Leverage {desired_leverage}x –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ 1x –¥–ª—è {symbol}, "
            f"–∏—Å–ø–æ–ª—å–∑—É–µ–º 1x"
        )
        return 1
    
    # –ï—Å–ª–∏ –∂–µ–ª–∞–µ–º—ã–π leverage —É–∂–µ –≤ —Å–ø–∏—Å–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–∞–∫ –µ—Å—Ç—å
    if desired_leverage in available_leverages:
        logger.debug(
            f"‚úÖ Leverage {desired_leverage}x –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è {symbol}, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –µ—Å—Ç—å"
        )
        return desired_leverage
    
    # –ù–∞—Ö–æ–¥–∏–º –±–ª–∏–∂–∞–π—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π leverage
    closest = min(
        available_leverages,
        key=lambda x: abs(x - desired_leverage)
    )
    
    logger.info(
        f"üìä Leverage –æ–∫—Ä—É–≥–ª–µ–Ω –¥–ª—è {symbol}: {desired_leverage}x ‚Üí {closest}x "
        f"(–¥–æ—Å—Ç—É–ø–Ω—ã–µ: {available_leverages})"
    )
    
    return closest
```

### 3.3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AdaptiveLeverage

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `AdaptiveLeverage.calculate_leverage()`:**
```python
async def calculate_leverage(
    self,
    signal: Dict[str, Any],
    regime: Optional[str] = None,
    volatility: Optional[float] = None,
    client=None,  # ‚úÖ –ù–û–í–û–ï: OKX –∫–ª–∏–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage
) -> int:
    """
    –†–∞—Å—á–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ª–µ–≤–µ—Ä–∏–¥–∂–∞ —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –¥–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
    """
    try:
        symbol = signal.get("symbol", "")
        
        # ... (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞) ...
        leverage = self.leverage_map.get(category, 5)
        leverage = max(self.min_leverage, min(self.max_leverage, leverage))
        
        # ‚úÖ –ù–û–í–û–ï: –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage –Ω–∞ –±–∏—Ä–∂–µ
        if client and symbol:
            try:
                rounded_leverage = await client.round_leverage_to_available(
                    symbol, leverage
                )
                
                if rounded_leverage != leverage:
                    logger.info(
                        f"üìä Leverage –æ–∫—Ä—É–≥–ª–µ–Ω –¥–ª—è {symbol}: "
                        f"—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π={leverage}x ‚Üí –¥–æ—Å—Ç—É–ø–Ω—ã–π={rounded_leverage}x"
                    )
                
                leverage = rounded_leverage
            except Exception as e:
                logger.warning(
                    f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ–∫—Ä—É–≥–ª–∏—Ç—å leverage –¥–ª—è {symbol}: {e}, "
                    f"–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π {leverage}x"
                )
        
        # ‚úÖ –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï
        logger.info(
            f"üìä [ADAPTIVE_LEVERAGE] {symbol}: "
            f"strength={signal_strength:.3f}, "
            f"regime={regime or 'N/A'}, "
            f"volatility={volatility*100 if volatility else 'N/A':.2f}%, "
            f"regime_mult={regime_multiplier:.2f}, "
            f"vol_mult={volatility_multiplier:.2f}, "
            f"adjusted_strength={adjusted_strength:.3f}, "
            f"category={category}, "
            f"leverage={leverage}x"
        )
        
        return leverage
        
    except Exception as e:
        logger.error(f"‚ùå –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ª–µ–≤–µ—Ä–∏–¥–∂–∞: {e}", exc_info=True)
        return 5  # Fallback
```

### 3.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SignalCoordinator

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `SignalCoordinator.execute_signal_from_price()`:**
```python
# –ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ leverage —á–µ—Ä–µ–∑ AdaptiveLeverage:
if self.adaptive_leverage:
    leverage_config = self.adaptive_leverage.calculate_leverage(
        signal, regime, volatility, client=self.client  # ‚úÖ –ù–û–í–û–ï: –ø–µ—Ä–µ–¥–∞–µ–º client
    )
    
    # ‚úÖ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê: –û–∫—Ä—É–≥–ª—è–µ–º –µ—â–µ —Ä–∞–∑ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
    try:
        leverage_config = await self.client.round_leverage_to_available(
            symbol, leverage_config
        )
        logger.info(
            f"‚úÖ [LEVERAGE_FINAL] {symbol}: –§–∏–Ω–∞–ª—å–Ω—ã–π leverage={leverage_config}x "
            f"(–ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ –æ–∫—Ä—É–≥–ª–µ–Ω –¥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –Ω–∞ –±–∏—Ä–∂–µ)"
        )
    except Exception as e:
        logger.warning(
            f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å leverage –¥–ª—è {symbol}: {e}, "
            f"–∏—Å–ø–æ–ª—å–∑—É–µ–º {leverage_config}x"
        )
```

---

## 4. –î–ï–¢–ê–õ–¨–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### 4.1. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ AdaptiveLeverage

**–£—Ä–æ–≤–µ–Ω—å INFO –¥–ª—è –≤—Å–µ—Ö –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:**
```python
logger.info(
    f"üìä [ADAPTIVE_LEVERAGE] {symbol}: "
    f"–†–ê–°–ß–ï–¢ LEVERAGE | "
    f"strength={signal_strength:.3f} ‚Üí category={category} ‚Üí leverage={leverage}x"
)

logger.info(
    f"üìä [ADAPTIVE_LEVERAGE] {symbol}: "
    f"–ö–û–†–†–ï–ö–¢–ò–†–û–í–ö–ò | "
    f"regime={regime} (mult={regime_multiplier:.2f}), "
    f"volatility={volatility*100 if volatility else 'N/A':.2f}% (mult={volatility_multiplier:.2f}), "
    f"adjusted_strength={adjusted_strength:.3f}"
)

logger.info(
    f"üìä [ADAPTIVE_LEVERAGE] {symbol}: "
    f"–û–ö–†–£–ì–õ–ï–ù–ò–ï | "
    f"—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π={calculated_leverage}x ‚Üí –¥–æ—Å—Ç—É–ø–Ω—ã–π={rounded_leverage}x "
    f"(–¥–æ—Å—Ç—É–ø–Ω—ã–µ: {available_leverages})"
)
```

### 4.2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ PositionScalingManager

**–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫ –ø–æ–∑–∏—Ü–∏–∏:**
```python
logger.info(
    f"üìä [POSITION_SCALING] {symbol}: "
    f"LEVERAGE –ü–û–ó–ò–¶–ò–ò | "
    f"—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π leverage={existing_leverage}x, "
    f"leverage —Å–∏–≥–Ω–∞–ª–∞={signal_leverage}x, "
    f"–∏—Å–ø–æ–ª—å–∑—É–µ–º leverage={existing_leverage}x –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è"
)

logger.info(
    f"üìä [POSITION_SCALING] {symbol}: "
    f"–†–ê–°–ß–ï–¢ –ú–ê–†–ñ–ò | "
    f"—Ä–∞–∑–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è=${addition_size_usd:.2f}, "
    f"leverage={existing_leverage}x, "
    f"–º–∞—Ä–∂–∞=${addition_margin:.2f} "
    f"(—Ñ–æ—Ä–º—É–ª–∞: {addition_size_usd:.2f} / {existing_leverage} = {addition_margin:.2f})"
)
```

### 4.3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ OKXFuturesClient

**–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ leverage info:**
```python
logger.info(
    f"üìä [LEVERAGE_INFO] {symbol}: "
    f"–ü–æ–ª—É—á–µ–Ω–æ —Å –±–∏—Ä–∂–∏ | "
    f"max_leverage={max_leverage}x, "
    f"–¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage={available_leverages}"
)

logger.info(
    f"üìä [LEVERAGE_ROUND] {symbol}: "
    f"–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ | "
    f"–∂–µ–ª–∞–µ–º—ã–π={desired_leverage}x ‚Üí "
    f"–æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π={rounded_leverage}x "
    f"(–±–ª–∏–∂–∞–π—à–∏–π –∏–∑ {available_leverages})"
)
```

### 4.4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ leverage

**–í `set_leverage()`:**
```python
logger.info(
    f"üìä [SET_LEVERAGE] {symbol}: "
    f"–£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage | "
    f"leverage={leverage}x, posSide={pos_side or 'N/A'}, "
    f"mgnMode=isolated"
)

logger.info(
    f"‚úÖ [SET_LEVERAGE] {symbol}: "
    f"Leverage —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ | "
    f"leverage={leverage}x"
)
```

---

## 5. –û–ë–ù–û–í–õ–ï–ù–ò–ï get_instrument_details

**–†–∞—Å—à–∏—Ä–∏—Ç—å –º–µ—Ç–æ–¥ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è leverage info:**
```python
async def get_instrument_details(self, symbol: str) -> dict:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤–∫–ª—é—á–∞—è leverage info.
    
    Returns:
        {
            "ctVal": float,
            "lotSz": float,
            "minSz": float,
            "max_leverage": int,  # ‚úÖ –ù–û–í–û–ï
            "available_leverages": List[int],  # ‚úÖ –ù–û–í–û–ï
        }
    """
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è ctVal, lotSz, minSz
    # ...
    
    # ‚úÖ –ù–û–í–û–ï: –ü–æ–ª—É—á–∞–µ–º leverage info
    leverage_info = await self.get_instrument_leverage_info(symbol)
    
    details.update({
        "max_leverage": leverage_info.get("max_leverage", 125),
        "available_leverages": leverage_info.get("available_leverages", []),
    })
    
    logger.debug(
        f"üìã –î–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ {symbol}: "
        f"ctVal={details['ctVal']}, lotSz={details['lotSz']}, minSz={details['minSz']}, "
        f"max_leverage={details['max_leverage']}x, "
        f"available_leverages={details['available_leverages']}"
    )
    
    return details
```

---

## 6. –ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê –†–ê–ë–û–¢–´ –° LEVERAGE

### –î–ª—è –ø–µ—Ä–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏:

1. **–†–∞—Å—á–µ—Ç leverage** ‚Üí `AdaptiveLeverage.calculate_leverage()`
   - –ë–∞–∑–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ strength
   - –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ regime –∏ volatility
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –Ω–∞–ø—Ä–∏–º–µ—Ä, 7x

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö leverage** ‚Üí `client.get_instrument_leverage_info(symbol)`
   - –ó–∞–ø—Ä–æ—Å –∫ –±–∏—Ä–∂–µ: maxLever
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö: [1, 2, 3, 5, 10, 20, ...]

3. **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ** ‚Üí `client.round_leverage_to_available(symbol, 7)`
   - 7x ‚Üí –±–ª–∏–∂–∞–π—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π: 5x –∏–ª–∏ 10x
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "7x ‚Üí 5x (–±–ª–∏–∂–∞–π—à–∏–π)"

4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ –±–∏—Ä–∂–µ** ‚Üí `client.set_leverage(symbol, 5)`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage 5x –¥–ª—è SOL-USDT"

5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö** ‚Üí `margin = size_usd / 5`

### –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫ –ø–æ–∑–∏—Ü–∏–∏:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ leverage –ø–æ–∑–∏—Ü–∏–∏** ‚Üí `existing_position.get("lever")`
   - –ù–∞–ø—Ä–∏–º–µ—Ä: 5x

2. **–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤ —Å–∏–≥–Ω–∞–ª–µ** ‚Üí `signal["leverage"] = 5`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "–ò—Å–ø–æ–ª—å–∑—É–µ–º leverage –ø–æ–∑–∏—Ü–∏–∏ 5x –≤–º–µ—Å—Ç–æ 7x –∏–∑ —Å–∏–≥–Ω–∞–ª–∞"

3. **–†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏** ‚Üí `addition_margin = addition_size_usd / 5`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: "–ú–∞—Ä–∂–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è: $100 / 5 = $20"

---

## 7. –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –†–ï–®–ï–ù–ò–Ø

1. ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∏—Ä–∂–µ–π** - –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage
2. ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –≤–∏–¥–Ω–æ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–±–æ—Ä–∞ leverage
3. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å
4. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - leverage info –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. ‚úÖ **Fallback** - –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å –±–∏—Ä–∂–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

---

## 8. –ü–†–ò–ú–ï–†–´ –õ–û–ì–û–í

### –ü—Ä–∏–º–µ—Ä 1: –†–∞—Å—á–µ—Ç leverage –¥–ª—è SOL-USDT

```
INFO | [ADAPTIVE_LEVERAGE] SOL-USDT: –†–ê–°–ß–ï–¢ LEVERAGE | strength=0.850 ‚Üí category=strong ‚Üí leverage=20x
INFO | [ADAPTIVE_LEVERAGE] SOL-USDT: –ö–û–†–†–ï–ö–¢–ò–†–û–í–ö–ò | regime=trending (mult=1.20), volatility=4.50% (mult=1.00), adjusted_strength=1.020
INFO | [LEVERAGE_INFO] SOL-USDT: –ü–æ–ª—É—á–µ–Ω–æ —Å –±–∏—Ä–∂–∏ | max_leverage=100x, –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage=[1, 2, 3, 5, 10, 20, 50, 75, 100]
INFO | [LEVERAGE_ROUND] SOL-USDT: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ | –∂–µ–ª–∞–µ–º—ã–π=20x ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π=20x (–¥–æ—Å—Ç—É–ø–µ–Ω)
INFO | [SET_LEVERAGE] SOL-USDT: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage | leverage=20x, posSide=long, mgnMode=isolated
INFO | ‚úÖ [SET_LEVERAGE] SOL-USDT: Leverage —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ | leverage=20x
```

### –ü—Ä–∏–º–µ—Ä 2: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ leverage –¥–ª—è BTC-USDT

```
INFO | [ADAPTIVE_LEVERAGE] BTC-USDT: –†–ê–°–ß–ï–¢ LEVERAGE | strength=0.550 ‚Üí category=medium ‚Üí leverage=10x
INFO | [ADAPTIVE_LEVERAGE] BTC-USDT: –ö–û–†–†–ï–ö–¢–ò–†–û–í–ö–ò | regime=choppy (mult=0.80), volatility=0.50% (mult=1.30), adjusted_strength=0.572
INFO | [LEVERAGE_INFO] BTC-USDT: –ü–æ–ª—É—á–µ–Ω–æ —Å –±–∏—Ä–∂–∏ | max_leverage=125x, –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage=[1, 2, 3, 5, 10, 20, 50, 75, 100, 125]
INFO | [LEVERAGE_ROUND] BTC-USDT: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ | –∂–µ–ª–∞–µ–º—ã–π=10x ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π=10x (–¥–æ—Å—Ç—É–ø–µ–Ω)
INFO | [SET_LEVERAGE] BTC-USDT: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage | leverage=10x, posSide=long, mgnMode=isolated
INFO | ‚úÖ [SET_LEVERAGE] BTC-USDT: Leverage —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ | leverage=10x
```

### –ü—Ä–∏–º–µ—Ä 3: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ leverage

```
INFO | [ADAPTIVE_LEVERAGE] DOGE-USDT: –†–ê–°–ß–ï–¢ LEVERAGE | strength=0.400 ‚Üí category=weak ‚Üí leverage=5x
INFO | [ADAPTIVE_LEVERAGE] DOGE-USDT: –ö–û–†–†–ï–ö–¢–ò–†–û–í–ö–ò | regime=ranging (mult=1.00), volatility=2.50% (mult=1.00), adjusted_strength=0.400
INFO | [LEVERAGE_INFO] DOGE-USDT: –ü–æ–ª—É—á–µ–Ω–æ —Å –±–∏—Ä–∂–∏ | max_leverage=100x, –¥–æ—Å—Ç—É–ø–Ω—ã–µ leverage=[1, 2, 3, 5, 10, 20, 50, 75, 100]
INFO | [LEVERAGE_ROUND] DOGE-USDT: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ | –∂–µ–ª–∞–µ–º—ã–π=5x ‚Üí –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–π=5x (–¥–æ—Å—Ç—É–ø–µ–Ω)
INFO | [SET_LEVERAGE] DOGE-USDT: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage | leverage=5x, posSide=long, mgnMode=isolated
INFO | ‚úÖ [SET_LEVERAGE] DOGE-USDT: Leverage —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —É—Å–ø–µ—à–Ω–æ | leverage=5x
```

### –ü—Ä–∏–º–µ—Ä 4: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ leverage –ø–æ–∑–∏—Ü–∏–∏)

```
INFO | [POSITION_SCALING] SOL-USDT: LEVERAGE –ü–û–ó–ò–¶–ò–ò | —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π leverage=20x, leverage —Å–∏–≥–Ω–∞–ª–∞=30x, –∏—Å–ø–æ–ª—å–∑—É–µ–º leverage=20x –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
INFO | [POSITION_SCALING] SOL-USDT: –†–ê–°–ß–ï–¢ –ú–ê–†–ñ–ò | —Ä–∞–∑–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–∏—è=$350.00, leverage=20x, –º–∞—Ä–∂–∞=$17.50 (—Ñ–æ—Ä–º—É–ª–∞: 350.00 / 20 = 17.50)
INFO | [POSITION_SCALING] SOL-USDT: –ü–†–û–í–ï–†–ö–ê –ú–ê–†–ñ–ò | –¥–æ—Å—Ç—É–ø–Ω–æ=$500.00, —Ç—Ä–µ–±—É–µ—Ç—Å—è=$17.50, —Ä–µ–∑–µ—Ä–≤=96.5%
INFO | ‚úÖ [POSITION_SCALING] SOL-USDT: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –†–ê–ó–†–ï–®–ï–ù–û | —Ä–∞–∑–º–µ—Ä=$350.00, –º–∞—Ä–∂–∞=$17.50, leverage=20x
```

---

## 9. –ò–¢–û–ì–û–í–´–ô –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –≤ OKXFuturesClient

1. ‚úÖ `get_instrument_leverage_info()` - –ø–æ–ª—É—á–µ–Ω–∏–µ maxLever –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö
2. ‚úÖ `round_leverage_to_available()` - –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `get_instrument_details()` - –≤–∫–ª—é—á–µ–Ω–∏–µ leverage info
4. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ leverage info –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ AdaptiveLeverage

1. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ `client` –≤ `calculate_leverage()`
2. ‚úÖ –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ leverage –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞
3. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SignalCoordinator

1. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ `client` –≤ `calculate_leverage()`
2. ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ leverage –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ leverage

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ PositionScalingManager

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ leverage –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
2. ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä–∂–∏
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–π –º–∞—Ä–∂–∏ —Å —É—á–µ—Ç–æ–º leverage

---

## –í–û–ü–†–û–°–´ –î–õ–Ø –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø

1. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ? (–≤—Å–µ —ç—Ç–∞–ø—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è)
2. ‚úÖ **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ:** –ü–æ–Ω—è—Ç–Ω–∞ –ª–æ–≥–∏–∫–∞? (–±–ª–∏–∂–∞–π—à–∏–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
3. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ù—É–∂–Ω–æ –ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å leverage info? (–î–ê - –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)

