# ‚úÖ –°–ò–°–¢–ï–ú–ê –°–í–ï–ß–ï–ô –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê

**–î–∞—Ç–∞:** 26.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

---

## üéØ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–ê–Ø –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨

### **1. ‚úÖ CandleBuffer - –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä –¥–ª—è —Å–≤–µ—á–µ–π**

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/candle_buffer.py`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –•—Ä–∞–Ω–∏—Ç N —Å–≤–µ—á–µ–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 200 –¥–ª—è 1m)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ —Å–≤–µ—á–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö (FIFO)
- Thread-safe —á–µ—Ä–µ–∑ asyncio.Lock
- –ú–µ—Ç–æ–¥—ã: `add_candle()`, `update_last_candle()`, `get_candles()`, `get_last_candle()`

---

### **2. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω DataRegistry**

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/data_registry.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –•—Ä–∞–Ω–∏–ª–∏—â–µ CandleBuffer –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –∏ —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞
- –ú–µ—Ç–æ–¥—ã: `add_candle()`, `update_last_candle()`, `get_candles()`, `get_last_candle()`, `initialize_candles()`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É—Ñ–µ—Ä–∞–º–∏

---

### **3. ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω WebSocketCoordinator**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–Ω—É—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- –ú–µ—Ç–æ–¥ `_update_candle_from_ticker()` –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤–µ—á–µ–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–≤–µ—á–∏ (—Å–º–µ–Ω–∞ –º–∏–Ω—É—Ç—ã)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–≤–µ—á–∏ (–µ—Å–ª–∏ —Ç–∞ –∂–µ –º–∏–Ω—É—Ç–∞) –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π (–µ—Å–ª–∏ –Ω–æ–≤–∞—è –º–∏–Ω—É—Ç–∞)

---

### **4. ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω SignalGenerator**

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`

**–ò–∑–º–µ–Ω–µ–Ω–æ:**
- –ú–µ—Ç–æ–¥ `_get_market_data()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–µ—á–∏ –∏–∑ DataRegistry
- Fallback –∫ API –∑–∞–ø—Ä–æ—Å—É —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –±—É—Ñ–µ—Ä –ø—É—Å—Ç)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ

---

### **5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ**

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –ú–µ—Ç–æ–¥ `_initialize_candle_buffers()` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–≤–µ—á–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç 200 —Å–≤–µ—á–µ–π 1m –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —á–µ—Ä–µ–∑ API
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±—É—Ñ–µ—Ä—ã –≤ DataRegistry

---

## üîß –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### **–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞:**

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 200 —Å–≤–µ—á–µ–π 1m –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ —á–µ—Ä–µ–∑ API
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è CandleBuffer –≤ DataRegistry
   - –ë—É—Ñ–µ—Ä—ã –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

2. **–í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**
   - WebSocket –ø–æ–ª—É—á–∞–µ—Ç —Ç–∏–∫–µ—Ä—ã –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è, –Ω–æ–≤–∞—è –ª–∏ –º–∏–Ω—É—Ç–∞:
     - **–ï—Å–ª–∏ —Ç–∞ –∂–µ –º–∏–Ω—É—Ç–∞** ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–≤–µ—á–∞ (high/low/close/volume)
     - **–ï—Å–ª–∏ –Ω–æ–≤–∞—è –º–∏–Ω—É—Ç–∞** ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–≤–µ—á–∞, —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è
   - –°–≤–µ—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑)

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–µ—á–µ–π:**
   - SignalGenerator –±–µ—Ä–µ—Ç —Å–≤–µ—á–∏ –∏–∑ DataRegistry (–Ω–µ –∏–∑ API)
   - –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–≤–µ—á–∏ –∏–∑ DataRegistry
   - –ù–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê

1. **‚ö° –£—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 10-100 —Ä–∞–∑:**
   - –°–≤–µ—á–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ —á–µ—Ä–µ–∑ API
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã)

2. **üìâ –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API:**
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
   - –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket

3. **üéØ –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
   - –í—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–≤–µ—á–∏ –≤ –ø–∞–º—è—Ç–∏
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–æ–º–µ–Ω—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–≤–µ—á–∏

4. **üõ°Ô∏è –ë–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞:**
   - –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤ –ø–∞–º—è—Ç–∏
   - –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API

---

## üìä –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø

### **–í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç DataRegistry:**

- **SignalGenerator** ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–µ—á–∏ –∏–∑ DataRegistry
- **EntryManager** ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤–µ—á–µ–π –∏–∑ DataRegistry
- **PositionManager** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É –∏–∑ DataRegistry (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket)
- **ExitAnalyzer** ‚Üí –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–µ—á–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- ‚úÖ Thread-safety —á–µ—Ä–µ–∑ asyncio.Lock
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

---

## üéØ –°–¢–ê–¢–£–°: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

–°–∏—Å—Ç–µ–º–∞ —Å–≤–µ—á–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞. –ë–æ—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–≤–µ—á–µ–π –≤–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –Ω–∞ –∫–∞–∂–¥—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª!






