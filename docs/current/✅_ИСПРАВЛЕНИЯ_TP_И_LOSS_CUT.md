# –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø TP –ò LOSS_CUT

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –≤ –ø–æ–∑–∏—Ü–∏—é ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–µ–∂–∏–º –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –≤ `active_positions` –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –±–∏—Ä–∂–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è fallback –Ω–∞ per-symbol TP –≤–º–µ—Å—Ç–æ per-regime TP

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –≤ `active_position.update()` –≤ `orchestrator.py`
- –†–µ–∂–∏–º –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ `regime_managers` –∏–ª–∏ `regime_manager`
- –†–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø–æ–∑–∏—Ü–∏—é –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ `_get_adaptive_tp_percent`

**–ö–æ–¥:**
```python
# src/strategies/scalping/futures/orchestrator.py, —Å—Ç—Ä–æ–∫–∞ 1307-1325
regime = None
if hasattr(self.signal_generator, "regime_managers") and symbol in getattr(...):
    manager = self.signal_generator.regime_managers.get(symbol)
    if manager:
        regime = manager.get_current_regime()
# Fallback –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º
if not regime:
    if hasattr(self.signal_generator, "regime_manager"):
        regime = self.signal_generator.regime_manager.get_current_regime()

active_position.update({
    ...
    "regime": regime,  # ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∂–∏–º
})
```

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ loss_cut –±–µ–∑ TSL ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- ETH-USDT –≤ —É–±—ã—Ç–∫–µ -10.14% –æ—Ç –º–∞—Ä–∂–∏, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–ª—Å—è –ø–æ loss_cut
- Loss Cut –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è —Ç–æ–ª—å–∫–æ –≤ TSL, –∞ TSL –Ω–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ loss_cut –≤ `_check_tp_only` –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ TSL
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –î–û –ø—Ä–æ–≤–µ—Ä–∫–∏ TP
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã loss_cut –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**–ö–æ–¥:**
```python
# src/strategies/scalping/futures/position_manager.py, —Å—Ç—Ä–æ–∫–∞ 808+
# –ü—Ä–æ–≤–µ—Ä—è–µ–º loss_cut –î–û –ø—Ä–æ–≤–µ—Ä–∫–∏ TP –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ TSL
if not tsl:
    # –ü–æ–ª—É—á–∞–µ–º loss_cut –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º PnL% –æ—Ç –º–∞—Ä–∂–∏
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º loss_cut –∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
```

---

## ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **TP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏:**
   - SOL-USDT (ranging): TP=3.5% (–≤–º–µ—Å—Ç–æ 1.9%)
   - BTC-USDT (ranging): TP=5.0% (–≤–º–µ—Å—Ç–æ 2.0%)
   - ETH-USDT (ranging): TP=3.5% (–≤–º–µ—Å—Ç–æ 1.95%)

2. **Loss Cut –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**
   - –ü–æ–∑–∏—Ü–∏–∏ –≤ —É–±—ã—Ç–∫–µ >= -1.5% –æ—Ç –º–∞—Ä–∂–∏ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ TSL

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

### 1. –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é ETH-USDT –≤—Ä—É—á–Ω—É—é ‚ö†Ô∏è
- –£–±—ã—Ç–æ–∫ -10.14% –æ—Ç –º–∞—Ä–∂–∏
- –ü–æ–∑–∏—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–∫—Ä—ã—Ç–∞ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —Ä–µ–∂–∏–º –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- TP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Loss Cut –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û - –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£

