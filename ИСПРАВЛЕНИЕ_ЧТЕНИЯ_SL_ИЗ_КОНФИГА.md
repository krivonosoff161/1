# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á—Ç–µ–Ω–∏—è SL –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

## üîç –ü—Ä–æ–±–ª–µ–º–∞

**–ò–∑ –ª–æ–≥–æ–≤:**
```
SL=0.80%  # ‚ùå –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
SL threshold=-0.85%  # 0.80% + 0.05% spread_buffer
```

**–í –∫–æ–Ω—Ñ–∏–≥–µ:**
```yaml
adaptive_regime:
  ranging:
    sl_percent: 1.0  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- ExitAnalyzer –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `self.scalping_config.by_regime` –≤–º–µ—Å—Ç–æ `self.scalping_config.adaptive_regime`
- –í –∫–æ–Ω—Ñ–∏–≥–µ `sl_percent` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `adaptive_regime.ranging.sl_percent`, –∞ –Ω–µ –≤ `by_regime.ranging.sl_percent`
- –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è fallback `2.0%`, –Ω–æ –ø–æ—á–µ–º—É-—Ç–æ –≤ –ª–æ–≥–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å `0.80%`

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —á—Ç–µ–Ω–∏–µ –∏–∑ `adaptive_regime.{regime}.sl_percent` (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
2. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω fallback –Ω–∞ `by_regime` –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ö–æ–¥:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Fallback –Ω–∞ adaptive_regime (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥–∞)
if sl_percent == 2.0:  # –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –≤ symbol_profiles
    # –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ adaptive_regime.{regime}.sl_percent
    adaptive_regime = getattr(self.scalping_config, "adaptive_regime", None)
    if adaptive_regime:
        adaptive_dict = self.config_manager.to_dict(adaptive_regime)
        if regime in adaptive_dict:
            regime_config = adaptive_dict[regime]
            if isinstance(regime_config, dict) and "sl_percent" in regime_config:
                sl_percent = float(regime_config["sl_percent"])
                # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- SL = 0.80% (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- SL threshold = -0.85%
- –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —É–±—ã—Ç–∫–µ -0.86%

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- SL = 1.0% (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- SL threshold = -1.05% (1.0% + 0.05% spread_buffer)
- –ü–æ–∑–∏—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ —É–±—ã—Ç–∫–µ -1.05% (–±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

**–î–∞—Ç–∞:** 2025-12-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

