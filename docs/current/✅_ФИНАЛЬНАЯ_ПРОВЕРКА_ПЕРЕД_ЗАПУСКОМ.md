# –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ü–†–û–í–ï–†–ï–ù–û –ò –ì–û–¢–û–í–û

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

### –≠–¢–ê–ü 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ

#### 1.1. –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ Order Flow ‚úÖ
- ‚úÖ `orchestrator.py` - –ø–µ—Ä–µ–¥–∞–µ—Ç `order_flow` –≤ `TrailingSLCoordinator`
- ‚úÖ `trailing_sl_coordinator.py` - –¥–æ–±–∞–≤–ª–µ–Ω –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ Order Flow
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è delta —Ö—Ä–∞–Ω–∏—Ç—Å—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω: `position_manager.reversal_detection.order_flow`

#### 1.2. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π Partial TP ‚úÖ
- ‚úÖ `position_manager.py` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π min_holding
- ‚úÖ –ü—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ >= 1.0% ‚Üí min_holding —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 50%
- ‚úÖ –ü—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ >= 0.5% ‚Üí min_holding —Å–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ 75%
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω: `partial_tp.adaptive_min_holding`

#### 1.3. Fallback –¥–ª—è XRP-USDT ‚úÖ
- ‚úÖ `liquidity_filter.py` - –¥–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ 24h volume
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.1% –æ—Ç –¥–Ω–µ–≤–Ω–æ–≥–æ –æ–±—ä–µ–º–∞ –∫–∞–∫ fallback
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω: `liquidity_filter.volume_fallback`

---

### –≠–¢–ê–ü 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏ ‚úÖ

#### 2.1. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π ‚úÖ
- ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `risk_manager.py` (—Å—Ç—Ä–æ–∫–∏ 416-515)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ATR –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∂–∏–º–∞–º (trending/ranging/choppy)

#### 2.2. –£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞ ‚úÖ
- ‚úÖ `trailing_sl_coordinator.py` - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (ADX 60% + Order Flow 40%)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞

#### 2.3. ATR-based TP —Ä–∞—Å—á–µ—Ç ‚úÖ
- ‚úÖ `position_manager.py` - –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `current_price` –≤ `_get_adaptive_tp_percent`
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `current_price`
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–∞—Å—á–µ—Ç—É TP –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ú–ê–†–ñ–ò

### –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ ‚úÖ
- ‚úÖ `risk_manager.py` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ —Å —É—á–µ—Ç–æ–º leverage
- ‚úÖ `margin_required = base_usd_size / leverage`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–π –º–∞—Ä–∂–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `total_margin_used` –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ä–∂–∏ ‚úÖ
- ‚úÖ `orchestrator.py` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–∞—Ä–∂–∏ —Å –±–∏—Ä–∂–µ–π
- ‚úÖ `_get_used_margin()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –º–∞—Ä–∂–∏ —Å –±–∏—Ä–∂–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –º–∞—Ä–∂–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –º–∞—Ä–∂–∏ ‚úÖ
- ‚úÖ `max_margin_percent` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ `max_margin_allowed = balance * max_margin_percent`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–π –º–∞—Ä–∂–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –µ—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ä–∂–∏

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ê–†–•–ò–¢–ï–ö–¢–£–†–´

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚úÖ
- ‚úÖ `TrailingSLCoordinator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TSL
- ‚úÖ `WebSocketCoordinator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket
- ‚úÖ `OrderCoordinator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞–º–∏
- ‚úÖ `SignalCoordinator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏
- ‚úÖ `RiskManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ –∏ —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–π

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å ‚úÖ
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∂–∏–º–∞–º (TRENDING/RANGING/CHOPPY)
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Å–∏–º–≤–æ–ª–∞–º (per-symbol overrides)
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ –±–∞–ª–∞–Ω—Å—É (balance_profiles)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ Callbacks —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–ò–ù–¢–ê–ö–°–ò–°–ê

### Python —Å–∏–Ω—Ç–∞–∫—Å–∏—Å ‚úÖ
- ‚úÖ `py_compile` - –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### –õ–∏–Ω—Ç–µ—Ä ‚úÖ
- ‚úÖ `read_lints` - –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–û–ù–§–ò–ì–ê

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚úÖ
- ‚úÖ `partial_tp.adaptive_min_holding` - –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ `liquidity_filter.volume_fallback` - –¥–æ–±–∞–≤–ª–µ–Ω–æ
- ‚úÖ `position_manager.reversal_detection.order_flow` - –¥–æ–±–∞–≤–ª–µ–Ω–æ

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚úÖ
- ‚úÖ `volatility_adjustment` - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ `position_manager.tp_extension` - —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- ‚úÖ –í—Å–µ —Ä–µ–∂–∏–º—ã (trending/ranging/choppy) - –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ú–û–ú–ï–ù–¢–û–í

### –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π ‚úÖ
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å —É—á–µ—Ç–æ–º leverage
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ min/max –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∂–∏–º–∞–º

### –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π ‚úÖ
- ‚úÖ TP - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º–∞–º –∏ —Å–∏–º–≤–æ–ª–∞–º
- ‚úÖ TSL - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Å –∞–Ω–∞–ª–∏–∑–æ–º —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ Order Flow —Ä–∞–∑–≤–æ—Ä–æ—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
- ‚úÖ Partial TP - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π min_holding

### –§–∏–ª—å—Ç—Ä—ã ‚úÖ
- ‚úÖ LiquidityFilter - fallback –¥–ª—è XRP-USDT
- ‚úÖ OrderFlowFilter - –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- ‚úÖ –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ó–ê–ü–£–°–ö–£

### –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã ‚úÖ
- ‚úÖ –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –≠—Ç–∞–ø 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω

### –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã ‚úÖ
- ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ú–∞—Ä–∂–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ ‚úÖ
- ‚úÖ –†–∞—Å—á–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

---

## üöÄ –°–¢–ê–¢–£–°: –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥—É–ª—è–º–∏

**–ú–∞—Ä–∂–∞:**
- ‚úÖ –†–∞—Å—á–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞!** üöÄ

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú

- [x] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- [x] –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω
- [x] –õ–∏–Ω—Ç–µ—Ä –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –ú–∞—Ä–∂–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞
- [x] –ö–æ–Ω—Ñ–∏–≥ –æ–±–Ω–æ–≤–ª–µ–Ω
- [x] –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

**‚úÖ –í–°–ï –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£!**
