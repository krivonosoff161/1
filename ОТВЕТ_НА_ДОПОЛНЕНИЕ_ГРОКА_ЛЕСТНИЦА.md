# üîç –û—Ç–≤–µ—Ç –Ω–∞ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ì—Ä–æ–∫–∞: –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–∞

> **–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 21 –¥–µ–∫–∞–±—Ä—è 2025  
> **–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–π –∞–Ω–∞–ª–∏–∑:** –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π

---

## ‚úÖ –ß–¢–û –ü–†–ê–í–ò–õ–¨–ù–û –í –ê–ù–ê–õ–ò–ó–ï –ì–†–û–ö–ê

### 1. ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è - –ü–†–ê–í–ò–õ–¨–ù–û –û–ü–ò–°–ê–ù–ê

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```python
# –î–ª—è –±–∞–ª–∞–Ω—Å–∞ $400 (MICRO):
progress = (400 - 100) / (500 - 100) = 0.75
size_usd = 30 + (50 - 30) * 0.75 = $45
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ (`risk_manager.py`, —Å—Ç—Ä–æ–∫–∏ 691-730):**
```python
# –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:
if max_balance > min_balance:
    balance_range = max_balance - min_balance
    size_range = size_at_max - size_at_min
    clamped_balance = max(min_balance, min(balance, max_balance))
    interpolated_size = size_at_min + (
        size_range * (clamped_balance - min_balance) / balance_range
    )
    base_usd_size = interpolated_size
```

**–í–´–í–û–î:** ‚úÖ –ì—Ä–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞–ª —Ñ–æ—Ä–º—É–ª—É –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–∏!

---

### 2. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å max_positions_per_symbol: 1 - –ü–†–ê–í–ò–õ–¨–ù–û –ò–î–ï–ù–¢–ò–§–ò–¶–ò–†–û–í–ê–ù–ê

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```yaml
max_positions_per_symbol: 1  # ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ!
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–Ω—Ñ–∏–≥–µ:**
```yaml
max_positions_per_symbol: 1  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ!
allow_concurrent_positions: true  # ‚úÖ –ù–æ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ
```

**–í–´–í–û–î:** ‚úÖ –ì—Ä–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É–∫–∞–∑–∞–ª, —á—Ç–æ `max_positions_per_symbol: 1` –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ —Å–∏–º–≤–æ–ª!

---

### 3. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å PH –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ - –ü–†–ê–í–ò–õ–¨–ù–û –û–ü–ò–°–ê–ù–ê

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```python
# –ü–æ—Å–ª–µ 2 –¥–æ–ª–∏–≤–æ–∫:
total_notional = $1500
ph_threshold = $0.10  # ‚ùå –ó–ê–ö–†–û–ï–¢ –í–°–Æ –ü–û–ó–ò–¶–ò–Æ –ø—Ä–∏ $0.15!
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ:**
```python
# –í position_manager.py (_check_profit_harvesting):
# PH –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –ö–ê–ñ–î–û–ô –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ, –ù–ï –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π!
# –ï—Å–ª–∏ –µ—Å—Ç—å 2 –ø–æ–∑–∏—Ü–∏–∏ –ø–æ $750 –∫–∞–∂–¥–∞—è:
#   - PH –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ 1: $0.10 –æ—Ç $750 = 0.013%
#   - PH –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏ 2: $0.10 –æ—Ç $750 = 0.013%
# –ù–û! –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –Ω–∞ –±–∏—Ä–∂–µ (–æ–¥–Ω–∞ —Å—É–º–º–∞—Ä–Ω–∞—è):
#   - PH –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π: $0.10 –æ—Ç $1500 = 0.007% ‚ùå
```

**–í–´–í–û–î:** ‚úÖ –ì—Ä–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞–ª –ø—Ä–æ–±–ª–µ–º—É! PH –ù–ï –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Å —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–∏!

---

### 4. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å Profit Drawdown –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ - –ü–†–ê–í–ò–õ–¨–ù–û –û–ü–ò–°–ê–ù–ê

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```python
# –ü–æ—Å–ª–µ 3 –¥–æ–ª–∏–≤–æ–∫:
total_notional = $2250
min_profit_to_activate = $0.5  # ‚ùå –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ 0.02% –æ—Ç notional!
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ:**
```python
# –í position_manager.py:
# Profit Drawdown –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –ö–ê–ñ–î–û–ô –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
# min_profit_to_activate_usd = 0.5  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!
# –ù–ï —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏!
```

**–í–´–í–û–î:** ‚úÖ –ì—Ä–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞–ª –ø—Ä–æ–±–ª–µ–º—É! Profit Drawdown –ù–ï –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è!

---

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –í –ê–ù–ê–õ–ò–ó–ï –ì–†–û–ö–ê

### 1. ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π!

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```yaml
# –ü–†–û–ë–õ–ï–ú–ê: max_positions_per_symbol: 1 –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ!
# –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞:
max_positions_per_symbol: 3  # –î–æ 3 –¥–æ–ª–∏–≤–æ–∫
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ:**
```python
# –í position_scaling_manager.py:
# –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ë–ï–ó –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π!
# –û–Ω–æ –£–í–ï–õ–ò–ß–ò–í–ê–ï–¢ —Ä–∞–∑–º–µ—Ä –°–£–©–ï–°–¢–í–£–Æ–©–ï–ô –ø–æ–∑–∏—Ü–∏–∏, –∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ!

# –ü—Ä–∏–º–µ—Ä:
# –ü–æ–∑–∏—Ü–∏—è 1: $150 –º–∞—Ä–∂–∏, 0.0015 BTC
# –î–æ–ª–∏–≤–∫–∞ 1: +$120 –º–∞—Ä–∂–∏, +0.0012 BTC
# –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–î–ù–ê –ø–æ–∑–∏—Ü–∏—è —Å $270 –º–∞—Ä–∂–∏, 0.0027 BTC (–Ω–∞ –±–∏—Ä–∂–µ —ç—Ç–æ –û–î–ù–ê –ø–æ–∑–∏—Ü–∏—è!)
```

**–ü–†–û–ë–õ–ï–ú–ê:**
- –ì—Ä–æ–∫ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç **–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï** –ø–æ–∑–∏—Ü–∏–∏
- –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ **–£–í–ï–õ–ò–ß–ò–í–ê–ï–¢** —Ä–∞–∑–º–µ—Ä **–û–î–ù–û–ô** –ø–æ–∑–∏—Ü–∏–∏
- –ù–∞ –±–∏—Ä–∂–µ —ç—Ç–æ **–û–î–ù–ê** –ø–æ–∑–∏—Ü–∏—è —Å —Å—É–º–º–∞—Ä–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º!

**–í–´–í–û–î:** 
- ‚úÖ –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ **–†–ê–ë–û–¢–ê–ï–¢** —Å `max_positions_per_symbol: 1`
- ‚ùå –ù–û! PH –∏ Profit Drawdown –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –¥–ª—è **–°–£–ú–ú–ê–†–ù–û–ô** –ø–æ–∑–∏—Ü–∏–∏, –∞ –Ω–µ –¥–ª—è –∫–∞–∂–¥–æ–π –¥–æ–ª–∏–≤–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚ö†Ô∏è –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –ì—Ä–æ–∫–∞ **–ß–ê–°–¢–ò–ß–ù–û –ü–†–ê–í–ò–õ–¨–ù–ê**: PH/Profit Drawdown –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è —Å —Ä–∞–∑–º–µ—Ä–æ–º!

---

### 2. ‚ùå –ù–ï–¢–û–ß–ù–û–°–¢–¨: –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ –¥–ª—è –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```python
# –ü–æ–∑–∏—Ü–∏—è 1: margin_1 = $150
# –î–æ–ª–∏–≤–∫–∞ 1: margin_2 = $150  # ‚ùå –¢–û–¢ –ñ–ï –†–ê–ó–ú–ï–†!
# –î–æ–ª–∏–≤–∫–∞ 2: margin_3 = $150  # ‚ùå –¢–û–¢ –ñ–ï –†–ê–ó–ú–ï–†!
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ (`position_scaling_manager.py`, —Å—Ç—Ä–æ–∫–∏ 240-280):**
```python
async def calculate_next_addition_size(
    self,
    symbol: str,
    base_size_usd: float,  # –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä ($150)
    signal: Dict[str, Any],
    balance: float,
    balance_profile: Optional[str] = None,
    regime: Optional[str] = None,
) -> Optional[float]:
    # –ü–æ–ª—É—á–∞–µ–º –ª–µ—Å—Ç–Ω–∏—Ü—É:
    ladder = [1.0, 0.8, 0.6, 0.4, 0.3, 0.2, 0.15]
    addition_count = check_result["addition_count"]
    
    # –í—ã–±–∏—Ä–∞–µ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–∑ –ª–µ—Å—Ç–Ω–∏—Ü—ã:
    if addition_count >= len(ladder):
        ladder_coefficient = ladder[-1]  # 0.15
    else:
        ladder_coefficient = ladder[addition_count]  # 0.8 –¥–ª—è –ø–µ—Ä–≤–æ–π –¥–æ–ª–∏–≤–∫–∏
    
    # –†–∞–∑–º–µ—Ä –¥–æ–ª–∏–≤–∫–∏ = –±–∞–∑–æ–≤—ã–π * –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:
    addition_size_usd = base_size_usd * ladder_coefficient
    # –î–ª—è –ø–µ—Ä–≤–æ–π –¥–æ–ª–∏–≤–∫–∏: $150 * 0.8 = $120  # ‚úÖ –ù–ï $150!
```

**–ü–†–û–ë–õ–ï–ú–ê:**
- –ì—Ä–æ–∫ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è –¥–æ–ª–∏–≤–∫–∞ = **–¢–û–¢ –ñ–ï –†–ê–ó–ú–ï–†** ($150)
- –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Ä –¥–æ–ª–∏–≤–∫–∏ **–£–ú–ï–ù–¨–®–ê–ï–¢–°–Ø** –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ (0.8, 0.6, 0.4...)
- –ü–µ—Ä–≤–∞—è –¥–æ–ª–∏–≤–∫–∞ = $150 * 0.8 = **$120** (–Ω–µ $150!)

**–í–´–í–û–î:** 
- ‚ùå –†–∞—Å—á–µ—Ç –ì—Ä–æ–∫–∞ –Ω–µ–≤–µ—Ä–µ–Ω –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –¥–æ–ª–∏–≤–æ–∫
- ‚úÖ –ù–û! –ü—Ä–æ–±–ª–µ–º–∞ —Å PH/Profit Drawdown –æ—Å—Ç–∞–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π (–æ–Ω–∏ –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è)

---

### 3. ‚ö†Ô∏è –ù–ï–¢–û–ß–ù–û–°–¢–¨: Max Holding –¥–ª—è –≥—Ä—É–ø–ø –ø–æ–∑–∏—Ü–∏–π

**–ß—Ç–æ —Å–∫–∞–∑–∞–ª –ì—Ä–æ–∫:**
```python
# –ü–†–û–ë–õ–ï–ú–ê: –ö–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –†–ê–ó–ù–û–ï –í–†–ï–ú–Ø!
# –ü–æ–∑–∏—Ü–∏—è 1: –∑–∞–∫—Ä—ã—Ç—å –≤ 12:28
# –ü–æ–∑–∏—Ü–∏—è 2: –∑–∞–∫—Ä—ã—Ç—å –≤ 12:33
# –ü–æ–∑–∏—Ü–∏—è 3: –∑–∞–∫—Ä—ã—Ç—å –≤ 12:38
```

**–ß—Ç–æ –≤ –†–ï–ê–õ–¨–ù–û–ú –∫–æ–¥–µ:**
```python
# –í position_manager.py –∏ exit_analyzer.py:
# Max Holding –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è –û–î–ù–û–ô –ø–æ–∑–∏—Ü–∏–∏ (—Å—É–º–º–∞—Ä–Ω–æ–π –Ω–∞ –±–∏—Ä–∂–µ)
# –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ (–æ–¥–Ω–∞ —Å—É–º–º–∞—Ä–Ω–∞—è):
#   - Max Holding —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ü–ï–†–í–û–ì–û –≤—Ö–æ–¥–∞
#   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –í–°–Ø –ø–æ–∑–∏—Ü–∏—è —Å—Ä–∞–∑—É
# –ù–û! –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏–∏ –ù–ï –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã (—Ä–∞–∑–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞):
#   - –ö–∞–∂–¥–∞—è –ø–æ–∑–∏—Ü–∏—è –∏–º–µ–µ—Ç —Å–≤–æ–π entry_time
#   - –ö–∞–∂–¥–∞—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
```

**–ü–†–û–ë–õ–ï–ú–ê:**
- –ì—Ä–æ–∫ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç, —á—Ç–æ –µ—Å—Ç—å **–ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï** –ø–æ–∑–∏—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ entry_time
- –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç **–û–î–ù–£** –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –±–∏—Ä–∂–µ
- Max Holding —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ **–ü–ï–†–í–û–ì–û** –≤—Ö–æ–¥–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–í–´–í–û–î:** 
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ –ì—Ä–æ–∫–∞ **–ù–ï –ü–†–ò–ú–ï–ù–ò–ú–ê** –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è)
- ‚úÖ –ù–û! –ï—Å–ª–∏ –≤ –±—É–¥—É—â–µ–º —Ä–∞–∑—Ä–µ—à–∏—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏, –ø—Ä–æ–±–ª–µ–º–∞ —Å—Ç–∞–Ω–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–π

---

## üìä –ü–ï–†–ï–°–ß–ï–¢ –ú–ê–¢–ï–ú–ê–¢–ò–ö–ò –° –†–ï–ê–õ–¨–ù–´–ú–ò –ó–ù–ê–ß–ï–ù–ò–Ø–ú–ò

### –°—Ü–µ–Ω–∞—Ä–∏–π: –ë–∞–ª–∞–Ω—Å $1000, RANGING, –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ

**–†–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```yaml
# Balance Profile: SMALL ($500-$1500)
size_at_min: 100.0
size_at_max: 200.0
max_position_percent: 25.0%

# –õ–µ—Å—Ç–Ω–∏—Ü–∞:
ladder: [1.0, 0.8, 0.6, 0.4, 0.3, 0.2, 0.15]

# PH:
ph_threshold: 0.10  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!

# Profit Drawdown:
min_profit_to_activate_usd: 0.5  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π!
```

**–†–∞—Å—á–µ—Ç –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ $1000:**
```python
# –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è:
balance = 1000
progress = (1000 - 500) / (1500 - 500) = 0.5
base_size_usd = 100 + (200 - 100) * 0.5 = $150

# –° leverage 5x:
base_notional = $150 * 5 = $750
```

**–õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ (3 –¥–æ–ª–∏–≤–∫–∏):**
```python
# –í—Ö–æ–¥ 1 (–±–∞–∑–æ–≤—ã–π):
margin_1 = $150
notional_1 = $750
entry_price_1 = $100,000

# –î–æ–ª–∏–≤–∫–∞ 1 (ladder[0] = 0.8):
addition_1_size = $150 * 0.8 = $120  # ‚úÖ –ù–ï $150!
margin_total = $150 + $120 = $270
notional_total = $750 + ($120 * 5) = $1,350
avg_entry = ($100,000 * $750 + $99,500 * $600) / $1,350 = $99,778

# –î–æ–ª–∏–≤–∫–∞ 2 (ladder[1] = 0.6):
addition_2_size = $150 * 0.6 = $90  # ‚úÖ –ù–ï $150!
margin_total = $270 + $90 = $360
notional_total = $1,350 + ($90 * 5) = $1,800
avg_entry = ($99,778 * $1,350 + $99,000 * $450) / $1,800 = $99,667

# –î–æ–ª–∏–≤–∫–∞ 3 (ladder[2] = 0.4):
addition_3_size = $150 * 0.4 = $60  # ‚úÖ –ù–ï $150!
margin_total = $360 + $60 = $420
notional_total = $1,800 + ($60 * 5) = $2,100
avg_entry = ($99,667 * $1,800 + $98,500 * $300) / $2,100 = $99,500
```

**–ü—Ä–æ–±–ª–µ–º–∞ —Å PH:**
```python
# –ü–æ—Å–ª–µ 3 –¥–æ–ª–∏–≤–æ–∫:
total_notional = $2,100
total_margin = $420

# PH threshold:
ph_threshold = $0.10  # ‚ùå –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô!

# PH –≤ % –æ—Ç notional:
ph_percent = ($0.10 / $2,100) * 100 = 0.0048%  # üò± –ö–ê–¢–ê–°–¢–†–û–§–ê!

# –ï—Å–ª–∏ —Ü–µ–Ω–∞ +0.01%:
profit = $2,100 * 0.0001 = $0.21

if $0.21 >= $0.10:
    # –ó–ê–ö–†–û–ï–¢ –í–°–Æ –ü–û–ó–ò–¶–ò–Æ $2,100 –ø—Ä–∏ –ø—Ä–æ—Ñ–∏—Ç–µ 0.01%!
```

**–ü—Ä–æ–±–ª–µ–º–∞ —Å Profit Drawdown:**
```python
# Profit Drawdown:
min_profit_to_activate = $0.5  # ‚ùå –§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ô!

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏:
activation_percent = ($0.5 / $2,100) * 100 = 0.024%  # üò± –°–õ–ò–®–ö–û–ú –†–ê–ù–û!

# –ï—Å–ª–∏ –ø–∏–∫ $3.0:
peak_profit = $3.0
drawdown_threshold = 0.75 * 1.2 = 0.90  # 90% –æ—Ç –ø–∏–∫–∞
min_profit_after_drawdown = $3.0 * 0.90 = $2.70

# –û—Ç–∫–∞—Ç: $3.0 ‚Üí $2.5
if $2.5 < $2.70:
    # –ó–ê–ö–†–û–ï–¢ –í–°–Æ –ø–æ–∑–∏—Ü–∏—é $2,100 –ø—Ä–∏ $2.5 –ø—Ä–æ—Ñ–∏—Ç–µ!
    # –í–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–Ω–∏—è $2,100 * 0.036 = $75.60 TP!
```

---

## üéØ –û–¶–ï–ù–ö–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô –ì–†–û–ö–ê

### 1. ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Adaptive PH (–ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞—Ä–∂–∏) - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!

**–ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ì—Ä–æ–∫:**
```yaml
ranging:
  ph_threshold_type: "margin_percent"  # ‚úÖ –ù–û–í–û–ï!
  ph_threshold_percent: 1.5  # 1.5% –æ—Ç –º–∞—Ä–∂–∏
```

**–û—Ü–µ–Ω–∫–∞:** ‚úÖ **–û–¢–õ–ò–ß–ù–û!** –≠—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è PH!

**–†–µ–∞–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞:**
```python
# –î–ª—è $150 –º–∞—Ä–∂–∏: $150 * 0.015 = $2.25
# –î–ª—è $420 –º–∞—Ä–∂–∏ (3 –¥–æ–ª–∏–≤–∫–∏): $420 * 0.015 = $6.30
# PH –≤ % –æ—Ç notional: ($6.30 / $2,100) * 100 = 0.3%  # ‚úÖ –ù–û–†–ú–ê–õ–¨–ù–û!
```

---

### 2. ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Adaptive Profit Drawdown - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!

**–ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ì—Ä–æ–∫:**
```yaml
profit_drawdown:
  min_profit_to_activate_type: "margin_percent"  # ‚úÖ –ù–û–í–û–ï!
  min_profit_to_activate_percent: 3.0  # 3% –æ—Ç –º–∞—Ä–∂–∏
```

**–û—Ü–µ–Ω–∫–∞:** ‚úÖ **–û–¢–õ–ò–ß–ù–û!** –≠—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è Profit Drawdown!

**–†–µ–∞–ª—å–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞:**
```python
# –î–ª—è $150 –º–∞—Ä–∂–∏: $150 * 0.03 = $4.50
# –î–ª—è $420 –º–∞—Ä–∂–∏ (3 –¥–æ–ª–∏–≤–∫–∏): $420 * 0.03 = $12.60
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤ % –æ—Ç notional: ($12.60 / $2,100) * 100 = 0.6%  # ‚úÖ –ù–û–†–ú–ê–õ–¨–ù–û!
```

---

### 3. ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: max_positions_per_symbol: 3 - –ù–ï –ù–£–ñ–ù–û!

**–ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ì—Ä–æ–∫:**
```yaml
max_positions_per_symbol: 3  # –î–æ 3 –¥–æ–ª–∏–≤–æ–∫
```

**–û—Ü–µ–Ω–∫–∞:** ‚ö†Ô∏è **–ù–ï –ù–£–ñ–ù–û!** –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `max_positions_per_symbol: 1`!

**–ü—Ä–∏—á–∏–Ω–∞:**
- –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ **–£–í–ï–õ–ò–ß–ò–í–ê–ï–¢** —Ä–∞–∑–º–µ—Ä **–û–î–ù–û–ô** –ø–æ–∑–∏—Ü–∏–∏
- –ù–∞ –±–∏—Ä–∂–µ —ç—Ç–æ **–û–î–ù–ê** –ø–æ–∑–∏—Ü–∏—è —Å —Å—É–º–º–∞—Ä–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
- `max_positions_per_symbol: 1` **–ù–ï –ë–õ–û–ö–ò–†–£–ï–¢** –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ!

**–í–´–í–û–î:** 
- ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å `max_positions_per_symbol: 1`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Adaptive PH –∏ Profit Drawdown (—ç—Ç–æ —Ä–µ—à–∏—Ç –ø—Ä–æ–±–ª–µ–º—É!)

---

### 4. ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: max_margin_per_symbol: 35% - –ú–û–ñ–ù–û, –ù–û –ù–ï –ö–†–ò–¢–ò–ß–ù–û

**–ß—Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ì—Ä–æ–∫:**
```yaml
risk_config:
  max_margin_per_symbol: 35.0  # 35% –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ –û–î–ò–ù —Å–∏–º–≤–æ–ª
```

**–û—Ü–µ–Ω–∫–∞:** ‚ö†Ô∏è **–ú–û–ñ–ù–û**, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–±–ª–µ–º—ã!

**–ü—Ä–∏—á–∏–Ω–∞:**
- –£–∂–µ –µ—Å—Ç—å `max_position_percent: 25.0%` –¥–ª—è small profile
- –£–∂–µ –µ—Å—Ç—å `max_portfolio_margin: 65.0%` –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ª–∏–º–∏—Ç `max_margin_per_symbol` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–µ–Ω, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω

**–í–´–í–û–î:** 
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å, –Ω–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- ‚úÖ –ì–ª–∞–≤–Ω–æ–µ - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Adaptive PH –∏ Profit Drawdown!

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –í–´–í–û–î

### –ß—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –∞–Ω–∞–ª–∏–∑–µ –ì—Ä–æ–∫–∞:

1. ‚úÖ **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω–∞
2. ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Å PH –¥–ª—è —Å—É–º–º–∞—Ä–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞
3. ‚úÖ **–ü—Ä–æ–±–ª–µ–º–∞ —Å Profit Drawdown** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞
4. ‚úÖ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏** - –æ—Ç–ª–∏—á–Ω—ã–µ –∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ!

### –ß—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤ –∞–Ω–∞–ª–∏–∑–µ –ì—Ä–æ–∫–∞:

1. ‚ùå **–õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π** - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
   - –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å `max_positions_per_symbol: 1`
   - –û–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –û–î–ù–û–ô –ø–æ–∑–∏—Ü–∏–∏, –∞ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ

2. ‚ùå **–†–∞–∑–º–µ—Ä –¥–æ–ª–∏–≤–æ–∫ = –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä** - –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û!
   - –†–∞–∑–º–µ—Ä –¥–æ–ª–∏–≤–æ–∫ –£–ú–ï–ù–¨–®–ê–ï–¢–°–Ø –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ (0.8, 0.6, 0.4...)
   - –ü–µ—Ä–≤–∞—è –¥–æ–ª–∏–≤–∫–∞ = $150 * 0.8 = $120 (–Ω–µ $150!)

3. ‚ö†Ô∏è **Max Holding –¥–ª—è –≥—Ä—É–ø–ø –ø–æ–∑–∏—Ü–∏–π** - –ù–ï –ü–†–ò–ú–ï–ù–ò–ú–û!
   - –õ–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –û–î–ù–£ –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –±–∏—Ä–∂–µ
   - Max Holding —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –ü–ï–†–í–û–ì–û –≤—Ö–æ–¥–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

### –ú–æ–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Adaptive PH** (–ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞—Ä–∂–∏) - **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!**
2. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Adaptive Profit Drawdown** (–ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞—Ä–∂–∏) - **–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!**
3. ‚úÖ **–û—Å—Ç–∞–≤–∏—Ç—å max_positions_per_symbol: 1** (–ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!)
4. ‚ö†Ô∏è **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å max_margin_per_symbol** (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ)

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê –ê–ù–ê–õ–ò–ó–ê –ì–†–û–ö–ê

**–û—Ü–µ–Ω–∫–∞:** 7/10

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–±–ª–µ–º—ã —Å PH –∏ Profit Drawdown
- ‚úÖ –û—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (–ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –º–∞—Ä–∂–∏)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø–∏—Å–∞–ª –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–Ω—è–ª –º–µ—Ö–∞–Ω–∏–∑–º –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–¥—É–º–∞–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏)
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–ª —Ä–∞–∑–º–µ—Ä –¥–æ–ª–∏–≤–æ–∫ (–¥—É–º–∞–µ—Ç, —á—Ç–æ –≤—Å–µ –¥–æ–ª–∏–≤–∫–∏ = –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä)
- ‚ö†Ô∏è –ù–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ –¥–ª—è Max Holding (–ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–∑–¥–∞–µ—Ç –æ–¥–Ω—É –ø–æ–∑–∏—Ü–∏—é)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ PH –∏ Profit Drawdown, –Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ `max_positions_per_symbol` (–Ω–µ –Ω—É–∂–Ω–∞).

---

**–ö–æ–Ω–µ—Ü –ø—Ä–æ–≤–µ—Ä–∫–∏**




