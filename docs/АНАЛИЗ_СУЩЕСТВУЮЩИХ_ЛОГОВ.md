# üîç –ê–ù–ê–õ–ò–ó –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –õ–û–ì–û–í –ò –î–ê–ù–ù–´–•

**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –µ—Å—Ç—å –≤ –∞—Ä—Ö–∏–≤–∞—Ö  
**–î–∞—Ç–∞:** 2026-01-07

---

## ‚úÖ –ß–¢–û –ù–ê–ô–î–ï–ù–û –í –õ–û–ì–ê–•

### 1. CSV File: `all_data_2026-01-06.csv` (66 KB)

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ –°–∏–≥–Ω–∞–ª—ã (record_type=signals)
- ‚úÖ –û—Ä–¥–µ—Ä—ã (record_type=orders)
- ‚úÖ –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (record_type=positions_open)
- ‚úÖ –ó–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏ (record_type=trades)

**–í–∞–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:**
```
signals:
  - timestamp
  - symbol
  - side
  - price (—Å–∏–≥–Ω–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞)
  - strength (—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å)
  - filters_passed (–∫–∞–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–æ—à–ª–∏)
  - executed (–±—ã–ª –ª–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω)
  - regime (–∫–∞–∫–æ–π —Ä–µ–∂–∏–º)

trades:
  - entry_price
  - exit_price
  - size
  - pnl
  - duration_sec
  - reason (–ø–æ—á–µ–º—É –∑–∞–∫—Ä—ã–ª–∞—Å—å)
```

**394 —Å—Ç—Ä–æ–∫–∏** = —Å–∏–≥–Ω–∞–ª—ã + –æ—Ä–¥–µ—Ä—ã + –ø–æ–∑–∏—Ü–∏–∏ + —Å–¥–µ–ª–∫–∏ –∑–∞ 01-06

### 2. DEBUG CSV: `debug_20260106_142446.csv` (9 KB)

**–°–æ–¥–µ—Ä–∂–∏—Ç:**
- ‚úÖ Trail SL —Å–æ–±—ã—Ç–∏—è (tsl_create, open)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–π (config event)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏

**–ü—Ä–∏–º–µ—Ä:**
```
timestamp | event_type | symbol    | data
14:31:33  | tsl_create | SOL-USDT  | regime=ranging | entry=138.73 | ...
14:31:33  | config     | SOL-USDT  | regime=ranging | min_holding=1.0 | loss_cut=4.0 | ...
14:31:35  | open       | SOL-USDT  | side=long | price=138.73 | size=1.43 | ...
```

**73 —Å—Ç—Ä–æ–∫–∏** = —Å–æ–±—ã—Ç–∏—è –¥–ª—è 16 –ø–æ–∑–∏—Ü–∏–π

### 3. JSON Files: `exit_decisions/` (436 —Ñ–∞–π–ª–æ–≤)

**–°–æ–¥–µ—Ä–∂–∞—Ç:**
- ‚úÖ JSON —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã—Ç–∏—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Ö–æ–¥–∞
- ‚úÖ –ü—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ü—Ä–∏–º–µ—Ä –∏–º–µ–Ω–∏:** `BTC-USDT_2026-01-06_16-10-20-003.json`

### 4. LOG Files: `.log` (397 —Ñ–∞–π–ª–æ–≤)

**–°–æ–¥–µ—Ä–∂–∞—Ç:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
- ‚ùå **–ù–ï —Å–æ–¥–µ—Ä–∂–∞—Ç** –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤ –ø—Ä–æ —Å–∏–≥–Ω–∞–ª—ã/—Ñ–∏–ª—å—Ç—Ä—ã/ATR –≤ –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò

---

## ‚ùå –ß–¢–û –ù–ï –ù–ê–ô–î–ï–ù–û

```
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (raw signals)
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (filter rejections)
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–∞ ATR
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á—ë—Ç–∞ TP/SL
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ per-symbol
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤
```

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å–¥–µ–ª–∫–∏), –Ω–æ **–ù–ï –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å** (–∫–∞–∫ —Å–∏–≥–Ω–∞–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –ø–æ—á–µ–º—É –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è).

---

## üìä –ü–õ–ê–ù –ê–ù–ê–õ–ò–ó–ê –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –î–ê–ù–ù–´–•

### –≠–¢–ê–ü 1: –ê–Ω–∞–ª–∏–∑ CSV - –°–∏–≥–Ω–∞–ª—ã vs –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ

```python
import pandas as pd

# –ó–∞–≥—Ä—É–∂–∞–µ–º CSV
df = pd.read_csv('all_data_2026-01-06.csv')

# –í–û–ü–†–û–° 1: –°–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –±—ã–ª–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ?
signals_df = df[df['record_type'] == 'signals']
executed_signals = signals_df[signals_df['executed'] == 1]
rejected_signals = signals_df[signals_df['executed'] == 0]

print(f"Total raw signals: {len(signals_df)}")
print(f"Executed: {len(executed_signals)} ({len(executed_signals)/len(signals_df)*100:.1f}%)")
print(f"Rejected: {len(rejected_signals)} ({len(rejected_signals)/len(signals_df)*100:.1f}%)")

# –í–û–ü–†–û–° 2: –ö–∞–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞–ª–∏—Å—å?
for idx, row in executed_signals.head(10).iterrows():
    filters_passed = row['filters_passed']
    print(f"  {row['symbol']}: {filters_passed}")

# –í–û–ü–†–û–° 3: –ü–æ —Ä–µ–∂–∏–º–∞–º?
print("\nSignals by regime:")
print(signals_df['regime'].value_counts())

# –í–û–ü–†–û–° 4: –ü–æ —Å–∏–º–≤–æ–ª–∞–º?
print("\nSignals by symbol:")
print(signals_df['symbol'].value_counts())
```

### –≠–¢–ê–ü 2: –ê–Ω–∞–ª–∏–∑ CSV - –°–¥–µ–ª–∫–∏

```python
# –í–û–ü–†–û–° 5: Win rate by symbol
trades_df = df[df['record_type'] == 'trades']

for symbol in trades_df['symbol'].unique():
    sym_trades = trades_df[trades_df['symbol'] == symbol]
    wins = len(sym_trades[sym_trades['net_pnl'] > 0])
    losses = len(sym_trades[sym_trades['net_pnl'] <= 0])
    total_pnl = sym_trades['net_pnl'].sum()
    
    print(f"\n{symbol}:")
    print(f"  Win/Loss: {wins}/{losses} ({wins/(wins+losses)*100:.1f}%)")
    print(f"  Total PnL: {total_pnl:.2f} USD")
    print(f"  Avg PnL: {sym_trades['net_pnl'].mean():.4f} USD")
    print(f"  Avg duration: {sym_trades['duration_sec'].mean():.0f}s")
    print(f"  Close reason: {sym_trades['reason'].value_counts().to_dict()}")

# –í–û–ü–†–û–° 6: –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ regime –≤–∞–∂–Ω—ã–º?
print("\nTrades by regime:")
for regime in trades_df['regime'].unique():
    regime_trades = trades_df[trades_df['regime'] == regime]
    win_rate = len(regime_trades[regime_trades['net_pnl'] > 0]) / len(regime_trades)
    print(f"  {regime}: {win_rate*100:.1f}% ({len(regime_trades)} trades)")
```

### –≠–¢–ê–ü 3: –ê–Ω–∞–ª–∏–∑ Debug CSV - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

```python
debug_df = pd.read_csv('debug_20260106_142446.csv')

# –í–û–ü–†–û–° 7: –ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å?
for symbol in debug_df['symbol'].unique():
    sym_debug = debug_df[debug_df['symbol'] == symbol]
    
    # –ù–∞–π—Ç–∏ 'config' —Å–æ–±—ã—Ç–∏—è
    config_rows = sym_debug[sym_debug['event_type'] == 'config']
    
    print(f"\n{symbol}:")
    for idx, row in config_rows.iterrows():
        data = row['data']
        # –ü–∞—Ä—Å–∏–º data
        params = dict(item.split('=') for item in data.split(' | '))
        print(f"  Regime: {params.get('regime')}")
        print(f"  Loss cut: {params.get('loss_cut')}%")
        print(f"  Timeout: {params.get('timeout')} sec")
        print(f"  Initial trail: {params.get('initial_trail')}%")
```

### –≠–¢–ê–ü 4: –ê–Ω–∞–ª–∏–∑ Exit Decisions JSON

```python
import json
from pathlib import Path

exit_dir = Path('exit_decisions')
for json_file in list(exit_dir.glob('*.json'))[:10]:  # First 10
    with open(json_file) as f:
        exit_data = json.load(f)
    
    print(f"\n{json_file.name}:")
    print(f"  Entry: {exit_data.get('entry_price')}")
    print(f"  Exit: {exit_data.get('exit_price')}")
    print(f"  Reason: {exit_data.get('exit_reason')}")
    print(f"  Duration: {exit_data.get('duration_sec')}s")
    print(f"  PnL: {exit_data.get('pnl')}")
```

---

## üéØ –ö–†–ò–¢–ò–ß–ù–´–ï –í–û–ü–†–û–°–´ –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê

### –í–æ–ø—Ä–æ—Å 1: –ö–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω?
**–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:** 
- –°—Ä–∞–≤–Ω–∏—Ç—å `executed=1` vs `executed=0` –≤ signals —Å—Ç—Ä–æ–∫–∞—Ö

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- –ï—Å–ª–∏ >80% –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ ‚Üí —Ñ–∏–ª—å—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º –∂–µ—Å—Ç–∫–∏–µ
- –ï—Å–ª–∏ <20% –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ ‚Üí —Ñ–∏–ª—å—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º –º—è–≥–∫–∏–µ

### –í–æ–ø—Ä–æ—Å 2: –ü–æ –∫–∞–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã —Å–∏–≥–Ω–∞–ª—ã?
**–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
- –í `filters_passed` –≤–∏–¥–∏–º –∫–∞–∫–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ü–†–û–®–õ–ò
- –ù–æ –ù–ï –≤–∏–¥–∏–º –∫–∞–∫–∏–µ –æ—Ç–∫–ª–æ–Ω–∏–ª–∏ (–Ω—É–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

**Workaround:**
- –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–∏–≥–Ω–∞–ª—ã —Å `executed=1`
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ `executed=1` vs –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫
- –†–∞–∑–Ω–∏—Ü–∞ = –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –æ—Ä–¥–µ—Ä-—ç–∫–∑–µ–∫—é—Ç–æ—Ä–æ–º (risk checker, etc.)

### –í–æ–ø—Ä–æ—Å 3: ATR fallback –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å?
**–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
- –í CSV –µ—Å—Ç—å `price` –¥–ª—è —Å–∏–≥–Ω–∞–ª–æ–≤
- –ù–µ—Ç ATR –∑–Ω–∞—á–µ–Ω–∏–π –≤ CSV
- **–ù—É–∂–Ω—ã –ª–æ–≥–∏ ATR —Ä–∞—Å—á—ë—Ç–∞** (–∫–æ—Ç–æ—Ä—ã–µ —è –ø—Ä–æ—Å–∏–ª –¥–æ–±–∞–≤–∏—Ç—å)

**Workaround:**
- –ï—Å–ª–∏ –≤–∏–¥–∏–º —Å—Ç—Ä–∞–Ω–Ω—ã–µ SL (entry ‚âà stop) ‚Üí –≤–µ—Ä–æ—è—Ç–Ω–æ fallback
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ exit_decisions JSON (—Ç–∞–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)

### –í–æ–ø—Ä–æ—Å 4: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã?
**–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
- –í `debug_20260106_142446.csv` –≤–∏–¥–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –ù–∞–ø—Ä–∏–º–µ—Ä DOGE: `loss_cut=0.0100` –≤ –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∏ `loss_cut=4.0000` –≤ –¥—Ä—É–≥–æ–π
- –≠—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —Ä–µ–∂–∏–º –ò–ó–ú–ï–ù–ò–õ–°–Ø (choppy vs ranging)

**–ß—Ç–æ –≤–∏–¥–∏–º:**
```
DOGE:
  18:04:07 | regime=choppy | loss_cut=1.2000 | initial_trail=0.0300
  
BTC:
  16:06:51 | regime=ranging | loss_cut=0.0100 | initial_trail=0.0040
  19:31:28 | regime=trending | loss_cut=2.0000 | initial_trail=0.0200
```

**–í—ã–≤–æ–¥:** Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –†–ê–ë–û–¢–ê–Æ–¢ (–≤–∏–¥–Ω—ã —Ä–∞–∑–Ω—ã–µ loss_cut)!

### –í–æ–ø—Ä–æ—Å 5: –ü–æ—á–µ–º—É win rate = 18.5%?
**–ö–∞–∫ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:**
```
trades_df[trades_df['reason'] == 'tp_reached']  # –ü—Ä–æ—Ñ–∏—Ç—ã
trades_df[trades_df['reason'] == 'sl_reached']  # –£–±—ã—Ç–∫–∏
trades_df[trades_df['reason'] == 'timeout']     # –¢–∞–π–º-–∞—É—Ç—ã
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- 81.5% SL hit rate ‚Üí —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã–µ SL —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
- –û—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á—ë—Ç–µ SL ‚Üí fallback ATR –∏–ª–∏ –ø—É—Ç–∞–Ω–∏—Ü–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

---

## üîß –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó - –®–ê–ì –ó–ê –®–ê–ì–û–ú

### –®–ê–ì 1: –ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –º–æ–π –∞–Ω–∞–ª–∏–∑-–∫–æ–¥

```bash
python3 << 'EOF'
import pandas as pd
from pathlib import Path

csv_path = Path("logs/futures/archived/staging_2026-01-07_11-25-49/all_data_2026-01-06.csv")
df = pd.read_csv(csv_path)

print("=" * 80)
print("–ê–ù–ê–õ–ò–ó CSV –î–õ–Ø –°–ò–ì–ù–ê–õ–û–í –ò –°–î–ï–õ–û–ö")
print("=" * 80)

# –°–∏–≥–Ω–∞–ª—ã
signals_df = df[df['record_type'] == 'signals']
trades_df = df[df['record_type'] == 'trades']

print(f"\n–¢–û–¢–ê–õ–¨–ù–û –ó–ê–ü–ò–°–ï–ô: {len(df)}")
print(f"  Signals: {len(signals_df)}")
print(f"  Orders: {len(df[df['record_type'] == 'orders'])}")
print(f"  Positions: {len(df[df['record_type'] == 'positions_open'])}")
print(f"  Trades: {len(trades_df)}")

# –°–∏–≥–Ω–∞–ª—ã –ø–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é
executed = len(signals_df[signals_df['executed'] == 1])
rejected = len(signals_df[signals_df['executed'] == 0])
print(f"\n–°–ò–ì–ù–ê–õ–´:")
print(f"  –í—Å–µ–≥–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ: {len(signals_df)}")
print(f"  –ò—Å–ø–æ–ª–Ω–µ–Ω–æ: {executed} ({executed/len(signals_df)*100:.1f}%)")
print(f"  –û—Ç–∫–ª–æ–Ω–µ–Ω–æ: {rejected} ({rejected/len(signals_df)*100:.1f}%)")

# –ü–æ —Å–∏–º–≤–æ–ª–∞–º
print(f"\n–°–ò–ì–ù–ê–õ–´ –ü–û –°–ò–ú–í–û–õ–ê–ú:")
for symbol in sorted(signals_df['symbol'].unique()):
    sym_sigs = signals_df[signals_df['symbol'] == symbol]
    sym_exec = len(sym_sigs[sym_sigs['executed'] == 1])
    print(f"  {symbol}: {len(sym_sigs)} ({sym_exec} executed, {len(sym_sigs)-sym_exec} rejected)")

# –°–¥–µ–ª–∫–∏
print(f"\n–°–î–ï–õ–ö–ò (—Ç–æ–ª—å–∫–æ –∑–∞–∫—Ä—ã—Ç—ã–µ):")
print(f"  –í—Å–µ–≥–æ: {len(trades_df)}")

for symbol in sorted(trades_df['symbol'].unique()):
    sym_trades = trades_df[trades_df['symbol'] == symbol]
    wins = len(sym_trades[sym_trades['net_pnl'] > 0])
    losses = len(sym_trades[sym_trades['net_pnl'] <= 0])
    total_pnl = sym_trades['net_pnl'].sum()
    avg_dur = sym_trades['duration_sec'].mean()
    
    print(f"\n  {symbol}:")
    print(f"    W/L: {wins}/{losses} ({wins/(wins+losses)*100:.1f}%)")
    print(f"    Total PnL: {total_pnl:.2f} USD")
    print(f"    Avg duration: {avg_dur:.0f}s")
    print(f"    Avg PnL: {sym_trades['net_pnl'].mean():.4f} USD")
    
    # –ü—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
    reasons = sym_trades['reason'].value_counts()
    for reason, count in reasons.items():
        print(f"      {reason}: {count}")

# –ü–æ —Ä–µ–∂–∏–º–∞–º
print(f"\n–°–î–ï–õ–ö–ò –ü–û –†–ï–ñ–ò–ú–ê–ú:")
for regime in sorted(trades_df['regime'].unique()):
    regime_trades = trades_df[trades_df['regime'] == regime]
    if len(regime_trades) > 0:
        wins = len(regime_trades[regime_trades['net_pnl'] > 0])
        pnl = regime_trades['net_pnl'].sum()
        print(f"  {regime}: {len(regime_trades)} trades, {wins/(len(regime_trades))*100:.1f}% win, PnL={pnl:.2f}")

EOF
```

### –®–ê–ì 2: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ö–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç—ã?
- ‚úÖ –°–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ?
- ‚úÖ Win rate –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∏–º–≤–æ–ª—É
- ‚úÖ –ü—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è (TP vs SL vs timeout)
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ä–µ–∂–∏–º–∞

–ö–∞–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –ù–ï –ø–æ–ª—É—á–∏–ª–∏ –æ—Ç–≤–µ—Ç?
- ‚ùå –ü–æ—á–µ–º—É SL hit rate = 81.5%? (–Ω—É–∂–Ω—ã –ª–æ–≥–∏ SL —Ä–∞—Å—á—ë—Ç–∞)
- ‚ùå –ö–∞–∫–æ–π —Ñ–∏–ª—å—Ç—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç 91% —Å–∏–≥–Ω–∞–ª–æ–≤? (–Ω—É–∂–Ω—ã –ª–æ–≥–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤)
- ‚ùå ATR fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è? (–Ω—É–∂–Ω—ã –ª–æ–≥–∏ ATR)
- ‚ùå Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è? (—á–∞—Å—Ç–∏—á–Ω–æ –≤–∏–¥–∏–º –≤ debug CSV)

---

## ‚ö†Ô∏è –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–°—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ª–æ–≥–æ–≤ –ù–ï–î–û–°–¢–ê–¢–û–ß–ù–û –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.**

**–ï—Å—Ç—å:**
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å–¥–µ–ª–∫–∏, –∏—Ö P&L)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (–≤ debug CSV)
- ‚úÖ –°–∏–≥–Ω–∞–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã

**–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç:**
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω—ë–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –ø—Ä–∏—á–∏–Ω—ã
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ATR —Ä–∞—Å—á—ë—Ç–∞ –∏ fallback –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SL/TP —Ä–∞—Å—á—ë—Ç–∞
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–î–õ–Ø –ü–û–õ–ù–û–ì–û –ê–ù–ê–õ–ò–ó–ê –ù–£–ñ–ù–û –î–û–ë–ê–í–ò–¢–¨ –õ–û–ì–ò–†–û–í–ê–ù–ò–ï** (–∫–∞–∫ —è –æ–ø–∏—Å–∞–ª –≤ –ü–û–õ–ù–´–ô_–ß–ï–ö–õ–ò–°–¢_–õ–û–ì–ò–†–û–í–ê–ù–ò–Ø.md)

**–ò–õ–ò –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï –î–ê–ù–ù–´–ï** –¥–ª—è —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–π Python —Å–∫—Ä–∏–ø—Ç –≤—ã—à–µ
2. –û—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã 1-5
3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç (—á–µ—Ä–µ–∑ debug CSV)
4. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

