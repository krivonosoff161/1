# ‚úÖ –ò–¢–û–ì–û–í–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô TP –ò –¢–†–ï–ô–õ–ò–ù–ì –°–¢–û–ü-–õ–û–°–°

**–î–∞—Ç–∞:** 2025-11-12  
**–í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞:** 18:00:46  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### 1. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è entry price

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –±–∏—Ä–∂–µ–π!

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:14 | INFO | ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è SOL-USDT: 158.60 ‚Üí 158.68 (avgPx —Å –±–∏—Ä–∂–∏)
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –≤—Ö–æ–¥–∞ (avgPx) —Å –±–∏—Ä–∂–∏
- –û–±–Ω–æ–≤–ª—è–µ–º entry_price –≤ active_positions (158.60 ‚Üí 158.68)
- –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º trailing stop loss —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (158.68)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ (158.60) ‚ùå
- –†–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞ –Ω–∞ –±–∏—Ä–∂–µ (avgPx) –æ—Ç–ª–∏—á–∞–ª–∞—Å—å ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = avgPx —Å –±–∏—Ä–∂–∏ (158.68) ‚úÖ
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π ‚úÖ

---

### 2. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞!

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:00:54 | DEBUG | üìä –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞: —Ä–µ–∂–∏–º=ranging, –ø—Ä–æ—Ñ–∏–ª—å=small, max_loss=2.0%, max_margin=80.0%
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (max_loss=2.0%, max_margin=80.0%)
- –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (ranging)
- –ü—Ä–æ—Ñ–∏–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (small)
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö ‚úÖ

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: "‚ö†Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä max_loss_per_trade_percent –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ" ‚ùå
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ ‚úÖ
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö ‚úÖ

---

### 3. ‚úÖ TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ TP!

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:32 | DEBUG | üìä TP –ø—Ä–æ–≤–µ—Ä–∫–∞ SOL-USDT: PnL=$-0.02, margin=$8.89, PnL%=-0.22% (–æ—Ç –º–∞—Ä–∂–∏)
2025-11-12 18:02:32 | DEBUG | üìä Per-symbol TP –¥–ª—è SOL-USDT: 0.9% (–≥–ª–æ–±–∞–ª—å–Ω—ã–π: 1.0%)
2025-11-12 18:02:32 | DEBUG | üìä SOL-USDT PnL=-0.22% < TP=0.90% (—Å –∫–æ–º–∏—Å—Å–∏–µ–π: 0.99%, –Ω—É–∂–Ω–æ –µ—â–µ 1.21%)
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (PnL% –æ—Ç –º–∞—Ä–∂–∏)
- Per-symbol TP —Ä–∞–±–æ—Ç–∞–µ—Ç (0.9% –¥–ª—è SOL-USDT)
- –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ TP (0.99% = 0.9% + 0.09%)
- Net PnL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- TP —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏ ‚ùå
- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å —Å —É–±—ã—Ç–∫–æ–º –Ω–∞ –±–∏—Ä–∂–µ ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- TP —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ ‚úÖ
- Net PnL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP ‚úÖ

---

### 4. ‚úÖ TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π!

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:14 | INFO | TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: entry=158.68, side=buy, trail=0.50%, entry_time=2025-11-12T18:02:14.136136
2025-11-12 18:02:15 | INFO | TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: entry=158.68, side=sell, trail=0.50%, entry_time=2025-11-12T18:02:15.178600
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (158.68)
- Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π (avgPx)
- –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (side=sell)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ (158.60) ‚ùå
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = avgPx —Å –±–∏—Ä–∂–∏ (158.68) ‚úÖ
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π ‚úÖ

---

### 5. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏!

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:12 | INFO | ‚úÖ –õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω, –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞: SOL-USDT 0.277427
2025-11-12 18:02:15 | INFO | üéØ –ü–æ–∑–∏—Ü–∏—è SOL-USDT –æ—Ç–∫—Ä—ã—Ç–∞ —Å TrailingSL (entry=158.68)
2025-11-12 18:02:15 | INFO | ‚úÖ –ü–æ–∑–∏—Ü–∏—è SOL-USDT SHORT –æ—Ç–∫—Ä—ã—Ç–∞ –ø–æ —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–∏–≥–Ω–∞–ª—É
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π (158.68)
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
- –ü–æ–∑–∏—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ MaxSizeLimiter

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ ‚ùå
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- Entry price = avgPx —Å –±–∏—Ä–∂–∏ ‚úÖ
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π ‚úÖ

---

### 6. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö!

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ù–µ—Ç –æ—à–∏–±–æ–∫ (ERROR) –≤ –ª–æ–≥–∞—Ö
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
- –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

### 7. ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö!

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π —Ç–∏–ø–∞ "‚ö†Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ"
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: "‚ö†Ô∏è –ü–∞—Ä–∞–º–µ—Ç—Ä max_loss_per_trade_percent –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ" ‚ùå
- Fallback –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ ‚úÖ
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö ‚úÖ

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –†–ê–ë–û–¢–ê–Æ–¢ –ü–†–ê–í–ò–õ–¨–ù–û!

1. ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è entry price** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (158.60 ‚Üí 158.68)
2. ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞** - —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (max_loss=2.0%, max_margin=80.0%)
3. ‚úÖ **TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (0.99% = 0.9% + 0.09%)
4. ‚úÖ **TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (entry=158.68)
5. ‚úÖ **–ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π entry price
6. ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫** - –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
7. ‚úÖ **–ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

---

## üìã –ü–†–û–í–ï–†–ö–ê –ö–õ–Æ–ß–ï–í–´–• –ú–û–ú–ï–ù–¢–û–í

### 1. Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚úÖ

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:14 | INFO | ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è SOL-USDT: 158.60 ‚Üí 158.68 (avgPx —Å –±–∏—Ä–∂–∏)
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—É—á–∞–µ–º —Ä–µ–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –≤—Ö–æ–¥–∞ (avgPx) —Å –±–∏—Ä–∂–∏
- –û–±–Ω–æ–≤–ª—è–µ–º entry_price –≤ active_positions (158.60 ‚Üí 158.68)
- –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º trailing stop loss —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (158.68)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π!

---

### 2. TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏ ‚úÖ

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:32 | DEBUG | üìä TP –ø—Ä–æ–≤–µ—Ä–∫–∞ SOL-USDT: PnL=$-0.02, margin=$8.89, PnL%=-0.22% (–æ—Ç –º–∞—Ä–∂–∏)
2025-11-12 18:02:32 | DEBUG | üìä Per-symbol TP –¥–ª—è SOL-USDT: 0.9% (–≥–ª–æ–±–∞–ª—å–Ω—ã–π: 1.0%)
2025-11-12 18:02:32 | DEBUG | üìä SOL-USDT PnL=-0.22% < TP=0.90% (—Å –∫–æ–º–∏—Å—Å–∏–µ–π: 0.99%, –Ω—É–∂–Ω–æ –µ—â–µ 1.21%)
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (PnL% –æ—Ç –º–∞—Ä–∂–∏)
- Per-symbol TP —Ä–∞–±–æ—Ç–∞–µ—Ç (0.9% –¥–ª—è SOL-USDT)
- –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ TP (0.99% = 0.9% + 0.09%)
- Net PnL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ TP!

---

### 3. TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ‚úÖ

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:02:14 | INFO | TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: entry=158.68, side=buy, trail=0.50%, entry_time=2025-11-12T18:02:14.136136
2025-11-12 18:02:15 | INFO | TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: entry=158.68, side=sell, trail=0.50%, entry_time=2025-11-12T18:02:15.178600
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (158.68)
- Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π (avgPx)
- –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (side=sell)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π!

---

### 4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ ‚úÖ

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-12 18:00:54 | DEBUG | üìä –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞: —Ä–µ–∂–∏–º=ranging, –ø—Ä–æ—Ñ–∏–ª—å=small, max_loss=2.0%, max_margin=80.0%
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (max_loss=2.0%, max_margin=80.0%)
- –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (ranging)
- –ü—Ä–æ—Ñ–∏–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (small)
- –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞!

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ**

1. ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π (avgPx)
2. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. ‚úÖ TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. ‚úÖ TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
5. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
6. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫
7. ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ**

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è entry price** ‚úÖ
   - Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –±–∏—Ä–∂–µ–π (avgPx)
   - TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π

2. **TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏** ‚úÖ
   - –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ TP (0.99% = 0.9% + 0.09%)
   - Net PnL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP

3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞** ‚úÖ
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

4. **TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** ‚úÖ
   - TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
   - –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–ª—å—à–µ:

1. **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ TP:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø—Ä–∏–±—ã–ª—å—é –Ω–∞ –±–∏—Ä–∂–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ net PnL > 0 –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP

2. **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø-–ª–æ—Å—Å:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø-–ª–æ—Å—Å –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ TP
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø-–ª–æ—Å—Å –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è:**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ active_positions
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ trailing_sl_by_symbol
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç–∞ —Å—Ä–∞–∑—É

---

## üéØ –ò–¢–û–ì

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úÖ**

1. ‚úÖ Entry price —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –±–∏—Ä–∂–µ–π (avgPx)
2. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. ‚úÖ TP –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. ‚úÖ TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π
5. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
6. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫
7. ‚úÖ –ù–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üöÄ**

