# ‚ùì –í–û–ü–†–û–°–´ –ü–û –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø–ú

**–î–∞—Ç–∞:** 2025-12-22  
**–¶–µ–ª—å:** –£—Ç–æ—á–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ –≤–Ω–µ—Å–µ–Ω–∏–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## ‚úÖ –ü–†–û–í–ï–†–ï–ù–û –ò –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û

### 1. ‚úÖ –ü—Ä–∞–≤–∫–∞ #3 (Race condition) - –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í –∫–æ–¥–µ —É–∂–µ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `size=0` –≤ `position_manager.py:5781` –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.  
**–í–æ–ø—Ä–æ—Å:** –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É (`asyncio.Lock`) –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º, –∏–ª–∏ —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞?

### 2. ‚úÖ –ü—Ä–∞–≤–∫–∞ #4 (str vs int) - –ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í `exit_analyzer.py:2091-2098` —É–∂–µ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ `float` –¥–ª—è `trigger_percent`.  
**–í–æ–ø—Ä–æ—Å:** –ù—É–∂–Ω–æ –ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –º–µ—Å—Ç–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è `pnl_percent` —Å `sl_threshold`/`tp_threshold` –∏–ª–∏ —Ç–æ–ª—å–∫–æ —ç—Ç–æ –º–µ—Å—Ç–æ?

### 3. ‚úÖ –ü—Ä–∞–≤–∫–∞ #7 (Position size cap) - –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í `risk_manager.py:992-996` —É–∂–µ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏.  
**–í–æ–ø—Ä–æ—Å:** –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø–∞—Å (5%) –∫–∞–∫ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏?

---

## ‚ùì –¢–†–ï–ë–£–Æ–¢ –£–¢–û–ß–ù–ï–ù–ò–Ø

### 4. ‚ùì –ü—Ä–∞–≤–∫–∞ #1 (regime: null)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `exit_analyzer.py:188-196` –∫–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç regime —á–µ—Ä–µ–∑ `regime_manager.get_current_regime()` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Å—Ç—Ä–æ–∫—É.

**–í–æ–ø—Ä–æ—Å—ã:**
1. **–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ `get_current_regime()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`?** 
   - –í –∫–æ–¥–µ –µ—Å—Ç—å fallback –Ω–∞ `"ranging"` (—Å—Ç—Ä–æ–∫–∞ 238), –µ—Å–ª–∏ regime –Ω–µ –Ω–∞–π–¥–µ–Ω.
   - –ù–æ –≤ EXIT_DECISIONS –º—ã –≤–∏–¥–∏–º `"regime": null` - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ `get_current_regime()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`?

2. **–ì–¥–µ –∏–º–µ–Ω–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è regime –≤ —Ä–µ—à–µ–Ω–∏–µ ExitAnalyzer?**
   - –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–µ—Å—Ç–æ, –≥–¥–µ `regime` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ JSON —Ä–µ—à–µ–Ω–∏–µ.

3. **–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ `regime_obj` —ç—Ç–æ –æ–±—ä–µ–∫—Ç `RegimeType`, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∞?**
   - –í —Å—Ç—Ä–æ–∫–µ 192-195 –µ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: `regime_obj.value.lower()` –∏–ª–∏ `str(regime_obj).lower()`
   - –ù–æ –µ—Å–ª–∏ `regime_obj` —ç—Ç–æ `None`, —Ç–æ `regime` –æ—Å—Ç–∞–Ω–µ—Ç—Å—è `None`?

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, –≥–¥–µ –∏–º–µ–Ω–Ω–æ `regime` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `null` –≤ —Ä–µ—à–µ–Ω–∏—è—Ö.

---

### 5. ‚ùì –ü—Ä–∞–≤–∫–∞ #2 (max_holding_minutes)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `config_futures.yaml` —è –≤–∏–∂—É —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤:
- BTC-USDT: `max_holding_minutes: 40`
- DOGE-USDT: `max_holding_minutes: 25` (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "–£–º–µ–Ω—å—à–µ–Ω–æ —Å 28 –¥–æ 25")
- XRP-USDT: `max_holding_minutes: 14`

**–í–æ–ø—Ä–æ—Å—ã:**
1. **–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ 28 –º–∏–Ω—É—Ç –¥–ª—è ranging?**
   - –í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ "28 –º–∏–Ω—É—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –¥–ª—è ranging"
   - –ù–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —è –Ω–µ –≤–∏–∂—É –µ–¥–∏–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è 28 –¥–ª—è ranging —Ä–µ–∂–∏–º–∞

2. **–ù—É–∂–Ω–æ –ª–∏ —Å–¥–µ–ª–∞—Ç—å `max_holding_minutes` –∑–∞–≤–∏—Å–∏–º—ã–º –æ—Ç —Ä–µ–∂–∏–º–∞?**
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `ranging: 15`, `trending: 45`
   - –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å per-symbol –∑–Ω–∞—á–µ–Ω–∏—è, –Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –∏—Ö –¥–ª—è ranging?

3. **–ì–¥–µ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `max_holding_minutes`?**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ä–µ–∂–∏–º –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

---

### 6. ‚ùì –ü—Ä–∞–≤–∫–∞ #5 (duration 0.0)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∑–∞ 0.0 —Å–µ–∫—É–Ω–¥.

**–í–æ–ø—Ä–æ—Å—ã:**
1. **–≠—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∏–ª–∏ —ç—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –±–∏—Ä–∂–∏ (exchange_side_closure)?**
   - –í `position_closures_2025-12-21.jsonl` –º—ã –≤–∏–¥–∏–º `duration_sec: 0.0` –¥–ª—è exchange_side_closure
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –±–∏—Ä–∂–µ–π

2. **–ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `duration_sec < 30` –¥–ª—è –í–°–ï–• –∑–∞–∫—Ä—ã—Ç–∏–π –∏–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä—É—á–Ω—ã—Ö?**
   - –ï—Å–ª–∏ –±–∏—Ä–∂–∞ –∑–∞–∫—Ä—ã–ª–∞ –ø–æ–∑–∏—Ü–∏—é, —Ç–æ `duration_sec=0.0` —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ

3. **–ì–¥–µ –≤ –∫–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞—Å—á–µ—Ç `duration_sec`?**
   - –í `position_manager.py:6016-6018` –µ—Å—Ç—å —Ä–∞—Å—á–µ—Ç, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `entry_time` –Ω–µ `None`

---

### 7. ‚ùì –ü—Ä–∞–≤–∫–∞ #6 (–ö–æ–º–∏—Å—Å–∏—è)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –∫–æ–º–∏—Å—Å–∏—è 0.29 USD –ø—Ä–∏ —Ä–∞–∑–º–µ—Ä–µ 2.3 SOL (0.23% –≤–º–µ—Å—Ç–æ 0.05%).

**–í–æ–ø—Ä–æ—Å—ã:**
1. **–ì–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ –¥–ª—è SOL-USDT?**
   - –í `position_manager.py` –µ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏
   - –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—à–∏–±–∫–∞

2. **–ö–∞–∫–∞—è —Ñ–æ—Ä–º—É–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π?**
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: `commission = size * price * commission_rate`
   - –ù–æ –≤ –∫–æ–¥–µ —è –≤–∏–∂—É: `commission = position_value * commission_rate * 2` (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)
   - –ì–¥–µ `position_value = size * price`

3. **–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `commission_rate`?**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–æ–π `commission_rate` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è SOL-USDT

---

### 8. ‚ùì –ü—Ä–∞–≤–∫–∞ #8 (Leverage rounding)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ 30x –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ 20x –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã.

**–í–æ–ø—Ä–æ—Å—ã:**
1. **–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ `round_leverage_to_available()` –æ–∫—Ä—É–≥–ª—è–µ—Ç 30x –¥–æ 20x?**
   - –í `futures_client.py:708-730` –µ—Å—Ç—å –ª–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–æ –±–ª–∏–∂–∞–π—à–µ–≥–æ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ leverage –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ OKX

2. **–ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –Ω–∞ OKX –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –Ω–µ—Ç 30x?**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `available_leverages` –¥–ª—è —Å–∏–º–≤–æ–ª–æ–≤

3. **–ì–¥–µ –≤ –∫–æ–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ 30x ‚Üí 20x?**
   - –í `adaptive_leverage.py:132` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `client.round_leverage_to_available()`
   - –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –í–û–ü–†–û–°–´

### 9. ‚ùì –ü—Ä–∞–≤–∫–∞ #9-14 (–§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤, spread_buffer, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π SL/TP)
**–í–æ–ø—Ä–æ—Å—ã:**
1. **–ì–¥–µ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤?**
   - –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ `MIN_ADX_FOR_TREND`, `MIN_SIGNAL_STRENGTH` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

2. **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `spread_buffer` –≤ –∫–æ–Ω—Ñ–∏–≥–µ?**
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è —É–∫–∞–∑—ã–≤–∞–µ—Ç `config_futures.yaml ~—Å—Ç—Ä–æ–∫–∞ 420`
   - –ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ

3. **–ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL/TP –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤?**
   - –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ `exit_params.ranging.sl_percent` –∏ `exit_params.trending.sl_percent`

---

### 10. ‚ùì –ü—Ä–∞–≤–∫–∞ #15-20 (–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
**–í–æ–ø—Ä–æ—Å—ã:**
1. **–ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (#24, #25)?**
   - –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã?

2. **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `performance_tracker.py` (#21)?**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª

3. **–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è `liquidation_guard.py` (#22)?**
   - –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —ç—Ç–æ—Ç —Ñ–∞–π–ª

---

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
1. –ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –º–µ—Å—Ç–∞, –≥–¥–µ `regime` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `null`
2. –ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –º–µ—Å—Ç–∞, –≥–¥–µ `duration_sec=0.0` –¥–ª—è —Ä—É—á–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π
3. –ù–∞–π—Ç–∏ –≤ –ª–æ–≥–∞—Ö –º–µ—Å—Ç–∞, –≥–¥–µ –∫–æ–º–∏—Å—Å–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥
1. –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `max_holding_minutes`
2. –ù–∞–π—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–∏–≥–Ω–∞–ª–æ–≤
3. –ù–∞–π—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL/TP –¥–ª—è —Ä–µ–∂–∏–º–æ–≤

### –®–∞–≥ 3: –í–Ω–µ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∫–∏ (#1-8)
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ (#9-14)
3. –î–æ–±–∞–≤–∏—Ç—å –∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ (#15-20)

---

## ‚úÖ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–ú

**–ì–æ—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ä–∞–∑—É:**
- ‚úÖ –ü—Ä–∞–≤–∫–∞ #3 (Race condition) - –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- ‚úÖ –ü—Ä–∞–≤–∫–∞ #4 (str vs int) - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∞–≤–∫–∞ #7 (Position size cap) - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∞—Å 5%

**–¢—Ä–µ–±—É—é—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è:**
- ‚ùì –ü—Ä–∞–≤–∫–∞ #1 (regime: null) - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
- ‚ùì –ü—Ä–∞–≤–∫–∞ #2 (max_holding_minutes) - –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚ùì –ü—Ä–∞–≤–∫–∞ #5 (duration 0.0) - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
- ‚ùì –ü—Ä–∞–≤–∫–∞ #6 (–ö–æ–º–∏—Å—Å–∏—è) - –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –º–µ—Å—Ç–æ
- ‚ùì –ü—Ä–∞–≤–∫–∞ #8 (Leverage rounding) - –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

---

**–û–∂–∏–¥–∞—é –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤–Ω–µ—Å–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π!**






