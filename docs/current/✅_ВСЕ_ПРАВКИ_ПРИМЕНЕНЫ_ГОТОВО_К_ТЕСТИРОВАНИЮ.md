# ‚úÖ –í–°–ï –ü–†–ê–í–ö–ò –ü–†–ò–ú–ï–ù–ï–ù–´ - –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

**–î–∞—Ç–∞:** 22.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ü–†–ê–í–ö–ò –ü–†–ò–ú–ï–ù–ï–ù–´  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –°–ò–ù–¢–ê–ö–°–ò–° –û–ö, –õ–ò–ù–¢–ï–† –û–ö

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ü–†–ê–í–ö–ò

### ‚úÖ –ü–†–ê–í–ö–ê #1: Partial TP –æ–±—Ö–æ–¥–∏—Ç min_holding

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–ú–µ—Ç–æ–¥:** `_check_tp_only()`  
**–°—Ç—Ä–æ–∫–∞:** ~1358

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ min_holding –ü–ï–†–ï–î Partial TP
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ TSL –∏–∑ orchestrator
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è extend_time_on_profit
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç Partial TP –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è < min_holding

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–∑–∏—Ü–∏–∏ –ù–ï –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ Partial TP —Ä–∞–Ω—å—à–µ 40 –º–∏–Ω—É—Ç ‚úÖ

---

### ‚úÖ –ü–†–ê–í–ö–ê #2: Loss-cut –æ–±—Ö–æ–¥–∏—Ç min_holding

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`  
**–ú–µ—Ç–æ–¥:** `should_close_position()`  
**–°—Ç—Ä–æ–∫–∞:** ~462

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π 2x loss_cut –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ù–ï–ú–ï–î–õ–ï–ù–ù–û (–∑–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ)
- ‚úÖ –û–±—ã—á–Ω—ã–π loss_cut –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï min_holding
- ‚úÖ –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è < min_holding - loss_cut –ë–õ–û–ö–ò–†–£–ï–¢–°–Ø
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ loss_cut

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–∑–∏—Ü–∏–∏ –ù–ï –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ loss_cut —Ä–∞–Ω—å—à–µ 40 –º–∏–Ω—É—Ç ‚úÖ
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–±—ã—Ç–∫–∏ (2x) –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ù–ï–ú–ï–î–õ–ï–ù–ù–û ‚úÖ

---

### ‚úÖ –ü–†–ê–í–ö–ê #3: –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–ú–µ—Ç–æ–¥:** `_execute_signal_from_price()`  
**–°—Ç—Ä–æ–∫–∞:** ~3251

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –æ—Ä–¥–µ—Ä–∞ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º False
- ‚úÖ –ï—Å–ª–∏ –æ—Ä–¥–µ—Ä –≤ —Å—Ç–∞—Ç—É—Å–µ `pending/live/partially_filled` - –ù–ï —Å—á–∏—Ç–∞–µ–º –ø—Ä–æ–≤–∞–ª–æ–º
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ–º True (–ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω, –∂–¥–µ–º –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –±—É–¥–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ WebSocket

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è ‚úÖ
- –ë–æ—Ç –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ ‚úÖ

---

### ‚úÖ –ü–†–ê–í–ö–ê #4: –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TSL

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–ú–µ—Ç–æ–¥:** `_update_trailing_stop_loss()`  
**–°—Ç—Ä–æ–∫–∞:** ~4968

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç TSL –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ TSL
- ‚úÖ –ü–æ–ª—É—á–∞–µ—Ç entry_price –∏ side –∏–∑ –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç `_initialize_trailing_stop()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞—â–∏—â–µ–Ω—ã TSL ‚úÖ
- –ù–µ—Ç –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ –∑–∞—â–∏—Ç—ã ‚úÖ

---

### ‚úÖ –ü–†–ê–í–ö–ê #5: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—ã –æ—Ä–¥–µ—Ä–æ–≤

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–ú–µ—Ç–æ–¥:** `_monitor_limit_orders()`  
**–°—Ç—Ä–æ–∫–∞:** ~2216

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–º–µ–Ω—ã
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –∑–∞–º–µ–Ω—ã
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (symbol, side, size, wait_time, order_id)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∏–¥–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∑–∞–º–µ–Ω–∞ –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π ‚úÖ
- –í–∏–¥–Ω–æ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫ ‚úÖ

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| # | –ü—Ä–∞–≤–∫–∞ | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª | –í–ª–∏—è–Ω–∏–µ |
|---|--------|--------|------|---------|
| 1 | Partial TP + min_holding | ‚úÖ | `position_manager.py` | –ü–æ–∑–∏—Ü–∏–∏ 40+ –º–∏–Ω |
| 2 | Loss-cut + min_holding | ‚úÖ | `trailing_stop_loss.py` | –ü–æ–∑–∏—Ü–∏–∏ 40+ –º–∏–Ω |
| 3 | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–Ω—ã—Ö | ‚úÖ | `orchestrator.py` | –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ |
| 4 | –ê–≤—Ç–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TSL | ‚úÖ | `orchestrator.py` | –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã |
| 5 | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—ã | ‚úÖ | `orchestrator.py` | –í–∏–¥–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç |

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å:
- ‚úÖ `position_manager.py` - –û–ö
- ‚úÖ `trailing_stop_loss.py` - –û–ö
- ‚úÖ `orchestrator.py` - –û–ö

### –õ–∏–Ω—Ç–µ—Ä:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫

### –ò–º–ø–æ—Ä—Ç—ã:
- ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

---

## üéØ –ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **Partial TP –æ–±—Ö–æ–¥–∏—Ç min_holding** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
   - –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç min_holding –ø–µ—Ä–µ–¥ Partial TP
   - –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è 40+ –º–∏–Ω—É—Ç

2. **Loss-cut –æ–±—Ö–æ–¥–∏—Ç min_holding** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
   - –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç min_holding –ø–µ—Ä–µ–¥ loss_cut
   - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É–±—ã—Ç–∫–∏ (2x) –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ù–ï–ú–ï–î–õ–ï–ù–ù–û

### –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

3. **–õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
   - –¢–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç pending –æ—Ä–¥–µ—Ä–∞
   - –ù–µ —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–æ–≤–∞–ª–æ–º –µ—Å–ª–∏ –æ—Ä–¥–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω

4. **TSL –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π
   - –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã

5. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—ã** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
   - –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—Ö–∞ –∏ –æ—à–∏–±–æ–∫
   - –í–∏–¥–Ω–æ –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## üöÄ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

**–í—Å–µ –ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ—à–∏–±–æ–∫
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è 40+ –º–∏–Ω—É—Ç ‚úÖ
- Partial TP –Ω–µ –æ–±—Ö–æ–¥–∏—Ç min_holding ‚úÖ
- Loss-cut –Ω–µ –æ–±—Ö–æ–¥–∏—Ç min_holding ‚úÖ
- –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è ‚úÖ
- –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã TSL ‚úÖ

---

## üìã –ß–¢–û –ü–†–û–í–ï–†–ò–¢–¨ –ü–†–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ò

### 1. –ü–æ–∑–∏—Ü–∏–∏ –¥–µ—Ä–∂–∞—Ç—Å—è 40+ –º–∏–Ω—É—Ç:
- [ ] –û—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω–∞ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–∞–Ω—å—à–µ 40 –º–∏–Ω—É—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Partial TP –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ 40 –º–∏–Ω—É—Ç
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ loss_cut –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –¥–æ 40 –º–∏–Ω—É—Ç

### 2. –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞:
- [ ] –†–∞–∑–º–µ—Å—Ç–∏—Ç—å –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏

### 3. TSL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–º–µ—é—Ç TSL
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–ª—É—á–∞—é—Ç TSL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSV —Ñ–∞–π–ª —Å debug –ª–æ–≥–∞–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—ã –æ—Ä–¥–µ—Ä–æ–≤

---

## ‚úÖ –°–¢–ê–¢–£–°

**–í—Å–µ –ø—Ä–∞–≤–∫–∏:** ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–´  
**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –ü–†–û–ô–î–ï–ù–ê  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

---

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!** üöÄ


