# üîç –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –¶–ï–ü–û–ß–ö–ò –û–†–î–ï–†–û–í –ò –û–ö–†–£–ì–õ–ï–ù–ò–Ø

**–î–∞—Ç–∞:** 2025-11-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–º–µ–Ω—å—à–∞–ª—Å—è –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

---

## üìä –¶–ï–ü–û–ß–ö–ê –í–´–ó–û–í–û–í

### 1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞ (`_check_for_signals`)
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª —Å `symbol`, `side`, `price`, `type`

### 2. –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (`_calculate_position_size`)
**–í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `balance`: –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
- `price`: –¶–µ–Ω–∞ –∏–∑ —Å–∏–≥–Ω–∞–ª–∞
- `signal`: –¢–æ—Ä–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª

**–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å—á–µ—Ç–∞:**
1. –ü–æ–ª—É—á–∞–µ—Ç –±–∞–ª–∞–Ω—Å–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å (`_get_balance_profile`)
2. –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (`_get_regime_params`)
3. –ü–æ–ª—É—á–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ (`_get_adaptive_risk_params`)
4. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏ —Ä–µ–∂–∏–º–∞
5. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (max margin percent, max loss per trade, min/max margin USD)
6. **‚úÖ –ù–û–í–û–ï: –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `position_size` (–≤ –º–æ–Ω–µ—Ç–∞—Ö) –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `size_in_contracts = position_size / ct_val`
   - –û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ `lotSz`: `rounded_size_in_contracts = round_to_step(size_in_contracts, lot_sz)`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º: `if rounded_size_in_contracts < min_sz: rounded_size_in_contracts = min_sz`
   - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã: `real_position_size = rounded_size_in_contracts * ct_val`
   - –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é –º–∞—Ä–∂—É: `real_margin_usd = real_notional_usd / leverage`
   - **‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ >= min_margin_usd**
   - –û–±–Ω–æ–≤–ª—è–µ—Ç `position_size`, `notional_usd`, –∏ `margin_usd` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

**–í—ã—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `position_size`: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –º–æ–Ω–µ—Ç–∞—Ö (—É–∂–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ (`_execute_signal_from_price`)
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í—ã–∑—ã–≤–∞–µ—Ç `_calculate_position_size` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `position_size`
2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `position_size > 0`
3. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `size_usd = position_size * price` (notional, –Ω–æ–º–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å)
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `MaxSizeLimiter.can_open_position(symbol, size_usd)`
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `FundingRateMonitor.is_funding_favorable(signal["side"])`
6. –ü–µ—Ä–µ–¥–∞–µ—Ç `position_size` –≤ `order_executor.execute_signal(signal, position_size)`

### 4. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ (`order_executor.execute_signal`)
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª —á–µ—Ä–µ–∑ `SlippageGuard.validate_order_before_placement`
2. –í—ã–∑—ã–≤–∞–µ—Ç `_execute_order(signal, position_size)`
3. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞ (`market`, `limit`, `oco`)
4. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ü–µ–Ω—É –¥–ª—è –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ (`_calculate_limit_price`)
5. –í—ã–∑—ã–≤–∞–µ—Ç `_place_market_order` –∏–ª–∏ `_place_limit_order` —Å `position_size`

### 5. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ (`client.place_futures_order`)
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (`ctVal`, `lotSz`, `minSz`)
2. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `size` (–≤ –º–æ–Ω–µ—Ç–∞—Ö) –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã: `size_in_contracts_value = size / ct_val`
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º: `if size_in_contracts_value < min_sz: error`
4. –û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ `lotSz`: `rounded_size = round_to_step(size_in_contracts_value, lot_sz)`
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä >= min_sz
6. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ –±–∏—Ä–∂—É
7. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä –Ω–∞ –±–∏—Ä–∂—É —á–µ—Ä–µ–∑ API

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –£—á–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ `_calculate_position_size`
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —É–º–µ–Ω—å—à–µ–Ω–∏—é —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –Ω–∞ –±–∏—Ä–∂–µ.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ `lotSz`, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º `minSz`, –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `min_margin_usd`
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

**–ö–æ–¥:**
```python
# ‚úÖ –ù–û–í–û–ï: –£—á–∏—Ç—ã–≤–∞–µ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
instrument_details = await self.client.get_instrument_details(symbol)
ct_val = instrument_details.get("ctVal", 0.01)
lot_sz = instrument_details.get("lotSz", 0.01)
min_sz = instrument_details.get("minSz", 0.01)

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
size_in_contracts = position_size / ct_val

# –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ lotSz (–∫–∞–∫ –≤ place_futures_order)
rounded_size_in_contracts = round_to_step(size_in_contracts, lot_sz)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
if rounded_size_in_contracts < min_sz:
    rounded_size_in_contracts = min_sz

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã (—Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)
real_position_size = rounded_size_in_contracts * ct_val

# –í—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—É—é –Ω–æ–º–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
real_notional_usd = real_position_size * price
real_margin_usd = real_notional_usd / leverage

# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ >= min_margin_usd
if real_margin_usd < min_margin_usd:
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ –º–∏–Ω–∏–º—É–º–∞
    real_margin_usd = min_margin_usd
    real_notional_usd = real_margin_usd * leverage
    real_position_size = real_notional_usd / price
    
    # –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö –∏ –æ–∫—Ä—É–≥–ª—è–µ–º
    real_size_in_contracts = real_position_size / ct_val
    real_rounded_size_in_contracts = round_to_step(real_size_in_contracts, lot_sz)
    if real_rounded_size_in_contracts < min_sz:
        real_rounded_size_in_contracts = min_sz
    real_position_size = real_rounded_size_in_contracts * ct_val
    real_notional_usd = real_position_size * price
    real_margin_usd = real_notional_usd / leverage

# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
position_size = real_position_size
notional_usd = real_notional_usd
margin_usd = real_margin_usd
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥ —Å—Ç–∞—Ç—å –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è >= min_margin_usd
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

---

## üìà –í–õ–ò–Ø–ù–ò–ï –ù–ê –†–ê–°–ß–ï–¢–´

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. `position_size` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
2. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ –±–∏—Ä–∂—É —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∞–ª—Å—è –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
3. –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –±—ã–ª–∞ –º–µ–Ω—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–π
4. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥ —Å—Ç–∞—Ç—å –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. `position_size` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
2. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
3. –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞—Å—á–µ—Ç–Ω–æ–π
4. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### 1. –¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
- –ù–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

### 2. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–∏–Ω–∏–º—É–º–∞–º
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –≤—Å–µ–≥–¥–∞ >= min_margin_usd

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ –º–∏–Ω–∏–º—É–º–∞

---

## üîç –ü–†–û–í–ï–†–ö–ê

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ `lotSz`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º `minSz`
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `min_margin_usd`
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ `_calculate_position_size` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–º–µ—Ä—É –≤ `place_futures_order`
- –õ–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

---

## üìù –í–´–í–û–î–´

1. **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É—á—Ç–µ–Ω–æ:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
2. **–ú–∏–Ω–∏–º—É–º —Å–æ–±–ª—é–¥–µ–Ω:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
3. **–¢–æ—á–Ω–æ—Å—Ç—å:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ–± –æ–∫—Ä—É–≥–ª–µ–Ω–∏–∏
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–î–∞—Ç–∞:** 2025-11-12


