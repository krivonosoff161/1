# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –õ–ò–ú–ò–¢–û–í –¶–ï–ù–´ OKX

**–î–∞—Ç–∞:** 2025-11-12  
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è –±–∏—Ä–∂–µ–π —Å –æ—à–∏–±–∫–æ–π 51006

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

### –°–∏–º–ø—Ç–æ–º—ã:

```
ERROR | OKX API error: {'code': '1', 'data': [{'clOrdId': '', 'ordId': '', 'sCode': '51006', 
'sMsg': 'Order price is not within the price limit (max buy price: 103,155.9, min sell price: 101,133.2)', 
'tag': '', 'ts': '1762974430355'}], 'inTime': '1762974430355232', 'msg': 'All operations failed', 
'outTime': '1762974430355526'}
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ë–æ—Ç –ø—ã—Ç–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä SELL –ø–æ —Ü–µ–Ω–µ 101034.86
- –ë–∏—Ä–∂–∞ OKX –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –æ—Ä–¥–µ—Ä: min sell price = 101,133.2
- –¶–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞ (101034.86) –Ω–∏–∂–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è SELL (101,133.2)
- –†–∞–∑–Ω–∏—Ü–∞: -98.34 (—Ü–µ–Ω–∞ —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è)

---

## üîç –ü–†–ò–ß–ò–ù–ê

### –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã: ¬±5% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
   - –ò–ª–∏ ¬±2% –æ—Ç –ª—É—á—à–∏—Ö —Ü–µ–Ω –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
   - –ù–æ —Ä–µ–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã –±–∏—Ä–∂–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –¥—Ä—É–≥–∏–º–∏!

2. **–†–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã:**
   - –î–ª—è SELL: `current_price * 0.9995` (0.05% –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã)
   - –î–ª—è BUY: `current_price * 1.0005` (0.05% –≤—ã—à–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã)

3. **–ü—Ä–æ–±–ª–µ–º–∞:**
   - –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π
   - –õ–∏–º–∏—Ç—ã –±–∏—Ä–∂–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º–∏, —á–µ–º —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ
   - Offset 0.05% –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–º
   - –ë–∏—Ä–∂–∞ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –æ—Ä–¥–µ—Ä —Å –æ—à–∏–±–∫–æ–π 51006

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. ‚úÖ –£–ª—É—á—à–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ü–µ–Ω—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü–æ–ª—É—á–∞–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (best bid/ask)
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã: ¬±1% –æ—Ç –ª—É—á—à–∏—Ö —Ü–µ–Ω (–≤–º–µ—Å—Ç–æ ¬±2%)
- Fallback: ¬±2% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã (–≤–º–µ—Å—Ç–æ ¬±5%)
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º best_bid –∏ best_ask –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞

**–ö–æ–¥:**
```python
# ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ü–æ–ª—É—á–∞–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (—Å–∞–º—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)
orderbook_url = f"https://www.okx.com/api/v5/market/books?instId={inst_id}&sz=5"
# –ë–µ—Ä–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
best_ask = float(asks[0][0])
best_bid = float(bids[0][0])
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã (¬±1% –æ—Ç –ª—É—á—à–∏—Ö —Ü–µ–Ω)
max_buy_price = best_ask * 1.01  # +1% –æ—Ç best ask
min_sell_price = best_bid * 0.99  # -1% –æ—Ç best bid
```

**–§–∞–π–ª:** `src/clients/futures_client.py:306-399`

---

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω —Ä–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (best bid/ask) –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
- –î–ª—è SELL: `best_bid * 0.999` (0.1% –Ω–∏–∂–µ best bid)
- –î–ª—è BUY: `best_ask * 1.001` (0.1% –≤—ã—à–µ best ask)
- –£–≤–µ–ª–∏—á–µ–Ω offset –¥–æ 0.1% (–≤–º–µ—Å—Ç–æ 0.05%)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Ü–µ–Ω—ã

**–ö–æ–¥:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
if side.lower() == "buy":
    # –î–ª—è –ø–æ–∫—É–ø–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º best ask (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏) + offset
    if best_ask > 0:
        limit_price = best_ask * 1.001  # +0.1% –æ—Ç best ask
else:  # sell
    # –î–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º best bid (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏) - offset
    if best_bid > 0:
        limit_price = best_bid * 0.999  # -0.1% –æ—Ç best bid
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:208-316`

---

### 3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤ –∏–∑ –æ—à–∏–±–∫–∏ API

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç—ã –∏–∑ –æ—à–∏–±–∫–∏ API (51006)
- –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –ª–∏–º–∏—Ç—ã, –ø—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É
- –î–ª—è SELL: `min_sell_price * 1.001` (0.1% –≤—ã—à–µ –ª–∏–º–∏—Ç–∞)
- –î–ª—è BUY: `max_buy_price * 0.999` (0.1% –Ω–∏–∂–µ –ª–∏–º–∏—Ç–∞)
- –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ—Ä–¥–µ—Ä —Å —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π
- –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –∫–∞–∫ fallback

**–ö–æ–¥:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç—ã –∏–∑ –æ—à–∏–±–∫–∏ API (51006)
if error_data and len(error_data) > 0:
    s_msg = error_data[0].get("sMsg", "")
    # –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç—ã –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è: "Order price is not within the price limit (max buy price: 103,155.9, min sell price: 101,133.2)"
    max_buy_match = re.search(r"max buy price:\s*([\d,]+\.?\d*)", s_msg, re.IGNORECASE)
    min_sell_match = re.search(r"min sell price:\s*([\d,]+\.?\d*)", s_msg, re.IGNORECASE)
    
    if max_buy_match:
        parsed_max_buy = float(max_buy_match.group(1).replace(",", ""))
    if min_sell_match:
        parsed_min_sell = float(min_sell_match.group(1).replace(",", ""))

# ‚úÖ –ù–û–í–û–ï: –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –ª–∏–º–∏—Ç—ã –∏–∑ –æ—à–∏–±–∫–∏, –ø—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É
if side.lower() == "sell" and parsed_min_sell:
    corrected_price = parsed_min_sell * 1.001  # 0.1% –≤—ã—à–µ –ª–∏–º–∏—Ç–∞
    # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ—Ä–¥–µ—Ä —Å —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π
    retry_result = await self.client.place_futures_order(...)
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:387-484`

---

### 4. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–¥ –æ—à–∏–±–∫–∏ 51006
- –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç—ã –∏–∑ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É
- –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –∫–∞–∫ fallback

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:411-484`

---

## üìä –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´

### –ü—Ä–∏–º–µ—Ä 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SELL –æ—Ä–¥–µ—Ä–∞

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Symbol: BTC-USDT
- Side: SELL
- Best bid: 101000
- Best ask: 101050
- Current price: 101025

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞: 101025 * 0.9995 = 100974.49 ‚ùå (–Ω–∏–∂–µ –ª–∏–º–∏—Ç–∞!)
- –õ–∏–º–∏—Ç—ã: ¬±5% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã (–Ω–µ—Ç–æ—á–Ω—ã–µ)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞: 101000 * 0.999 = 100899 ‚úÖ (–∏—Å–ø–æ–ª—å–∑—É–µ–º best bid)
- –õ–∏–º–∏—Ç—ã: best_bid * 0.99 = 99990 (min_sell), best_ask * 1.01 = 102060.5 (max_buy)
- –ü—Ä–æ–≤–µ—Ä–∫–∞: 100899 >= 99990 ‚Üí TRUE ‚úÖ

---

### –ü—Ä–∏–º–µ—Ä 2: –û—à–∏–±–∫–∞ 51006 (SELL)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –¶–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞: 101034.86
- –û—à–∏–±–∫–∞: min sell price = 101,133.2

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –û—Ä–¥–µ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è ‚ùå
- Fallback –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä ‚úÖ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç –∏–∑ –æ—à–∏–±–∫–∏: min_sell = 101,133.2
- –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞: 101,133.2 * 1.001 = 101,234.33
- –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –æ—Ä–¥–µ—Ä —Å —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω–æ–π ‚úÖ
- –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –∫–∞–∫ fallback ‚úÖ

---

## üîß –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï

### 1. `get_price_limits()` –≤ `futures_client.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ü–æ–ª—É—á–∞–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã: ¬±1% –æ—Ç –ª—É—á—à–∏—Ö —Ü–µ–Ω
- –í–æ–∑–≤—Ä–∞—â–∞–µ–º best_bid –∏ best_ask
- Fallback: ¬±2% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã

### 2. `_calculate_limit_price()` –≤ `order_executor.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ–º best_bid/best_ask –≤–º–µ—Å—Ç–æ current_price
- –£–≤–µ–ª–∏—á–µ–Ω offset –¥–æ 0.1% (–≤–º–µ—Å—Ç–æ 0.05%)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### 3. `_place_limit_order()` –≤ `order_executor.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤ –∏–∑ –æ—à–∏–±–∫–∏ API
- –ü—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É –ø—Ä–∏ –æ—à–∏–±–∫–µ 51006
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω fallback –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä

---

## üìã –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

1. ‚úÖ **–£–ª—É—á—à–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤:** –ò—Å–ø–æ–ª—å–∑—É–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
2. ‚úÖ **–£–ª—É—á—à–µ–Ω —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω—ã:** –ò—Å–ø–æ–ª—å–∑—É–µ–º best_bid/best_ask –≤–º–µ—Å—Ç–æ current_price
3. ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω offset:** 0.1% –≤–º–µ—Å—Ç–æ 0.05%
4. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤:** –ü–∞—Ä—Å–∏–º –ª–∏–º–∏—Ç—ã –∏–∑ –æ—à–∏–±–∫–∏ API –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö
5. ‚úÖ **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –ü—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É –ø–µ—Ä–µ–¥ fallback

---

## üîß –ü–†–ò–û–†–ò–¢–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

1. ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –£–ª—É—á—à–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ü–µ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ª—É—á—à–∏–µ —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞)
2. ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –£–ª—É—á—à–µ–Ω —Ä–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É–µ–º best_bid/best_ask)
3. ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï:** –£–≤–µ–ª–∏—á–µ–Ω offset –¥–æ 0.1% (–±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)
4. ‚úÖ **–í–ê–ñ–ù–û:** –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤ –∏–∑ –æ—à–∏–±–∫–∏ API (51006)
5. ‚úÖ **–í–ê–ñ–ù–û:** –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ø—Ä–æ–±—É–µ–º —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É)

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞** –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ ‚Äî –æ—à–∏–±–æ–∫ –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –Ω–æ–≤—ã–µ –æ—Ä–¥–µ—Ä–∞** ‚Äî –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É** –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ 51006 ‚Äî —Ü–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–£–≤–µ–ª–∏—á–∏—Ç—å offset –¥–æ 0.2%**, –µ—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä–∏—Ç—Å—è (–±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤:**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–∏–º–∏—Ç—ã –≤ –∫–µ—à –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è (1-2 —Å–µ–∫—É–Ω–¥—ã)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π offset:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏–π offset –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–∏–π offset –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–æ–≤:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–æ–≤
   - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –æ—à–∏–±–æ–∫ 51006

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:**
   - –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API (—Å—Ç–∞–∫–∞–Ω + —Ç–∏–∫–µ—Ä)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSocket –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

