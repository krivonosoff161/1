# üîß –§–∏–Ω–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (13.10.2025)

## ‚ùå –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏:

### 1Ô∏è‚É£ **TimeSessionManager: –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã–µ —á–∞—Å—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏**
**–§–∞–π–ª:** `src/filters/time_session_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö —á–∞—Å–æ–≤ `[22, 23, 0, 1, 2, 3, 4, 5]` –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å **–î–û** –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–∑–∏–∞—Ç—Å–∫–∞—è —Å–µ—Å—Å–∏—è (0-9 UTC) –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞—Å—å –≤ —á–∞—Å—ã 0-5!

### 2Ô∏è‚É£ **–û—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–∞ –≤ _can_trade()**
**–§–∞–π–ª:** `src/strategies/scalping.py`, —Å—Ç—Ä–æ–∫–∞ 1081  
**–ü—Ä–æ–±–ª–µ–º–∞:** `return False` —Å—Ç–æ—è–ª **–í–ù–ï** –±–ª–æ–∫–∞ `if`, –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –≤—Å–µ–≥–¥–∞!  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ False –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏

### 3Ô∏è‚É£ **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –¥–≤—É—Ö —Å–∏—Å—Ç–µ–º –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏**
**–§–∞–π–ª:** `src/strategies/scalping.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∏ –î–í–ï —Å–∏—Å—Ç–µ–º—ã:
- –°—Ç–∞—Ä–∞—è –≤ `_can_trade()` (—Å—Ç—Ä–æ–∫–∏ 1053-1081)
- –ù–æ–≤–∞—è TimeSessionManager

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ª–æ–≥–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫

---

## ‚úÖ –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 1: TimeSessionManager - –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–∞ –ª–æ–≥–∏–∫–∞

**–§–∞–π–ª:** `src/filters/time_session_manager.py`  
**–°—Ç—Ä–æ–∫–∏:** 171-217

**–ë–´–õ–û:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö
# 2. ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö —á–∞—Å–æ–≤ (–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ 0-5 UTC!)
# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
```

**–°–¢–ê–õ–û:**
```python
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–Ω—ã—Ö
# 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (asian/european/american)
# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö —á–∞—Å–æ–≤ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ù–ï–¢ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π)
```

**–ö–æ–¥:**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (–µ—Å–ª–∏ –Ω–µ —Ç—Ä–µ–±—É–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è)
active_sessions = self.get_active_sessions(current_time)
if active_sessions:
    # –ï—Å–ª–∏ –µ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ - —Ä–∞–∑—Ä–µ—à–∞–µ–º —Ç–æ—Ä–≥–æ–≤–ª—é
    session_names = [s.name for s in active_sessions]
    logger.debug(
        f"‚úÖ Trading allowed: Active sessions {session_names} ({current_hour}:00 UTC)"
    )
    return True

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∏–∑–∫–æ–ª–∏–∫–≤–∏–¥–Ω—ã—Ö —á–∞—Å–æ–≤ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π)
if self.config.avoid_low_liquidity_hours:
    if current_hour in self.config.low_liquidity_hours:
        logger.debug(
            f"‚è∞ Trading blocked: Low liquidity hour ({current_hour}:00 UTC)"
        )
        return False
```

---

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 2: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–∞ –≤ _can_trade()

**–§–∞–π–ª:** `src/strategies/scalping.py`  
**–°—Ç—Ä–æ–∫–∏:** 1067-1081

**–ë–´–õ–û:**
```python
else:
    in_session = any(...)
    logger.debug(...)
    if not in_session:
        logger.debug(...)
return False  # ‚ùå –í–°–ï–ì–î–ê –í–´–ü–û–õ–ù–Ø–ï–¢–°–Ø!
```

**–°–¢–ê–õ–û:**
```python
else:
    in_session = any(...)
    logger.debug(...)
    if not in_session:
        logger.debug(...)
        return False  # ‚úÖ –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ù–ï –≤ —Å–µ—Å—Å–∏–∏
```

---

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3: –û—Ç–∫–ª—é—á–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ session filtering

**–§–∞–π–ª:** `src/strategies/scalping.py`  
**–°—Ç—Ä–æ–∫–∏:** 1053-1057

**–ë–´–õ–û:**
```python
# ‚è∞ –£–õ–£–ß–®–ï–ù–ò–ï 8: Session filtering
if self.session_filtering_enabled:
    # ... 28 —Å—Ç—Ä–æ–∫ —Å—Ç–∞—Ä–æ–π –ª–æ–≥–∏–∫–∏
    return False
```

**–°–¢–ê–õ–û:**
```python
# ‚è∞ –£–õ–£–ß–®–ï–ù–ò–ï 8: Session filtering - –ó–ê–ú–ï–ù–ï–ù–û –ù–ê TimeSessionManager
# –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ TimeSessionManager –≤ _generate_signal()
# –°—Ç–∞—Ä–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
# if self.session_filtering_enabled:
#     ... —Å—Ç–∞—Ä—ã–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω
```

**–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û** TimeSessionManager –∏–∑ `src/filters/time_session_manager.py`

---

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –£–ª—É—á—à–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ATR

**–§–∞–π–ª:** `src/indicators.py`  
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- –î–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ ATR = 0
- WARNING –ª–æ–≥–∏ —Å –ø—Ä–∏—á–∏–Ω–∞–º–∏
- –ü—Ä–∏–º–µ—Ä—ã —Ü–µ–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–§–∞–π–ª:** `src/strategies/scalping.py`  
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- WARNING –ø—Ä–∏ ATR = 0 —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
- –ü–æ–∫–∞–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ —Ü–µ–Ω –≤ –ª–æ–≥–∞—Ö

---

## üìä –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ –ª–æ–≥–∞—Ö:

### –†–ê–ù–¨–®–ï (03:00 UTC):
```
‚ùå Trading blocked: Low liquidity hour (3:00 UTC)
```
–ò–õ–ò
```
‚úÖ Session check - Hour: 3, In session: True
‚ùå Cannot trade (rate limit or restrictions)
```

### –°–ï–ô–ß–ê–° (03:00 UTC):
```
‚úÖ Session check - Hour: 3, In session: True
‚úÖ All checks passed, can trade
üìà SOL-USDT Indicators: RSI=30.03, ATR=0.370714
üìä SOL-USDT Scoring: LONG 6/12 (50.0%) | SHORT 4/12 (33.3%)
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

### ‚úÖ **–ê–∑–∏–∞—Ç—Å–∫–∞—è —Å–µ—Å—Å–∏—è (0-9 UTC)** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!
### ‚úÖ **–ï–≤—Ä–æ–ø–µ–π—Å–∫–∞—è —Å–µ—Å—Å–∏—è (7-16 UTC)** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!
### ‚úÖ **–ê–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∞—è —Å–µ—Å—Å–∏—è (13-22 UTC)** - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é!
### ‚úÖ **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –º–µ–∂–¥—É —Å–∏—Å—Ç–µ–º–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏!
### ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** ATR = 0!

---

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   stop_bot.bat
   start_bot.bat
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (03:00-05:00 UTC):**
   - –î–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å: `‚úÖ All checks passed, can trade`
   - –ù–ï –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å: `‚ùå Trading blocked: Low liquidity hour`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ—Ä–≥–æ–≤–ª—é:**
   - –í—Å–µ 3 —Å–µ—Å—Å–∏–∏ –¥–æ–ª–∂–Ω—ã —Ç–æ—Ä–≥–æ–≤–∞—Ç—å
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ –≤ —á–∞—Å—ã 22-23 UTC (–º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏)

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. ‚úÖ `src/filters/time_session_manager.py` - –ª–æ–≥–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
2. ‚úÖ `src/strategies/scalping.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–∞ + –æ—Ç–∫–ª—é—á–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞
3. ‚úÖ `src/indicators.py` - —É–ª—É—á—à–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ATR

---

## üîç –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.yaml):

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:
```yaml
time_filter:
  trade_asian_session: true       # 00:00-09:00 UTC ‚úÖ
  trade_european_session: true    # 07:00-16:00 UTC ‚úÖ
  trade_american_session: true    # 13:00-22:00 UTC ‚úÖ
  prefer_overlaps: false          # –¢–æ—Ä–≥–æ–≤–∞—Ç—å –≤—Å–µ —Å–µ—Å—Å–∏–∏
  avoid_low_liquidity_hours: true # –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
  avoid_weekends: true            # –ù–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –≤ –≤—ã—Ö–æ–¥–Ω—ã–µ
```

---

## üéâ –ò—Ç–æ–≥–æ:

### –ü—Ä–æ–±–ª–µ–º—ã –†–ï–®–ï–ù–´:
1. ‚úÖ –ê–∑–∏–∞—Ç—Å–∫–∞—è —Å–µ—Å—Å–∏—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
2. ‚úÖ –û—à–∏–±–∫–∞ –æ—Ç—Å—Ç—É–ø–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞
3. ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å–∏—Å—Ç–µ–º —É—Å—Ç—Ä–∞–Ω—ë–Ω
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ATR

### –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!

**–î–∞—Ç–∞:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–ù–ï–°–ï–ù–´


