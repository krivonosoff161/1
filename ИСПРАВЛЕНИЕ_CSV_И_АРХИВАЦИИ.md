# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CSV –ò –ê–†–•–ò–í–ê–¶–ò–ò –õ–û–ì–û–í

**–î–∞—Ç–∞:** 2025-12-22  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

---

## üéØ –ü–†–û–ë–õ–ï–ú–´

1. ‚ùå **–ü–∞–ø–∫–∏ debug –∏ structured –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–∏—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é** –≤ –∞—Ä—Ö–∏–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ `clean_logs.bat`
   - –ü–µ—Ä–µ–Ω–æ—Å–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ CSV –∏–∑ –∫–æ—Ä–Ω—è debug (–Ω–µ –ø–æ–¥–ø–∞–ø–∫–∏)
   - –ü–µ—Ä–µ–Ω–æ—Å–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ JSON –∏–∑ structured (–Ω–µ JSONL —Ñ–∞–π–ª—ã)

2. ‚ùå **CSV —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏**:
   - `logs/trades_YYYY-MM-DD.csv`
   - `logs/orders_YYYY-MM-DD.csv`
   - `logs/signals_YYYY-MM-DD.csv`
   - `logs/positions_open_YYYY-MM-DD.csv`
   - `logs/futures/debug/debug_YYYYMMDD_HHMMSS.csv`
   - –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤

3. ‚ùå **CSV —Ñ–∞–π–ª—ã –Ω–µ —É–¥–∞–ª—è–ª–∏—Å—å** –ø—Ä–∏ —Å—É—Ç–æ—á–Ω–æ–π –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

---

## ‚úÖ –†–ï–®–ï–ù–ò–Ø

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `clean_logs.bat`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å –ø–∞–ø–æ–∫ `debug` –∏ `structured` –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Å–æ –≤—Å–µ–º–∏ –ø–æ–¥–ø–∞–ø–∫–∞–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `robocopy` –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –ø–∞–ø–æ–∫ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–µ—Ä–µ–Ω–æ—Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ CSV —Ñ–∞–π–ª–∞ `all_data_*.csv`

**–ö–æ–¥:**
```batch
REM ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–µ—Ä–µ–Ω–æ—Å–∏–º –ø–∞–ø–∫–∏ debug –∏ structured –ø–æ–ª–Ω–æ—Å—Ç—å—é (—Å–æ –≤—Å–µ–º–∏ –ø–æ–¥–ø–∞–ø–∫–∞–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏)
call :move_folder logs\futures\debug logs_futures_debug
call :move_folder logs\futures\structured logs_futures_structured

REM ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–µ—Ä–µ–Ω–æ—Å–∏–º –≤—Å–µ CSV —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–∞—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π)
call :move_pattern logs\all_data_*.csv
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ `debug` (–≤–∫–ª—é—á–∞—è `exit_decisions/`) –∏ `structured` (–≤–∫–ª—é—á–∞—è JSONL) –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤.

---

### 2. –û–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—Å–µ CSV –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/strategies/scalping/spot/performance_tracker.py`
- `src/strategies/modules/debug_logger.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### PerformanceTracker:
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç—Å—è –æ–¥–∏–Ω –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV —Ñ–∞–π–ª: `logs/all_data_YYYY-MM-DD.csv`
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª —Å –ø–æ–ª–µ–º `record_type`:
  - `trades` - –∑–∞–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏
  - `positions_open` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
  - `orders` - –æ—Ä–¥–µ—Ä–∞
  - `signals` - —Å–∏–≥–Ω–∞–ª—ã
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°—Ç–∞—Ä—ã–µ CSV —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

#### DebugLogger:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV —Ñ–∞–π–ª `logs/all_data_YYYY-MM-DD.csv`
- ‚úÖ –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å `record_type = "debug"`
- ‚úÖ –°—Ç–∞—Ä—ã–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ CSV —Ñ–∞–π–ª—ã –±–æ–ª—å—à–µ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ CSV:**
```csv
record_type,timestamp,symbol,side,entry_price,exit_price,size,gross_pnl,commission,net_pnl,duration_sec,reason,win_rate,regime,order_id,order_type,price,strength,filters_passed,executed,status,fill_price,fill_size,execution_time_ms,slippage,event_type,data
trades,2025-12-22T10:00:00,BTC-USDT,long,50000.0,51000.0,0.001,1.0,0.1,0.9,3600,tp,75.5,ranging,,,,,,,,,,,,,
orders,2025-12-22T10:01:00,BTC-USDT,buy,limit,12345,0.001,50000.0,placed,,,,,,,50000.0,,,0,0.0,0.0,100.0,0.001,,
signals,2025-12-22T10:02:00,BTC-USDT,buy,,,0.8,ranging,,,50000.0,0.85,MTF,Correlation,1,12345,,,,,,
debug,2025-12-22T10:03:00,BTC-USDT,,,,,,,,,,,,,,,,,tick,regime=ranging|price=50000.0
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ - —É–¥–æ–±–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- ‚úÖ –õ–µ–≥–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ `record_type` –≤ Excel/Python
- ‚úÖ –û–¥–∏–Ω —Ñ–∞–π–ª –≤–º–µ—Å—Ç–æ 5+ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

---

## üìä –°–¢–†–£–ö–¢–£–†–ê –ê–†–•–ò–í–ê

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `clean_logs.bat` –∞—Ä—Ö–∏–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç:

```
logs_YYYY-MM-DD_HH-MM-SS.zip
‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log
‚îú‚îÄ‚îÄ info_YYYY-MM-DD.log
‚îú‚îÄ‚îÄ errors_YYYY-MM-DD.log
‚îú‚îÄ‚îÄ logs_futures_debug/
‚îÇ   ‚îú‚îÄ‚îÄ debug_*.csv (—Å—Ç–∞—Ä—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
‚îÇ   ‚îî‚îÄ‚îÄ exit_decisions/
‚îÇ       ‚îî‚îÄ‚îÄ *.json
‚îú‚îÄ‚îÄ logs_futures_structured/
‚îÇ   ‚îú‚îÄ‚îÄ *.json
‚îÇ   ‚îú‚îÄ‚îÄ *.jsonl (position_closures, partial_tp)
‚îÇ   ‚îî‚îÄ‚îÄ candles_*.json
‚îú‚îÄ‚îÄ all_data_YYYY-MM-DD.csv (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV)
‚îú‚îÄ‚îÄ trades_*.csv (—Å—Ç–∞—Ä—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ orders_*.csv (—Å—Ç–∞—Ä—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
‚îú‚îÄ‚îÄ signals_*.csv (—Å—Ç–∞—Ä—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
‚îî‚îÄ‚îÄ positions_open_*.csv (—Å—Ç–∞—Ä—ã–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
```

---

## üîç –ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –û–ë–™–ï–î–ò–ù–ï–ù–ù–´–ô CSV

### –í Excel:
1. –û—Ç–∫—Ä—ã—Ç—å `logs/all_data_YYYY-MM-DD.csv`
2. –°–æ–∑–¥–∞—Ç—å —Å–≤–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `record_type`
3. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –æ—Ç–¥–µ–ª—å–Ω–æ

### –í Python:
```python
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV
df = pd.read_csv('logs/all_data_2025-12-22.csv')

# –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Ç–∏–ø—É –∑–∞–ø–∏—Å–∏
trades = df[df['record_type'] == 'trades']
orders = df[df['record_type'] == 'orders']
signals = df[df['record_type'] == 'signals']
debug = df[df['record_type'] == 'debug']
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

1. ‚úÖ –ü–∞–ø–∫–∏ `debug` –∏ `structured` –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. ‚úÖ –í—Å–µ CSV –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª `all_data_YYYY-MM-DD.csv`
3. ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
4. ‚úÖ –°—Ç–∞—Ä—ã–µ CSV —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –µ—Å—Ç—å) —Ç–æ–∂–µ —É–¥–∞–ª—è—é—Ç—Å—è
5. ‚úÖ JSONL —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–Ω–æ—Å—è—Ç—Å—è –≤ –∞—Ä—Ö–∏–≤

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

- –°—Ç–∞—Ä—ã–µ CSV —Ñ–∞–π–ª—ã (`trades_*.csv`, `orders_*.csv` –∏ —Ç.–¥.) –±–æ–ª—å—à–µ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è
- –ï—Å–ª–∏ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –æ–Ω–∏ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–π CSV —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞
- –í—Å–µ –º–æ–¥—É–ª–∏ (PerformanceTracker, DebugLogger) –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!** üéâ


