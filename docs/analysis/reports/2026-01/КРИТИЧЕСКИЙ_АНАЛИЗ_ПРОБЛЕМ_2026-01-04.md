# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú –ë–û–¢–ê - 04.01.2026

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 04 —è–Ω–≤–∞—Ä—è 2026  
**–ò—Å—Ç–æ—á–Ω–∏–∫ –ª–æ–≥–æ–≤:** `logs/futures/archived/logs_2026-01-04_22-41-29`  
**–°—Ç–∞—Ç—É—Å:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –û–ë–ù–ê–†–£–ñ–ï–ù–´

---

## üìã EXECUTIVE SUMMARY

–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï** –ø—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç —Ç–æ—Ä–≥–æ–≤–ª—é **–ù–ï–í–û–ó–ú–û–ñ–ù–û–ô**:

1. üî¥ **ATR –∏ ADX = 0.0** - –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–º–µ—Å—Ç–æ fallback
2. üî¥ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ = 0.000027 –º–æ–Ω–µ—Ç** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –º–∞–ª—ã–π —Ä–∞–∑–º–µ—Ä (0.002700 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)
3. üî¥ **–ó–∞–∫—Ä—ã—Ç–∏–µ –≤ –±–æ–∫–æ–≤–∏–∫–µ –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞** - –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Ç–∞–π–º–∞—É—Ç—É, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –≥—Ä–∞—Ñ–∏–∫
4. üî¥ **–ú–∞—Ä–∫–µ—Ä–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞** - —Å—Ç–∞–≤—è—Ç—Å—è –Ω–µ —Ç–∞–º –≥–¥–µ –Ω–∞–¥–æ, –ø–æ—Ç–æ–º –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –∏ —Å—Ç–∞–≤—è—Ç—Å—è –ø–æ —Ä—ã–Ω–∫—É
5. üî¥ **–û—à–∏–±–∫–∞ timezone** - `cannot access local variable 'timezone' where it is not associated with a value`

**–í–´–í–û–î:** –ë–æ—Ç **–ù–ï –ú–û–ñ–ï–¢** –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—ã–Ω–æ–∫ –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è —Å –Ω—É–ª–µ–≤—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏!

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #1: ATR –ò ADX = 0.0 (–ö–†–ò–¢–ò–ß–ù–û)

### üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
2026-01-04 18:01:14.665 | INFO | üß† Regime scoring for DOGE-USDT: CHOPPY=0.52, TRENDING=0.00, RANGING=0.92, selected=RANGING (confidence=92.1%), ADX=0.0, volatility=12.83%
2026-01-04 18:01:14.666 | INFO | üìä [INDICATORS] DOGE-USDT: ADX: 0.00 (+DI=0.00, -DI=0.00, trend=N/A) | ATR: 0.00
2026-01-04 18:01:14.675 | INFO | üìä [INDICATORS] DOGE-USDT (unknown): ADX=17.4 (ranging), RSI=55.3, MACD_hist=0.000, ATR=N/A
2026-01-04 18:01:44.249 | DEBUG | ‚úÖ DataRegistry: –°–æ—Ö—Ä–∞–Ω–µ–Ω ADX –¥–ª—è DOGE-USDT: ADX=0.00, +DI=0.00, -DI=0.00
2026-01-04 18:07:11.152 | DEBUG | ‚ö†Ô∏è ATR –¥–ª—è BTC-USDT —Ä–∞–≤–µ–Ω 0.0 (fallback –≤–µ—Ä–Ω—É–ª 0.0 - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö), —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ DataRegistry (ATRProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback=5.0)
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- ATR = 0.0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ DataRegistry ‚úÖ
- ADX = 0.0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ DataRegistry ‚úÖ
- –ù–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–ù–£–õ–ï–í–´–ï** –∑–Ω–∞—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ fallback ‚ùå
- ATRProvider –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback=5.0, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚ùå

### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

**1. ATR —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ 0.0 –≤ DataRegistry:**

```1968:1980:src/strategies/scalping/futures/signal_generator.py
if key == "atr":
    if value == 0.0:
logger.debug(
    f"‚ö†Ô∏è ATR –¥–ª—è {symbol} —Ä–∞–≤–µ–Ω 0.0 (fallback –≤–µ—Ä–Ω—É–ª 0.0 - –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö), "
    f"—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ DataRegistry (ATRProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback=5.0)"
)
# ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º ATR –¥–∞–∂–µ –µ—Å–ª–∏ = 0.0 (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
indicators_for_registry[key] = value  # value = 0.0 ‚ùå
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è 0.0, –Ω–æ ATRProvider –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `if atr_float > 0` –∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback:

```84:98:src/strategies/scalping/futures/indicators/atr_provider.py
if atr_value is not None:
    try:
        atr_float = float(atr_value)
        if atr_float > 0:  # ‚ùå 0.0 –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É
            # –û–±–Ω–æ–≤–ª—è–µ–º –∫—ç—à
            self._atr_cache[symbol] = atr_float
            return atr_float
        else:
            logger.debug(
                f"‚ö†Ô∏è ATRProvider: ATR –Ω–∞–π–¥–µ–Ω –¥–ª—è {symbol}, –Ω–æ —Ä–∞–≤–µ–Ω 0 –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π: {atr_float}"
            )
            # ‚ùå Fallback –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–¥–µ—Å—å!
```

**2. ADX —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ 0.0:**

```1552:1564:src/strategies/scalping/futures/coordinators/signal_coordinator.py
adx_value = 0.0  # ‚ùå –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 0.0
adx_trend = "unknown"

# –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å ADX –∏–∑ DataRegistry
if self.data_registry:
    try:
        indicators_from_registry = await self.data_registry.get_indicators(symbol)
        if indicators_from_registry:
            adx_value = indicators_from_registry.get("adx", 0.0)  # ‚ùå –ü–æ–ª—É—á–∞–µ–º 0.0 –µ—Å–ª–∏ –Ω–µ—Ç
```

### ‚ùå –ü–û–ß–ï–ú–£ –≠–¢–û –ö–†–ò–¢–ò–ß–ù–û:

1. **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å ATR=0.0:**
   - –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å = 0% ‚Üí multiplier = –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
   - –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **ADX=0.0 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
   - –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –§–∏–ª—å—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç (ADX —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ)

3. **Fallback –ù–ï –†–ê–ë–û–¢–ê–ï–¢:**
   - ATRProvider –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback=5.0, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
   - 0.0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ fallback

**–ü–û–õ–ù–ê–Ø –ö–ê–†–¢–ò–ù–ê:**

**1. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö ATR:**
- `signal_generator.py` (—Å—Ç—Ä–æ–∫–∞ 1968-1980): –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ATR=0.0 –≤ DataRegistry
- `DataRegistry`: –•—Ä–∞–Ω–∏—Ç ATR=0.0 –≤ `_indicators[symbol]["atr"]`
- `ATRProvider.get_atr()` (—Å—Ç—Ä–æ–∫–∞ 87): –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `if atr_float > 0` ‚Üí 0.0 –ù–ï –ø—Ä–æ—Ö–æ–¥–∏—Ç
- `ATRProvider` (—Å—Ç—Ä–æ–∫–∞ 118-122): –î–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback, –Ω–æ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `atr_value is None`, –∞ –Ω–µ –µ—Å–ª–∏ `atr_float == 0.0`

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ATR=0.0:**

**–í RiskManager (—Å—Ç—Ä–æ–∫–∞ 1095-1110):**
```python
if current_atr_percent is not None and current_atr_percent > 0:
    raw_multiplier = base_atr_percent / (current_atr_percent / 100.0)
    volatility_multiplier = float(max(min_multiplier, min(raw_multiplier, max_multiplier)))
    base_usd_size *= volatility_multiplier
```
- –ï—Å–ª–∏ `current_atr_percent = 0.0`, —É—Å–ª–æ–≤–∏–µ `current_atr_percent > 0` –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- `volatility_multiplier` –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è ‚Üí —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ë–ï–ó —É—á–µ—Ç–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ ‚ùå

**3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ADX=0.0:**

**–í SignalCoordinator (—Å—Ç—Ä–æ–∫–∞ 1552-1603):**
```python
adx_value = 0.0  # –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
adx_value = indicators_from_registry.get("adx", 0.0)  # –ü–æ–ª—É—á–∞–µ–º 0.0
if adx_value >= 20.0:  # 0.0 < 20.0 ‚Üí —É—Å–ª–æ–≤–∏–µ –ù–ï –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    adx_trend = "bullish" or "bearish"
else:
    adx_trend = "ranging"  # –í—Å–µ–≥–¥–∞ "ranging" –ø—Ä–∏ ADX=0.0
```
- –ü—Ä–∏ ADX=0.0 –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ "ranging"
- ADX —Ñ–∏–ª—å—Ç—Ä –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç (ADXFilter –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –ø—Ä–∏ ADX=0.0)

**–í FilterManager (—Å—Ç—Ä–æ–∫–∞ 715-756):**
- ADX —Ñ–∏–ª—å—Ç—Ä –ø–æ–ª—É—á–∞–µ—Ç ADX=0.0 –∏–∑ DataRegistry
- –§–∏–ª—å—Ç—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã (—Ç–∞–∫ –∫–∞–∫ ADX=0.0 < –ø–æ—Ä–æ–≥–∞)

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø:**

1. üî¥ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   - Volatility multiplier –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ ATR=0.0
   - –ü–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏ (–ø—Ä–∏ –Ω–∏–∑–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏) –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–º–∏ (–ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏)
   - –†–∏—Å–∫ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä—ã–Ω–∫–∞

2. üî¥ **–†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   - –ü—Ä–∏ ADX=0.0 –≤—Å–µ–≥–¥–∞ "ranging"
   - –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ (–º–æ–∂–µ—Ç –±—ã—Ç—å trending, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ ranging)

3. üî¥ **ADX —Ñ–∏–ª—å—Ç—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–¥–∞–∂–µ —Å–ª–∞–±—ã–µ)
   - –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Å–∏–ª–µ —Ç—Ä–µ–Ω–¥–∞

4. üî¥ **Fallback –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
   - ATRProvider –Ω–∞—Ö–æ–¥–∏—Ç ATR=0.0 –≤ DataRegistry (–Ω–µ None)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ `if atr_float > 0` –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç
   - Fallback –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `atr_value is None`)

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

1. **ATR=0.0 —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ None:**
   - `signal_generator.py` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç 0.0 –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
   - –ù–æ —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ fallback –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **ATRProvider –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `> 0`, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –¥–ª—è 0.0:**
   - –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `if atr_float > 0`, –Ω–æ –µ—Å–ª–∏ 0.0, –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç warning
   - Fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `atr_value is None`

3. **ADX=0.0 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
   - –î–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 0.0 –≤–º–µ—Å—Ç–æ None
   - –ù–µ—Ç fallback –¥–ª—è ADX

### ‚úÖ –†–ï–®–ï–ù–ò–Ø:

**–†–ï–®–ï–ù–ò–ï #1: –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—Ç—å ATR=0.0 –≤ DataRegistry (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py` (—Å—Ç—Ä–æ–∫–∞ 1966-1980)

**–ë–´–õ–û:**
```python
if key == "atr":
    if value == 0.0:
        logger.debug(f"‚ö†Ô∏è ATR –¥–ª—è {symbol} —Ä–∞–≤–µ–Ω 0.0...")
    # ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ–º ATR –¥–∞–∂–µ –µ—Å–ª–∏ = 0.0 (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)
    indicators_for_registry[key] = value  # value = 0.0 ‚ùå
```

**–°–¢–ê–õ–û:**
```python
if key == "atr":
    if value == 0.0:
        logger.debug(f"‚ö†Ô∏è ATR –¥–ª—è {symbol} —Ä–∞–≤–µ–Ω 0.0, –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º (ATRProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback=5.0)")
        # ‚ùå –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º 0.0 - ATRProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback
        continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    else:
        indicators_for_registry[key] = value  # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ï—Å–ª–∏ ATR=0.0 –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, ATRProvider –Ω–µ –Ω–∞–π–¥–µ—Ç –µ–≥–æ –≤ DataRegistry
- `atr_value` –±—É–¥–µ—Ç `None` ‚Üí fallback —Å—Ä–∞–±–æ—Ç–∞–µ—Ç
- ATRProvider –≤–µ—Ä–Ω–µ—Ç fallback=5.0

**–†–ï–®–ï–ù–ò–ï #2: ATRProvider –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –¥–ª—è 0.0 (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/atr_provider.py` (—Å—Ç—Ä–æ–∫–∞ 84-122)

**–ë–´–õ–û:**
```python
if atr_float > 0:
    return atr_float
else:
    logger.debug(f"‚ö†Ô∏è ATR –Ω–∞–π–¥–µ–Ω –¥–ª—è {symbol}, –Ω–æ —Ä–∞–≤–µ–Ω 0: {atr_float}")
    # ‚ùå Fallback –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
```

**–°–¢–ê–õ–û:**
```python
if atr_float > 0:
    return atr_float
else:
    logger.debug(f"‚ö†Ô∏è ATRProvider: ATR –¥–ª—è {symbol} —Ä–∞–≤–µ–Ω 0 –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π: {atr_float}, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback")
    # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback –¥–ª—è 0.0
if fallback is not None:
    return fallback
    # –ï—Å–ª–∏ fallback –Ω–µ —É–∫–∞–∑–∞–Ω, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø–æ–∏—Å–∫
```

**–†–ï–®–ï–ù–ò–ï #3: ADX - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –∏–ª–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å 0.0**

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ATR - –ª–∏–±–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å ADX=0.0, –ª–∏–±–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback –≤ –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–ï–®–ï–ù–ò–ï #1 –¥–ª—è ATR (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å 0.0) + –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ ATRProvider –¥–ª—è 0.0 (–†–ï–®–ï–ù–ò–ï #2)

---

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ ATRProvider –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback=5.0 –≤–º–µ—Å—Ç–æ 0.0
2. ‚úÖ Volatility multiplier –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Å fallback ATR)
3. ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è —Å —É—á–µ—Ç–æ–º –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
4. ‚úÖ ADX —Ñ–∏–ª—å—Ç—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–µ—Å–ª–∏ ADX –Ω–µ 0.0)

**–†–∏—Å–∫–∏:**
- ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ - fallback=5.0 —ç—Ç–æ —Ä–∞–∑—É–º–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- ‚úÖ –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback, —á–µ–º 0.0

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #2: –†–ê–ó–ú–ï–† –ü–û–ó–ò–¶–ò–ò = 0.000027 –ú–û–ù–ï–¢ (–ö–†–ò–¢–ò–ß–ù–û)

### üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
2026-01-04 18:06:03.996 | INFO | üìä [PARAMS] BTC-USDT (ranging): –†–ê–°–ß–ï–¢ –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ò | 
   –†–∞–∑–º–µ—Ä: 0.002700 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (0.000027 –º–æ–Ω–µ—Ç), Notional: $2.49 USD, 
   –õ–µ–≤–µ—Ä–∏–¥–∂: 5x, –ú–∞—Ä–∂–∞: $0.50 USD
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- –†–∞–∑–º–µ—Ä = 0.002700 **–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** = 0.000027 **–º–æ–Ω–µ—Ç** (BTC)
- Notional = $2.49 USD (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~$249.28 –ø–æ –ª–æ–≥–∞–º)
- –ú–∞—Ä–∂–∞ = $0.50 USD (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ~$49.86 –ø–æ –ª–æ–≥–∞–º)

**–†–ê–°–•–û–ñ–î–ï–ù–ò–ï:** –í –ª–æ–≥–∞—Ö –¥–≤–µ —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è!

### üîç –ê–ù–ê–õ–ò–ó:

**1. –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏:**

```2496:2490:src/strategies/scalping/futures/coordinators/signal_coordinator.py
logger.info(
    f"üìä [PARAMS] BTC-USDT (ranging): –†–ê–°–ß–ï–¢ –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ò | "
    f"–ë–∞–ª–∞–Ω—Å: ${balance:.2f} (–ø—Ä–æ—Ñ–∏–ª—å: {balance_profile_name}), "
    f"–†–∞–∑–º–µ—Ä: {position_size:.6f} –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ ({size_in_coins:.6f} –º–æ–Ω–µ—Ç), "
    f"Notional: ${notional_usd:.2f} USD, –õ–µ–≤–µ—Ä–∏–¥–∂: {leverage_config}x, "
    f"–ú–∞—Ä–∂–∞: ${margin_usd:.2f} USD"
)
```

**2. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ calculate_position_size:**

```1422:1422:src/strategies/scalping/futures/risk_manager.py
position_size = (margin_usd * leverage) / price
```

**–ê–ù–ê–õ–ò–ó:** `position_size` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `(margin * leverage) / price` - —ç—Ç–æ **–ú–û–ù–ï–¢–´** (BTC, ETH –∏ —Ç.–¥.)

**3. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –≤ signal_coordinator:**

```2468:2494:src/strategies/scalping/futures/coordinators/signal_coordinator.py
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –º–æ–Ω–µ—Ç—ã –∏ USD
try:
    details = await self.client.get_instrument_details(symbol)
    ct_val = float(details.get("ctVal", 0.01))
    size_in_coins = position_size * ct_val  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: position_size –£–ñ–ï –≤ –º–æ–Ω–µ—Ç–∞—Ö!
    notional_usd = size_in_coins * price
    # ...
logger.info(
    f"–†–∞–∑–º–µ—Ä: {position_size:.6f} –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ ({size_in_coins:.6f} –º–æ–Ω–µ—Ç), "
)
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê:**
- `calculate_position_size()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ **–ú–û–ù–ï–¢–ê–•** (—Å—Ç—Ä–æ–∫–∞ 1422: `position_size = (margin * leverage) / price`)
- –ù–û `signal_coordinator` —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ —ç—Ç–æ **–ö–û–ù–¢–†–ê–ö–¢–´**
- –ò —É–º–Ω–æ–∂–∞–µ—Ç –Ω–∞ `ct_val` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–æ–Ω–µ—Ç: `size_in_coins = position_size * ct_val` ‚ùå
- –î–ª—è BTC: `ct_val = 0.01`, –∑–Ω–∞—á–∏—Ç —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ 100 —Ä–∞–∑!
- –ü—Ä–∏–º–µ—Ä: `position_size = 0.0027` –º–æ–Ω–µ—Ç ‚Üí `size_in_coins = 0.0027 * 0.01 = 0.000027` –º–æ–Ω–µ—Ç ‚ùå

**–ü–†–ê–í–ò–õ–¨–ù–û –î–û–õ–ñ–ù–û –ë–´–¢–¨:**
- `position_size` –≤ –ú–û–ù–ï–¢–ê–• (0.0027 BTC)
- `size_in_coins = position_size` (—É–∂–µ –≤ –º–æ–Ω–µ—Ç–∞—Ö, –ù–ï —É–º–Ω–æ–∂–∞—Ç—å!)
- `size_in_contracts = position_size / ct_val` (–¥–ª—è –ª–æ–≥–æ–≤: 0.0027 / 0.01 = 0.27 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)

### ‚ùå –ü–û–ß–ï–ú–£ –≠–¢–û –ö–†–ò–¢–ò–ß–ù–û:

1. **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ 100 —Ä–∞–∑!**
   - `calculate_position_size()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0.0027 **–ú–û–ù–ï–¢** (BTC)
   - `signal_coordinator` —Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ **–ö–û–ù–¢–†–ê–ö–¢–ê–ú–ò** –∏ —É–º–Ω–æ–∂–∞–µ—Ç –Ω–∞ `ct_val = 0.01`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: `0.0027 * 0.01 = 0.000027` **–ú–û–ù–ï–¢** (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤ 100 —Ä–∞–∑!)
   - `notional = 0.000027 * 92326.50 = $2.49` USD ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å $249)

2. **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –ª–æ–≥–∞—Ö:**
   - –°—Ç—Ä–æ–∫–∞ 2488: –†–∞–∑–º–µ—Ä: 0.002700 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, Notional: $2.49 USD (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û)
   - –°—Ç—Ä–æ–∫–∞ 2920: –†–∞–∑–º–µ—Ä: 0.002700 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, Notional: $249.28 USD (–ü–†–ê–í–ò–õ–¨–ù–û - –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–æ)

3. **–†–∞–∑–º–µ—Ä –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 0.0027 BTC = 0.27 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–¥–ª—è BTC ct_val=0.01)
   - –ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏: 0.000027 BTC = 0.0027 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - minSz –¥–ª—è BTC = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - 0.0027 < 0.01 ‚ùå (–º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞!)

**–ü–û–õ–ù–ê–Ø –ö–ê–†–¢–ò–ù–ê:**

**1. –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
- `risk_manager.calculate_position_size()` (—Å—Ç—Ä–æ–∫–∞ 1422): –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `position_size = (margin * leverage) / price` ‚Üí —ç—Ç–æ **–ú–û–ù–ï–¢–´**
- `signal_coordinator.execute_signal_from_price()` (—Å—Ç—Ä–æ–∫–∞ 2444): –ü–æ–ª—É—á–∞–µ—Ç `position_size` –≤ –ú–û–ù–ï–¢–ê–•
- `signal_coordinator` (—Å—Ç—Ä–æ–∫–∞ 2472): –û—à–∏–±–æ—á–Ω–æ —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ `position_size` –≤ –ö–û–ù–¢–†–ê–ö–¢–ê–• –∏ —É–º–Ω–æ–∂–∞–µ—Ç –Ω–∞ `ct_val`

**2. –§–æ—Ä–º—É–ª—ã:**

**RiskManager –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```python
position_size = (margin_usd * leverage) / price  # –ú–û–ù–ï–¢–´ (BTC, ETH)
# –ü—Ä–∏–º–µ—Ä: ($50 * 5) / $92326.50 = 0.002707 BTC
```

**SignalCoordinator –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
```python
size_in_coins = position_size * ct_val  # ‚ùå –û–®–ò–ë–ö–ê: position_size –£–ñ–ï –≤ –º–æ–Ω–µ—Ç–∞—Ö!
# –ü—Ä–∏–º–µ—Ä: 0.002707 * 0.01 = 0.00002707 BTC (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –≤ 100 —Ä–∞–∑!)
```

**3. –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 2490): –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ (–º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞)
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `position_size`, –Ω–æ –ª–æ–≥–∏ –≤–≤–æ–¥—è—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ)

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø:**

1. üî¥ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –≤ 100 —Ä–∞–∑:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 0.0027 BTC = 0.27 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–¥–ª—è BTC ct_val=0.01)
   - –ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏: 0.000027 BTC = 0.0027 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - Notional: $2.49 –≤–º–µ—Å—Ç–æ $249.28 (–≤ 100 —Ä–∞–∑ –º–µ–Ω—å—à–µ!)

2. üî¥ **–†–∞–∑–º–µ—Ä –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ –±–∏—Ä–∂–∏:**
   - minSz –¥–ª—è BTC = 0.01 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - –ü–æ—Å–ª–µ –æ—à–∏–±–∫–∏: 0.0027 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ < 0.01 ‚ùå
   - –ë–∏—Ä–∂–∞ –æ—Ç–∫–ª–æ–Ω–∏—Ç –æ—Ä–¥–µ—Ä –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è

3. üî¥ **–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
   - –í–≤–æ–¥—è—Ç –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

4. üî¥ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å:**
   - RiskManager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º (—Å—Ç—Ä–æ–∫–∞ 1611-1630)
   - –ù–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

**–ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ –µ–¥–∏–Ω–∏—Ü–∞—Ö –∏–∑–º–µ—Ä–µ–Ω–∏—è:**
- `risk_manager.calculate_position_size()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **–ú–û–ù–ï–¢–´** (–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –∫–æ–¥–µ)
- `signal_coordinator` –æ–∂–∏–¥–∞–µ—Ç **–ö–û–ù–¢–†–ê–ö–¢–´** (—Å—É–¥—è –ø–æ –∫–æ–¥—É)
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

### ‚úÖ –†–ï–®–ï–ù–ò–Ø:

**–†–ï–®–ï–ù–ò–ï #1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å signal_coordinator (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 2468-2494)

**–ë–´–õ–û:**
```python
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –º–æ–Ω–µ—Ç—ã –∏ USD
details = await self.client.get_instrument_details(symbol)
ct_val = float(details.get("ctVal", 0.01))
size_in_coins = position_size * ct_val  # ‚ùå –û–®–ò–ë–ö–ê: position_size –£–ñ–ï –≤ –º–æ–Ω–µ—Ç–∞—Ö!
notional_usd = size_in_coins * price
```

**–°–¢–ê–õ–û:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: position_size —É–∂–µ –≤ –ú–û–ù–ï–¢–ê–• (–∏–∑ RiskManager)
# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä –∏–∑ –º–æ–Ω–µ—Ç –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è –ª–æ–≥–æ–≤
details = await self.client.get_instrument_details(symbol)
ct_val = float(details.get("ctVal", 0.01))
size_in_coins = position_size  # ‚úÖ position_size —É–∂–µ –≤ –º–æ–Ω–µ—Ç–∞—Ö!
size_in_contracts = position_size / ct_val if ct_val > 0 else 0  # –î–ª—è –ª–æ–≥–æ–≤
notional_usd = size_in_coins * price
```

**–ò –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```python
logger.info(
    f"üìä [PARAMS] {symbol} ({current_regime}): –†–ê–°–ß–ï–¢ –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ò | "
    f"–ë–∞–ª–∞–Ω—Å: ${balance:.2f} (–ø—Ä–æ—Ñ–∏–ª—å: {balance_profile_name}), "
    f"–†–∞–∑–º–µ—Ä: {size_in_contracts:.6f} –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ ({size_in_coins:.6f} –º–æ–Ω–µ—Ç), "  # ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
    f"Notional: ${notional_usd:.2f} USD, –õ–µ–≤–µ—Ä–∏–¥–∂: {leverage_config}x, "
    f"–ú–∞—Ä–∂–∞: ${margin_usd:.2f} USD | "
    f"–ò—Å—Ç–æ—á–Ω–∏–∫: RiskManager.calculate_position_size()"
)
```

**–†–ï–®–ï–ù–ò–ï #2: –ò–∑–º–µ–Ω–∏—Ç—å RiskManager, —á—Ç–æ–±—ã –≤–æ–∑–≤—Ä–∞—â–∞–ª –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

–≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `calculate_position_size()`. –õ—É—á—à–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å signal_coordinator.

**–†–ï–®–ï–ù–ò–ï #3: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ**

–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–º–µ—Ä–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏:
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ size_in_contracts < minSz, —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ –º–∏–Ω–∏–º—É–º–∞
if size_in_contracts < min_sz:
    logger.warning(f"‚ö†Ô∏è –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ {size_in_contracts:.6f} –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ < minSz {min_sz}, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ –º–∏–Ω–∏–º—É–º–∞")
    size_in_coins = min_sz * ct_val
    position_size = size_in_coins  # –û–±–Ω–æ–≤–ª—è–µ–º position_size
```

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–ï–®–ï–ù–ò–ï #1 (–∏—Å–ø—Ä–∞–≤–∏—Ç—å signal_coordinator) + –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏–∑ –†–ï–®–ï–ù–ò–Ø #3

---

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –±—É–¥–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º (–Ω–µ —É–º–µ–Ω—å—à–∏—Ç—Å—è –≤ 100 —Ä–∞–∑)
2. ‚úÖ Notional –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–º—É ($249 –≤–º–µ—Å—Ç–æ $2.49)
3. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
4. ‚úÖ –õ–æ–≥–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `position_size` –∏–∑ `calculate_position_size()`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —Ç–∞–∫ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #3: –ó–ê–ö–†–´–¢–ò–ï –í –ë–û–ö–û–í–ò–ö–ï –ë–ï–ó –ê–ù–ê–õ–ò–ó–ê (–ö–†–ò–¢–ò–ß–ù–û)

### üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
2026-01-04 18:07:11.152 | INFO | ‚è∞ TIMEOUT for BTC-USDT: 7.0 minutes >= 7.0 minutes, force closing (profit: 0.00%)
2026-01-04 18:07:11.153 | INFO | üõë –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ BTC-USDT: timeout (side=long, size=0.27, entry=92326.50, time=7.0 –º–∏–Ω)
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ timeout –ë–ï–ó –∞–Ω–∞–ª–∏–∑–∞ ExitAnalyzer
- ExitAnalyzer –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ timeout
- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –±–æ–∫–æ–≤–∏–∫–µ (ranging —Ä–µ–∂–∏–º) –ë–ï–ó —É—á–µ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–∞, —Ç—Ä–µ–Ω–¥–∞, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê (–ü–†–û–í–ï–†–ï–ù–û –í –ö–û–î–ï):

**1. Orchestrator timeout –£–î–ê–õ–ï–ù (—Å—Ç—Ä–æ–∫–∞ 4162):**

```4162:4166:src/strategies/scalping/futures/orchestrator.py
# ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ timeout - ExitAnalyzer —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding —É–º–Ω–æ
# ExitAnalyzer –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏ –≤–º–µ—Å—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏ (—Ç—Ä–µ–Ω–¥, PnL, —Å–∏–≥–Ω–∞–ª—ã)
# –∏ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å –≤—Ä–µ–º—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –û—Ç–¥–µ–ª—å–Ω—ã–π timeout —Ç–æ–ª—å–∫–æ –º–µ—à–∞–µ—Ç.
# –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –±–∞–≥–æ–≤ ExitAnalyzer, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π timeout (3-4 —á–∞—Å–∞)
# –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞—â–∏—Ç—É, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –µ–≥–æ –ü–û–°–õ–ï –≤—Å–µ—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ ExitAnalyzer.
```

‚úÖ **–ü–†–û–í–ï–†–ï–ù–û:** Orchestrator timeout —É–¥–∞–ª–µ–Ω –∏–∑ –∫–æ–¥–∞

**–í–û–ó–ú–û–ñ–ù–´–ï –ü–†–ò–ß–ò–ù–´ –õ–û–ì–û–í:**
1. –õ–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ (–¥–æ —É–¥–∞–ª–µ–Ω–∏—è timeout)
2. –ï—Å—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥
3. TrailingStopLoss –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ timeout (–Ω–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

**2. TrailingStopLoss —Ç–∞–∫–∂–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ timeout:**

```516:529:src/strategies/scalping/futures/indicators/trailing_stop_loss.py
if minutes_in_position >= self.timeout_minutes:
    # ‚úÖ NEW: For profitable positions - close if profit < minimum
    min_profit_threshold = 0.005  # 0.5% minimum profit for timeout close

    if profit_pct > 0 and profit_pct < min_profit_threshold:
        logger.warning(
            f"‚è∞ Timeout low-profit: position held for {minutes_in_position:.2f} minutes, "
            f"profit {profit_pct:.2%} < {min_profit_threshold:.2%} (minimum threshold), "
            f"closing"
        )
        return True, "timeout_low_profit"
    # For losing positions - as before
```

**–ü—Ä–æ–±–ª–µ–º–∞:** TSL –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ timeout –ë–ï–ó –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ ExitAnalyzer (–≥—Ä–∞—Ñ–∏–∫, —Ç—Ä–µ–Ω–¥, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã).

**3. ExitAnalyzer –∏–º–µ–µ—Ç –ª–æ–≥–∏–∫—É timeout, –Ω–æ –æ–Ω–∞ –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**

```4114:4133:src/strategies/scalping/futures/positions/exit_analyzer.py
# –ü—Ä–æ–≤–µ—Ä–∫–∞ max_holding_minutes –¥–ª—è ranging —Ä–µ–∂–∏–º–∞
max_holding_minutes = await self._get_max_holding_minutes("ranging", symbol)
if minutes_in_position >= max_holding_minutes:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–∏–ª—å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–µ—Ä–∂–∞—Ç—å
    trend_data = await self._analyze_trend_strength(symbol)
    trend_strength = trend_data.get("trend_strength", 0) if trend_data else 0
    
    if trend_strength >= 0.7 and pnl_percent > 0.3:
        # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º - —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥
        return {"action": "extend_tp", ...}
    else:
        # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        return {"action": "close", "reason": "max_holding_exceeded", ...}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** ExitAnalyzer –∏–º–µ–µ—Ç —É–º–Ω—É—é –ª–æ–≥–∏–∫—É timeout (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–µ–Ω–¥, –ø—Ä–∏–±—ã–ª—å), –Ω–æ –æ–Ω–∞ –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ Orchestrator –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û –≤—ã–∑–æ–≤–∞ ExitAnalyzer.

### ‚ùå –ü–û–ß–ï–ú–£ –≠–¢–û –ö–†–ò–¢–ò–ß–ù–û:

1. **–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ë–ï–ó –∞–Ω–∞–ª–∏–∑–∞:**
   - ExitAnalyzer –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫, —Ç—Ä–µ–Ω–¥, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û –∞–Ω–∞–ª–∏–∑–∞
   - –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –±–æ–∫–æ–≤–∏–∫–µ –ë–ï–ó —É—á–µ—Ç–∞ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏

2. **–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞:**
   - –í ranging —Ä–µ–∂–∏–º–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–æ–ª—å—à–µ (–µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞)
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–∞

3. **–ù–µ—Ç —É—á–µ—Ç–∞ —Ç—Ä–µ–Ω–¥–∞:**
   - ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–µ–Ω–¥ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ë–ï–ó –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–µ–Ω–¥–∞

**–ü–û–õ–ù–ê–Ø –ö–ê–†–¢–ò–ù–ê (–ü–†–û–í–ï–†–ï–ù–û –í –ö–û–î–ï):**

**1. –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ (–ü–†–û–í–ï–†–ï–ù–û):**

**–¢–ï–ö–£–©–ò–ô (–ü–†–ê–í–ò–õ–¨–ù–´–ô):**
1. PositionManager.manage_position() (—Å—Ç—Ä–æ–∫–∞ 608+)
2. ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú (—Å—Ç—Ä–æ–∫–∞ 615)
3. ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç ExitAnalyzer (–≤–Ω—É—Ç—Ä–∏)
4. ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç timeout –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (trending, ranging, choppy)
5. Orchestrator timeout –£–î–ê–õ–ï–ù (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–µ 4162)

**2. –õ–æ–≥–∏–∫–∞ timeout –≤ ExitAnalyzer (–ü–†–û–í–ï–†–ï–ù–û):**

ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç timeout –¥–ª—è –í–°–ï–• —Ä–µ–∂–∏–º–æ–≤:
- ‚úÖ **Trending:** `_generate_exit_for_trending()` (—Å—Ç—Ä–æ–∫–∞ 2854) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding_minutes
- ‚úÖ **Ranging:** `_generate_exit_for_ranging()` (—Å—Ç—Ä–æ–∫–∞ 4114+) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding_minutes
- ‚úÖ **Choppy:** `_generate_exit_for_choppy()` (—Å—Ç—Ä–æ–∫–∞ 5015) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding_minutes

**3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã timeout –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–ü–†–û–í–ï–†–ï–ù–û):**

- **Trending:** `max_holding_minutes: 45` –º–∏–Ω—É—Ç (exit_params.trending.max_holding_minutes)
- **Ranging:** `max_holding_minutes: 15` –º–∏–Ω—É—Ç (exit_params.ranging.max_holding_minutes)
- **Choppy:** `max_holding_minutes: 10` –º–∏–Ω—É—Ç (exit_params.choppy.max_holding_minutes)

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø:**

1. üî¥ **–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ:**
   - –í –±–æ–∫–æ–≤–∏–∫–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–æ–ª—å—à–µ (–µ—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞)
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∞–Ω–∞–ª–∏–∑–∞

2. üî¥ **–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ ExitAnalyzer:**
   - ExitAnalyzer –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫, —Ç—Ä–µ–Ω–¥, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û –∞–Ω–∞–ª–∏–∑–∞
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å —Ç–µ—Ä—è–µ—Ç—Å—è

3. üî¥ **–ù–µ—Ç —É—á–µ—Ç–∞ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞:**
   - –í ranging —Ä–µ–∂–∏–º–µ –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –¥–æ–ª—å—à–µ
   - –ù–æ timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–∞

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê (–ü–†–û–í–ï–†–ï–ù–û):**

**–¢–ï–ö–£–©–ò–ô –ö–û–î (–ü–†–ê–í–ò–õ–¨–ù–´–ô):**
- ‚úÖ Orchestrator timeout –£–î–ê–õ–ï–ù (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–µ 4162)
- ‚úÖ ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú (PositionManager, —Å—Ç—Ä–æ–∫–∞ 615)
- ‚úÖ ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ ExitDecisionCoordinator
- ‚úÖ ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç timeout –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (trending, ranging, choppy)

**–í–û–ó–ú–û–ñ–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê –õ–û–ì–û–í:**
- ‚ö†Ô∏è –õ–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ (–¥–æ —É–¥–∞–ª–µ–Ω–∏—è timeout –∏–∑ orchestrator)
- ‚ö†Ô∏è –ò–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥
- ‚úÖ TrailingStopLoss –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ timeout (–Ω–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - —á–µ—Ä–µ–∑ ExitDecisionCoordinator)

### ‚úÖ –†–ï–®–ï–ù–ò–Ø:

**–†–ï–®–ï–ù–ò–ï #1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –¥—Ä—É–≥–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞, –≥–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è timeout –î–û ExitAnalyzer.

**–†–ï–®–ï–ù–ò–ï #2: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–≥–∏ –∏–∑ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞**

–ï—Å–ª–∏ –ª–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ - –ø—Ä–æ–±–ª–µ–º–∞ —É–∂–µ —Ä–µ—à–µ–Ω–∞. –ï—Å–ª–∏ –∏–∑ —Ç–µ–∫—É—â–µ–π - –Ω—É–∂–Ω–æ –∏—Å–∫–∞—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å.

**–†–ï–®–ï–ù–ò–ï #3: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (–£–ñ–ï –ü–†–û–í–ï–†–ï–ù–û)**

‚úÖ **–ü–†–û–í–ï–†–ï–ù–û:** ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —á–µ—Ä–µ–∑ ExitDecisionCoordinator

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** 
- –ï—Å–ª–∏ –ª–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ - –ø—Ä–æ–±–ª–µ–º–∞ —É–∂–µ —Ä–µ—à–µ–Ω–∞
- –ï—Å–ª–∏ –ª–æ–≥–∏ –∏–∑ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥
- –¢–µ–∫—É—â–∏–π –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: ExitDecisionCoordinator ‚Üí ExitAnalyzer ‚Üí timeout –ø—Ä–æ–≤–µ—Ä–∫–∞

---

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ ExitAnalyzer –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ü–ï–†–ï–î timeout
2. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ (–≥—Ä–∞—Ñ–∏–∫, —Ç—Ä–µ–Ω–¥, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)
3. ‚úÖ Timeout –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞—â–∏—Ç–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ ExitAnalyzer –Ω–µ –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ)
4. ‚úÖ –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –±—É–¥–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ - timeout –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞—â–∏—Ç–∞
- ‚úÖ –õ—É—á—à–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞, —á–µ–º –ø—Ä–æ—Å—Ç–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #4: –ú–ê–†–ö–ï–†–ù–´–ï –û–†–î–ï–†–ê (–ö–†–ò–¢–ò–ß–ù–û)

### üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
2026-01-04 18:06:03.996 | INFO | üìä –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞: BTC-USDT BUY @ $92326.50
2026-01-04 18:07:03.996 | WARNING | ‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–µ –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è –∑–∞ 60 —Å–µ–∫—É–Ω–¥, –æ—Ç–º–µ–Ω—è–µ–º –∏ –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ market
2026-01-04 18:07:04.123 | INFO | üìä –†–∞–∑–º–µ—â–µ–Ω–∏–µ market –æ—Ä–¥–µ—Ä–∞: BTC-USDT BUY @ $92350.00 (–ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ: 0.025%)
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–µ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞)
- –û—Ä–¥–µ—Ä–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è 60+ —Å–µ–∫—É–Ω–¥
- –û—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market
- –ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –∏ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞

### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

**1. –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π —Ü–µ–Ω–µ:**

```678:699:src/strategies/scalping/futures/order_executor.py
signal_price = None
if signal:
    signal_price = signal.get("price", 0.0)
    if signal_price > 0:
        price_diff_pct = (
            abs(signal_price - current_price) / current_price * 100
            if current_price > 0
            else 100
        )
        # –õ–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –Ω–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º signal_price –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞!
        if price_diff_pct < 0.1:
            logger.debug(f"üí∞ signal['price']={signal_price:.2f} –∞–∫—Ç—É–∞–ª—å–Ω–∞...")
        else:
logger.warning(
    f"‚ö†Ô∏è signal['price']={signal_price:.2f} —É—Å—Ç–∞—Ä–µ–ª–∞ –¥–ª—è {symbol} {side} "
                f"(—Ä–∞–∑–Ω–∏—Ü–∞ —Å current_price={current_price:.2f} —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç {price_diff_pct:.3f}%), "
    f"–∏—Å–ø–æ–ª—å–∑—É–µ–º current_price –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞"
)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –µ—Å—Ç—å, –Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone (–ü–†–û–ë–õ–ï–ú–ê #5).

**2. –û—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥:**

```609:618:src/strategies/scalping/futures/coordinators/order_coordinator.py
if auto_cancel:
    cancel_result = await self.order_executor.cancel_order(order_id, symbol)
    if cancel_result.get("success"):
        logger.info(f"‚úÖ Limit order {order_id} canceled by timeout")

# ‚úÖ FIX #3: Replace with market order
if replace_with_market:
    size_str = order.get("sz", "0")
    # Place market order
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market –ø–æ—Å–ª–µ 60 —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è.

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone:**

```2079:2129:src/strategies/scalping/futures/coordinators/signal_coordinator.py
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –£—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (>30 —Å–µ–∫—É–Ω–¥)
now_utc = datetime.now(timezone.utc)  # ‚ùå –û–®–ò–ë–ö–ê: timezone –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!
# ...
if price_diff_pct > 0.5:  # –†–∞–∑–Ω–∏—Ü–∞ > 0.5% - —Å–∏–≥–Ω–∞–ª —É—Å—Ç–∞—Ä–µ–ª
    should_update_price = True
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ timezone –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è (–ü–†–û–ë–õ–ï–ú–ê #5).

### ‚ùå –ü–û–ß–ï–ú–£ –≠–¢–û –ö–†–ò–¢–ò–ß–ù–û:

1. **–ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ (60+ —Å–µ–∫—É–Ω–¥):**
   - –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è
   - –¶–µ–Ω–∞ —É—Ö–æ–¥–∏—Ç, –æ—Ä–¥–µ—Ä –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è
   - –ó–∞–º–µ–Ω–∞ –Ω–∞ market –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è

2. **–ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ:**
   - Market –æ—Ä–¥–µ—Ä–∞ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ
   - –ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º (0.025-0.1%)

3. **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å:**
   - –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞ (market –æ—Ä–¥–µ—Ä)
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

**–ü–û–õ–ù–ê–Ø –ö–ê–†–¢–ò–ù–ê:**

**1. –ü–æ—Ç–æ–∫ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞:**

1. SignalGenerator –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª —Å —Ü–µ–Ω–æ–π (–º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π)
2. SignalCoordinator –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ (–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone)
3. OrderExecutor —Ä–∞–∑–º–µ—â–∞–µ—Ç –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –ø–æ —Ü–µ–Ω–µ –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
4. OrderCoordinator –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –æ—Ä–¥–µ—Ä (60 —Å–µ–∫—É–Ω–¥)
5. –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è ‚Üí –æ—Ç–º–µ–Ω—è–µ—Ç –∏ –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ market

**2. –ü—Ä–æ–±–ª–µ–º—ã:**

- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (–ü–†–û–ë–õ–ï–ú–ê #5)
- –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–µ (–µ—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- –û—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥ (–¥–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–Ω–∞ –±–ª–∏–∑–∫–∞)

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø:**

1. üî¥ **–ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏:**
   - 60+ —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞
   - –ó–∞–º–µ–Ω–∞ –Ω–∞ market –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Ä–µ–º—è
   - –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ, —á–µ–º –Ω—É–∂–Ω–æ

2. üî¥ **–ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ:**
   - Market –æ—Ä–¥–µ—Ä–∞ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–µ
   - –ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º

3. üî¥ **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å:**
   - –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

**1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone:**
- SignalCoordinator –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ (–ü–†–û–ë–õ–ï–ú–ê #5)
- –°–∏–≥–Ω–∞–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∏

**2. –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–µ:**
- –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Ü–µ–Ω–∞
- –û—Ä–¥–µ—Ä –Ω–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è, –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥

**3. –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–µ–ª—å—Ç—ã –ü–ï–†–ï–î —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞:**
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–µ–ª—å—Ç—É –º–µ–∂–¥—É —Ü–µ–Ω–æ–π —Å–∏–≥–Ω–∞–ª–∞ –∏ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–æ–π
- –ï—Å–ª–∏ –¥–µ–ª—å—Ç–∞ –≤–µ–ª–∏–∫–∞ (>1-2%) ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å market –æ—Ä–¥–µ—Ä

### ‚úÖ –†–ï–®–ï–ù–ò–Ø:

**–†–ï–®–ï–ù–ò–ï #1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É timezone (–ü–†–û–ë–õ–ï–ú–ê #5) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 3453)

**–ë–´–õ–û:**
```python
# –°—Ç—Ä–æ–∫–∞ 3453 (–≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ execute_signal_from_price)
from datetime import timezone  # ‚ùå –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º!
```

**–°–¢–ê–õ–û:**
```python
# –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 13: from datetime import datetime, timezone
```

**–†–ï–®–ï–ù–ò–ï #2: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–µ–ª—å—Ç—ã –ü–ï–†–ï–î —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞**

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py` (–º–µ—Ç–æ–¥ `execute_order`)

**–î–û–ë–ê–í–ò–¢–¨:**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ª—å—Ç—ã –ü–ï–†–ï–î —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞
signal_price = signal.get("price", 0.0) if signal else 0.0
if signal_price > 0 and current_price > 0:
    price_diff_pct = abs(signal_price - current_price) / current_price * 100
    if price_diff_pct > 1.0:  # –î–µ–ª—å—Ç–∞ > 1% ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º market
        logger.warning(
            f"‚ö†Ô∏è –î–µ–ª—å—Ç–∞ —Ü–µ–Ω—ã {price_diff_pct:.2f}% > 1%, –∏—Å–ø–æ–ª—å–∑—É–µ–º market –æ—Ä–¥–µ—Ä –≤–º–µ—Å—Ç–æ limit"
        )
        order_type = "market"  # –ò—Å–ø–æ–ª—å–∑—É–µ–º market –≤–º–µ—Å—Ç–æ limit
    elif price_diff_pct > 0.5:  # –î–µ–ª—å—Ç–∞ 0.5-1% ‚Üí —É–º–µ–Ω—å—à–∞–µ–º offset
        logger.info(f"‚ÑπÔ∏è –î–µ–ª—å—Ç–∞ —Ü–µ–Ω—ã {price_diff_pct:.2f}%, —É–º–µ–Ω—å—à–∞–µ–º offset –¥–ª—è limit –æ—Ä–¥–µ—Ä–∞")
        offset_percent = min(offset_percent, 0.05)  # –£–º–µ–Ω—å—à–∞–µ–º offset –¥–æ 0.05%
```

**–†–ï–®–ï–ù–ò–ï #3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å market –æ—Ä–¥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py` (–º–µ—Ç–æ–¥ `_determine_order_type`)

**–ë–´–õ–û:**
```python
return "limit"  # –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

**–°–¢–ê–õ–û:**
```python
# ‚úÖ –î–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º market –æ—Ä–¥–µ—Ä–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
# –ö–æ–º–∏—Å—Å–∏—è –≤—ã—à–µ (0.05% –≤–º–µ—Å—Ç–æ 0.02%), –Ω–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
return "market"
```

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–ï–®–ï–ù–ò–ï #1 (–∏—Å–ø—Ä–∞–≤–∏—Ç—å timezone) + –†–ï–®–ï–ù–ò–ï #2 (–¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–µ–ª—å—Ç—ã)

---

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è timezone)
2. ‚úÖ –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –±—É–¥—É—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–µ
3. ‚úÖ Market –æ—Ä–¥–µ—Ä–∞ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –¥–µ–ª—å—Ç–µ (>1%)
4. ‚úÖ –ü—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ

**–†–∏—Å–∫–∏:**
- ‚ö†Ô∏è Market –æ—Ä–¥–µ—Ä–∞ –∏–º–µ—é—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫—É—é –∫–æ–º–∏—Å—Å–∏—é (0.05% –≤–º–µ—Å—Ç–æ 0.02%)
- ‚úÖ –ù–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å market –ø—Ä–∏ –±–æ–ª—å—à–æ–π –¥–µ–ª—å—Ç–µ, —á–µ–º –∂–¥–∞—Ç—å 60 —Å–µ–∫—É–Ω–¥

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #5: –û–®–ò–ë–ö–ê TIMEZONE (–ö–†–ò–¢–ò–ß–ù–û)

### üìä –ß–¢–û –ü–†–û–ò–°–•–û–î–ò–¢:

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:**
```
2026-01-04 18:06:03.996 | ERROR | ‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞: cannot access local variable 'timezone' where it is not associated with a value
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
- –û—à–∏–±–∫–∞ `cannot access local variable 'timezone' where it is not associated with a value`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–∏–≥–Ω–∞–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∏

### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

**1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç timezone:**

```13:13:src/strategies/scalping/futures/coordinators/signal_coordinator.py
from datetime import datetime, timezone
```

**2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ timezone –î–û –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞:**

```2079:2129:src/strategies/scalping/futures/coordinators/signal_coordinator.py
# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –£—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (>30 —Å–µ–∫—É–Ω–¥)
now_utc = datetime.now(timezone.utc)  # ‚ùå –û–®–ò–ë–ö–ê: timezone –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω!
# ...
signal["timestamp"] = datetime.now(timezone.utc)  # ‚ùå –û–®–ò–ë–ö–ê
```

**3. –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç timezone –≤ —Ç–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```3453:3453:src/strategies/scalping/futures/coordinators/signal_coordinator.py
from datetime import timezone  # ‚ùå –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º!
```

**–ü–†–û–ë–õ–ï–ú–ê:** Python –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `timezone` –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é (–∏–∑-–∑–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453), –Ω–æ –æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –î–û –∏–º–ø–æ—Ä—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 2079-2129). Python –Ω–µ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–æ –µ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.

**–ü–û–õ–ù–ê–Ø –ö–ê–†–¢–ò–ù–ê:**

**1. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

1. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (—Å—Ç—Ä–æ–∫–∞ 13): `from datetime import datetime, timezone` ‚úÖ
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ timezone (—Å—Ç—Ä–æ–∫–∞ 2079): `datetime.now(timezone.utc)` ‚úÖ (–¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)
3. –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (—Å—Ç—Ä–æ–∫–∞ 3453): `from datetime import timezone` ‚ùå (–∫–æ–Ω—Ñ–ª–∏–∫—Ç!)

**2. –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞:**

Python –≤–∏–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç `timezone` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453 –∏ —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ `timezone` - —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤–æ –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–∏ `execute_signal_from_price`. –ù–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –î–û –∏–º–ø–æ—Ä—Ç–∞ (—Å—Ç—Ä–æ–∫–∏ 2079-2129), —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É.

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø:**

1. üî¥ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –°–∏–≥–Ω–∞–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–∂–µ –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∏ (>30 —Å–µ–∫—É–Ω–¥)
   - –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º —Ü–µ–Ω–∞–º

2. üî¥ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–∏–≥–Ω–∞–ª—ã

3. üî¥ **–ü—Ä–æ–±–ª–µ–º–∞ #4 —É—Å—É–≥—É–±–ª—è–µ—Ç—Å—è:**
   - –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏–º —Ü–µ–Ω–∞–º
   - –û—Ä–¥–µ—Ä–∞ –Ω–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è, –æ—Ç–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:**

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±–ª–∞—Å—Ç–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ Python:**
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç `timezone` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 13
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç `timezone` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453 (–≤ —Ç–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- Python –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç `timezone` –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤–æ –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –î–û –∏–º–ø–æ—Ä—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É

### ‚úÖ –†–ï–®–ï–ù–ò–Ø:

**–†–ï–®–ï–ù–ò–ï #1: –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 3453)

**–ë–´–õ–û:**
```python
# –°—Ç—Ä–æ–∫–∞ 3453 (–≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ execute_signal_from_price)
from datetime import timezone  # ‚ùå –õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º!
```

**–°–¢–ê–õ–û:**
```python
# –£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 13
```

**–†–ï–®–ï–ù–ò–ï #2: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê)**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 3453)

**–ë–´–õ–û:**
```python
from datetime import timezone
```

**–°–¢–ê–õ–û:**
```python
from datetime import timezone as tz_utc  # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç
# –ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tz_utc.utc –≤–º–µ—Å—Ç–æ timezone.utc
```

**–†–ï–®–ï–ù–ò–ï #3: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)**

–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453 –≤ –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ `execute_signal_from_price` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1940).

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –†–ï–®–ï–ù–ò–ï #1 (—É–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç) - —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

---

**–ü–û–°–õ–ï–î–°–¢–í–ò–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:**

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
2. ‚úÖ –°–∏–≥–Ω–∞–ª—ã –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∏
3. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ü–µ–Ω–∞–º
4. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ #4 –±—É–¥–µ—Ç —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–∞ (–ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å)

**–†–∏—Å–∫–∏:**
- ‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ - –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 13 –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô –ì–õ–£–ë–û–ö–ò–ô –ê–ù–ê–õ–ò–ó

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #1: –ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê position_size (–ü–†–û–í–ï–†–ï–ù–û –î–û –ö–û–ù–¶–ê)

**–ö–†–ò–¢–ò–ß–ù–û:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö - –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –í–°–Ø —Ü–µ–ø–æ—á–∫–∞ –æ—Ç –Ω–∞—á–∞–ª–∞ –¥–æ –∫–æ–Ω—Ü–∞.

**–ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø:**

1. **`risk_manager.calculate_position_size()` (—Å—Ç—Ä–æ–∫–∞ 1422):**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `position_size = (margin_usd * leverage) / price` ‚Üí **–ú–û–ù–ï–¢–´**
   - ‚úÖ **–î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–ù–û:** Returns: float: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –º–æ–Ω–µ—Ç–∞—Ö (–Ω–µ USD!)

2. **`signal_coordinator.execute_signal_from_price()` (—Å—Ç—Ä–æ–∫–∞ 2444):**
   - –ü–æ–ª—É—á–∞–µ—Ç `position_size` –∏–∑ `calculate_position_size()` ‚Üí **–ú–û–ù–ï–¢–´**
   - ‚úÖ **–ü–û–õ–£–ß–ê–ï–¢:** position_size –≤ –ú–û–ù–ï–¢–ê–•

3. **`signal_coordinator.execute_signal_from_price()` (—Å—Ç—Ä–æ–∫–∞ 2468-2472):**
   - ‚ùå **–û–®–ò–ë–ö–ê –í –õ–û–ì–ò–†–û–í–ê–ù–ò–ò:** `size_in_coins = position_size * ct_val`
   - ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:** –°—á–∏—Ç–∞–µ—Ç, —á—Ç–æ position_size –≤ –ö–û–ù–¢–†–ê–ö–¢–ê–• (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
   - ‚úÖ **–í–õ–ò–Ø–ù–ò–ï:** –¢–æ–ª—å–∫–æ –Ω–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∞–ª—å–Ω—ã–π position_size –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è

4. **`signal_coordinator.execute_signal_from_price()` (—Å—Ç—Ä–æ–∫–∞ 2935):**
   - –ü–µ—Ä–µ–¥–∞–µ—Ç `position_size` –≤ `entry_manager.open_position_with_size()`
   - ‚úÖ **–ü–ï–†–ï–î–ê–ï–¢:** position_size –≤ –ú–û–ù–ï–¢–ê–• (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

5. **`entry_manager.open_position_with_size()` (—Å—Ç—Ä–æ–∫–∞ 247):**
   - ‚úÖ **–î–û–ö–£–ú–ï–ù–¢–ò–†–û–í–ê–ù–û:** `position_size: float,  # –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –º–æ–Ω–µ—Ç–∞—Ö (—É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω)`
   - ‚úÖ **–ü–û–õ–£–ß–ê–ï–¢:** position_size –≤ –ú–û–ù–ï–¢–ê–•

6. **`entry_manager.open_position_with_size()` (—Å—Ç—Ä–æ–∫–∞ 277):**
   - –ü–µ—Ä–µ–¥–∞–µ—Ç `position_size` –≤ `order_executor.execute_signal()`
   - ‚úÖ **–ü–ï–†–ï–î–ê–ï–¢:** position_size –≤ –ú–û–ù–ï–¢–ê–•

7. **`order_executor.execute_signal()` (—Å—Ç—Ä–æ–∫–∞ 106):**
   - ‚úÖ **–ü–û–õ–£–ß–ê–ï–¢:** position_size (–≤ –ú–û–ù–ï–¢–ê–• –∏–∑ entry_manager)

8. **`order_executor._execute_order()` (—Å—Ç—Ä–æ–∫–∞ 177, 216, 221):**
   - –ü–µ—Ä–µ–¥–∞–µ—Ç `position_size` –≤ `_place_market_order()` –∏ `_place_limit_order()`
   - ‚úÖ **–ü–ï–†–ï–î–ê–ï–¢:** position_size –≤ –ú–û–ù–ï–¢–ê–•

9. **`order_executor._place_market_order()` (—Å—Ç—Ä–æ–∫–∞ 1107):**
   - ‚úÖ **–ö–û–ù–í–ï–†–¢–ò–†–£–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:** `size_in_contracts = size / ct_val` (–º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã)
   - ‚úÖ **–ò–°–ü–û–õ–¨–ó–£–ï–¢:** size_in_contracts –¥–ª—è API –±–∏—Ä–∂–∏

10. **`order_executor._place_limit_order()` (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ):**
   - ‚úÖ **–ö–û–ù–í–ï–†–¢–ò–†–£–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:** –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è API –±–∏—Ä–∂–∏

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **–¶–ï–ü–û–ß–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** position_size –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ú–û–ù–ï–¢–ê–• —á–µ—Ä–µ–∑ –≤—Å—é —Ü–µ–ø–æ—á–∫—É
- ‚úÖ **–ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** OrderExecutor –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è API
- ‚ùå **–ü–†–û–ë–õ–ï–ú–ê –¢–û–õ–¨–ö–û –í –õ–û–ì–ò–†–û–í–ê–ù–ò–ò:** —Å—Ç—Ä–æ–∫–∞ 2472 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- ‚úÖ **–†–ï–ê–õ–¨–ù–´–ô –†–ê–ó–ú–ï–† –ü–†–ê–í–ò–õ–¨–ù–´–ô:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π position_size –≤ –º–æ–Ω–µ—Ç–∞—Ö

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #2: TIMEOUT –î–õ–Ø –í–°–ï–• –†–ï–ñ–ò–ú–û–í (–ü–†–û–í–ï–†–ï–ù–û –î–û –ö–û–ù–¶–ê)

**–ö–†–ò–¢–ò–ß–ù–û:** Timeout –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ - –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –í–°–Ø —Ü–µ–ø–æ—á–∫–∞.

**–ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê –ü–†–û–í–ï–†–ö–ò TIMEOUT:**

1. **ExitAnalyzer._generate_exit_for_trending() (—Å—Ç—Ä–æ–∫–∞ 2854-3033):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `max_holding_minutes` –¥–ª—è trending —Ä–µ–∂–∏–º–∞
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–µ–Ω–¥, –ø—Ä–∏–±—ã–ª—å, —Ä–∞–∑–≤–æ—Ä–æ—Ç –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
   - ‚úÖ **–ö–û–î:** `max_holding_minutes = self._get_max_holding_minutes("trending", symbol)`

2. **ExitAnalyzer._generate_exit_for_ranging() (—Å—Ç—Ä–æ–∫–∞ 4114+):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `max_holding_minutes` –¥–ª—è ranging —Ä–µ–∂–∏–º–∞
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–µ–Ω–¥, –ø—Ä–∏–±—ã–ª—å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º

3. **ExitAnalyzer._generate_exit_for_choppy() (—Å—Ç—Ä–æ–∫–∞ 5015-5084):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `max_holding_minutes` –¥–ª—è choppy —Ä–µ–∂–∏–º–∞
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∏–±—ã–ª—å, –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ
   - ‚úÖ **–ö–û–î:** `max_holding_minutes = self._get_max_holding_minutes("choppy", symbol)`

4. **TrailingStopLoss.should_close_position() (—Å—Ç—Ä–æ–∫–∞ 716+):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `timeout_minutes` –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤
   - ‚úÖ **–ò–°–¢–û–ß–ù–ò–ö:** timeout_minutes –±–µ—Ä–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ —Ä–µ–∂–∏–º–∞

5. **Orchestrator._check_position_holding_time() (—Å—Ç—Ä–æ–∫–∞ 4162):**
   - ‚úÖ **–£–î–ê–õ–ï–ù:** –ü—Ä–æ–≤–µ—Ä–∫–∞ timeout —É–¥–∞–ª–µ–Ω–∞ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–µ 4162)
   - ‚úÖ **–ö–û–î:** `# ‚úÖ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø: –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ timeout - ExitAnalyzer —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding —É–º–Ω–æ`

6. **PositionManager.manage_position() (—Å—Ç—Ä–æ–∫–∞ 608+):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç ExitAnalyzer, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç timeout

**–ü–ê–†–ê–ú–ï–¢–†–´ TIMEOUT –ò–ó –ö–û–ù–§–ò–ì–ê:**
- **Trending:** `max_holding_minutes: 45` –º–∏–Ω—É—Ç (exit_params.trending.max_holding_minutes)
- **Ranging:** `max_holding_minutes: 15` –º–∏–Ω—É—Ç (exit_params.ranging.max_holding_minutes)
- **Choppy:** `max_holding_minutes: 10` –º–∏–Ω—É—Ç (exit_params.choppy.max_holding_minutes)

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **TIMEOUT –†–ê–ë–û–¢–ê–ï–¢ –î–õ–Ø –í–°–ï–• –†–ï–ñ–ò–ú–û–í:** ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding –¥–ª—è trending, ranging, choppy
- ‚úÖ **ORCHESTRATOR TIMEOUT –£–î–ê–õ–ï–ù:** –ë–æ–ª—å—à–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û ExitAnalyzer
- ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö:** ExitDecisionCoordinator ‚Üí ExitAnalyzer ‚Üí timeout –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê –ò–ó –õ–û–ì–û–í:** –í–æ–∑–º–æ–∂–Ω–æ, –ª–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ –∏–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π –ø—É—Ç—å, –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∫–æ–¥

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #3: –î–ï–õ–¨–¢–ê –¶–ï–ù–´ –ü–†–ò –û–¢–ö–†–´–¢–ò–ò (–ü–†–û–í–ï–†–ï–ù–û –î–û –ö–û–ù–¶–ê)

**–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–µ–ª—å—Ç–∞ –º–µ–∂–¥—É —Ü–µ–Ω–æ–π —Å–∏–≥–Ω–∞–ª–∞ –∏ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω–æ–π - –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –í–°–Ø —Ü–µ–ø–æ—á–∫–∞.

**–ü–û–õ–ù–ê–Ø –¶–ï–ü–û–ß–ö–ê –ü–†–û–í–ï–†–ö–ò –î–ï–õ–¨–¢–´:**

1. **SignalCoordinator.execute_signal_from_price() (—Å—Ç—Ä–æ–∫–∞ 2097-2111):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É —Ü–µ–Ω—ã (>0.5%)
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** `price_diff_pct = abs(signal_price - current_price) / current_price * 100`
   - ‚úÖ **–û–ë–ù–û–í–õ–Ø–ï–¢:** –¶–µ–Ω—É —Å–∏–≥–Ω–∞–ª–∞ –µ—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∞
   - ‚ùå **–ë–õ–û–ö–ò–†–û–í–ê–ù–û:** –û—à–∏–±–∫–æ–π timezone (–ü–†–û–ë–õ–ï–ú–ê #5)

2. **OrderExecutor._calculate_limit_price() (—Å—Ç—Ä–æ–∫–∞ 682-699):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É `signal_price` –∏ `current_price`
   - ‚úÖ **–õ–û–ì–ò–†–£–ï–¢:** –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ >0.1%
   - ‚úÖ **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢:** signal_price –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç current_price)

3. **OrderExecutor._calculate_limit_price() (—Å—Ç—Ä–æ–∫–∞ 1039-1062):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É limit_price –æ—Ç reference_price (>0.2%)
   - ‚úÖ **–ö–û–†–†–ï–ö–¢–ò–†–£–ï–¢:** –¶–µ–Ω—É –µ—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ –≤–µ–ª–∏–∫–∞
   - ‚úÖ **–ö–û–î:** `price_diff_pct = abs(limit_price - reference_price) / reference_price * 100`

4. **OrderCoordinator.monitor_limit_orders() (—Å—Ç—Ä–æ–∫–∞ 155-165):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥—Ä–∏—Ñ—Ç —Ü–µ–Ω—ã –¥–ª—è –æ—Ç–º–µ–Ω—ã –æ—Ä–¥–µ—Ä–∞
   - ‚úÖ **–õ–û–ì–ò–ö–ê:** `price_drift_pct = (order_price - current_price) / order_price * 100.0`

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **–î–ï–õ–¨–¢–ê –ü–†–û–í–ï–†–Ø–ï–¢–°–Ø –í 4 –ú–ï–°–¢–ê–•:** SignalCoordinator, OrderExecutor (2 –º–µ—Å—Ç–∞), OrderCoordinator
- ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ SignalCoordinator –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone
- ‚úÖ **–ó–ê–©–ò–¢–ê –ï–°–¢–¨:** OrderExecutor –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç limit_price
- ‚ö†Ô∏è **–£–õ–£–ß–®–ï–ù–ò–ï:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–µ–ª—å—Ç—ã –ü–ï–†–ï–î —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞ –¥–ª—è –≤—ã–±–æ—Ä–∞ market vs limit

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #4: –ü–†–û–ë–õ–ï–ú–ê –° –ü–†–ò–ë–´–õ–¨–Æ (0.4-0.7 –≤–º–µ—Å—Ç–æ 3-11 –¥–æ–ª–ª–∞—Ä–æ–≤)

**–ö–†–ò–¢–ò–ß–ù–û:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª –ø–æ–ª—É—á–∞—Ç—å 3, 6, 11 –¥–æ–ª–ª–∞—Ä–æ–≤ –ø—Ä–∏–±—ã–ª–∏, –∞ –ø–æ–ª—É—á–∞–µ—Ç 0.4-0.7 –¥–æ–ª–ª–∞—Ä–æ–≤.

**–ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó:**

**–û–ñ–ò–î–ê–ï–ú–ê–Ø –ü–†–ò–ë–´–õ–¨:**
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: ~$250 (notional)
- TP: 2.5-8% (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞)
- –ü—Ä–∏–±—ã–ª—å: $250 √ó 2.5% = $6.25 (ranging) –∏–ª–∏ $250 √ó 8% = $20 (trending)

**–†–ï–ê–õ–¨–ù–ê–Ø –ü–†–ò–ë–´–õ–¨ (–ò–ó –õ–û–ì–û–í):**
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏: $2.49 (–∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - –ü–†–û–ë–õ–ï–ú–ê #2)
- TP: 2.5-8%
- –ü—Ä–∏–±—ã–ª—å: $2.49 √ó 2.5% = $0.06 (ranging) –∏–ª–∏ $2.49 √ó 8% = $0.20 (trending)

**–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê (–ü–†–û–í–ï–†–ï–ù–û):**
- ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #2:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ (—Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
- ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #1:** ATR=0.0 ‚Üí volatility multiplier –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è ‚Üí —Ä–∞–∑–º–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º
- ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #3:** Timeout –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ë–ï–ó –∞–Ω–∞–ª–∏–∑–∞ (–Ω–æ –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ orchestrator timeout —É–¥–∞–ª–µ–Ω)
- ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #4:** –ú–∞—Ä–∫–µ—Ä–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ ‚Üí –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ, –ø–æ—Ç–µ—Ä—è –ø—Ä–∏–±—ã–ª–∏

**–ü–†–û–í–ï–†–ö–ê –†–ê–°–ß–ï–¢–ê PnL:**
- ‚úÖ **–ü–†–û–í–ï–†–ï–ù–û:** `position_manager.py` (—Å—Ç—Ä–æ–∫–∞ 1552) - PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
- ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:** `pnl_percent_from_margin = (unrealized_pnl / margin_used) * 100`

**–ö–û–ú–ò–°–°–ò–ò:**
- ‚úÖ **–£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í —Ä–∞—Å—á–µ—Ç–µ net PnL
- ‚úÖ **MAKER:** 0.02% √ó 2 = 0.04% (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)
- ‚úÖ **TAKER:** 0.05% √ó 2 = 0.10% (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **–û–°–ù–û–í–ù–ê–Ø –ü–†–ò–ß–ò–ù–ê:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º #1, #2 (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), #3 (–≤–æ–∑–º–æ–∂–Ω–æ, –∏–∑ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤), #4
- ‚úÖ **–†–ê–°–ß–ï–¢ PnL –ü–†–ê–í–ò–õ–¨–ù–´–ô:** –û—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
- ‚úÖ **–ö–û–ú–ò–°–°–ò–ò –£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í net PnL
- ‚úÖ **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:** –ü—Ä–∏–±—ã–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π (–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #5: –õ–û–ì–ò–ö–ê –†–ê–ë–û–¢–´ –ë–û–¢–ê (–í–•–û–î ‚Üí –ê–ù–ê–õ–ò–ó ‚Üí –í–´–•–û–î) (–ü–†–û–í–ï–†–ï–ù–û –î–û –ö–û–ù–¶–ê)

**–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –í–°–Ø –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –æ—Ç –≤—Ö–æ–¥–∞ –¥–æ –≤—ã—Ö–æ–¥–∞.

**1. –í–•–û–î –í –ü–û–ó–ò–¶–ò–Æ (–ü–†–û–í–ï–†–ï–ù–û):**

**–¶–ï–ü–û–ß–ö–ê:**
1. SignalGenerator –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª
2. SignalCoordinator –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª (–ü–†–û–ë–õ–ï–ú–ê #5: –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è)
3. RiskManager —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (–ü–†–û–ë–õ–ï–ú–ê #1: ATR=0.0)
4. SignalCoordinator –ø–µ—Ä–µ–¥–∞–µ—Ç position_size –≤ EntryManager (–ü–†–û–ë–õ–ï–ú–ê #2: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
5. EntryManager –ø–µ—Ä–µ–¥–∞–µ—Ç position_size –≤ OrderExecutor
6. OrderExecutor —Ä–∞–∑–º–µ—â–∞–µ—Ç –æ—Ä–¥–µ—Ä (–ü–†–û–ë–õ–ï–ú–ê #4: –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è)

**–ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–´:**
- ‚ùå –ü–†–û–ë–õ–ï–ú–ê #1: ATR/ADX = 0.0 ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞
- ‚ùå –ü–†–û–ë–õ–ï–ú–ê #2: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π)
- ‚ùå –ü–†–û–ë–õ–ï–ú–ê #4: –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market
- ‚ùå –ü–†–û–ë–õ–ï–ú–ê #5: –û—à–∏–±–∫–∞ timezone –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã

**2. –ê–ù–ê–õ–ò–ó –ü–û–ó–ò–¶–ò–ò (–ü–†–û–í–ï–†–ï–ù–û):**

**–¶–ï–ü–û–ß–ö–ê (–ü–†–û–í–ï–†–ï–ù–û –í –ö–û–î–ï):**
1. PositionManager.manage_position() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
2. ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ü–ï–†–í–´–ú (—Å—Ç—Ä–æ–∫–∞ 615)
3. ExitDecisionCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç ExitAnalyzer (–≤–Ω—É—Ç—Ä–∏)
4. ExitAnalyzer –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ–∏–∫, —Ç—Ä–µ–Ω–¥, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤
5. TrailingStopLoss –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å (—á–µ—Ä–µ–∑ ExitDecisionCoordinator)

**–ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–´:**
- ‚úÖ **–û–†CHESTRATOR TIMEOUT –£–î–ê–õ–ï–ù:** –ë–æ–ª—å—à–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û ExitAnalyzer
- ‚úÖ **EXITANALYZER –†–ê–ë–û–¢–ê–ï–¢:** –ü—Ä–æ–≤–µ—Ä—è–µ—Ç timeout –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (trending, ranging, choppy)
- ‚ö†Ô∏è **–í–û–ó–ú–û–ñ–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** –õ–æ–≥–∏ –∏–∑ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç timeout –∏–∑ orchestrator

**3. –í–´–•–û–î –ò–ó –ü–û–ó–ò–¶–ò–ò (–ü–†–û–í–ï–†–ï–ù–û):**

**–¶–ï–ü–û–ß–ö–ê (–ü–†–û–í–ï–†–ï–ù–û –í –ö–û–î–ï):**
1. ExitDecisionCoordinator —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ—Ç –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º
2. ExitAnalyzer –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ (–¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤)
3. TakeProfitManager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TP (—á–µ—Ä–µ–∑ ExitDecisionCoordinator)
4. StopLossManager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç SL (—á–µ—Ä–µ–∑ ExitDecisionCoordinator)
5. TrailingStopLoss –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π SL (—á–µ—Ä–µ–∑ ExitDecisionCoordinator)

**–ü–†–û–í–ï–†–ö–ê PnL (–ü–†–û–í–ï–†–ï–ù–û):**
- ‚úÖ **–†–ê–°–ß–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–´–ô:** `position_manager.py` (—Å—Ç—Ä–æ–∫–∞ 1552) - PnL –æ—Ç –º–∞—Ä–∂–∏
- ‚úÖ **–ö–ê–ö –ù–ê –ë–ò–†–ñ–ï:** `pnl_percent_from_margin = (unrealized_pnl / margin_used) * 100`

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **–õ–û–ì–ò–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** ExitDecisionCoordinator ‚Üí ExitAnalyzer ‚Üí timeout –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ **TIMEOUT –†–ê–ë–û–¢–ê–ï–¢:** –î–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —á–µ—Ä–µ–∑ ExitAnalyzer
- ‚úÖ **PnL –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø –ü–†–ê–í–ò–õ–¨–ù–û:** –û—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
- ‚úÖ **–û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–´:** #1, #2 (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), #3 (–≤–æ–∑–º–æ–∂–Ω–æ, –∏–∑ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤), #4, #5

---

### ‚úÖ –ü–†–û–í–ï–†–ö–ê #6: –î–†–£–ì–ò–ï –ü–†–û–ë–õ–ï–ú–´ (–ü–†–û–í–ï–†–ï–ù–û –î–û –ö–û–ù–¶–ê)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö - –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:**

1. **–†–∞—Å—á–µ—Ç PnL (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:** PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
   - ‚úÖ **–ö–û–î:** `position_manager.py` (—Å—Ç—Ä–æ–∫–∞ 1552): `pnl_percent_from_margin = (unrealized_pnl / margin_used) * 100`
   - ‚úÖ **–°–û–û–¢–í–ï–¢–°–¢–í–£–ï–¢ –ë–ò–†–ñ–ï:** –ö–∞–∫ –Ω–∞ OKX (PnL% –æ—Ç –º–∞—Ä–∂–∏)

2. **–ö–æ–º–∏—Å—Å–∏–∏ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í —Ä–∞—Å—á–µ—Ç–µ net PnL
   - ‚úÖ **MAKER:** 0.02% √ó 2 = 0.04% (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)
   - ‚úÖ **TAKER:** 0.05% √ó 2 = 0.10% (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)

3. **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–ï–¢–°–Ø:** –í `risk_manager.calculate_position_size()` (—Å—Ç—Ä–æ–∫–∞ 1437-1467)
   - ‚úÖ **–ü–†–û–í–ï–†–Ø–ï–¢–°–Ø:** –ú–∏–Ω–∏–º—É–º –±–∏—Ä–∂–∏ (minSz) (—Å—Ç—Ä–æ–∫–∞ 1440-1444)

4. **–õ–µ–≤–µ—Ä–∏–¥–∂ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–ï–¢–°–Ø:** –í —Ä–∞—Å—á–µ—Ç–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 1422)
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–ï–¢–°–Ø:** –í —Ä–∞—Å—á–µ—Ç–µ –º–∞—Ä–∂–∏ (notional / leverage)

5. **–†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í —Ä–∞—Å—á–µ—Ç–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (regime multipliers)
   - ‚úÖ **–£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö TP/SL (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
   - ‚úÖ **TIMEOUT –†–ê–ë–û–¢–ê–ï–¢:** –î–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —á–µ—Ä–µ–∑ ExitAnalyzer (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤—ã—à–µ)

**–í–´–í–û–î –ü–û –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ï:**
- ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ü–†–ê–í–ò–õ–¨–ù–´–ï:** PnL, –∫–æ–º–∏—Å—Å–∏–∏, –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ, –ª–µ–≤–µ—Ä–∏–¥–∂, —Ä–µ–∂–∏–º—ã
- ‚úÖ **–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- ‚úÖ **–û–°–ù–û–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù–´:** #1, #2 (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), #3 (–≤–æ–∑–º–æ–∂–Ω–æ, –∏–∑ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤), #4, #5
- ‚úÖ **–ù–ï–¢ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–• –ü–†–û–ë–õ–ï–ú:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê –ü–û–õ–ù–û–ô –ü–†–û–í–ï–†–ö–ò

### ‚úÖ –í–°–ï –¶–ï–ü–û–ß–ö–ò –ü–†–û–í–ï–†–ï–ù–´ –î–û –ö–û–ù–¶–ê:

1. **–í—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è position_size (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–ù–ê–ô–î–ï–ù–´ –í–°–ï 10 –ú–ï–°–¢:** –û—Ç RiskManager –¥–æ OrderExecutor
   - ‚úÖ **–¶–ï–ü–û–ß–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** position_size –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –ú–û–ù–ï–¢–ê–• —á–µ—Ä–µ–∑ –≤—Å—é —Ü–µ–ø–æ—á–∫—É
   - ‚úÖ **–ö–û–ù–í–ï–†–¢–ê–¶–ò–Ø –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** OrderExecutor –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
   - ‚ùå **–ü–†–û–ë–õ–ï–ú–ê –¢–û–õ–¨–ö–û –í –õ–û–ì–ò–†–û–í–ê–ù–ò–ò:** —Å—Ç—Ä–æ–∫–∞ 2472 –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

2. **Timeout –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –î–õ–Ø –í–°–ï–• –†–ï–ñ–ò–ú–û–í:** ExitAnalyzer –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding –¥–ª—è trending, ranging, choppy
   - ‚úÖ **ORCHESTRATOR TIMEOUT –£–î–ê–õ–ï–ù:** –ë–æ–ª—å—à–µ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –î–û ExitAnalyzer (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ —Å—Ç—Ä–æ–∫–µ 4162)
   - ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–´–ô –ü–û–†–Ø–î–û–ö:** ExitDecisionCoordinator ‚Üí ExitAnalyzer ‚Üí timeout –ø—Ä–æ–≤–µ—Ä–∫–∞

3. **–î–µ–ª—å—Ç—É —Ü–µ–Ω—ã –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–ü–†–û–í–ï–†–Ø–ï–¢–°–Ø –í 4 –ú–ï–°–¢–ê–•:** SignalCoordinator, OrderExecutor (2 –º–µ—Å—Ç–∞), OrderCoordinator
   - ‚ùå **–ü–†–û–ë–õ–ï–ú–ê:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ SignalCoordinator –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π timezone
   - ‚úÖ **–ó–ê–©–ò–¢–ê –ï–°–¢–¨:** OrderExecutor –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç limit_price

4. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∏–±—ã–ª—å—é (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–±–ª–µ–º #1, #2 (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ), #3 (–≤–æ–∑–º–æ–∂–Ω–æ, –∏–∑ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤), #4
   - ‚úÖ **–†–ê–°–ß–ï–¢ PnL –ü–†–ê–í–ò–õ–¨–ù–´–ô:** –û—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
   - ‚úÖ **–ö–û–ú–ò–°–°–ò–ò –£–ß–ò–¢–´–í–ê–Æ–¢–°–Ø:** –í net PnL

5. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–¶–ï–ü–û–ß–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** ExitDecisionCoordinator ‚Üí ExitAnalyzer ‚Üí timeout –ø—Ä–æ–≤–µ—Ä–∫–∞
   - ‚úÖ **TIMEOUT –†–ê–ë–û–¢–ê–ï–¢:** –î–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ —á–µ—Ä–µ–∑ ExitAnalyzer
   - ‚úÖ **PnL –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø –ü–†–ê–í–ò–õ–¨–ù–û:** –û—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)

6. **–î—Ä—É–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ü–†–û–í–ï–†–ï–ù–û):**
   - ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ü–†–ê–í–ò–õ–¨–ù–´–ï:** PnL, –∫–æ–º–∏—Å—Å–∏–∏, –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ, –ª–µ–≤–µ—Ä–∏–¥–∂, —Ä–µ–∂–∏–º—ã
   - ‚úÖ **–ú–ê–¢–ï–ú–ê–¢–ò–ö–ê –ü–†–ê–í–ò–õ–¨–ù–ê–Ø:** –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
   - ‚úÖ **–ù–ï–¢ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–• –ü–†–û–ë–õ–ï–ú:** –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Æ

### –ü–†–ò–û–†–ò–¢–ï–¢ P0 (–ö–†–ò–¢–ò–ß–ù–û - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –°–†–û–ß–ù–û):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ë–õ–ï–ú–£ #5 (timezone):**
   - –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 3453
   - –≠—Ç–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏—è —Ü–µ–Ω—ã

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ë–õ–ï–ú–£ #2 (—Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏):**
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å `signal_coordinator` (—Å—Ç—Ä–æ–∫–∞ 2472)
   - –≠—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç –ø—Ä–∏–±—ã–ª—å –≤ 100 —Ä–∞–∑

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ë–õ–ï–ú–£ #1 (ATR/ADX = 0.0):**
   - –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å ATR=0.0 –≤ DataRegistry
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É fallback –¥–ª—è 0.0 –≤ ATRProvider

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ë–õ–ï–ú–£ #3 (–∑–∞–∫—Ä—ã—Ç–∏–µ –≤ –±–æ–∫–æ–≤–∏–∫–µ):**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å timeout –ü–û–°–õ–ï ExitAnalyzer
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤

5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ü–†–û–ë–õ–ï–ú–£ #4 (–º–∞—Ä–∫–µ—Ä–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞):**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å market –æ—Ä–¥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–µ–ª—å—Ç—ã –ü–ï–†–ï–î —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞

---

**–°–¢–ê–¢–£–°:** ‚úÖ –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –¶–ï–ü–û–ß–ï–ö –ó–ê–í–ï–†–®–ï–ù–ê  
**–í–°–ï –ü–†–û–ë–õ–ï–ú–´:** ‚úÖ –ù–ê–ô–î–ï–ù–´, –ü–†–û–í–ï–†–ï–ù–´ –î–û –ö–û–ù–¶–ê, –û–ü–ò–°–ê–ù–´  
**–í–°–ï –¶–ï–ü–û–ß–ö–ò:** ‚úÖ –ü–†–û–í–ï–†–ï–ù–´ –û–¢ –ù–ê–ß–ê–õ–ê –î–û –ö–û–ù–¶–ê  
**–ù–ï–¢ "–ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨":** ‚úÖ –í–°–ï –ü–†–û–í–ï–†–ï–ù–û

---

## üî• –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í (05.01.2026)

### üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó –õ–û–ì–û–í:

**–ò—Å—Ç–æ—á–Ω–∏–∫:** `logs/futures/archived/logs_2026-01-05_02-16-05/futures_main_2026-01-05.log`

**–ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5000 —Å—Ç—Ä–æ–∫:**
- **ERROR:** 1 (–æ—à–∏–±–∫–∞ —Å–µ—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –º–∞—Ä–∂–∏)
- **WARNING:** ~200+ (–º–∞—Å—Å–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏)
- **WARNING [ATR]:** ~68 (–¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)
- **WARNING [REGIME]:** ~68 (–¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –ø–æ—Å—Ç–æ—è–Ω–Ω–æ)
- **WARNING [RSI]:** ~5 (–∏–Ω–æ–≥–¥–∞)
- **WARNING [INDICATORS]:** ~5 (–∏–Ω–æ–≥–¥–∞)
- **–ü–æ–∑–∏—Ü–∏–π –æ—Ç–∫—Ä—ã—Ç–æ:** 0 (–≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 2000 —Å—Ç—Ä–æ–∫–∞—Ö, –Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –æ—Ç–∫—Ä—ã—Ç–∞)

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #6: ATR –ù–ï –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø (–ö–†–ò–¢–ò–ß–ù–û!)

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´:

–í –ª–æ–≥–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
‚ö†Ô∏è [ATR] BTC-USDT: ATR –≤ DataRegistry = None (–Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
‚ö†Ô∏è [ATR] BTC-USDT: ATR –ù–ï –†–ê–°–°–ß–ò–¢–ê–ù (–∑–Ω–∞—á–µ–Ω–∏–µ=0.0, –∏—Å—Ç–æ—á–Ω–∏–∫=indicators/DataRegistry) - –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
```

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è **–í–°–ï–• –ø–∞—Ä** (BTC, ETH, SOL, DOGE, XRP) –Ω–∞ **–ö–ê–ñ–î–û–ô –∏—Ç–µ—Ä–∞—Ü–∏–∏**.

#### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

1. **`indicator_manager.calculate_all(market_data)` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ATR = 0.0 –∏–ª–∏ None:**
   - –ö–æ–¥ –≤ `signal_generator.py:1903` –≤—ã–∑—ã–≤–∞–µ—Ç `self.indicator_manager.calculate_all(market_data)`
   - ATR —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `TALibATR` (—Å—Ç—Ä–æ–∫–∞ 182) –∏–ª–∏ fallback
   - –ù–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç = 0.0 –∏–ª–∏ None

2. **–ö–æ–¥ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç ATR=0.0 –≤ DataRegistry (–ü–†–ê–í–ò–õ–¨–ù–û!):**
   ```python
   # signal_generator.py:1966-1972
   if key == "atr":
       if value == 0.0:
           logger.debug(f"‚ö†Ô∏è ATR –¥–ª—è {symbol} —Ä–∞–≤–µ–Ω 0.0 ... –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ DataRegistry")
           # ‚úÖ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è–µ–º ATR=0.0
   ```
   –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ù–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ ATR **–í–°–ï–ì–î–ê** = 0.0 –∏–ª–∏ None.

3. **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ—á–µ–º—É ATR = 0.0:**
   - **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ—á–µ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞:** ATR —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º `period + 1` —Å–≤–µ—á–µ–π (–¥–ª—è –ø–µ—Ä–∏–æ–¥–∞ 14 –Ω—É–∂–Ω–æ 15 —Å–≤–µ—á–µ–π)
   - **–û—à–∏–±–∫–∞ –≤ —Ä–∞—Å—á–µ—Ç–µ TALibATR:** TALib –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å 0.0 –ø—Ä–∏ –æ—à–∏–±–∫–µ
   - **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ market_data:** –°–≤–µ—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º–∏ –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏
   - **–ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π indicator_manager:** TALibATR –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:**
   - RiskManager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ATR –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
   - –ï—Å–ª–∏ ATR = 0.0 –∏–ª–∏ fallback, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –±—É–¥–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞:**
   - RegimeManager –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ATR –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
   - –ë–µ–∑ ATR —Ä–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ TP/SL:**
   - ExitAnalyzer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ATR –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ TP/SL
   - –ë–µ–∑ ATR –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º

4. **–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ù–ï –†–ê–°–°–ß–ò–¢–ê–ù":**
   - –í –ª–æ–≥–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤–∏–¥–Ω–æ, —á—Ç–æ ATR –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
   - –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

#### üí° –†–ï–®–ï–ù–ò–ï (–û–î–ù–û –ß–ï–¢–ö–û–ï, –ë–ï–ó FALLBACK):

**–í `signal_generator.py` –≤ –º–µ—Ç–æ–¥–µ `_generate_base_signals()` –ü–ï–†–ï–î —Ä–∞—Å—á–µ—Ç–æ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:**

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Å–≤–µ—á–µ–π –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:**
   ```python
   # –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1897, –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π 1903:
   if not market_data or not market_data.ohlcv_data:
       logger.error(f"‚ùå [ATR] {symbol}: market_data –∏–ª–∏ —Å–≤–µ—á–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
       return []  # –ë–ï–ó FALLBACK - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
   
   candles = market_data.ohlcv_data
   min_candles_required = 15  # period=14 + 1 –¥–ª—è ATR
   if len(candles) < min_candles_required:
       logger.error(f"‚ùå [ATR] {symbol}: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ—á–µ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ ATR ({len(candles)} < {min_candles_required}) - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
       return []  # –ë–ï–ó FALLBACK - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
   
   # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–≤–µ—á–µ–π (–≤—Å–µ —Ü–µ–Ω—ã > 0)
   invalid_candles = [i for i, c in enumerate(candles) if c.high <= 0 or c.low <= 0 or c.close <= 0]
   if invalid_candles:
       logger.error(f"‚ùå [ATR] {symbol}: –ù–∞–π–¥–µ–Ω—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å–≤–µ—á–∏ (–∏–Ω–¥–µ–∫—Å—ã: {invalid_candles[:5]}) - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
       return []  # –ë–ï–ó FALLBACK - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
   ```

2. **–ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç ATR:**
   ```python
   # –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1939, –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ DataRegistry:
   atr_value = indicators.get("atr") or indicators.get("atr_14")
   if atr_value is None or atr_value <= 0:
       logger.error(f"‚ùå [ATR] {symbol}: ATR –Ω–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –∏–ª–∏ —Ä–∞–≤–µ–Ω 0/None (value={atr_value}) - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
       logger.error(f"   –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–µ—á–µ–π: {len(candles)}, indicator_results keys: {list(indicator_results.keys())}")
       return []  # –ë–ï–ó FALLBACK - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
   ```

3. **–£–±—Ä–∞—Ç—å fallback –∏–∑ ATRProvider:**
   ```python
   # –í atr_provider.py:36 - —É–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä fallback, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ None:
   def get_atr(self, symbol: str) -> Optional[float]:  # –£–ë–†–ê–¢–¨ fallback –ø–∞—Ä–∞–º–µ—Ç—Ä
       # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
       # –£–ë–†–ê–¢–¨ —Å—Ç—Ä–æ–∫–∏ 120-125 (fallback –ª–æ–≥–∏–∫–∞)
       # –í–º–µ—Å—Ç–æ return fallback - –ø—Ä–æ—Å—Ç–æ return None
       return None  # –ë–ï–ó FALLBACK
   ```

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø –†–ï–®–ï–ù–ò–Ø:

1. **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ:**
   - ‚úÖ –ë–æ—Ç –ù–ï –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - ‚úÖ –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –¢–û–ß–ù–£–Æ –ø—Ä–∏—á–∏–Ω—É –ø–æ—á–µ–º—É ATR –Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è
   - ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É - –æ–Ω–∞ –±—É–¥–µ—Ç –≤–∏–¥–Ω–∞ —Å—Ä–∞–∑—É
   - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Ä—É—à–∏—Ç—Å—è - –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ–∫–∞ –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤–∞–ª–∏–¥–Ω—ã

2. **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ):**
   - ‚ö†Ô∏è –ë–æ—Ç –º–æ–∂–µ—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ (–ø–æ–∫–∞ –Ω–µ –Ω–∞–∫–æ–ø–∏—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ—á–µ–π)
   - ‚ö†Ô∏è –ï—Å–ª–∏ —Å–≤–µ—á–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ, —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ WebSocket –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–µ—á–∏ –≤ DataRegistry

3. **–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
   - **RiskManager:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å `None` –≤–º–µ—Å—Ç–æ fallback - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - **ExitAnalyzer:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å `None` –≤–º–µ—Å—Ç–æ fallback - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - **RegimeManager:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å `None` –≤–º–µ—Å—Ç–æ fallback - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
   - **SignalCoordinator:** –£–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ ATR - –ø—Ä–æ—Å—Ç–æ –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å `None` –≤–º–µ—Å—Ç–æ fallback

#### üîÑ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –í–ê–†–ò–ê–ù–¢–´:

**–í–∞—Ä–∏–∞–Ω—Ç –ê (–≤—ã–±—Ä–∞–Ω–Ω—ã–π):** –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞—Ç—å fallback, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `None` –∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∞–Ω–Ω—ã–º–∏

**–í–∞—Ä–∏–∞–Ω—Ç –ë:** –û—Å—Ç–∞–≤–∏—Ç—å fallback, –Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å ERROR –ø—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–∫—Ä—ã—Ç—ã
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å
- ‚úÖ –ë–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö)

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #7: –†–ï–ñ–ò–ú –ù–ï –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø –í DATAREGISTRY (–ö–†–ò–¢–ò–ß–ù–û!)

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´:

–í –ª–æ–≥–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
‚ö†Ô∏è [REGIME] BTC-USDT: –†–µ–∂–∏–º –ù–ï –Ω–∞–π–¥–µ–Ω –≤ DataRegistry (regime_data=None)
‚ö†Ô∏è [REGIME] BTC-USDT: –†–µ–∂–∏–º –ù–ï –æ–ø—Ä–µ–¥–µ–ª–µ–Ω - –≤–æ–∑–º–æ–∂–Ω–æ, –µ—â–µ –Ω–µ –±—ã–ª —Ä–∞—Å—Å—á–∏—Ç–∞–Ω RegimeManager
```

–≠—Ç–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –¥–ª—è **–í–°–ï–• –ø–∞—Ä** –Ω–∞ **–ö–ê–ñ–î–û–ô –∏—Ç–µ—Ä–∞—Ü–∏–∏**.

#### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

1. **RegimeManager.detect_regime() –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ generate_signals():**
   - –í `orchestrator.py:2647` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `self.signal_generator.generate_signals()`
   - –ù–û –ø–µ—Ä–µ–¥ —ç—Ç–∏–º **–ù–ï–¢** –≤—ã–∑–æ–≤–∞ `regime_manager.detect_regime()` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
   - –†–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ DataRegistry

2. **RegimeManager –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥ update_regime() (—Å—Ç—Ä–æ–∫–∏ 722, 770), –Ω–æ –æ–Ω –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**
   - –ö–æ–¥ –≤ `regime_manager.py:722` –∏ `770` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ `data_registry.update_regime()`
   - –ù–æ —ç—Ç–æ—Ç –∫–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `detect_regime()`, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

3. **–ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–æ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π:**
   - Orchestrator –≤—ã–∑—ã–≤–∞–µ—Ç `generate_signals()` –ë–ï–ó –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
   - SignalGenerator –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry, –Ω–æ –µ–≥–æ —Ç–∞–º –ù–ï–¢

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø:

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
   - –§–∏–ª—å—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–µ–∂–∏–º –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –ë–µ–∑ —Ä–µ–∂–∏–º–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback –∑–Ω–∞—á–µ–Ω–∏—è, —á—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞:**
   - SignalGenerator –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∂–∏–º –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞
   - –ë–µ–∑ —Ä–µ–∂–∏–º–∞ —Å–∏–≥–Ω–∞–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏

3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ TP/SL:**
   - ExitAnalyzer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∂–∏–º –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ TP/SL
   - –ë–µ–∑ —Ä–µ–∂–∏–º–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è fallback –∑–Ω–∞—á–µ–Ω–∏—è

4. **–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "–ù–ï –û–ü–†–ï–î–ï–õ–ï–ù":**
   - –í –ª–æ–≥–∞—Ö –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤–∏–¥–Ω–æ, —á—Ç–æ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
   - –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–π –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

#### üí° –†–ï–®–ï–ù–ò–ï (–û–î–ù–û –ß–ï–¢–ö–û–ï, –ë–ï–ó FALLBACK):

**–í `signal_generator.py` –≤ –º–µ—Ç–æ–¥–µ `generate_signals()` –ü–ï–†–ï–î –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞:**

```python
# –í signal_generator.py –≤ –º–µ—Ç–æ–¥–µ generate_signals(), –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º _generate_base_signals():
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ –ø–æ–ª—É—á–∞–µ–º market_data –¥–ª—è —Å–∏–º–≤–æ–ª–∞, –ø–µ—Ä–µ–¥ —Å—Ç—Ä–æ–∫–æ–π –≥–¥–µ –≤—ã–∑—ã–≤–∞–µ–º _generate_base_signals():

# 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º –ü–ï–†–ï–î –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤
if self.regime_manager and self.data_registry:
    try:
        candles = await self.data_registry.get_candles(symbol, "1m")
        if candles and len(candles) >= 50:  # –ú–∏–Ω–∏–º—É–º –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞
            current_price = candles[-1].close
            # –í—ã–∑—ã–≤–∞–µ–º detect_regime - –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç —Ä–µ–∂–∏–º –≤ DataRegistry
            regime_result = await self.regime_manager.detect_regime(candles, current_price)
            if not regime_result:
                logger.error(f"‚ùå [REGIME] {symbol}: detect_regime –≤–µ—Ä–Ω—É–ª None - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
                continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –ë–ï–ó FALLBACK
        else:
            logger.error(f"‚ùå [REGIME] {symbol}: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–≤–µ—á–µ–π –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ ({len(candles) if candles else 0} < 50) - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
            continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –ë–ï–ó FALLBACK
    except Exception as e:
        logger.error(f"‚ùå [REGIME] {symbol}: –û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞: {e} - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤", exc_info=True)
        continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –ë–ï–ó FALLBACK
else:
    logger.error(f"‚ùå [REGIME] {symbol}: RegimeManager –∏–ª–∏ DataRegistry –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –ë–ï–ó FALLBACK

# 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ DataRegistry
regime_data = await self.data_registry.get_regime(symbol)
if not regime_data or not regime_data.get("regime"):
    logger.error(f"‚ùå [REGIME] {symbol}: –†–µ–∂–∏–º –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DataRegistry –ø–æ—Å–ª–µ detect_regime - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
    continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–º–≤–æ–ª –ë–ï–ó FALLBACK
```

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø –†–ï–®–ï–ù–ò–Ø:

1. **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ:**
   - ‚úÖ –†–µ–∂–∏–º –í–°–ï–ì–î–ê –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤
   - ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - ‚úÖ –í –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –¢–û–ß–ù–£–Æ –ø—Ä–∏—á–∏–Ω—É –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
   - ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É - –æ–Ω–∞ –±—É–¥–µ—Ç –≤–∏–¥–Ω–∞ —Å—Ä–∞–∑—É

2. **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ):**
   - ‚ö†Ô∏è –ë–æ—Ç –º–æ–∂–µ—Ç –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è —Å–∏–º–≤–æ–ª–∞ –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ RegimeManager –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–≤–µ—á–µ–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞

3. **–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
   - **SignalGenerator:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry - —Ä–µ–∂–∏–º –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
   - **FilterManager:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
   - **ExitAnalyzer:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry - TP/SL –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏
   - **ParameterProvider:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏

#### üîÑ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –í–ê–†–ò–ê–ù–¢–´:

**–í–∞—Ä–∏–∞–Ω—Ç –ê (–≤—ã–±—Ä–∞–Ω–Ω—ã–π):** –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ–∂–∏–º –≤–Ω—É—Ç—Ä–∏ `generate_signals()` –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á—Ç–æ —Ä–µ–∂–∏–º –≤—Å–µ–≥–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ orchestrator
- ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç –ë:** –û–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ä–µ–∂–∏–º –≤ orchestrator –ø–µ—Ä–µ–¥ `generate_signals()`
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ orchestrator
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–º –µ—Å–ª–∏ —Ä–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ä–∞–∑—É
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

---

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #8: –ò–ù–î–ò–ö–ê–¢–û–†–´ –ù–ï –ü–û–ü–ê–î–ê–Æ–¢ –í market_data.indicators (–ö–†–ò–¢–ò–ß–ù–û!)

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´:

–í –ª–æ–≥–∞—Ö –∏–Ω–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
‚ö†Ô∏è [RSI] BTC-USDT: RSI –ù–ï –Ω–∞–π–¥–µ–Ω –≤ market_data.indicators
‚ö†Ô∏è [INDICATORS] BTC-USDT: indicators –ø—É—Å—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è MACD/ATR
```

#### üîç –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê:

1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è, –Ω–æ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ market_data.indicators:**
   - –í `signal_generator.py:1903` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `indicator_manager.calculate_all(market_data)`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `indicators` dict (—Å—Ç—Ä–æ–∫–∞ 1907)
   - –ù–û `market_data.indicators` –ù–ï –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è!

2. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ DataRegistry:**
   - –ö–æ–¥ –≤ `signal_generator.py:2020` —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —á–µ—Ä–µ–∑ `data_registry.update_indicators()`
   - –ù–æ `market_data.indicators` –æ—Å—Ç–∞–µ—Ç—Å—è –ø—É—Å—Ç—ã–º

3. **SignalCoordinator –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ market_data.indicators:**
   - –í `signal_coordinator.py:1678` –∫–æ–¥ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å RSI –∏–∑ `market_data.indicators`
   - –ù–æ —Ç–∞–º –∏—Ö –ù–ï–¢, –ø–æ—ç—Ç–æ–º—É –ø–æ—è–≤–ª—è–µ—Ç—Å—è WARNING

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø:

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:**
   - SignalCoordinator –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ `market_data.indicators`
   - –ù–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç–∞–º –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –∏–∑ DataRegistry

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤:**
   - –§–∏–ª—å—Ç—Ä—ã –º–æ–≥—É—Ç –æ–∂–∏–¥–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ `market_data.indicators`
   - –ù–æ –∏—Ö —Ç–∞–º –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### üí° –†–ï–®–ï–ù–ò–ï (–û–î–ù–û –ß–ï–¢–ö–û–ï, –ë–ï–ó FALLBACK):

**–í `signal_generator.py` –≤ –º–µ—Ç–æ–¥–µ `_generate_base_signals()` –ü–û–°–õ–ï —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:**

```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1939, –ø–æ—Å–ª–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ indicator_results –≤ indicators dict:
# –û–±–Ω–æ–≤–ª—è–µ–º market_data.indicators –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å–æ —Å—Ç–∞—Ä—ã–º –∫–æ–¥–æ–º
if not hasattr(market_data, 'indicators'):
    market_data.indicators = {}
market_data.indicators.update(indicators)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
if not market_data.indicators:
    logger.error(f"‚ùå [INDICATORS] {symbol}: market_data.indicators –ø—É—Å—Ç –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è - –ü–†–û–ü–£–°–ö–ê–ï–ú –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤")
    return []  # –ë–ï–ó FALLBACK - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
```

**–ò –∏–∑–º–µ–Ω–∏—Ç—å `signal_coordinator.py` —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ DataRegistry (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) –∏–ª–∏ market_data.indicators (fallback):**

```python
# –í signal_coordinator.py:1670-1699, –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:
# –ü–†–ò–û–†–ò–¢–ï–¢ 1: DataRegistry
indicators_from_registry = None
if self.data_registry:
    try:
        indicators_from_registry = await self.data_registry.get_indicators(symbol)
    except Exception as e:
        logger.error(f"‚ùå [INDICATORS] {symbol}: –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑ DataRegistry: {e}")

# –ü–†–ò–û–†–ò–¢–ï–¢ 2: market_data.indicators (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ DataRegistry –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
if not indicators_from_registry:
    if hasattr(market_data, "indicators") and market_data.indicators:
        indicators_from_registry = market_data.indicators
        logger.debug(f"‚ö†Ô∏è [INDICATORS] {symbol}: –ò—Å–ø–æ–ª—å–∑—É–µ–º market_data.indicators (DataRegistry –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)")
    else:
        logger.error(f"‚ùå [INDICATORS] {symbol}: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∏ –≤ DataRegistry, –Ω–∏ –≤ market_data.indicators - –ü–†–û–ü–£–°–ö–ê–ï–ú –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–≥–Ω–∞–ª–æ–≤")
        return  # –ë–ï–ó FALLBACK - –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏

# –ò—Å–ø–æ–ª—å–∑—É–µ–º indicators_from_registry –≤–º–µ—Å—Ç–æ indicators
indicators = indicators_from_registry
```

#### ‚ö†Ô∏è –ü–û–°–õ–ï–î–°–¢–í–ò–Ø –†–ï–®–ï–ù–ò–Ø:

1. **–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ:**
   - ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –≤ DataRegistry, –∏ –≤ market_data.indicators
   - ‚úÖ SignalCoordinator –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
   - ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ (market_data.indicators)
   - ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (DataRegistry) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

2. **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ):**
   - ‚ö†Ô∏è –ù–µ–±–æ–ª—å—à–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö)
   - ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π –º–µ–∂–¥—É DataRegistry –∏ market_data.indicators

3. **–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
   - **SignalCoordinator:** –ë—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ DataRegistry (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) –∏–ª–∏ market_data.indicators
   - **FilterManager:** –ú–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∏–∑ –æ–±–æ–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - **ExitAnalyzer:** –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DataRegistry - –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è
   - **SignalGenerator:** –û–±–Ω–æ–≤–ª—è–µ—Ç –æ–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

#### üîÑ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –í–ê–†–ò–ê–ù–¢–´:

**–í–∞—Ä–∏–∞–Ω—Ç –ê (–≤—ã–±—Ä–∞–Ω–Ω—ã–π):** –û–±–Ω–æ–≤–ª—è—Ç—å market_data.indicators –ò –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DataRegistry –∫–∞–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ –î–≤–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–∏–∑–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

**–í–∞—Ä–∏–∞–Ω—Ç –ë:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û DataRegistry, —É–±—Ä–∞—Ç—å market_data.indicators
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è market_data.indicators
- ‚ö†Ô∏è –ú–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
- ‚úÖ –û–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã

---

### üìã –ò–¢–û–ì–û–í–´–ô –°–ü–ò–°–û–ö –ü–†–û–ë–õ–ï–ú:

1. ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #1:** ATR –∏ ADX = 0.0 (–†–ê–°–°–ú–û–¢–†–ï–ù–ê –í–´–®–ï)
2. ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #2:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ = 0.000027 (–†–ê–°–°–ú–û–¢–†–ï–ù–ê –í–´–®–ï)
3. ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #3:** –ó–∞–∫—Ä—ã—Ç–∏–µ –≤ –±–æ–∫–æ–≤–∏–∫–µ –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞ (–†–ê–°–°–ú–û–¢–†–ï–ù–ê –í–´–®–ï)
4. ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #4:** –ú–∞—Ä–∫–µ—Ä–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ (–†–ê–°–°–ú–û–¢–†–ï–ù–ê –í–´–®–ï)
5. ‚úÖ **–ü–†–û–ë–õ–ï–ú–ê #5:** –û—à–∏–±–∫–∞ timezone (–†–ê–°–°–ú–û–¢–†–ï–ù–ê –í–´–®–ï)
6. üî• **–ü–†–û–ë–õ–ï–ú–ê #6:** ATR –ù–ï –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø (–ù–û–í–ê–Ø!)
7. üî• **–ü–†–û–ë–õ–ï–ú–ê #7:** –†–µ–∂–∏–º –ù–ï –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø (–ù–û–í–ê–Ø!)
8. üî• **–ü–†–û–ë–õ–ï–ú–ê #8:** –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ market_data.indicators (–ù–û–í–ê–Ø!)

---

**–°–¢–ê–¢–£–°:** ‚úÖ –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ó–ê–í–ï–†–®–ï–ù  
**–ù–û–í–´–ï –ü–†–û–ë–õ–ï–ú–´:** ‚úÖ –ù–ê–ô–î–ï–ù–´ –ò –û–ü–ò–°–ê–ù–´  
**–ö–û–†–ù–ï–í–´–ï –ü–†–ò–ß–ò–ù–´:** ‚úÖ –û–ü–†–ï–î–ï–õ–ï–ù–´  
**–†–ï–®–ï–ù–ò–Ø:** ‚úÖ –ü–†–ï–î–õ–û–ñ–ï–ù–´ (–û–î–ù–û –ß–ï–¢–ö–û–ï –ù–ê –ü–†–û–ë–õ–ï–ú–£, –ë–ï–ó FALLBACK)

---

## üìù –ò–¢–û–ì–û–í–´–ï –†–ï–®–ï–ù–ò–Ø (–ë–ï–ó FALLBACK):

### ‚úÖ –†–ï–®–ï–ù–ò–ï #6: ATR –ù–ï –†–ê–°–°–ß–ò–¢–´–í–ê–ï–¢–°–Ø

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Å–≤–µ—á–µ–π –ü–ï–†–ï–î —Ä–∞—Å—á–µ—Ç–æ–º ATR
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á–µ—Ç–∞ ATR - –µ—Å–ª–∏ None –∏–ª–∏ <= 0, –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤
3. –£–±—Ä–∞—Ç—å fallback –∏–∑ ATRProvider - –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ None

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã –±—É–¥—É—Ç –≤–∏–¥–Ω—ã —Å—Ä–∞–∑—É –≤ –ª–æ–≥–∞—Ö
- ‚ö†Ô∏è –ú–µ–Ω—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –¥–∞–Ω–Ω—ã–º–∏ (–Ω–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
- RiskManager, ExitAnalyzer, RegimeManager –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å `None` –∏ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å ERROR

---

### ‚úÖ –†–ï–®–ï–ù–ò–ï #7: –†–ï–ñ–ò–ú –ù–ï –°–û–•–†–ê–ù–Ø–ï–¢–°–Ø

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –í—ã–∑—ã–≤–∞—Ç—å `regime_manager.detect_regime()` –ü–ï–†–ï–î –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —á—Ç–æ —Ä–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ DataRegistry
3. –ï—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Å–∏–º–≤–æ–ª–∞

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –†–µ–∂–∏–º –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚ö†Ô∏è –ú–µ–Ω—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è (–Ω–æ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
- SignalGenerator, FilterManager, ExitAnalyzer, ParameterProvider –±—É–¥—É—Ç –ø–æ–ª—É—á–∞—Ç—å —Ä–µ–∂–∏–º –∏–∑ DataRegistry

---

### ‚úÖ –†–ï–®–ï–ù–ò–ï #8: –ò–ù–î–ò–ö–ê–¢–û–†–´ –ù–ï –í market_data.indicators

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –û–±–Ω–æ–≤–ª—è—Ç—å `market_data.indicators` –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
2. –ò–∑–º–µ–Ω–∏—Ç—å SignalCoordinator —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –∏–∑ DataRegistry (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç) –∏–ª–∏ market_data.indicators
3. –ï—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã - –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–≥–Ω–∞–ª–æ–≤

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚ö†Ô∏è –ù–µ–±–æ–ª—å—à–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ)

**–í–∑–∞–∏–º–æ—Å–≤—è–∑–∏:**
- SignalCoordinator –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DataRegistry –∫–∞–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- FilterManager –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- ExitAnalyzer —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DataRegistry - –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è

---

## üö´ –£–î–ê–õ–ï–ù–ò–ï –í–°–ï–• FALLBACK:

**–ì–¥–µ —É–±—Ä–∞—Ç—å fallback:**
1. `atr_provider.py:36` - —É–±—Ä–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `fallback`, –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Ç–æ–ª—å–∫–æ `None`
2. `signal_generator.py:2099` - —É–±—Ä–∞—Ç—å `fallback=5.0` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `get_atr()`
3. `exit_analyzer.py:5172` - —É–±—Ä–∞—Ç—å `return 5.0` –≤ `_get_atr()`
4. –í—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `.get(..., default)` –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ - –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É `None`
5. –í—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `or "ranging"` –¥–ª—è —Ä–µ–∂–∏–º–∞ - –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É `None`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö
- ‚úÖ –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–µ –Ω–∞—Ä—É—à–∏—Ç—Å—è - –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—É–¥–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
