# üìä –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ CORRELATION FILTER

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**Correlation Filter –±–ª–æ–∫–∏—Ä—É–µ—Ç –í–°–ï —Å–∏–≥–Ω–∞–ª—ã LONG –Ω–∞ –≤—Å–µ—Ö 5 –ø–∞—Ä–∞—Ö, —Ö–æ—Ç—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è —Ä–µ–∂–∏–º–∞ `ranging` —É–∫–∞–∑–∞–Ω–æ `max_correlated_positions: 4`.**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ—Ç–µ—Ä—è –ø—Ä–∏–±—ã–ª–∏ –Ω–∞ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ (SOLUSDT +5.64%, ETH +6.35%, XRP +8.65%).

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ë–õ–û–ö–ò–†–û–í–û–ö

**–ù–∞–π–¥–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö (23:10:00 - 23:12:45):**
- **49+ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** –≤—Å–µ—Ö –ø–∞—Ä:
  - BTC-USDT LONG: `Too many correlated positions (3/2)` - **19+ —Ä–∞–∑**
  - ETH-USDT LONG: `Too many correlated positions (3/2)` - **11+ —Ä–∞–∑**
  - SOL-USDT LONG: `Too many correlated positions (4/2)` - **11+ —Ä–∞–∑**
  - DOGE-USDT LONG: `Too many correlated positions (3/2)` - **11+ —Ä–∞–∑**
  - XRP-USDT LONG: `Too many correlated positions (3/2)` - **11+ —Ä–∞–∑**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–º–∏—Ç **2**, —Ö–æ—Ç—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è `ranging` —É–∫–∞–∑–∞–Ω–æ **4**.

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `config_futures.yaml`:

**–†–µ–∂–∏–º `ranging` (–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º):**
```yaml
ranging:
  modules:
    correlation_filter:
      threshold: 0.8
      max_correlated_positions: 4  # ‚úÖ –£–∫–∞–∑–∞–Ω–æ 4
      block_same_direction_only: true
```

**–†–µ–∂–∏–º `trending`:**
```yaml
trending:
  modules:
    correlation_filter:
      threshold: 0.7
      max_correlated_positions: 3
      block_same_direction_only: true
```

**–†–µ–∂–∏–º `choppy`:**
```yaml
choppy:
  modules:
    correlation_filter:
      threshold: 0.85
      max_correlated_positions: 6
      block_same_direction_only: false
```

---

### 2. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ:

**–í `signal_generator.py` —Å—Ç—Ä–æ–∫–∞ 756:**
```python
corr_max_positions = 2  # ‚ùå –ñ–ï–°–¢–ö–û –ó–ê–î–ê–ù–ù–û–ï –ó–ù–ê–ß–ï–ù–ò–ï
```

**–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∞ 413):**
```python
max_correlated_positions=corr_dict.get(
    "max_correlated_positions", 2  # ‚ùå FALLBACK = 2
),
```

**–ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ 3327):**
```python
max_correlated_positions=corr_modules.max_correlated_positions,
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback = **2**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∏–∑ —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ (—Å—Ç—Ä–æ–∫–∞ 3324-3332)
- –ù–æ –≤ –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–º–∏—Ç **2**, –∞ –Ω–µ **4**
- –í–æ–∑–º–æ–∂–Ω–æ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–ª–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤

---

### 3. –¢–µ–∫—É—â–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏:

1. **BTC-USDT (SHORT)** - –æ—Ç–∫—Ä—ã—Ç–∞ –≤ 22:53:45
2. **ETH-USDT (SHORT)** - –æ—Ç–∫—Ä—ã—Ç–∞ –≤ 22:54:41
3. **DOGE-USDT (SHORT)** - –æ—Ç–∫—Ä—ã—Ç–∞ –≤ 22:54:09
4. **XRP-USDT (LONG)** - –æ—Ç–∫—Ä—ã—Ç–∞ –≤ 22:54:26

**–í—Å–µ–≥–æ:** 4 –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (3 SHORT, 1 LONG)

---

### 4. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –ø–∞—Ä–∞–º–∏ (–∏–∑ –ª–æ–≥–æ–≤):

**–í—Å–µ –ø–∞—Ä—ã –≤—ã—Å–æ–∫–æ –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω—ã (97-99%):**
- BTC ‚Üî ETH: 0.98
- BTC ‚Üî XRP: 0.97
- BTC ‚Üî DOGE: 0.99
- BTC ‚Üî SOL: 0.98
- ETH ‚Üî XRP: 0.99
- ETH ‚Üî DOGE: 0.99
- ETH ‚Üî SOL: 0.98
- XRP ‚Üî DOGE: 0.99
- XRP ‚Üî SOL: 0.97
- DOGE ‚Üî SOL: 0.98

**–í—ã–≤–æ–¥:** –í—Å–µ 5 –ø–∞—Ä –¥–≤–∏–≥–∞—é—Ç—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç).

---

### 5. –ü–æ—á–µ–º—É –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è —Å–∏–≥–Ω–∞–ª—ã:

**–î–ª—è SOLUSDT LONG (–ø—Ä–∏–º–µ—Ä):**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏:
   - SOL ‚Üî ETH (SHORT): 0.98 > 0.8 ‚Üí –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–∞
   - SOL ‚Üî BTC (SHORT): 0.98 > 0.8 ‚Üí –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–∞
   - SOL ‚Üî DOGE (SHORT): 0.98 > 0.8 ‚Üí –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–∞
   - SOL ‚Üî XRP (LONG): 0.97 > 0.8 ‚Üí –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–∞
2. –ù–∞–π–¥–µ–Ω–æ **4 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏**
3. –ü—Ä–æ–≤–µ—Ä–∫–∞: `len(correlated_positions) >= max_correlated_positions`
   - –ï—Å–ª–∏ –ª–∏–º–∏—Ç **2**: `4 >= 2` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ö–ê** ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
   - –ï—Å–ª–∏ –ª–∏–º–∏—Ç **4**: `4 >= 4` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ö–ê** ‚úÖ (—Ç–æ–∂–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç!)

**–î–ª—è –¥—Ä—É–≥–∏—Ö –ø–∞—Ä (BTC, ETH, DOGE, XRP) LONG:**
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏:
   - –ù–∞—Ö–æ–¥–∏—Ç—Å—è **3 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏**
2. –ü—Ä–æ–≤–µ—Ä–∫–∞: `len(correlated_positions) >= max_correlated_positions`
   - –ï—Å–ª–∏ –ª–∏–º–∏—Ç **2**: `3 >= 2` ‚Üí **–ë–õ–û–ö–ò–†–û–í–ö–ê** ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç)
   - –ï—Å–ª–∏ –ª–∏–º–∏—Ç **4**: `3 >= 4` ‚Üí **–ù–ï –ë–õ–û–ö–ò–†–£–ï–¢–°–Ø** ‚úÖ (—Ä–∞–∑—Ä–µ—à–µ–Ω–æ)

---

### 6. –î–í–ï –ü–†–û–ë–õ–ï–ú–´:

#### –ü—Ä–æ–±–ª–µ–º–∞ #1: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏–º–∏—Ç (2 –≤–º–µ—Å—Ç–æ 4)
- –í –ª–æ–≥–∞—Ö: `(3/2)` –∏ `(4/2)` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–º–∏—Ç **2**
- –í –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è `ranging`: `max_correlated_positions: 4`
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
  1. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–∑ —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
  2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤
  3. Fallback –∑–Ω–∞—á–µ–Ω–∏–µ = 2 –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

#### –ü—Ä–æ–±–ª–µ–º–∞ #2: –î–∞–∂–µ —Å –ª–∏–º–∏—Ç–æ–º 4 SOLUSDT –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- SOLUSDT –∫–æ—Ä—Ä–µ–ª–∏—Ä—É–µ—Ç —Å–æ –≤—Å–µ–º–∏ 4 –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
- `4 >= 4` ‚Üí –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (—Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `>=`)
- **–ù—É–∂–Ω–æ –ª–∏–º–∏—Ç >= 5**, —á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ 5 –ø–∞—Ä –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## üìà –ú–ê–°–®–¢–ê–ë –ü–†–û–ë–õ–ï–ú–´

**–¢–æ—Ä–≥—É–µ–º 5 –ø–∞—Ä–∞–º–∏:**
- BTC-USDT
- ETH-USDT
- SOL-USDT
- DOGE-USDT
- XRP-USDT

**–ù–æ Correlation Filter –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç:**
- –†–µ–∂–∏–º `ranging`: **max 4 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏**
- –ü—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ –Ω–∞ –≤—Å–µ—Ö –ø–∞—Ä–∞—Ö ‚Üí **5-—è –ø–∞—Ä–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–µ—Ä—è–µ–º –ø—Ä–∏–±—ã–ª—å –Ω–∞ 5-–π –ø–∞—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, SOLUSDT +5.64%)
- –§–∏–ª—å—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏)
- –ù–æ —ç—Ç–æ **—Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ** –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ 5 –ø–∞—Ä–∞—Ö

---

## ‚ö†Ô∏è –í–´–í–û–î–´

### –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
1. ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–º–∏—Ç 2** –≤–º–µ—Å—Ç–æ 4 –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞)
2. ‚úÖ **–î–∞–∂–µ —Å –ª–∏–º–∏—Ç–æ–º 4** SOLUSDT –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (–Ω—É–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 5)
3. ‚úÖ **–í—Å–µ 5 –ø–∞—Ä –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω—ã** 97-99% (–Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ —Ñ–∏–ª—å—Ç—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç)

### –í–ª–∏—è–Ω–∏–µ –Ω–∞ –≤—Å–µ –ø–∞—Ä—ã:
- ‚úÖ **BTC-USDT LONG** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (3 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 2)
- ‚úÖ **ETH-USDT LONG** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (3 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 2)
- ‚úÖ **SOL-USDT LONG** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (4 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 2 –∏–ª–∏ >= 4)
- ‚úÖ **DOGE-USDT LONG** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (3 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 2)
- ‚úÖ **XRP-USDT LONG** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (3 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 2)

**–î–∞, –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ –í–°–ï–• –ø–∞—Ä–∞—Ö!**

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞:
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `update_parameters()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–∞–∂–¥–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ (`ranging`)
- –£–±—Ä–∞—Ç—å –∏–ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å fallback –∑–Ω–∞—á–µ–Ω–∏–µ = 2

### 2. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç –¥–ª—è —Ä–µ–∂–∏–º–∞ `ranging`:
- **–° 4 –¥–æ 5** (—á—Ç–æ–±—ã —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ 5 –ø–∞—Ä)
- –ò–ª–∏ **–¥–æ 6** (–∫–∞–∫ –≤ choppy —Ä–µ–∂–∏–º–µ, —Å –∑–∞–ø–∞—Å–æ–º)

### 3. –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –° `>=` –Ω–∞ `>` (—Å—Ç—Ä–æ–≥–∏–π –ª–∏–º–∏—Ç: 4 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ < 5 –ª–∏–º–∏—Ç = —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
- –ò–ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π (–≤—Å–µ LONG = —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ)

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤:
- `trending`: —É–≤–µ–ª–∏—á–∏—Ç—å —Å 3 –¥–æ 4-5
- `choppy`: –æ—Å—Ç–∞–≤–∏—Ç—å 6 (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

**–í `config_futures.yaml`:**

```yaml
ranging:
  modules:
    correlation_filter:
      threshold: 0.8
      max_correlated_positions: 5  # ‚úÖ –£–í–ï–õ–ò–ß–ò–¢–¨ —Å 4 –¥–æ 5 (–≤—Å–µ 5 –ø–∞—Ä)
      block_same_direction_only: true

trending:
  modules:
    correlation_filter:
      threshold: 0.7
      max_correlated_positions: 4  # ‚úÖ –£–í–ï–õ–ò–ß–ò–¢–¨ —Å 3 –¥–æ 4 (–±–æ–ª—å—à–µ –ø–æ–∑–∏—Ü–∏–π –≤ —Ç—Ä–µ–Ω–¥–µ)
      block_same_direction_only: true

choppy:
  modules:
    correlation_filter:
      threshold: 0.85
      max_correlated_positions: 6  # ‚úÖ –û–°–¢–ê–í–ò–¢–¨ 6 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)
      block_same_direction_only: false
```

---

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω:** ‚úÖ
**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:** ‚úÖ
**–í–ª–∏—è–Ω–∏–µ –Ω–∞ –≤—Å–µ –ø–∞—Ä—ã:** ‚úÖ
**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å `max_correlated_positions` –¥–æ 5 –¥–ª—è `ranging` —Ä–µ–∂–∏–º–∞



