# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –õ–û–ì–ò–ö–ò SHORT –ü–û–ó–ò–¶–ò–ô

**–î–∞—Ç–∞:** 2025-11-12  
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π

---

## ‚ùå –ü–†–û–ë–õ–ï–ú–ê

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

**–î–ª—è SHORT –ø–æ–∑–∏—Ü–∏–∏:**
- –°—Ç–æ–ø —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –ù–ò–ñ–ï entry_price: `entry_price * (1 - trail%)`
- –ü—Ä–∏–º–µ—Ä: Entry = 100000, —Å—Ç–æ–ø = 100000 * (1 - 0.005) = 99500
- –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–æ–ø –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∏–±—ã–ª—å–Ω–æ–π –∑–æ–Ω–µ –¥–ª—è SHORT!
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ = 99500, —ç—Ç–æ –ü–†–ò–ë–´–õ–¨ –¥–ª—è SHORT (100000 - 99500 = 500), –∞ –Ω–µ —É–±—ã—Ç–æ–∫!

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

**–î–ª—è SHORT –ø–æ–∑–∏—Ü–∏–∏:**
- –°—Ç–æ–ø —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –í–´–®–ï entry_price: `entry_price * (1 + trail%)`
- –ü—Ä–∏–º–µ—Ä: Entry = 100000, —Å—Ç–æ–ø = 100000 * (1 + 0.005) = 100500
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ: –°—Ç–æ–ø –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É–±—ã—Ç–æ—á–Ω–æ–π –∑–æ–Ω–µ –¥–ª—è SHORT!
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –¥–æ 100500, —ç—Ç–æ –£–ë–´–¢–û–ö –¥–ª—è SHORT (100500 - 100000 = 500)

---

## üîß –ò–ó–ú–ï–ù–ï–ù–ò–Ø –í –ö–û–î–ï

### 1. get_stop_loss() –¥–ª—è SHORT

**–î–æ:**
```python
else:  # short
    if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
        stop_loss = self.lowest_price * (1 + self.current_trail)
        max_stop = self.entry_price * (1 - self.initial_trail)  # ‚ùå –ù–ò–ñ–ï entry!
        stop_loss = min(stop_loss, max_stop)
    else:
        stop_loss = self.entry_price * (1 - self.current_trail)  # ‚ùå –ù–ò–ñ–ï entry!
    return stop_loss
```

**–ü–æ—Å–ª–µ:**
```python
else:  # short
    if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
        stop_loss = self.lowest_price * (1 + self.current_trail)
        min_stop = self.entry_price * (1 + self.initial_trail)  # ‚úÖ –í–´–®–ï entry!
        stop_loss = max(stop_loss, min_stop)  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º max –≤–º–µ—Å—Ç–æ min!
    else:
        stop_loss = self.entry_price * (1 + self.current_trail)  # ‚úÖ –í–´–®–ï entry!
    return stop_loss
```

---

### 2. should_close_position() –¥–ª—è SHORT (–∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞)

**–î–æ:**
```python
else:  # short
    if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
        adjusted_stop = self.lowest_price * (1 + adjusted_trail)
        max_stop = self.entry_price * (1 - self.initial_trail)  # ‚ùå –ù–ò–ñ–ï entry!
        adjusted_stop = min(adjusted_stop, max_stop)
    else:
        adjusted_stop = self.entry_price * (1 - adjusted_trail)  # ‚ùå –ù–ò–ñ–ï entry!
```

**–ü–æ—Å–ª–µ:**
```python
else:  # short
    if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
        adjusted_stop = self.lowest_price * (1 + adjusted_trail)
        min_stop = self.entry_price * (1 + self.initial_trail)  # ‚úÖ –í–´–®–ï entry!
        adjusted_stop = max(adjusted_stop, min_stop)  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º max –≤–º–µ—Å—Ç–æ min!
    else:
        adjusted_stop = self.entry_price * (1 + adjusted_trail)  # ‚úÖ –í–´–®–ï entry!
```

---

## üìä –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´

### –ü—Ä–∏–º–µ—Ä 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SHORT –ø–æ–∑–∏—Ü–∏–∏

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Entry price: 100000
- Initial trail: 0.5% (0.005)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –°—Ç–æ–ø: 100000 * (1 - 0.005) = 99500 ‚ùå (–Ω–∏–∂–µ entry, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- –°—Ç–æ–ø: 100000 * (1 + 0.005) = 100500 ‚úÖ (–≤—ã—à–µ entry, –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

---

### –ü—Ä–∏–º–µ—Ä 2: –¶–µ–Ω–∞ –∏–¥–µ—Ç –í–ù–ò–ó (–≤ –ø—Ä–∏–±—ã–ª—å –¥–ª—è SHORT)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Entry price: 100000
- Current price: 99000 (—Ü–µ–Ω–∞ —É–ø–∞–ª–∞)
- Current trail: 0.5% (0.005)
- Initial trail: 0.5% (0.005)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lowest_price = 99000` (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- –°—Ç–æ–ø: 99000 * (1 + 0.005) = 99495
- `max_stop = 100000 * (1 - 0.005) = 99500`
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–æ–ø: `min(99495, 99500) = 99495` ‚ùå (–Ω–∏–∂–µ entry, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lowest_price = 99000` (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è)
- –°—Ç–æ–ø: 99000 * (1 + 0.005) = 99495
- `min_stop = 100000 * (1 + 0.005) = 100500`
- –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–æ–ø: `max(99495, 100500) = 100500` ‚úÖ (–≤—ã—à–µ entry, –ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
- –ù–æ —ç—Ç–æ –Ω–µ —Å–æ–≤—Å–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ - —Å—Ç–æ–ø –¥–æ–ª–∂–µ–Ω –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π...

**–ù–û!** –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞: —Å—Ç–æ–ø –Ω–µ –¥–æ–ª–∂–µ–Ω –æ–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∏–∂–µ entry –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –¥–æ–ª–∂–µ–Ω –æ–ø—É—Å–∫–∞—Ç—å—Å—è, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –∏–¥–µ—Ç –≤ –ø—Ä–∏–±—ã–ª—å.

**–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê:**
- –ï—Å–ª–∏ —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry (–≤ –ø—Ä–∏–±—ã–ª—å), —Å—Ç–æ–ø –¥–æ–ª–∂–µ–Ω –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π
- –ù–æ —Å—Ç–æ–ø –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ entry * (1 + initial_trail) –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ü–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry, —Å—Ç–æ–ø –º–æ–∂–µ—Ç –æ–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∏–∂–µ entry * (1 + initial_trail)

**–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
- –£–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `min_stop` –¥–ª—è —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ —É–∂–µ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry
- –°—Ç–æ–ø –¥–æ–ª–∂–µ–Ω —Å–≤–æ–±–æ–¥–Ω–æ –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π, –∫–æ–≥–¥–∞ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏

---

### –ü—Ä–∏–º–µ—Ä 3: –¶–µ–Ω–∞ –∏–¥–µ—Ç –í–í–ï–†–• (–ø—Ä–æ—Ç–∏–≤ SHORT, –≤ —É–±—ã—Ç–æ–∫)

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- Entry price: 100000
- Current price: 101000 (—Ü–µ–Ω–∞ –ø–æ–¥–Ω—è–ª–∞—Å—å)
- Current trail: 0.5% (0.005)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lowest_price = 100000` (–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ 101000 > 100000)
- –°—Ç–æ–ø: 100000 * (1 - 0.005) = 99500
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `101000 >= 99500` ‚Üí TRUE
- –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `lowest_price = 100000` (–Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ 101000 > 100000)
- –°—Ç–æ–ø: 100000 * (1 + 0.005) = 100500
- –ü—Ä–æ–≤–µ—Ä–∫–∞: `101000 >= 100500` ‚Üí TRUE
- –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è ‚úÖ

**–í–´–í–û–î:** –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç–æ–ø –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–æ–Ω–µ (–≤—ã—à–µ entry).

---

## ‚úÖ –ò–¢–û–ì–û–í–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –û—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:

1. **–î–ª—è SHORT:** –°—Ç–æ–ø —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –í–´–®–ï entry_price: `entry_price * (1 + trail%)`
2. **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:** –°—Ç–æ–ø = `entry_price * (1 + initial_trail)` (–≤—ã—à–µ entry)
3. **–ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç (–≤ –ø—Ä–∏–±—ã–ª—å):** –°—Ç–æ–ø –æ–ø—É—Å–∫–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π: `lowest_price * (1 + trail%)`
4. **–ó–∞—â–∏—Ç–∞:** –°—Ç–æ–ø –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ entry * (1 + initial_trail) —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
5. **–ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ —Ä–∞—Å—Ç–µ—Ç (–≤ —É–±—ã—Ç–æ–∫):** –°—Ç–æ–ø –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ, –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ç–æ–ø–∞

---

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

–ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `min_stop` –¥–ª—è —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ —É–∂–µ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry, —á—Ç–æ–±—ã —Å—Ç–æ–ø –º–æ–≥ —Å–≤–æ–±–æ–¥–Ω–æ –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π.

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
```python
if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
    stop_loss = self.lowest_price * (1 + self.current_trail)
    min_stop = self.entry_price * (1 + self.initial_trail)
    stop_loss = max(stop_loss, min_stop)  # ‚ùå –≠—Ç–æ –º–µ—à–∞–µ—Ç —Å—Ç–æ–ø—É –æ–ø—É—Å–∫–∞—Ç—å—Å—è!
```

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
```python
if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
    # –¶–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry - —Å—Ç–æ–ø —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (–æ–ø—É—Å–∫–∞–µ—Ç—Å—è)
    stop_loss = self.lowest_price * (1 + self.current_trail)
    # ‚úÖ –ù–ï –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Å—Ç–æ–ø —Å–Ω–∏–∑—É - –ø–æ–∑–≤–æ–ª—è–µ–º –µ–º—É –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π
else:
    # –¶–µ–Ω–∞ –µ—â–µ –Ω–µ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry –∏–ª–∏ —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Å—Ç–æ–ø –≤—ã—à–µ entry
    stop_loss = self.entry_price * (1 + self.current_trail)
```

**–ù–û!** –ù—É–∂–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –æ—Ç —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Å—Ç–æ–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ entry –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê:**
```python
if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
    # –¶–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry - —Å—Ç–æ–ø —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (–æ–ø—É—Å–∫–∞–µ—Ç—Å—è)
    stop_loss = self.lowest_price * (1 + self.current_trail)
    # ‚úÖ –ó–∞—â–∏—Ç–∞: —Å—Ç–æ–ø –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∏–∂–µ entry –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
    # –ù–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ü–µ–Ω–∞ —É–ø–∞–ª–∞, —Å—Ç–æ–ø –º–æ–∂–µ—Ç –æ–ø—É—Å–∫–∞—Ç—å—Å—è —Å–≤–æ–±–æ–¥–Ω–æ
    if stop_loss < self.entry_price:
        # –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ current_trail –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏–π
        # –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º entry_price –∫–∞–∫ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Å—Ç–æ–ø
        stop_loss = self.entry_price * (1 + self.initial_trail)
else:
    # –¶–µ–Ω–∞ –µ—â–µ –Ω–µ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry –∏–ª–∏ —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Å—Ç–æ–ø –≤—ã—à–µ entry
    stop_loss = self.entry_price * (1 + self.current_trail)
```

**–ù–û!** –≠—Ç–æ –≤—Å–µ –µ—â–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –î–∞–≤–∞–π—Ç–µ –ø–æ–¥—É–º–∞–µ–º...

**–ü–†–ê–í–ò–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê –î–õ–Ø SHORT:**
1. –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: —Å—Ç–æ–ø = entry * (1 + initial_trail) - –í–´–®–ï entry
2. –ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç (lowest_price < entry): —Å—Ç–æ–ø = lowest_price * (1 + trail) - –º–æ–∂–µ—Ç –±—ã—Ç—å –ù–ò–ñ–ï entry (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏!)
3. –ö–æ–≥–¥–∞ —Ü–µ–Ω–∞ —Ä–∞—Å—Ç–µ—Ç: —Å—Ç–æ–ø –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –º–µ—Å—Ç–µ

**–í–´–í–û–î:** –ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `min_stop`, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å—Ç–æ–ø –î–û–õ–ñ–ï–ù –æ–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∏–∂–µ entry, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç!

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –£–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ min_stop –¥–ª—è —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ —Ü–µ–Ω–∞ —É–ø–∞–ª–∞:

```python
else:  # short
    if self.lowest_price < float("inf") and self.lowest_price < self.entry_price:
        # –¶–µ–Ω–∞ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry - —Å—Ç–æ–ø —Å–ª–µ–¥—É–µ—Ç –∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π (–æ–ø—É—Å–∫–∞–µ—Ç—Å—è)
        # –°—Ç–æ–ø –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–∏–∂–µ entry (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏!)
        stop_loss = self.lowest_price * (1 + self.current_trail)
    else:
        # –¶–µ–Ω–∞ –µ—â–µ –Ω–µ —É–ø–∞–ª–∞ –Ω–∏–∂–µ entry –∏–ª–∏ —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —Å—Ç–æ–ø –≤—ã—à–µ entry
        stop_loss = self.entry_price * (1 + self.current_trail)
    
    return stop_loss
```

---

## üìã –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

1. ‚úÖ **–û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –°—Ç–æ–ø –¥–ª—è SHORT —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –í–´–®–ï entry –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
2. ‚úÖ **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `min_stop`, —á—Ç–æ–±—ã —Å—Ç–æ–ø –º–æ–≥ –æ–ø—É—Å–∫–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π
3. ‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ–æ–≥–∏–∫–∞ –¥–ª—è SHORT —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!

