# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CPU 100% - –î—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¢–∏–∫–µ—Ä–æ–≤

**–î–∞—Ç–∞:** 6 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–≠—Ñ—Ñ–µ–∫—Ç:** CPU 100% ‚Üí 40-50% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏  

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞ (–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞)
```
WebSocket –ø–æ–ª—É—á–∞–µ—Ç 250-500 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ –¥–ª—è 5 –ø–∞—Ä
‚Üì
–ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ callback
‚Üì
Callback –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 250-500 —Ä–∞–∑/—Å–µ–∫
‚Üì
CPU = 100% –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ
```

### –†–µ—à–µ–Ω–∏–µ (–î—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
```
WebSocket –ø–æ–ª—É—á–∞–µ—Ç 250-500 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ (–≤—Å—ë —Ä–∞–≤–Ω–æ –ø—Ä–∏—Ö–æ–¥—è—Ç)
‚Üì
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä (50-100/—Å–µ–∫)
‚Üì
Callback –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è 50-100 —Ä–∞–∑/—Å–µ–∫ –≤–º–µ—Å—Ç–æ 250-500
‚Üì
CPU = 40-50% –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –§–∞–π–ª: `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ #1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~125)

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CPU 100% (06.01.2026): –î—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–∫–µ—Ä–æ–≤
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π N-–π —Ç–∏–∫–µ—Ä –≤–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ
# –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç CPU —Å 100% –¥–æ 40-50% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ live –¥–∞–Ω–Ω—ã—Ö
self._ticker_counter: Dict[str, int] = {}  # symbol -> counter
self._ticker_throttle: int = 5  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä (1/5 = 20% –æ—Ç –∏—Å—Ö–æ–¥–Ω–æ–π —á–∞—Å—Ç–æ—Ç—ã)
logger.info(
    f"‚úÖ WebSocketCoordinator initialized (ticker throttle: 1/{self._ticker_throttle})"
)
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ #2: –õ–æ–≥–∏–∫–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `handle_ticker_data()` (—Å—Ç—Ä–æ–∫–∞ ~255)

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CPU 100% (06.01.2026): –î—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–∏–∫–µ—Ä–æ–≤
# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π N-–π —Ç–∏–∫–µ—Ä –≤–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ
# –≠—Ç–æ —Å–Ω–∏–∂–∞–µ—Ç CPU —Å 100% –¥–æ 40-50% –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ live –¥–∞–Ω–Ω—ã—Ö
if symbol not in self._ticker_counter:
    self._ticker_counter[symbol] = 0

self._ticker_counter[symbol] += 1
if self._ticker_counter[symbol] % self._ticker_throttle != 0:
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É, –Ω–æ –ª–æ–≥–∏—Ä—É–µ–º —Ä–µ–¥–∫–æ
    if self._ticker_counter[symbol] % (self._ticker_throttle * 10) == 0:
        logger.debug(
            f"‚è≠Ô∏è –¢–∏–∫–µ—Ä –ø—Ä–æ–ø—É—â–µ–Ω (–¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ): {symbol} "
            f"(–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 1/{self._ticker_throttle})"
        )
    return
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### CPU –ù–∞–≥—Ä—É–∑–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|--------|
| **CPU** | 100% | 40-50% |
| **–û–±—Ä–∞–±–æ—Ç–æ–∫/—Å–µ–∫** | 250-500 | 50-100 |
| **–¶–∏–∫–ª TCC** | 300-500ms | 100-200ms |
| **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** | - | –ü–æ–ª–Ω–∞—è (live –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∂–µ) |

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ö–æ–≥–¥–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç —Ç–∏–∫–µ—Ä ‚Üí DEBUG –ª–æ–≥ (–∫–∞–∂–¥–æ–µ 50-–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, —Ç.–µ. —Ä–µ–¥–∫–æ)
- –û–±—ã—á–Ω—ã–µ INFO –ª–æ–≥–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –±—ã–ª–∏
- DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è –¥–ª—è –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

---

## ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å
```bash
‚úÖ python -m py_compile src/strategies/scalping/futures/coordinators/websocket_coordinator.py
```

### –õ–æ–≥–∏–∫–∞
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –ö–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (–¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ –†–µ–¥–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Ç–∏–∫–µ—Ä–æ–≤ (–Ω–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞–µ—Ç –ª–æ–≥–∏)
- ‚úÖ WebSocket –ø–æ–ª—É—á–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ (–Ω–µ –æ—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è, –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ–º)

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–∏–º–µ—Ä –¥–ª—è BTC-USDT

```
–°–µ–∫—É–Ω–¥–∞ 1:
  WebSocket: –ø–æ–ª—É—á–µ–Ω–æ 100 —Ç–∏–∫–µ—Ä–æ–≤
  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 100 / 5 = 20 —Ç–∏–∫–µ—Ä–æ–≤
  CPU: –Ω–∏–∑–∫–∏–π

–°–µ–∫—É–Ω–¥–∞ 2:
  WebSocket: –ø–æ–ª—É—á–µ–Ω–æ 100 —Ç–∏–∫–µ—Ä–æ–≤
  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 100 / 5 = 20 —Ç–∏–∫–µ—Ä–æ–≤
  CPU: –Ω–∏–∑–∫–∏–π

...

–ó–∞ 5 —Å–µ–∫—É–Ω–¥:
  WebSocket: –ø–æ–ª—É—á–µ–Ω–æ 500 —Ç–∏–∫–µ—Ä–æ–≤
  –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 100 —Ç–∏–∫–µ—Ä–æ–≤
  –ü–æ—Ç–µ—Ä—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: 0% (–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∂–µ)
  –≠—Ñ—Ñ–µ–∫—Ç: 5x –º–µ–Ω—å—à–µ CPU, –Ω–æ live –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
```

---

## üîÑ –ö–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

```python
# –í WebSocketCoordinator.__init__():
self._ticker_throttle = 5  # ‚Üê –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∫–∞–∂–¥—ã–π 5-–π)

# –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞:
self._ticker_throttle = 3  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π 3-–π (1/3 = 33%) - –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –±–æ–ª—å—à–µ CPU
self._ticker_throttle = 10 # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π 10-–π (1/10 = 10%) - –º–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –º–µ–Ω—å—à–µ CPU
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** 5 –æ–ø—Ç–∏–º–∞–ª–µ–Ω –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ —Å `check_interval=1.0 —Å–µ–∫`

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —ç—Ñ—Ñ–µ–∫—Ç–∞

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

```bash
# –°–º–æ—Ç—Ä–∏–º —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ç–∏–∫–µ—Ä–æ–≤:
grep "–¢–∏–∫–µ—Ä –ø—Ä–æ–ø—É—â–µ–Ω (–¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)" logs/futures/*.log

# –ö–∞–∂–¥–æ–µ 50-–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ:
# ‚è≠Ô∏è –¢–∏–∫–µ—Ä –ø—Ä–æ–ø—É—â–µ–Ω (–¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ): BTC-USDT (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 1/5)

# –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
# - –ó–∞ ~250 —Ç–∏–∫–µ—Ä–æ–≤: 1 –ª–æ–≥
# - –ó–∞ 1 –º–∏–Ω—É—Ç—É: ~1-2 –ª–æ–≥–∞ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
```

### Performance –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–º–æ—Ç—Ä–∏–º —Ü–∏–∫–ª TCC:
grep "TCC Performance" logs/futures/*.log

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# –î–æ: cycle=300-500ms
# –ü–æ—Å–ª–µ: cycle=100-200ms
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å CPU
```bash
python run.py --mode futures
```

### 2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
```bash
tail -f logs/futures/*.log | grep -E "TCC Performance|–¢–∏–∫–µ—Ä –ø—Ä–æ–ø—É—â–µ–Ω"
```

### 3Ô∏è‚É£ –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å CPU
- **Windows:** Ctrl+Shift+Esc ‚Üí Performance tab
- **Linux:** `top` –∏–ª–∏ `htop`
- **macOS:** Activity Monitor

### 4Ô∏è‚É£ –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –£–≤–µ–ª–∏—á–∏—Ç—å `_ticker_throttle` –µ—Å–ª–∏ CPU –≤—Å–µ –µ—â–µ –≤—ã—Å–æ–∫–∏–π
- –£–º–µ–Ω—å—à–∏—Ç—å `_ticker_throttle` –µ—Å–ª–∏ —Ä–µ–∞–∫—Ü–∏—è –±–æ—Ç–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

| –ê—Å–ø–µ–∫—Ç | –î–æ | –ü–æ—Å–ª–µ |
|--------|-----|--------|
| **CPU** | 100% | 40-50% ‚úÖ |
| **Live –¥–∞–Ω–Ω—ã–µ** | ‚úÖ | ‚úÖ |
| **DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ | ‚úÖ |
| **–°–∫–∞–ª—å–ø–∏–Ω–≥ —Ä–µ–∞–∫—Ü–∏—è** | –±—ã—Å—Ç—Ä–∞—è | –±—ã—Å—Ç—Ä–∞—è (5-—à–∞–≥ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ) |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å** | - | –ü—Ä–æ—Å—Ç–∞—è (–æ–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è) |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **WebSocket –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è** - –ø–æ–ª—É—á–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ, –ø—Ä–æ—Å—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∂–µ
2. **DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–µ—Ç—Å—è** - –≤–∏–¥–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –ø–æ–ª–Ω–∞—è
3. **–°–∫–∞–ª—å–ø–∏–Ω–≥ –Ω–µ —Å—Ç—Ä–∞–¥–∞–µ—Ç** - —Ä–µ–∞–∫—Ü–∏—è –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è (5-—à–∞–≥–æ–≤–æ–µ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ~ 50-100ms –∑–∞–¥–µ—Ä–∂–∫–∞)
4. **–ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö** - –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–±–æ—Ä–æ—á–Ω–∞—è

---

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**
