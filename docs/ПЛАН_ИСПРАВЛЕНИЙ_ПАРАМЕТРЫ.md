# üîß –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –°–ò–°–¢–ï–ú–´ –ü–ê–†–ê–ú–ï–¢–†–û–í

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ù–´–ô  
**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2-3 —á–∞—Å–∞  

---

## üéØ –ì–õ–ê–í–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #1: max_holding_minutes FALLBACK –Ω–∞ 120 –º–∏–Ω—É—Ç

**–ì–¥–µ –Ω–∞–π—Ç–∏:**
- –§–∞–π–ª: `src/strategies/scalping/futures/config/parameter_provider.py`
- –°—Ç—Ä–æ–∫–∏: 167-197
- –§—É–Ω–∫—Ü–∏—è: `get_exit_params()`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
exit_params["max_holding_minutes"] = _to_float(
    exit_params.get("max_holding_minutes"),
    "max_holding_minutes",
    25.0 if regime and regime.lower() == "ranging" else 120.0,  # üî¥ FALLBACK!
)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–∞–≥:**
- –î–ª—è trending: 120 –º–∏–Ω—É—Ç (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 15-30)
- –î–ª—è choppy: 120 –º–∏–Ω—É—Ç (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 10-15)
- –¢–æ–ª—å–∫–æ ranging –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 25 –º–∏–Ω—É—Ç

**–†–µ—à–µ–Ω–∏–µ:**

–®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å –≤ `config/config_futures.yaml`:
```yaml
exit_params:
  ranging:
    max_holding_minutes: 25.0
  trending:
    max_holding_minutes: 15.0
  choppy:
    max_holding_minutes: 10.0
```

–®–∞–≥ 2: –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–¥ –≤ parameter_provider.py —Å—Ç—Ä–æ–∫–∞ 167-197:
```python
# –ë—ã–ª–æ:
exit_params["max_holding_minutes"] = _to_float(
    exit_params.get("max_holding_minutes"),
    "max_holding_minutes",
    25.0 if regime and regime.lower() == "ranging" else 120.0,
)

# –°—Ç–∞–ª–æ:
default_max_holding = {
    "ranging": 25.0,
    "trending": 15.0,
    "choppy": 10.0,
}.get(regime, 25.0)

exit_params["max_holding_minutes"] = _to_float(
    exit_params.get("max_holding_minutes"),
    "max_holding_minutes",
    default_max_holding,
)

logger.info(f"[EXIT_PARAMS] {symbol} ({regime}): max_holding={exit_params['max_holding_minutes']} –º–∏–Ω")
```

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #2: LONG –°–∏–≥–Ω–∞–ª—ã –í–°–ï–ì–î–ê –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

**–ì–¥–µ –Ω–∞–π—Ç–∏:**
- –§–∞–π–ª: `src/strategies/scalping/futures/signal_generator.py`
- –°—Ç—Ä–æ–∫–∏: 5920-6000, 6140+ (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ RSI, MACD, BB –¥–ª—è LONG)
- –§—É–Ω–∫—Ü–∏—è: `_generate_rsi_signals()`, `_generate_macd_signals()`, –∏ —Ç.–¥.

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (–ø—Ä–∏–º–µ—Ä—ã –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫):**
```python
# –°—Ç—Ä–æ–∫–∞ 5920
if is_downtrend:
    should_block_rsi_oversold = True  # üî¥ –ü–û–õ–ù–ê–Ø –ë–õ–û–ö–ò–†–û–í–ö–ê LONG!

# –°—Ç—Ä–æ–∫–∞ 6000
if is_downtrend:
    should_block_macd_bullish = True  # üî¥ –ë–õ–û–ö–ò–†–û–í–ö–ê LONG!

# –°—Ç—Ä–æ–∫–∞ 6010
if adx >= 20 and adx_trend == "bearish":
    should_block_macd_bullish = True  # üî¥ –ë–õ–û–ö–ò–†–û–í–ö–ê LONG!
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–∞–≥:**
- –ï—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 2780-2900)
- –ù–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–∏ –¥–ª—è LONG
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ LONG —Å–∏–≥–Ω–∞–ª—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ—Å—Ç–æ–º —É—Å–ª–æ–≤–∏–∏ EMA

**–†–µ—à–µ–Ω–∏–µ:**

–®–∞–≥ 1: –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ (RSI, MACD, BB)

–®–∞–≥ 2: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å –ü–û–õ–ù–û–ô –Ω–∞ –û–°–õ–ê–ë–õ–ï–ù–ù–£–Æ:
```python
# –ë—ã–ª–æ:
if is_downtrend:
    should_block_rsi_oversold = True  # –ü–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞

# –°—Ç–∞–ª–æ:
if is_downtrend:
    # –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é, —Ç–æ–ª—å–∫–æ —Å–Ω–∏–∂–∞–µ–º strength
    strength_modifier = 0.5  # –°–∏–≥–Ω–∞–ª –±—É–¥–µ—Ç –≤ 2 —Ä–∞–∑–∞ —Å–ª–∞–±–µ–µ
    logger.debug(f"[RSI_LONG] {symbol}: EMA downtrend, —Å–Ω–∏–∂–∞–µ–º strength –Ω–∞ 50%")
else:
    strength_modifier = 1.0

final_strength = base_strength * strength_modifier
```

–®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ LONG —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ ADX (–∫–∞–∫ –¥–ª—è SHORT):
```python
# –î–æ–±–∞–≤–∏—Ç—å —Ä—è–¥–æ–º —Å SHORT –ª–æ–≥–∏–∫–æ–π (—Å—Ç—Ä–æ–∫–∏ 2780-2900)
def _generate_adx_long_signals(self, ...):
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ ADX (–∞–Ω–∞–ª–æ–≥ SHORT –ª–æ–≥–∏–∫–∏)"""
    
    # –£—Å–ª–æ–≤–∏–µ 1: ADX bullish + ADX >= threshold
    if adx_trend == "bullish" and adx >= 20:
        logger.info(f"[ADX_LONG] {symbol}: ADX=bullish, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º LONG")
        return Signal(
            symbol=symbol,
            direction="buy",  # LONG
            confidence=adx_percent,
            reason=f"ADX bullish ({adx:.1f})"
        )
    
    # –£—Å–ª–æ–≤–∏–µ 2: RSI oversold + MACD bullish
    if rsi < 25 and macd > signal and adx >= 15:
        logger.info(f"[RSI_MACD_LONG] {symbol}: RSI<25 + MACD>signal, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º LONG")
        return Signal(
            symbol=symbol,
            direction="buy",  # LONG
            confidence=0.75,
            reason=f"RSI={rsi:.0f}% + MACD bullish"
        )
    
    return None
```

–®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
```yaml
logging:
  signal_generation:
    log_long_blocks: true  # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ LONG
    log_short_generation: true  # –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é SHORT
```

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #3: Per-Symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

**–ì–¥–µ –Ω–∞–π—Ç–∏:**
- –§–∞–π–ª: `src/strategies/scalping/futures/signal_generator.py`
- –°—Ç—Ä–æ–∫–∏: 82-108 (hardcoded –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)
- –§—É–Ω–∫—Ü–∏—è: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
# Hardcoded –ø–∞—Ä–∞–º–µ—Ç—Ä—ã!
self.rsi_period = 14  # –í—Å–µ–≥–¥–∞ 14!
self.atr_period = 14  # –í—Å–µ–≥–¥–∞ 14!
self.macd_fast = 12   # –í—Å–µ–≥–¥–∞ 12!
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–∞–≥:**
- –í –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (ETH: atr_period=5, DOGE: atr_period=5)
- –û–Ω–∏ **–ù–ï –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø** –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∞–∑–æ–≤—ã–µ –ø–µ—Ä–∏–æ–¥—ã

**–†–µ—à–µ–Ω–∏–µ:**

–®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞:
```python
def _get_indicator_param(self, symbol, param_name, default_value):
    """–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ —Å fallback –Ω–∞ –ø–æ-—Ä–µ–∂–∏–º—É, –ø–æ—Ç–æ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π"""
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä
    if self.symbol_profiles and symbol in self.symbol_profiles:
        if "indicators" in self.symbol_profiles[symbol]:
            if param_name in self.symbol_profiles[symbol]["indicators"]:
                value = self.symbol_profiles[symbol]["indicators"][param_name]
                logger.debug(f"[PARAM] {symbol}: {param_name}={value} (per-symbol)")
                return value
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: per-regime –ø–∞—Ä–∞–º–µ—Ç—Ä
    if self.symbol_profiles and symbol in self.symbol_profiles:
        regime_cfg = self.symbol_profiles[symbol].get(self.regime, {})
        if "indicators" in regime_cfg:
            if param_name in regime_cfg["indicators"]:
                value = regime_cfg["indicators"][param_name]
                logger.debug(f"[PARAM] {symbol}: {param_name}={value} (per-regime)")
                return value
    
    # –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
    logger.debug(f"[PARAM] {symbol}: {param_name}={default_value} (default)")
    return default_value
```

–®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:
```python
# –ë—ã–ª–æ:
def calculate_rsi(self, symbol, data):
    self.rsi_period = 14  # Hardcoded!

# –°—Ç–∞–ª–æ:
def calculate_rsi(self, symbol, data):
    rsi_period = self._get_indicator_param(symbol, "rsi_period", 14)
    # ... —Ä–∞—Å—á–µ—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º ...
```

–®–∞–≥ 3: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
```python
logger.info(f"[INDICATORS] {symbol} ({regime}): "
    f"RSI={rsi_period}, ATR={atr_period}, MACD={macd_fast}/{macd_slow}, "
    f"BB={bb_period}¬±{bb_std}")
```

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #4: TP/SL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤–µ–∑–¥–µ

**–ì–¥–µ –Ω–∞–π—Ç–∏:**
- –§–∞–π–ª: `src/strategies/scalping/futures/position_manager.py`
- –§—É–Ω–∫—Ü–∏—è: `_get_adaptive_tp_percent()`, `_get_adaptive_sl_percent()`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§—É–Ω–∫—Ü–∏–∏ –ï–°–¢–¨ –≤ position_manager.py
- –ù–æ –æ–Ω–∏ **–ù–ï –í–´–ó–´–í–ê–Æ–¢–°–Ø** –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- TP/SL –±–µ—Ä—É—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**–†–µ—à–µ–Ω–∏–µ:**

–®–∞–≥ 1: –ù–∞–π—Ç–∏ –í–°–ï –º–µ—Å—Ç–∞ –≥–¥–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è TP:
```bash
grep -r "tp_price\|take_profit\|takeProfit" src/
grep -r "sl_price\|stop_loss\|stopLoss" src/
```

–®–∞–≥ 2: –í –∫–∞–∂–¥–æ–º –º–µ—Å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤:
```python
# –ë—ã–ª–æ:
tp_price = entry_price - (entry_price * 0.05)  # Hardcoded 0.05%

# –°—Ç–∞–ª–æ:
tp_percent = self._get_adaptive_tp_percent(symbol, regime, entry_price, metadata)
tp_price = entry_price - (entry_price * tp_percent / 100.0)
logger.info(f"[TP] {symbol} ({regime}): TP%={tp_percent:.2f}%, TP_price={tp_price:.2f}")
```

–®–∞–≥ 3: –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è SL:
```python
# –ë—ã–ª–æ:
sl_price = entry_price + (entry_price * 0.40)  # Hardcoded 0.40%

# –°—Ç–∞–ª–æ:
sl_percent = self._get_adaptive_sl_percent(symbol, regime, entry_price, metadata)
sl_price = entry_price + (entry_price * sl_percent / 100.0)
logger.info(f"[SL] {symbol} ({regime}): SL%={sl_percent:.2f}%, SL_price={sl_price:.2f}")
```

---

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #5: –†–µ–∂–∏–º FALLBACK –Ω–∞ "ranging"

**–ì–¥–µ –Ω–∞–π—Ç–∏:**
- –§–∞–π–ª: `src/strategies/scalping/futures/signal_generator.py`
- –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç: 8+ fallbacks –Ω–∞ "ranging"

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
regime = regime or "ranging"  # üî¥ Fallback –Ω–∞ ranging!
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –±–∞–≥:**
- Ranging —Ä–µ–∂–∏–º –∏–º–µ–µ—Ç —Å–∞–º—ã–µ —Å–ª–∞–±—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –ï—Å–ª–∏ RegimeManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω ‚Üí –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**

–®–∞–≥ 1: –í—ã–±—Ä–∞—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π fallback:
```python
# –ë—ã–ª–æ:
regime = regime or "ranging"  # –°–ª–∞–±–æ

# –°—Ç–∞–ª–æ:
if regime not in ["ranging", "trending", "choppy"]:
    logger.warning(f"[REGIME] –†–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º TRENDING (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)")
    regime = "trending"  # –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π fallback
else:
    logger.debug(f"[REGIME] –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∂–∏–º: {regime}")
```

–®–∞–≥ 2: –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é RegimeManager:
```python
# –í orchestrator.py –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:
if not self.regime_manager:
    logger.error("[INIT] RegimeManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω!")
    logger.info("[INIT] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º RegimeManager —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º —Ä–µ–∂–∏–º–æ–º 'trending'")
    self.regime_manager = AdaptiveRegimeManager(default_regime="trending")
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### –ß–µ–∫–ª–∏—Å—Ç 1: max_holding_minutes (1 —Ñ–∞–π–ª)

- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ config/config_futures.yaml (3 —Ä–µ–∂–∏–º–∞)
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å parameter_provider.py —Å—Ç—Ä–æ–∫–∞ 167-197
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –ß–µ–∫–ª–∏—Å—Ç 2: LONG –°–∏–≥–Ω–∞–ª—ã (2-3 —Ñ–∞–π–ª–∞)

- [ ] –ù–∞–π—Ç–∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ LONG (5+ —Ñ—É–Ω–∫—Ü–∏–π)
- [ ] –ò–∑–º–µ–Ω–∏—Ç—å —Å –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ strength
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ LONG –ø–æ ADX
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ LONG —Å–∏–≥–Ω–∞–ª–æ–≤
- [ ] –¢–µ—Å—Ç: —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è LONG –ø–æ–∑–∏—Ü–∏–∏

### –ß–µ–∫–ª–∏—Å—Ç 3: Per-Symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (1 —Ñ–∞–π–ª)

- [ ] –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `_get_indicator_param()`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ RSI, ATR, MACD, BB
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω—ë–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] –¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ß–µ–∫–ª–∏—Å—Ç 4: TP/SL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (3-4 —Ñ–∞–π–ª–∞)

- [ ] –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è TP/SL (grep)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã `_get_adaptive_tp_percent()` –≤–µ–∑–¥–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤—ã `_get_adaptive_sl_percent()` –≤–µ–∑–¥–µ
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ TP/SL –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –¢–µ—Å—Ç: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã

### –ß–µ–∫–ª–∏—Å—Ç 5: –†–µ–∂–∏–º FALLBACK (1-2 —Ñ–∞–π–ª–∞)

- [ ] –ù–∞–π—Ç–∏ –≤—Å–µ fallbacks –Ω–∞ "ranging"
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π fallback ("trending")
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è RegimeManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
- [ ] –¢–µ—Å—Ç: —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ä–µ–∂–∏–º correct –¥–∞–∂–µ –ø—Ä–∏ —Å–±–æ–µ

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–í–∫–ª—é—á–∏—Ç—å DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```yaml
   logging:
     level: DEBUG
     modules:
       parameter_provider: DEBUG
       signal_generator: DEBUG
       position_manager: DEBUG
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ 10 –º–∏–Ω—É—Ç:**
   ```bash
   python run.py --mode futures --timeout 600
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   ```bash
   grep "\[PARAM\]" logs/futures/info_*.log | head -20
   grep "\[EXIT_PARAMS\]" logs/futures/info_*.log | head -20
   grep "\[ADX_LONG\]" logs/futures/info_*.log | head -20
   grep "\[TP\]" logs/futures/info_*.log | head -20
   grep "\[REGIME\]" logs/futures/info_*.log | head -20
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ:**
   - ‚úÖ max_holding_minutes –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è LONG –∏ SHORT –ø–æ–∑–∏—Ü–∏–∏
   - ‚úÖ Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - ‚úÖ TP/SL –∑–Ω–∞—á–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
   - ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|---------------|------------------|
| max_holding (trending) | 120 –º–∏–Ω | 15 –º–∏–Ω |
| max_holding (choppy) | 120 –º–∏–Ω | 10 –º–∏–Ω |
| LONG –ø–æ–∑–∏—Ü–∏–∏ | 0% | 40-50% |
| Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è | –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è |
| TP/SL | –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ | –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ |
| –†–µ–∂–∏–º fallback | ranging | trending |
| Win rate | 10% | 25-35% |

**–û—Ü–µ–Ω–∫–∞ —É–ª—É—á—à–µ–Ω–∏—è:** +200-300% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í –ö –í–ù–ï–î–†–ï–ù–ò–Æ
