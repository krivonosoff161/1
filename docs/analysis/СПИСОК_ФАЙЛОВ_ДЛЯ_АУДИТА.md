# 📋 ПОЛНЫЙ СПИСОК ФАЙЛОВ ДЛЯ АУДИТА

**Всего файлов:** ~90  
**Дата:** 2026-01-10

---

## ЭТАП 1: АРХИТЕКТУРА И ЯДРО (5 файлов)

```
src/strategies/scalping/futures/
├── orchestrator.py                    # Главный координатор (5357 строк)
└── core/
    ├── data_registry.py               # Реестр данных (~300 строк)
    ├── position_registry.py           # Реестр позиций (~350 строк)
    ├── trading_control_center.py      # Центр управления (~400 строк)
    └── position_sync.py               # Синхронизация позиций (~200 строк)
```

---

## ЭТАП 2: ГЕНЕРАЦИЯ СИГНАЛОВ ⭐ ПРИОРИТЕТ #1 (10 файлов)

```
src/strategies/scalping/futures/
├── signal_generator.py                # Основной генератор (~7000 строк)
├── signals/
│   ├── filter_manager.py             # Менеджер фильтров (~700 строк)
│   ├── macd_signal_generator.py      # MACD сигналы (~300 строк)
│   ├── rsi_signal_generator.py       # RSI сигналы (~250 строк)
│   └── trend_following_signal_generator.py  # Trend following (~200 строк)
└── filters/
    ├── funding_rate_filter.py        # Фильтр funding rate
    ├── liquidity_filter.py           # Фильтр ликвидности
    ├── momentum_filter.py            # Фильтр импульса
    ├── order_flow_filter.py          # Фильтр потока ордеров
    ├── volatility_regime_filter.py   # Фильтр волатильности
    └── __init__.py
```

---

## ЭТАП 3: ИНДИКАТОРЫ И ДАННЫЕ (15 файлов)

```
src/strategies/scalping/futures/
├── indicators/
│   ├── fast_adx.py                   # Быстрый ADX
│   ├── order_flow_indicator.py       # Индикатор потока ордеров
│   ├── trailing_stop_loss.py         # Trailing Stop Loss (~1000 строк)
│   ├── indicator_calculator.py       # Калькулятор индикаторов
│   ├── atr_provider.py               # Провайдер ATR
│   ├── micro_pivot_calculator.py     # Микро-пивоты
│   ├── liquidity_levels.py           # Уровни ликвидности
│   ├── funding_rate_monitor.py       # Мониторинг funding rate
│   ├── futures_volume_profile.py     # Volume profile
│   └── __init__.py
├── adaptivity/
│   ├── regime_manager.py             # Менеджер режимов (~800 строк)
│   ├── parameter_adapter.py          # Адаптер параметров
│   ├── filter_parameters.py          # Параметры фильтров
│   └── balance_manager.py             # Менеджер баланса
├── core/
│   └── candle_buffer.py              # Буфер свечей
├── coordinators/
│   └── websocket_coordinator.py      # Координатор WebSocket (~1000 строк)
└── private_websocket_manager.py      # Приватный WebSocket
```

---

## ЭТАП 4: ИСПОЛНЕНИЕ ОРДЕРОВ (5 файлов)

```
src/strategies/scalping/futures/
├── order_executor.py                 # Исполнение ордеров (~800 строк)
├── coordinators/
│   └── order_coordinator.py          # Координатор ордеров
├── positions/
│   └── entry_manager.py              # Менеджер входа (~800 строк)
├── calculations/
│   └── position_sizer.py             # Расчет размера позиции
└── src/clients/
    └── futures_client.py             # API клиент (~1500 строк)
```

---

## ЭТАП 5: УПРАВЛЕНИЕ ПОЗИЦИЯМИ И ВЫХОДЫ ⭐ ПРИОРИТЕТ #2 (12 файлов)

```
src/strategies/scalping/futures/
├── position_manager.py               # Менеджер позиций (~7600 строк)
├── positions/
│   ├── exit_analyzer.py             # Анализатор выхода (~5900 строк)
│   ├── take_profit_manager.py       # Менеджер TP (~300 строк)
│   ├── stop_loss_manager.py         # Менеджер SL (~300 строк)
│   ├── peak_profit_tracker.py       # Трекер пиковой прибыли
│   ├── position_monitor.py          # Мониторинг позиций (~300 строк)
│   ├── position_scaling_manager.py  # Масштабирование позиций (~600 строк)
│   └── exit_decision_logger.py      # Логгер решений (~150 строк)
├── coordinators/
│   ├── exit_decision_coordinator.py # Координатор решений (~300 строк)
│   ├── trailing_sl_coordinator.py   # Координатор TSL (~2000 строк)
│   └── smart_exit_coordinator.py    # Умный выход (~200 строк)
├── tsl_manager.py                    # Менеджер TSL (~200 строк)
└── coordinators/
    └── priority_resolver.py          # Резолвер приоритетов
```

---

## ЭТАП 6: УПРАВЛЕНИЕ РИСКАМИ (8 файлов)

```
src/strategies/scalping/futures/
├── risk_manager.py                   # Менеджер рисков (~600 строк)
├── risk/
│   ├── adaptive_leverage.py         # Адаптивное плечо (~400 строк)
│   ├── liquidation_protector.py     # Защита от ликвидации (~300 строк)
│   ├── margin_monitor.py             # Мониторинг маржи (~200 строк)
│   └── max_size_limiter.py          # Ограничитель размера (~200 строк)
└── calculations/
    ├── margin_calculator.py          # Калькулятор маржи
    ├── pnl_calculator.py             # Калькулятор PnL
    └── balance_calculator.py         # Калькулятор баланса
```

---

## ЭТАП 7: КОНФИГУРАЦИЯ И АДАПТИВНОСТЬ (6 файлов)

```
src/strategies/scalping/futures/
├── config/
│   ├── config_manager.py             # Менеджер конфигурации (~1600 строк)
│   └── parameter_provider.py        # Провайдер параметров (~400 строк)
└── adaptivity/
    ├── regime_manager.py            # Менеджер режимов (уже в этапе 3)
    ├── parameter_adapter.py         # Адаптер параметров (уже в этапе 3)
    ├── filter_parameters.py         # Параметры фильтров (уже в этапе 3)
    └── balance_manager.py           # Менеджер баланса (уже в этапе 3)
```

---

## ЭТАП 8: ЛОГИРОВАНИЕ И МОНИТОРИНГ (7 файлов)

```
src/strategies/scalping/futures/
├── logging/
│   ├── debug_logger.py               # Отладочный логгер (~400 строк)
│   ├── structured_logger.py         # Структурированный логгер (~400 строк)
│   └── logger_factory.py             # Фабрика логгеров (~100 строк)
├── metrics/
│   ├── alert_manager.py             # Менеджер алертов (~200 строк)
│   ├── conversion_metrics.py        # Метрики конверсии (~200 строк)
│   └── holding_time_metrics.py      # Метрики времени удержания (~200 строк)
└── positions/
    └── exit_decision_logger.py     # Логгер решений (уже в этапе 5)
```

---

## ДОПОЛНИТЕЛЬНО: ОБЩИЕ МОДУЛИ (2 файла)

```
src/strategies/modules/
├── adaptive_regime_manager.py       # Адаптивный менеджер режимов
└── adx_filter.py                    # ADX фильтр
```

---

## 📊 СВОДНАЯ ТАБЛИЦА

| Этап | Название | Файлов | Приоритет | Критичность |
|------|----------|--------|-----------|-------------|
| 1 | Архитектура и ядро | 5 | Средний | Высокая |
| 2 | Генерация сигналов | 10 | **ВЫСОКИЙ** ⭐ | Критическая |
| 3 | Индикаторы и данные | 15 | Высокий | Высокая |
| 4 | Исполнение ордеров | 5 | Высокий | Критическая |
| 5 | Управление позициями | 12 | **ВЫСОКИЙ** ⭐ | Критическая |
| 6 | Управление рисками | 8 | Высокий | Критическая |
| 7 | Конфигурация | 6 | Средний | Средняя |
| 8 | Логирование | 7 | Низкий | Низкая |
| + | Общие модули | 2 | Средний | Средняя |
| **ИТОГО** | | **70** | | |

---

## 🎯 КРИТИЧЕСКИЕ ФАЙЛЫ (требуют особого внимания)

1. **`orchestrator.py`** (5357 строк) - главный координатор
2. **`signal_generator.py`** (~7000 строк) - генерация сигналов
3. **`position_manager.py`** (~7600 строк) - управление позициями
4. **`positions/exit_analyzer.py`** (~5900 строк) - анализ выхода
5. **`coordinators/trailing_sl_coordinator.py`** (~2000 строк) - TSL координатор
6. **`indicators/trailing_stop_loss.py`** (~1000 строк) - trailing stop
7. **`config/config_manager.py`** (~1600 строк) - конфигурация
8. **`clients/futures_client.py`** (~1500 строк) - API клиент

**Эти файлы содержат основную логику и требуют детального анализа!**
