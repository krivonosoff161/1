# üìã –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô 23 –ù–û–Ø–ë–†–Ø

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025, 02:05  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´**

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–µ–∂–∏–º –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ TSL –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–µ—Ä–µ–∑ WebSocket
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ WebSocket —Ä–µ–∂–∏–º –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ `initialize_trailing_stop()`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤–º–µ—Å—Ç–æ —Ä–µ–∂–∏–º–Ω—ã—Ö.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∏–∑ `regime_managers` –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π TSL
- –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `initialize_trailing_stop()` —á–µ—Ä–µ–∑ `signal`
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/orchestrator.py` (—Å—Ç—Ä–æ–∫–∏ 1305-1321)
- `src/strategies/scalping/futures/coordinators/trailing_sl_coordinator.py` (—Å—Ç—Ä–æ–∫–∏ 155-156)

---

### 2. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–ª –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (LONG –∏ SHORT) –Ω–∞ –æ–¥–Ω–æ–π –ø–∞—Ä–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—é –∫–æ–º–∏—Å—Å–∏–π.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –í `check_for_signals()`: –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π **–ë–õ–û–ö–ò–†–£–ï–ú** –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
- –í `execute_signal_from_price()`: –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ **–ë–õ–û–ö–ò–†–£–ï–ú** –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `active_positions_ref` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ –±–∏—Ä–∂–µ

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∏ 603-770, 985-1012)

---

### 3. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –æ–¥–Ω–æ–π –ø–∞—Ä–µ
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –Ω–∞ –æ–¥–Ω–æ–π –ø–∞—Ä–µ –∏–∑-–∑–∞ race condition.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `active_positions_ref` –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º –∫ –±–∏—Ä–∂–µ
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π –≤ `execute_signal_from_price()` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∏ 603-770, 978-1012)

---

### 4. ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—à–∏–±–∫–∞ `has_tsl` –≤ TrailingSLCoordinator
**–ü—Ä–æ–±–ª–µ–º–∞:** `'TrailingSLCoordinator' object has no attribute 'has_tsl'`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ó–∞–º–µ–Ω–µ–Ω–æ `has_tsl()` –Ω–∞ `get_tsl()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —á–µ—Ä–µ–∑ `if not get_tsl(...)`

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/orchestrator.py` (—Å—Ç—Ä–æ–∫–∞ 1296)

---

## üìä –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ TSL –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –æ–¥–Ω–æ–π –ø–∞—Ä–µ
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `has_tsl`

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –≤ RANGING —Ä–µ–∂–∏–º–µ –±—É–¥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –º–∏–Ω–∏–º—É–º 60 –º–∏–Ω—É—Ç
- ‚úÖ `loss_cut` –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ 4.0% —É–±—ã—Ç–∫–µ (–≤–º–µ—Å—Ç–æ 1.5%)
- ‚úÖ `timeout` –±—É–¥–µ—Ç 120 –º–∏–Ω—É—Ç (–≤–º–µ—Å—Ç–æ 5 –º–∏–Ω—É—Ç)
- ‚úÖ –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –ø–∞—Ä—É (LONG –∏–ª–∏ SHORT) –ø—Ä–∏ `allow_concurrent=false`
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ –æ —Ä–µ–∂–∏–º–µ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö TSL
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –¥–µ—Ä–∂–∞—Ç—Å—è –º–∏–Ω–∏–º—É–º 60 –º–∏–Ω—É—Ç –≤ RANGING —Ä–µ–∂–∏–º–µ
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –±–æ—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ –ò –ì–û–¢–û–í–´ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**


