# üìé –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê –ö–ò–ú–ï

**–î–∞—Ç–∞:** 2025-12-07  
**–ó–∞–ø—Ä–æ—Å:** –ê–Ω–∞–ª–∏–∑ –≤–∏—Å—è—â–∏—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏

---

## 1Ô∏è‚É£ –í–°–ï –°–¢–†–û–ö–ò –ò–ó positions_open.csv –ì–î–ï net_pnl < 0

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§–∞–π–ª `positions_open.csv` –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –í–æ–∑–º–æ–∂–Ω–æ, –æ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤:
- `logs/positions_open_YYYY-MM-DD.csv`
- `logs/futures/archived/logs_2025-12-07_19-42-03/`

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```powershell
# –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
Import-Csv "logs\positions_open_2025-12-07.csv" | Where-Object { [float]$_.net_pnl -lt 0 } | Format-Table -AutoSize
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ Python:**
```python
import pandas as pd
df = pd.read_csv("logs/positions_open_2025-12-07.csv")
negative = df[df['net_pnl'] < 0]
print(negative.to_string())
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –°–∏–º–≤–æ–ª (symbol)
- –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (side: LONG/SHORT)
- Entry price
- Current price
- Net PnL (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 0)
- Unrealized PnL
- –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (regime: trending/ranging/choppy)
- –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏ (entry_time, duration)
- SL/TP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## 2Ô∏è‚É£ –ü–û–°–õ–ï–î–ù–ò–ï 10 –°–¢–†–û–ö trades.csv –° –ö–û–õ–û–ù–ö–û–ô reason

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§–∞–π–ª `trades.csv` –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤:
- `logs/trades_YYYY-MM-DD.csv`
- `data/exports/trades_*.csv`
- `logs/futures/archived/logs_2025-12-07_19-42-03/`

**–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```powershell
# –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω, –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
Import-Csv "logs\trades_2025-12-07.csv" | Select-Object -Last 10 | Format-Table -AutoSize
```

**–ò–ª–∏ —á–µ—Ä–µ–∑ Python:**
```python
import pandas as pd
df = pd.read_csv("logs/trades_2025-12-07.csv")
last_10 = df.tail(10)
print(last_10[['timestamp', 'symbol', 'side', 'entry_price', 'exit_price', 'net_pnl', 'reason']].to_string())
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- Timestamp (–≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è)
- Symbol
- Side (LONG/SHORT)
- Entry price
- Exit price
- Net PnL (–ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫)
- **Reason** (–ø—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è) - –ö–†–ò–¢–ò–ß–ù–û!
- Duration (–≤—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è reason:**
- `tp_reached` - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç Take Profit
- `big_profit_exit` - –±–æ–ª—å—à–æ–π –ø—Ä–æ—Ñ–∏—Ç
- `partial_tp` - —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
- `max_holding_exceeded` - –ø—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è
- `reversal_detected` - –æ–±–Ω–∞—Ä—É–∂–µ–Ω —Ä–∞–∑–≤–æ—Ä–æ—Ç
- `sl_reached` - –¥–æ—Å—Ç–∏–≥–Ω—É—Ç Stop Loss
- `max_holding_exceeded_but_loss` - –≤—Ä–µ–º—è –ø—Ä–µ–≤—ã—à–µ–Ω–æ, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ (–ù–ï –∑–∞–∫—Ä—ã—Ç–∞!)

---

## 3Ô∏è‚É£ –ó–ù–ê–ß–ï–ù–ò–Ø SL/–í–´–•–û–î–ê –ò–ó config_futures.yaml

### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL/TP:

```yaml
scalping:
  # –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–∞–∫ fallback)
  tp_percent: 2.4  # Take Profit 2.4%
  sl_percent: 1.2  # Stop Loss 1.2%
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∂–∏–º–∞–º:

#### TRENDING —Ä–µ–∂–∏–º:
```yaml
scalping:
  adaptive_regime:
    trending:
      tp_percent: 2.5      # TP –¥–ª—è trending
      sl_percent: 1.5      # SL –¥–ª—è trending (–∂–µ—Å—Ç–∫–∏–π —Å—Ç–æ–ø –ø–æ—Å–ª–µ min_holding)
      max_holding_minutes: 30  # –ú–∞–∫—Å–∏–º—É–º 30 –º–∏–Ω—É—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è
      extend_time_if_profitable: true  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –≤—Ä–µ–º—è –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏
      min_profit_for_extension: 0.5  # –ú–∏–Ω–∏–º—É–º 0.5% –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è
      extension_percent: 100  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –Ω–∞ 100% –≤—Ä–µ–º–µ–Ω–∏ (—É–¥–≤–∞–∏–≤–∞–µ–º –≤—Ä–µ–º—è)
```

#### RANGING —Ä–µ–∂–∏–º:
```yaml
scalping:
  adaptive_regime:
    ranging:
      tp_percent: 2.0      # TP –¥–ª—è ranging
      sl_percent: 2.0      # SL –¥–ª—è ranging (–∂–µ—Å—Ç–∫–∏–π —Å—Ç–æ–ø –ø–æ—Å–ª–µ min_holding, –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∑–∞—â–∏—Ç–æ–π –∏ —É–±—ã—Ç–∫–æ–º)
      max_holding_minutes: 20  # –ú–∞–∫—Å–∏–º—É–º 20 –º–∏–Ω—É—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è
      extend_time_if_profitable: true  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –≤—Ä–µ–º—è –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏
      min_profit_for_extension: 0.5  # –ú–∏–Ω–∏–º—É–º 0.5% –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è
      extension_percent: 100  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –Ω–∞ 100% –≤—Ä–µ–º–µ–Ω–∏ (—É–¥–≤–∞–∏–≤–∞–µ–º –≤—Ä–µ–º—è)
```

#### CHOPPY —Ä–µ–∂–∏–º:
```yaml
scalping:
  adaptive_regime:
    choppy:
      tp_percent: 1.5      # TP –¥–ª—è choppy (–±—ã—Å—Ç—Ä–µ–µ —Ñ–∏–∫—Å–∏—Ä—É–µ–º –ø—Ä–∏–±—ã–ª—å)
      sl_percent: 1.0      # SL –¥–ª—è choppy (–±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —É–±—ã—Ç–∫–æ–≤ –≤ —Ö–∞–æ—Å–µ)
      max_holding_minutes: 10  # –ú–∞–∫—Å–∏–º—É–º 10 –º–∏–Ω—É—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è
      extend_time_if_profitable: false  # –í —Ö–∞–æ—Å–µ –ù–ï –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º, –∑–∞–∫—Ä—ã–≤–∞–µ–º –±—ã—Å—Ç—Ä–æ
      min_profit_for_extension: 0.5  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ false
      extension_percent: 50  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ false
```

### Profit Drawdown Protection:

```yaml
scalping:
  profit_drawdown:
    enabled: true
    drawdown_percent: 0.35  # 35% –æ—Ç–∫–∞—Ç –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ –ø—Ä–∏–±—ã–ª–∏
    min_profit_to_activate_usd: 0.5  # –ú–∏–Ω–∏–º—É–º $0.5 –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
```

### –õ–∏–º–∏—Ç—ã –ø–æ–∑–∏—Ü–∏–π:

```yaml
scalping:
  max_open_positions: 5  # –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–∑–∏—Ü–∏–π
  max_positions_per_symbol: 1  # –ü–æ –æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ —Å–∏–º–≤–æ–ª
  allow_concurrent_positions: false  # –ù–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏–∏
```

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:

```yaml
risk:
  base:
    min_balance_usd: 20.0  # –ú–∏–Ω–∏–º—É–º $20 –±–∞–ª–∞–Ω—Å–∞
  by_balance:
    small:  # $500 - $1500
      min_balance_usd: 20.0
```

---

## 4Ô∏è‚É£ 30 –°–¢–†–û–ö –ö–û–î–ê –ò–ó exit_analyzer.py ‚Äî –ì–î–ï –†–ï–®–ê–ï–¢–°–Ø, –ó–ê–ö–†–´–í–ê–¢–¨ –£–ë–´–¢–û–ß–ù–£–Æ –ò–õ–ò –ù–ï–¢

### –§–∞–π–ª: `src/strategies/scalping/futures/positions/exit_analyzer.py`

### –ö–æ–¥ –¥–ª—è TRENDING —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1293-1307):

```python
                else:
                    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding
                    # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
                    if pnl_percent < 0:
                        logger.info(
                            f"‚è∞ ExitAnalyzer TRENDING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                            f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                        )
                        return {
                            "action": "hold",
                            "reason": "max_holding_exceeded_but_loss_trending",
                            "pnl_pct": pnl_percent,
                            "trend_strength": trend_strength,
                            "minutes_in_position": minutes_in_position,
                        }

                    # –ù–µ—Ç —Å–∏–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
                    logger.info(
                        f"‚è∞ ExitAnalyzer TRENDING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                        f"–Ω–µ—Ç —Å–∏–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–µ—Ä–∂–∞—Ç—å (trend_strength={trend_strength:.2f}, pnl={pnl_percent:.2f}%) - –∑–∞–∫—Ä—ã–≤–∞–µ–º"
                    )
```

### –ö–æ–¥ –¥–ª—è RANGING —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1592-1605):

```python
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding
                # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
                if pnl_percent < 0:
                    logger.info(
                        f"‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {actual_max_holding:.1f} –º–∏–Ω, "
                        f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                    )
                    return {
                        "action": "hold",
                        "reason": "max_holding_exceeded_but_loss",
                        "pnl_pct": pnl_percent,
                        "minutes_in_position": minutes_in_position,
                        "max_holding_minutes": actual_max_holding,
                    }

                # –í—Ä–µ–º—è –ø—Ä–µ–≤—ã—à–µ–Ω–æ –∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º
                logger.info(
                    f"‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {actual_max_holding:.1f} –º–∏–Ω "
                    f"(–±–∞–∑–æ–≤–æ–µ: {max_holding_minutes:.1f} –º–∏–Ω), –ø—Ä–∏–±—ã–ª—å={pnl_percent:.2f}% - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
                )
```

### –ö–æ–¥ –¥–ª—è CHOPPY —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1821-1834):

```python
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding –¥–∞–∂–µ –≤ choppy
                # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
                if pnl_percent < 0:
                    logger.info(
                        f"‚è∞ ExitAnalyzer CHOPPY: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                        f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                    )
                    return {
                        "action": "hold",
                        "reason": "max_holding_exceeded_but_loss_choppy",
                        "pnl_pct": pnl_percent,
                        "minutes_in_position": minutes_in_position,
                        "max_holding_minutes": max_holding_minutes,
                    }

                # –í choppy —Ä–µ–∂–∏–º–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–æ–≥–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ –ø—Ä–∏–±—ã–ª–∏
                logger.info(
                    f"‚è∞ ExitAnalyzer CHOPPY: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                    f"–ø—Ä–∏–±—ã–ª—å={pnl_percent:.2f}% - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
                )
```

---

## üîç –ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –ò–ó –ö–û–î–ê

### –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π:

1. **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ `max_holding_minutes` –ò `pnl_percent < 0`:**
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `action: "hold"` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º)
   - ‚úÖ Reason: `"max_holding_exceeded_but_loss_*"` (–≥–¥–µ * = trending/ranging/choppy)
   - ‚úÖ –ü–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π, –æ–∂–∏–¥–∞–µ—Ç—Å—è SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

2. **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ `max_holding_minutes` –ò `pnl_percent >= 0`:**
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `action: "close"` (–∑–∞–∫—Ä—ã–≤–∞–µ–º)
   - ‚úÖ Reason: `"max_holding_exceeded"` –∏–ª–∏ `"max_holding_no_signals"`

### –ü—Ä–æ–±–ª–µ–º–∞:

**–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ù–ï –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏**, –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω `max_holding_minutes`. –û–Ω–∏ –æ—Å—Ç–∞—é—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º–∏ –¥–æ:
- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è SL (–Ω–æ SL –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å!)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ –ø—Ä–∏–±—ã–ª–∏
- –†—É—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:

1. **–ü–æ—á–µ–º—É SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É Trailing Stop Loss
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç PnL% (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç –º–∞—Ä–∂–∏, –∞ –Ω–µ –æ—Ç —Ü–µ–Ω—ã)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–æ—Å—Ç–∏–≥–∞—é—Ç –ª–∏ –ø–æ–∑–∏—Ü–∏–∏ —É—Ä–æ–≤–Ω—è SL

2. **–ì–¥–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `max_open_positions: 5` - —Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π –æ—Ç–∫—Ä—ã—Ç–æ?
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –∏ –º–∞—Ä–∂—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (liquidity, order_flow, funding, volatility)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å cooldown (`signal_cooldown_seconds: 60.0`)

3. **–ü–æ—á–µ–º—É –∑–∞–∫—Ä—ã–ª–∏—Å—å 2 –ø–æ–∑–∏—Ü–∏–∏, –∞ 4 –≤–∏—Å—è—Ç?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `reason` –≤ `trades.csv` –¥–ª—è –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
   - –°—Ä–∞–≤–Ω–∏—Ç—å PnL –∑–∞–∫—Ä—ã—Ç—ã—Ö –∏ –≤–∏—Å—è—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (trending/ranging/choppy) –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

### –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–õ–æ–≥–∏:** `logs/futures/archived/logs_2025-12-07_19-42-03/`
   - –ò—Å–∫–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è: `"‚è∞ ExitAnalyzer ... –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ... –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º"`
   - –ò—Å–∫–∞—Ç—å: `"max_holding_exceeded_but_loss"`

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `config/config_futures.yaml`
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL/TP/–≤—Ä–µ–º–µ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤—ã—à–µ

3. **–ö–æ–¥:** `src/strategies/scalping/futures/positions/exit_analyzer.py`
   - –°—Ç—Ä–æ–∫–∏ 1293-1307 (TRENDING)
   - –°—Ç—Ä–æ–∫–∏ 1592-1605 (RANGING)
   - –°—Ç—Ä–æ–∫–∏ 1821-1834 (CHOPPY)

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-12-07  
**–î–ª—è:** –ö–∏–º—ã  
**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ —Ç–æ—á–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –ø—Ä–∏—á–∏–Ω—É –≤–∏—Å—è—â–∏—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

