# üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–ò–ö–ò –ò –ü–†–û–ë–õ–ï–ú

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 03.01.2026  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –ö–æ–¥ –±–æ—Ç–∞ + CSV –ª–æ–≥–∏ —Å–µ—Å—Å–∏–∏ 03.01.2026

---

## 1. –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –ü–†–û–í–ï–†–û–ö –ü–†–ò –ê–ù–ê–õ–ò–ó–ï –ü–û–ó–ò–¶–ò–ò

### 1.1. –ü—É—Ç—å –≤—ã–∑–æ–≤–∞: `manage_position()` ‚Üí –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/position_manager.py:491`

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫:**

1. **–ü–†–ò–û–†–ò–¢–ï–¢ #0: Exit Decision Coordinator** (—Å—Ç—Ä–æ–∫–∏ 610-711)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–ï–†–í–´–ú
   - –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫—Ä—ã—Ç–∏—è
   - –í—ã–∑—ã–≤–∞–µ—Ç `exit_decision_coordinator.analyze_position()`
   - –ï—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ ‚Üí –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –¥–∞–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

2. **–ü–†–ò–û–†–ò–¢–ï–¢ #1: Profit Harvesting** (—Å—Ç—Ä–æ–∫–∏ 712-724)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –í–¢–û–†–´–ú
   - –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏
   - –í—ã–∑—ã–≤–∞–µ—Ç `_check_profit_harvesting()`
   - –ï—Å–ª–∏ —Å—Ä–∞–±–æ—Ç–∞–ª ‚Üí –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –¥–∞–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

3. **–ü–†–ò–û–†–ò–¢–ï–¢ #2: Profit Drawdown** (—Å—Ç—Ä–æ–∫–∏ 734-747)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¢–†–ï–¢–¨–ò–ú
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏
   - –í—ã–∑—ã–≤–∞–µ—Ç `_check_profit_drawdown()`
   - –ï—Å–ª–∏ —Å—Ä–∞–±–æ—Ç–∞–ª ‚Üí –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –¥–∞–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

4. **–ü–†–ò–û–†–ò–¢–ï–¢ #3: Take Profit / Stop Loss** (—Å—Ç—Ä–æ–∫–∏ 749-758)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ß–ï–¢–í–ï–†–¢–´–ú
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ TP —á–µ—Ä–µ–∑ `TakeProfitManager` –∏–ª–∏ `_check_tp_only()`
   - **–í–ê–ñ–ù–û:** –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SL –æ—Ç–∫–ª—é—á–µ–Ω, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TrailingSL

5. **MAX_HOLDING** (—Å—Ç—Ä–æ–∫–∏ 760-767)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ ExitAnalyzer (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –∞–Ω–∞–ª–∏–∑)
   - –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ `manage_position()`

### 1.2. Exit Decision Coordinator: –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/coordinators/exit_decision_coordinator.py:69`

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∞ —Ä–µ—à–µ–Ω–∏–π:**

1. **ExitAnalyzer** (—Å—Ç—Ä–æ–∫–∏ 98-111)
   - –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∞
   - –í—ã–∑—ã–≤–∞–µ—Ç `exit_analyzer.analyze_position(symbol)`

2. **Trailing Stop Loss Coordinator** (—Å—Ç—Ä–æ–∫–∏ 113-125)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ Trailing SL
   - –í—ã–∑—ã–≤–∞–µ—Ç `_check_trailing_stop()`

3. **Smart Exit Coordinator** (—Å—Ç—Ä–æ–∫–∏ 127-139)
   - –£–º–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç—É/–ø–∞—Ç—Ç–µ—Ä–Ω–∞–º
   - –í—ã–∑—ã–≤–∞–µ—Ç `_check_smart_exit()`

4. **Position Manager** (—Å—Ç—Ä–æ–∫–∏ 141-153)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ TP/SL —á–µ—Ä–µ–∑ Position Manager
   - –í—ã–∑—ã–≤–∞–µ—Ç `_check_position_manager()`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—à–µ–Ω–∏–π** (—Å—Ç—Ä–æ–∫–∏ 31-41):
```python
EXIT_PRIORITIES = {
    "emergency_loss_protection": 1,  # –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É–±—ã—Ç–æ–∫ - —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    "sl_reached": 2,                  # Stop Loss –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
    "tp_reached": 3,                 # Take Profit –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
    "trailing_stop": 4,               # Trailing Stop Loss —Å—Ä–∞–±–æ—Ç–∞–ª
    "max_holding_time": 5,            # –ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è
    "smart_exit_reversal": 6,         # –£–º–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç—É
    "smart_exit_pattern": 7,          # –£–º–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É
    "partial_tp": 8,                  # –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TP
    "extend_tp": 9,                   # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP (–Ω–µ –∑–∞–∫—Ä—ã—Ç–∏–µ)
}
```

---

## 2. –ü–†–û–ë–õ–ï–ú–ê #1: Emergency Loss Protection - –ì–î–ï –ü–†–û–í–ï–†–Ø–ï–¢–°–Ø?

### 2.1. –ü–æ–∏—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ Emergency Loss Protection

**–ü—Ä–æ–±–ª–µ–º–∞:** Emergency Loss Protection –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π), –Ω–æ **–ù–ï –ù–ê–ô–î–ï–ù–ê** —è–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `manage_position()`.

**–ì–¥–µ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è:**
- –í ExitAnalyzer (–∫–∞–∫ —á–∞—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–∑–∏—Ü–∏–∏)
- –í Exit Decision Coordinator (–∫–∞–∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- –í `_check_position_safety()` (–∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- Exit Decision Coordinator —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ—Ç ExitAnalyzer
- ExitAnalyzer –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å Emergency Loss Protection
- –ù–æ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ `manage_position()` –Ω–µ—Ç —è–≤–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Emergency Loss Protection

**–í—ã–≤–æ–¥:** Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–í–ù–£–¢–†–ò ExitAnalyzer**, –≤ –º–µ—Ç–æ–¥–∞—Ö `_generate_exit_for_*()`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–í –°–ê–ú–û–ú –ö–û–ù–¶–ï**, –ø–æ—Å–ª–µ –≤—Å–µ—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (Smart Close, TP, Max Holding). –≠—Ç–æ **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê**, —Ç–∞–∫ –∫–∞–∫ Emergency Loss Protection –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π) –∏ –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ü–ï–†–í–û–ô.

### 2.2. –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï–î–ù–ï–ô

**–ù–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ:**
- `_generate_exit_for_trending()`: Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –ø—É–Ω–∫—Ç–µ #9 (–ø–æ—Å–ª–µ–¥–Ω–∏–π)
- `_generate_exit_for_ranging()`: Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –ø—É–Ω–∫—Ç–µ #8 (–ø–æ—Å–ª–µ–¥–Ω–∏–π)
- `_generate_exit_for_choppy()`: Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –ø—É–Ω–∫—Ç–µ #8 (–ø–æ—Å–ª–µ–¥–Ω–∏–π)

**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∫–æ–¥–µ:**
```python
# 9. ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (29.12.2025): Emergency Loss Protection - –ü–û–°–õ–ï–î–ù–Ø–Ø –ó–ê–©–ò–¢–ê
# –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ, –ø–æ—Å–ª–µ –≤—Å–µ—Ö –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (Smart Close, TP, Max Holding)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Emergency Loss Protection –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π) –≤ `ExitDecisionCoordinator`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï–î–ù–ï–ô –≤ `ExitAnalyzer`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (TP, Max Holding) –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é —Ä–∞–Ω—å—à–µ, —á–µ–º Emergency Loss Protection —É—Å–ø–µ–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- Emergency Loss Protection —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ
- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —É–±—ã—Ç–æ–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- –£–±—ã—Ç–∫–∏ –±–æ–ª—å—à–µ, —á–µ–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å

### 2.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Emergency Loss Protection –≤ –ù–ê–ß–ê–õ–û** –º–µ—Ç–æ–¥–æ–≤ `_generate_exit_for_*()`
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å Emergency Loss Protection –ü–ï–†–ï–î –≤—Å–µ–º–∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ (TP, SL, Max Holding)
3. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É 1 –≤ `ExitDecisionCoordinator`

---

## 3. –ü–†–û–ë–õ–ï–ú–ê #2: –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –ü–†–û–í–ï–†–û–ö

### 3.1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ TP/SL

**–ü—Ä–æ–±–ª–µ–º–∞:** TP/SL –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö:

1. **Exit Decision Coordinator** ‚Üí —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ—Ç ExitAnalyzer
2. **ExitAnalyzer** ‚Üí –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ TP/SL
3. **Position Manager** ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TP —á–µ—Ä–µ–∑ `TakeProfitManager` –∏–ª–∏ `_check_tp_only()`
4. **Exit Decision Coordinator** ‚Üí —Ç–∞–∫–∂–µ —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –æ—Ç Position Manager

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑
- –í–æ–∑–º–æ–∂–Ω—ã –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–µ—à–µ–Ω–∏–π
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

### 3.2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ: TP/SL –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ ExitAnalyzer
2. Position Manager –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å TP/SL –æ—Ç–¥–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Exit Decision Coordinator
3. Exit Decision Coordinator –¥–æ–ª–∂–µ–Ω —Å–æ–±–∏—Ä–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –æ—Ç ExitAnalyzer

---

## 4. –ü–†–û–ë–õ–ï–ú–ê #3: –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –ü–†–û–í–ï–†–û–ö –í ExitAnalyzer

### 4.1. –ê–Ω–∞–ª–∏–∑ –º–µ—Ç–æ–¥–∞ `analyze_position()`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/positions/exit_analyzer.py:243`

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**

1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã (–∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ –∏–ª–∏ data_registry)
3. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞
4. –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞:
   - `_generate_exit_for_trending()` –¥–ª—è trending
   - `_generate_exit_for_ranging()` –¥–ª—è ranging
   - `_generate_exit_for_choppy()` –¥–ª—è choppy

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤–∏–¥–Ω–æ —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ Emergency Loss Protection –≤ –Ω–∞—á–∞–ª–µ `analyze_position()`.

### 4.2. –ì–¥–µ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ Emergency Loss Protection?

**–û–∂–∏–¥–∞–µ–º–æ–µ –º–µ—Å—Ç–æ:** –í –Ω–∞—á–∞–ª–µ `analyze_position()`, –ü–ï–†–ï–î –∞–Ω–∞–ª–∏–∑–æ–º –ø–æ —Ä–µ–∂–∏–º—É.

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ù–µ –Ω–∞–π–¥–µ–Ω–∞ —è–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞.

**–í—ã–≤–æ–¥:** Emergency Loss Protection, –≤–µ—Ä–æ—è—Ç–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–æ–≤ `_generate_exit_for_*()`, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï –∞–Ω–∞–ª–∏–∑–∞ —Ä–µ–∂–∏–º–∞, –∞ –Ω–µ –î–û.

---

## 5. –ü–†–û–ë–õ–ï–ú–ê #4: –†–ê–°–ß–ï–¢ PnL –ò –ö–û–ú–ò–°–°–ò–ô

### 5.1. –ú–µ—Ç–æ–¥ `_calculate_pnl_percent()`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/positions/exit_analyzer.py:524`

**–õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞:**

1. **–ü–†–ò–û–†–ò–¢–ï–¢ 1:** –ü–æ–ª—É—á–µ–Ω–∏–µ PnL% –æ—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
   - –ò–∑ `position["margin"]` –∏ `position["unrealizedPnl"]`
   - –†–∞—Å—á–µ—Ç: `(unrealizedPnl / margin) * 100`

2. **–ü–†–ò–û–†–ò–¢–ï–¢ 2:** –†–∞—Å—á–µ—Ç –æ—Ç —Ü–µ–Ω—ã (fallback)
   - –ï—Å–ª–∏ margin/unrealizedPnl –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
   - –†–∞—Å—á–µ—Ç: `(current_price - entry_price) / entry_price * 100` –¥–ª—è long

3. **–£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π:**
   - –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `include_fees=True` –ò –ø—Ä–æ—à–ª–æ >10 —Å–µ–∫—É–Ω–¥ —Å –æ—Ç–∫—Ä—ã—Ç–∏—è
   - –ö–æ–º–∏—Å—Å–∏—è –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ PnL%

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 10 —Å–µ–∫—É–Ω–¥, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—è–º –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π.

### 5.2. –ü—Ä–æ–±–ª–µ–º–∞ —Å Take Profit –∏ –∫–æ–º–∏—Å—Å–∏—è–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** Take Profit –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ë–ï–ó —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö.

**–ü—Ä–∏–º–µ—Ä –∏–∑ CSV:**
- DOGE-USDT: Entry=$0.1547, Exit=$0.1547, Net PnL=-$0.26 USDT
- –ü—Ä–∏—á–∏–Ω–∞: `tp_reached`
- **–ü—Ä–æ–±–ª–µ–º–∞:** TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å —Å —É–±—ã—Ç–∫–æ–º –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–π

**–í—ã–≤–æ–¥:** Take Profit –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –° –£–ß–ï–¢–û–ú –∫–æ–º–∏—Å—Å–∏–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è —Å —É–±—ã—Ç–∫–æ–º.

---

## 6. –ü–†–û–ë–õ–ï–ú–ê #5: –ü–ê–†–ê–ú–ï–¢–†–´ –ò –ò–• –ò–°–¢–û–ß–ù–ò–ö–ò

### 6.1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —á–µ—Ä–µ–∑ ParameterProvider

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/config/parameter_provider.py`

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

1. **Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   - –ò–∑ `by_symbol[symbol]` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
   - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

2. **Per-regime –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   - –ò–∑ `exit_params.{regime}` (trending, ranging, choppy)
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ—Ç per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. **–î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–Ω–∏–∑—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   - –ò–∑ `exit_params.default`
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –µ—Å–ª–∏ –Ω–µ—Ç per-symbol –∏ per-regime –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤—Å–µ–≥–¥–∞ —è—Å–Ω–æ, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏.

### 6.2. –ü–†–û–í–ï–†–ö–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ü–ê–†–ê–ú–ï–¢–†–û–í

**–°—Ç–∞—Ç—É—Å:** ‚ùå –õ–û–ì–ò–†–û–í–ê–ù–ò–ï –ù–ï –†–ê–ë–û–¢–ê–ï–¢

**–ß—Ç–æ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ:**
1. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `parameter_provider.py:234-241` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ exit_params
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `exit_analyzer.py:788-793` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ TP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `exit_analyzer.py:1003-1008` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `signal_generator.py:6425` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ min_signal_strength
5. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `order_executor.py:210` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ order_type

**–ß—Ç–æ –Ω–∞–π–¥–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö —Å–µ—Å—Å–∏–∏ 03.01.2026:**
- ‚ùå –ù–ï–¢ —Å–æ–æ–±—â–µ–Ω–∏–π `üìä [PARAMS]` –≤ –ª–æ–≥–∞—Ö
- ‚ùå –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ParameterProvider**
   - –í `_get_tp_percent()`: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `self.parameter_provider` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –í `_get_sl_percent()`: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `self.parameter_provider` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –Ω–∞ `config_manager`, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–ï –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏:**
   - `parameter_provider` –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ ExitAnalyzer
   - –ú–µ—Ç–æ–¥—ã `_get_tp_percent()` –∏ `_get_sl_percent()` –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG, –∞ –Ω–µ INFO (–Ω–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `logger.info()`)

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–¥–µ:**
   - `ParameterProvider` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ `orchestrator.py:336`
   - –ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `ExitAnalyzer` –≤ `orchestrator.py:490`
   - –ù–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback

### 6.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
1. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫–∏** (–∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `config_manager`)
2. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ** `_get_tp_percent()` –∏ `_get_sl_percent()`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `parameter_provider` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω** –≤ ExitAnalyzer
4. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –¥–∞–∂–µ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback

**–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ `exit_analyzer.py:815-875` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è TP
- ‚úÖ `exit_analyzer.py:1070-1120` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è SL
- ‚úÖ `parameter_provider.py:234-241` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ–Ω–æ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (03.01.2026)

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è TP –∏–∑ `symbol_profiles` (—Å—Ç—Ä–æ–∫–∞ ~827-832)
2. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è TP –∏–∑ `by_regime` (—Å—Ç—Ä–æ–∫–∞ ~866-871)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è TP –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `scalping_config` (—Å—Ç—Ä–æ–∫–∞ ~888-893)
4. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è SL –∏–∑ `adaptive_regime` (—Å—Ç—Ä–æ–∫–∞ ~1092-1098)
5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è SL –∏–∑ `by_regime` (—Å—Ç—Ä–æ–∫–∞ ~1129-1135)
6. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ fallback-–±–ª–æ–∫ –¥–ª—è SL –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ `scalping_config` (—Å—Ç—Ä–æ–∫–∞ ~1149-1154)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å **–í–°–ï–ì–î–ê**, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ ParameterProvider –∏–ª–∏ fallback
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤ –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è `üìä [PARAMS]` —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∫–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:**
```
üìä [PARAMS] {symbol} ({regime}): TP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã tp_percent={value}%, tp_atr_multiplier={value}, tp_min={value}%, tp_max={value}% | –ò—Å—Ç–æ—á–Ω–∏–∫: {–∏—Å—Ç–æ—á–Ω–∏–∫}
üìä [PARAMS] {symbol} ({regime}): SL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã sl_percent={value}%, sl_atr_multiplier={value}, sl_min={value}% | –ò—Å—Ç–æ—á–Ω–∏–∫: {–∏—Å—Ç–æ—á–Ω–∏–∫}
```

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `ParameterProvider.get_exit_params()` - –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `symbol_profiles.{symbol}.{regime}` - per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback)
- `by_regime.{regime}` - per-regime –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback)
- `adaptive_regime.{regime}` - adaptive –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback –¥–ª—è SL)
- `scalping_config.tp_percent/sl_percent` - –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø–æ—Å–ª–µ–¥–Ω–∏–π fallback)

---

## 7. –ü–†–û–ë–õ–ï–ú–ê #6: –ü–†–û–í–ï–†–ö–ê –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò –ü–û–ó–ò–¶–ò–ò

### 7.1. –ú–µ—Ç–æ–¥ `_check_position_safety()`

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/position_manager.py:789`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**

1. –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π (10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π)
2. –ü–æ–ª—É—á–µ–Ω–∏–µ leverage (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞, –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ fallback=3)
3. –ü–æ–ª—É—á–µ–Ω–∏–µ equity (–∏–∑ margin_info, –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ –æ–±—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞)
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `MarginCalculator.is_position_safe()`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ `manage_position()`, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –û–Ω —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä—É–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

**–í—ã–≤–æ–¥:** `_check_position_safety()` –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º–æ–º –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π, –∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## 8. –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 8.1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–µ—è–≤–Ω–æ**
   - –ù–µ –≤–∏–¥–Ω–æ —è–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ –Ω–∞—á–∞–ª–µ `analyze_position()`
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ TP/SL**
   - –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ ExitAnalyzer

3. **Take Profit –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π**
   - TP –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é —Å —É–±—ã—Ç–∫–æ–º
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ TP

### 8.2. –£–ª—É—á—à–µ–Ω–∏—è

1. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫**
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –°–¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π

3. **–î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**
   - Emergency Loss Protection –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ü–ï–†–í–´–ú
   - SL –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –í–¢–û–†–´–ú
   - TP –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –¢–†–ï–¢–¨–ò–ú

---

## 9. –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –ü–†–û–í–ï–†–û–ö –í `_generate_exit_for_ranging()`

### 9.1. –¢–µ–∫—É—â–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ü–†–û–ë–õ–ï–ú–ù–ê–Ø)

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/positions/exit_analyzer.py:2719`

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫:**

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏** (—Å—Ç—Ä–æ–∫–∏ 2755-2771)
   - Entry price, side, entry_time

2. **–†–∞—Å—á–µ—Ç PnL** (—Å—Ç—Ä–æ–∫–∏ 2780-2828)
   - Gross PnL (–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π) –¥–ª—è SL
   - Net PnL (—Å –∫–æ–º–∏—Å—Å–∏—è–º–∏) –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ peak_profit** (—Å—Ç—Ä–æ–∫–∏ 2830-2871)
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è, –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å < 70% –æ—Ç peak (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–±—ã–ª–µ–π > 0.5%)

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ SL (Stop Loss)** (—Å—Ç—Ä–æ–∫–∏ 2873-2918)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Gross PnL –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å SL threshold
   - SL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –î–û TP ‚úÖ

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ TP (Take Profit)** (—Å—Ç—Ä–æ–∫–∏ –ø–æ—Å–ª–µ 2918)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP

6. **–ü—Ä–æ–≤–µ—Ä–∫–∞ big_profit_exit** (–ø–æ–∑–∂–µ –≤ –∫–æ–¥–µ)
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –ø—Ä–∏–±—ã–ª–∏

7. **–ü—Ä–æ–≤–µ—Ä–∫–∞ partial_tp** (–ø–æ–∑–∂–µ –≤ –∫–æ–¥–µ)
   - –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TP

8. **–ü—Ä–æ–≤–µ—Ä–∫–∞ max_holding** (–ø–æ–∑–∂–µ –≤ –∫–æ–¥–µ)
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

9. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Emergency Loss Protection** (—Å—Ç—Ä–æ–∫–∏ 3739-3820) ‚ùå **–ü–û–°–õ–ï–î–ù–Ø–Ø**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ
   - –ü–æ—Ä–æ–≥: -2.5% –¥–ª—è ranging (—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω —Å —É—á–µ—Ç–æ–º spread –∏ commission)
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è: 60 —Å–µ–∫—É–Ω–¥

### 9.2. –ü–†–û–ë–õ–ï–ú–ê: Emergency Loss Protection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï–î–ù–ï–ô

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**
- Emergency Loss Protection –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π) –≤ `ExitDecisionCoordinator`
- –ù–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï–î–ù–ï–ô –≤ `_generate_exit_for_ranging()`
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥—Ä—É–≥–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (TP, max_holding) –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é —Ä–∞–Ω—å—à–µ

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –¥–∞–∂–µ –∫–æ–≥–¥–∞ —É–±—ã—Ç–æ–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π
- Emergency Loss Protection —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ
- –£–±—ã—Ç–∫–∏ –±–æ–ª—å—à–µ, —á–µ–º –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å

**–ü—Ä–∏–º–µ—Ä –∏–∑ CSV:**
- DOGE-USDT: Entry=$0.1527, Exit=$0.1520, Net PnL=-$1.23 USDT, Duration=63.6 —Å–µ–∫
- –ü—Ä–∏—á–∏–Ω–∞: `emergency_loss_protection`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å —á–µ—Ä–µ–∑ Emergency Loss Protection —á–µ—Ä–µ–∑ 63.6 —Å–µ–∫—É–Ω–¥, –Ω–æ —É–±—ã—Ç–æ–∫ —É–∂–µ —Å–æ—Å—Ç–∞–≤–∏–ª -$1.23 USDT

### 9.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:**
1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É Emergency Loss Protection –≤ –ù–ê–ß–ê–õ–û** –º–µ—Ç–æ–¥–∞ `_generate_exit_for_ranging()`
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å Emergency Loss Protection –ü–ï–†–ï–î –≤—Å–µ–º–∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ (–ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ PnL)
3. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É 1 –≤ `ExitDecisionCoordinator`

**–ù–æ–≤–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏
2. –†–∞—Å—á–µ—Ç PnL
3. **Emergency Loss Protection** ‚Üê –ü–ï–†–ï–ú–ï–°–¢–ò–¢–¨ –°–Æ–î–ê
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ SL
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ TP
6. –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## 10. –ü–†–û–ë–õ–ï–ú–ê #7: TAKE PROFIT –ë–ï–ó –£–ß–ï–¢–ê –ö–û–ú–ò–°–°–ò–ô

### 10.1. –ü—Ä–æ–±–ª–µ–º–∞

**–ü—Ä–∏–º–µ—Ä –∏–∑ CSV:**
- DOGE-USDT: Entry=$0.1547, Exit=$0.1547, Net PnL=-$0.26 USDT
- –ü—Ä–∏—á–∏–Ω–∞: `tp_reached`
- **–ü—Ä–æ–±–ª–µ–º–∞:** TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å —Å —É–±—ã—Ç–∫–æ–º –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–π

**–ê–Ω–∞–ª–∏–∑:**
- Entry –∏ Exit —Ü–µ–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ ($0.1547)
- –ù–æ –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏–≤–µ–ª–∏ –∫ —É–±—ã—Ç–∫—É (-$0.26 USDT)
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ TP –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è –ë–ï–ó —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–π

### 10.2. –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è TP

**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/position_manager.py:_check_tp_only()`

**–ü—Ä–æ–±–ª–µ–º–∞:** TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ Gross PnL (–±–µ–∑ –∫–æ–º–∏—Å—Å–∏–π), –Ω–æ –∫–æ–º–∏—Å—Å–∏–∏ —Å—ä–µ–¥–∞—é—Ç –ø—Ä–∏–±—ã–ª—å.

### 10.3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å TP –Ω–∞ –æ—Å–Ω–æ–≤–µ Net PnL (—Å –∫–æ–º–∏—Å—Å–∏—è–º–∏)
2. –ò–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –±—É—Ñ–µ—Ä –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ TP
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ TP –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å —É–±—ã—Ç–∫–æ–º

---

## 11. –ü–†–û–ë–õ–ï–ú–ê #8: –ò–ó–ë–´–¢–û–ß–ù–´–ï –†–ê–°–ß–ï–¢–´

### 11.1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤ PnL

**–ü—Ä–æ–±–ª–µ–º–∞:** PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑:
1. –í `ExitAnalyzer._calculate_pnl_percent()` - Gross –∏ Net PnL
2. –í `PositionManager._check_position_safety()` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
3. –í `TakeProfitManager.check_tp()` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ TP
4. –í `StopLossManager.check_sl()` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ SL

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –≤ —Ä–∞—Å—á–µ—Ç–∞—Ö

### 11.2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å PnL –æ–¥–∏–Ω —Ä–∞–∑ –≤ –Ω–∞—á–∞–ª–µ `analyze_position()`
2. –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–π PnL –≤–æ –≤—Å–µ –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–∫–∏
3. –ò–∑–±–µ–≥–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤

---

## 12. –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 12.1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å Emergency Loss Protection –≤ –Ω–∞—á–∞–ª–æ –ø—Ä–æ–≤–µ—Ä–æ–∫**
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ü–ï–†–ï–î –≤—Å–µ–º–∏ –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
   - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É 1

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TP —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Net PnL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ TP
   - –î–æ–±–∞–≤–∏—Ç—å –±—É—Ñ–µ—Ä –Ω–∞ –∫–æ–º–∏—Å—Å–∏–∏

3. **–£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–æ–∫ TP/SL**
   - –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ ExitAnalyzer
   - –£–±—Ä–∞—Ç—å –∏–∑ Position Manager, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Exit Decision Coordinator

### 12.2. –£–ª—É—á—à–µ–Ω–∏—è (—Å—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ)

1. **–£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–æ–∫**
   - –°–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω–æ–π –∏ –ª–æ–≥–∏—á–Ω–æ–π
   - –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

2. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã**
   - –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å PnL –æ–¥–∏–Ω —Ä–∞–∑
   - –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–µ–∂–¥—É –º–µ—Ç–æ–¥–∞–º–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 03.01.2026  
**–í–µ—Ä—Å–∏—è:** 1.0
