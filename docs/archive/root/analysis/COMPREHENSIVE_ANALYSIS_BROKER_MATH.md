# –ö–û–ú–ü–õ–ï–ö–°–ù–´–ô –ê–ù–ê–õ–ò–ó: –ú–ê–¢–ï–ú–ê–¢–ò–ö–ê –ò –õ–û–ì–ò–ö–ê –ë–†–û–ö–ï–†–ê

**–î–∞—Ç–∞:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** üîç –ê–ù–ê–õ–ò–ó

---

## üìä –ê–ù–ê–õ–ò–ó –° –¢–û–ß–ö–ò –ó–†–ï–ù–ò–Ø –ë–†–û–ö–ï–†–ê –ò –ú–ê–¢–ï–ú–ê–¢–ò–ö–ò

---

## 1. –†–ê–°–ß–ï–¢ PnL (–ü—Ä–∏–±—ã–ª—å/–£–±—ã—Ç–æ–∫)

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 1.1 ExitAnalyzer ‚úÖ
- **–ú–µ—Ç–æ–¥:** `_calculate_pnl_percent()`
- **–†–∞—Å—á–µ—Ç:** `PnL% = (unrealized_pnl / margin_used) * 100`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–ª—è —Ñ—å—é—á–µ—Ä—Å–æ–≤ PnL% —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)

#### 1.2 PositionManager ‚úÖ
- **–ú–µ—Ç–æ–¥:** `_check_tp_only()`
- **–†–∞—Å—á–µ—Ç:** `pnl_percent = (unrealized_pnl / margin_used) * 100`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±–∏—Ä–∂–µ–≤–æ–º—É —Ä–∞—Å—á–µ—Ç—É

---

### ‚ö†Ô∏è –ü–û–¢–ï–ù–¶–ò–ê–õ–¨–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:

#### 1.3 TrailingStopLoss ‚ö†Ô∏è
- **–ú–µ—Ç–æ–¥:** `get_profit_pct()`
- **–†–∞—Å—á–µ—Ç:** `profit_pct = (current_price - entry_price) / entry_price`
- **–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –°—á–∏—Ç–∞–µ—Ç –æ—Ç –¶–ï–ù–´, –∞ –Ω–µ –æ—Ç –ú–ê–†–ñ–ò!

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü—Ä–∏ leverage 5x: **1% –æ—Ç —Ü–µ–Ω—ã = 5% –æ—Ç –º–∞—Ä–∂–∏**
- –ï—Å–ª–∏ TP=5% –æ—Ç –º–∞—Ä–∂–∏, —Ç–æ –≤ TrailingStopLoss –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å **1% –æ—Ç —Ü–µ–Ω—ã**
- –ù–æ TrailingStopLoss —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å **5% –æ—Ç —Ü–µ–Ω—ã** (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–ü—Ä–∏–º–µ—Ä:**
- Entry: $100, Current: $105
- Leverage: 5x
- Margin: $20
- **–û—Ç —Ü–µ–Ω—ã:** (105-100)/100 = 5%
- **–û—Ç –º–∞—Ä–∂–∏:** (105-100)*5/20 = 25% ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)
- TrailingStopLoss —Å—á–∏—Ç–∞–µ—Ç 5% –æ—Ç —Ü–µ–Ω—ã, –Ω–æ –¥–æ–ª–∂–µ–Ω —Å—á–∏—Ç–∞—Ç—å 1% –æ—Ç —Ü–µ–Ω—ã (—á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å 5% –æ—Ç –º–∞—Ä–∂–∏)

---

## 2. –†–ê–°–ß–ï–¢ –ö–û–ú–ò–°–°–ò–ô

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 2.1 –ö–æ–º–∏—Å—Å–∏–∏ –≤ ExitAnalyzer ‚úÖ
- **Maker:** 0.02% (0.0002) –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É
- **Taker:** 0.05% (0.0005) –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É
- **–£—á–µ—Ç:** `commission_pct = (trading_fee_rate * 2) * leverage * 100`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∫–æ–º–∏—Å—Å–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç leverage –∏ –¥–≤–µ —Å—Ç–æ—Ä–æ–Ω—ã

**–ü—Ä–∏–º–µ—Ä:**
- Leverage: 5x
- Maker fee: 0.02% √ó 2 (–≤—Ö–æ–¥+–≤—ã—Ö–æ–¥) √ó 5 (leverage) = 0.2% –æ—Ç –º–∞—Ä–∂–∏ ‚úÖ

#### 2.2 –ö–æ–º–∏—Å—Å–∏–∏ –≤ PositionManager ‚úÖ
- **–†–∞—Å—á–µ—Ç:** –û—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è entry –∏ exit
- **–£—á–µ—Ç:** –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è maker/taker –ø–æ —Ç–∏–ø—É –æ—Ä–¥–µ—Ä–∞
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

---

## 3. –†–ê–°–ß–ï–¢ –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ô

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 3.1 –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –º–æ–Ω–µ—Ç—ã ‚úÖ
- **–ú–µ—Ç–æ–¥:** `size_in_coins = size_in_contracts * ctVal`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç API OKX

**–ü—Ä–∏–º–µ—Ä—ã:**
- BTC: ctVal=0.01 ‚Üí 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 0.01 BTC ‚úÖ
- SOL: ctVal=1.0 ‚Üí 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1 SOL ‚úÖ
- DOGE: ctVal=1000.0 ‚Üí 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1000 DOGE ‚úÖ

#### 3.2 –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ ‚úÖ
- **–ú–µ—Ç–æ–¥:** –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ `lotSz`
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ú–∏–Ω–∏–º—É–º `minSz`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –±–∏—Ä–∂–∏

---

## 4. –†–ê–°–ß–ï–¢ –õ–ò–ú–ò–¢–ù–´–• –¶–ï–ù

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 4.1 BUY –æ—Ä–¥–µ—Ä–∞ ‚úÖ
- **–õ–æ–≥–∏–∫–∞:** `limit_price = best_ask * (1 + offset_percent / 100.0)`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–ª—è BUY –Ω—É–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –ø–æ best_ask (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)

#### 4.2 SELL –æ—Ä–¥–µ—Ä–∞ ‚úÖ
- **–õ–æ–≥–∏–∫–∞:** `limit_price = best_bid * (1 - offset_percent / 100.0)`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–ª—è SELL –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –ø–æ best_bid (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)

#### 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ —Ü–µ–Ω ‚úÖ
- **–ú–µ—Ç–æ–¥:** –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–Ω–∏—Ü—ã –º–µ–∂–¥—É best_bid/best_ask –∏ current_price
- **–ü–æ—Ä–æ–≥:** < 0.1% –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è best_bid/best_ask
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∑–∞—â–∏—Ç–∞ –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ü–µ–Ω

---

## 5. –†–ê–°–ß–ï–¢ –ú–ê–†–ñ–ò –ò LEVERAGE

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 5.1 –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ ‚úÖ
- **–§–æ—Ä–º—É–ª–∞:** `margin = position_value / leverage`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –±–∏—Ä–∂–µ–≤–æ–º—É —Ä–∞—Å—á–µ—Ç—É

#### 5.2 –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ ‚úÖ
- **–§–æ—Ä–º—É–ª–∞:** `max_size = (equity * leverage) / price`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —É—á–∏—Ç—ã–≤–∞–µ—Ç leverage

---

## 6. –ü–†–û–°–ö–ê–õ–¨–ó–´–í–ê–ù–ò–ï (Slippage)

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 6.1 Spread buffer ‚úÖ
- **–ú–µ—Ç–æ–¥:** `spread_buffer = (best_ask - best_bid) / best_ask * 100`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ SL –ø—Ä–æ–≤–µ—Ä–∫–µ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è

---

## 7. –õ–û–ì–ò–ö–ê –ó–ê–ö–†–´–¢–ò–Ø

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 7.1 –ó–∞–∫—Ä—ã—Ç–∏–µ LONG ‚úÖ
- **–¶–µ–Ω–∞:** `best_bid` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è LONG –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–∞—Ç—å –ø–æ best_bid

#### 7.2 –ó–∞–∫—Ä—ã—Ç–∏–µ SHORT ‚úÖ
- **–¶–µ–Ω–∞:** `best_ask` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è SHORT –Ω—É–∂–Ω–æ –∫—É–ø–∏—Ç—å –ø–æ best_ask

---

## 8. –õ–û–ì–ò–ö–ê –û–¢–ö–†–´–¢–ò–Ø

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:

#### 8.1 BUY —Å–∏–≥–Ω–∞–ª ‚úÖ
- **–¶–µ–Ω–∞:** `best_ask + offset` (–ø–æ–∫—É–ø–∞–µ–º –ø–æ –ª—É—á—à–µ–π —Ü–µ–Ω–µ –ø—Ä–æ–¥–∞–∂–∏)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ –±–∏—Ä–∂–∏

#### 8.2 SELL —Å–∏–≥–Ω–∞–ª ‚úÖ
- **–¶–µ–Ω–∞:** `best_bid - offset` (–ø—Ä–æ–¥–∞–µ–º –ø–æ –ª—É—á—à–µ–π —Ü–µ–Ω–µ –ø–æ–∫—É–ø–∫–∏)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–µ –±–∏—Ä–∂–∏

---

## ‚ö†Ô∏è –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –ù–ï–¢–û–ß–ù–û–°–¢–ò

### –ü–†–û–ë–õ–ï–ú–ê #1: TrailingStopLoss —Å—á–∏—Ç–∞–µ—Ç –æ—Ç —Ü–µ–Ω—ã ‚ö†Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- TrailingStopLoss —Å—á–∏—Ç–∞–µ—Ç PnL% –æ—Ç —Ü–µ–Ω—ã, –∞ –Ω–µ –æ—Ç –º–∞—Ä–∂–∏
- –≠—Ç–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –±–∏—Ä–∂–µ–≤—ã–º —Ä–∞—Å—á–µ—Ç–æ–º (–∫–æ—Ç–æ—Ä—ã–π –æ—Ç –º–∞—Ä–∂–∏)

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ leverage 5x: TP=5% –æ—Ç –º–∞—Ä–∂–∏ = 1% –æ—Ç —Ü–µ–Ω—ã
- TrailingStopLoss —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç —Å 5% –æ—Ç —Ü–µ–Ω—ã –≤–º–µ—Å—Ç–æ 1%
- –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∏–ª–∏ –∑–∞–ø–æ–∑–¥–∞–ª–æ–º—É –∑–∞–∫—Ä—ã—Ç–∏—é

**–†–µ—à–µ–Ω–∏–µ:**
- –ù—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å TP/SL –∏–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ—Ç –º–∞—Ä–∂–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –æ—Ç —Ü–µ–Ω—ã
- –§–æ—Ä–º—É–ª–∞: `tp_from_price = tp_from_margin / leverage`

---

### –ü–†–û–ë–õ–ï–ú–ê #2: –ö–æ–º–∏—Å—Å–∏—è –≤ TrailingStopLoss ‚ö†Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- TrailingStopLoss –≤—ã—á–∏—Ç–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏—é –æ—Ç —Ü–µ–Ω—ã: `net_profit_pct = gross_profit_pct - trading_fee_rate`
- –ù–æ `trading_fee_rate` —ç—Ç–æ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –Ω–æ–º–∏–Ω–∞–ª–∞, –∞ –Ω–µ –æ—Ç –º–∞—Ä–∂–∏

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü—Ä–∏ leverage 5x –∫–æ–º–∏—Å—Å–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–º–Ω–æ–∂–µ–Ω–∞ –Ω–∞ leverage
- –ù–æ TrailingStopLoss –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç leverage –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å leverage: `commission_pct = trading_fee_rate * leverage`

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û (90%):

1. ‚úÖ –†–∞—Å—á–µ—Ç PnL –æ—Ç –º–∞—Ä–∂–∏ (ExitAnalyzer, PositionManager)
2. ‚úÖ –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π —Å —É—á–µ—Ç–æ–º leverage (ExitAnalyzer)
3. ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –º–æ–Ω–µ—Ç—ã (ctVal)
4. ‚úÖ –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π (lotSz, minSz)
5. ‚úÖ –õ–∏–º–∏—Ç–Ω—ã–µ —Ü–µ–Ω—ã –¥–ª—è BUY/SELL (best_ask/best_bid)
6. ‚úÖ –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ –∏ leverage
7. ‚úÖ –õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (best_bid –¥–ª—è LONG, best_ask –¥–ª—è SHORT)
8. ‚úÖ –£—á–µ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è (spread_buffer)

### ‚ö†Ô∏è –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨ (10%):

1. ‚ö†Ô∏è TrailingStopLoss - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è TP/SL –∏–∑ –º–∞—Ä–∂–∏ –≤ —Ü–µ–Ω—É
2. ‚ö†Ô∏è TrailingStopLoss - —É—á–µ—Ç leverage –≤ –∫–æ–º–∏—Å—Å–∏–∏

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å TrailingStopLoss ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—á–∏—Ç–∞–µ—Ç –æ—Ç —Ü–µ–Ω—ã –≤–º–µ—Å—Ç–æ –º–∞—Ä–∂–∏

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å TP/SL –∏–∑ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –æ—Ç –º–∞—Ä–∂–∏ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –æ—Ç —Ü–µ–Ω—ã
- –§–æ—Ä–º—É–ª–∞: `tp_from_price = tp_from_margin / leverage`
- –ü—Ä–∏–º–µ—Ä: TP=5% –æ—Ç –º–∞—Ä–∂–∏ –ø—Ä–∏ leverage=5x ‚Üí TP=1% –æ—Ç —Ü–µ–Ω—ã

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∏—Å—Å–∏—é –≤ TrailingStopLoss ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç leverage

**–†–µ—à–µ–Ω–∏–µ:**
- –£–º–Ω–æ–∂–∞—Ç—å –∫–æ–º–∏—Å—Å–∏—é –Ω–∞ leverage: `commission_pct = trading_fee_rate * leverage`
- –ü—Ä–∏–º–µ—Ä: 0.02% √ó 5 = 0.1% –æ—Ç –º–∞—Ä–∂–∏

---

## üéØ –í–´–í–û–î

**–í —Ü–µ–ª–æ–º —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±—Ä–æ–∫–µ—Ä–∞ –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏!**

- ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∏—Ä–∂–µ–≤—ã–º
- ‚úÖ –ö–æ–º–∏—Å—Å–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –º–µ—Å—Ç)
- ‚úÖ –õ–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è/–∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- ‚ö†Ô∏è –ï—Å—Ç—å 2 –º–µ—Å—Ç–∞ –≥–¥–µ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —É—á–µ—Ç leverage –≤ TrailingStopLoss

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–æ—Ä–≥–æ–≤–ª–µ, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å TrailingStopLoss –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –±–∏—Ä–∂–µ–≤—ã–º —Ä–∞—Å—á–µ—Ç–∞–º!**

---

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω!** ‚úÖ
