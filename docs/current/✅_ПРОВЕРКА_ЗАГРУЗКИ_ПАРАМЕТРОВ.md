# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ó–ê–ì–†–£–ó–ö–ò –ü–ê–†–ê–ú–ï–¢–†–û–í

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025, 02:30  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ì–†–£–ñ–ï–ù–´ –ü–†–ê–í–ò–õ–¨–ù–û**

---

## üîç –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò –õ–û–ì–û–í

### ‚úÖ TSL (Trailing Stop Loss) - –ó–ê–ì–†–£–ñ–ï–ù–´ –ü–†–ê–í–ò–õ–¨–ù–û

**–ò–∑ debug –ª–æ–≥–æ–≤ (`debug_20251123_015720.csv`):**
```
tsl_create,DOGE-USDT,regime=ranging | min_hold=60.0000 | timeout=120.0000
config,DOGE-USDT,regime=ranging | min_holding=60.0000 | timeout=120.0000 | loss_cut=4.0000 | initial_trail=0.0200

tsl_create,BTC-USDT,regime=ranging | min_hold=60.0000 | timeout=120.0000
config,BTC-USDT,regime=ranging | min_holding=60.0000 | timeout=120.0000 | loss_cut=4.0000 | initial_trail=0.0200
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:**
- `min_holding_minutes: 60.0` ‚úÖ **–°–û–í–ü–ê–î–ê–ï–¢**
- `timeout_minutes: 120` ‚úÖ **–°–û–í–ü–ê–î–ê–ï–¢**
- `loss_cut_percent: 4.0` ‚úÖ **–°–û–í–ü–ê–î–ê–ï–¢**
- `initial_trail: 0.020` ‚úÖ **–°–û–í–ü–ê–î–ê–ï–¢**

**–†–µ–∂–∏–º:** `ranging` ‚úÖ **–û–ü–†–ï–î–ï–õ–Ø–ï–¢–°–Ø –ü–†–ê–í–ò–õ–¨–ù–û**

---

### ‚úÖ –§–∏–ª—å—Ç—Ä—ã - –†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û

**–ò–∑ –ª–æ–≥–æ–≤:**
```
LiquidityFilter: BTC-USDT –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É (vol24h=5,361,509,375,769 USD, spread=0.036%, source=symbol+ranging, regime=ranging)
OrderFlowFilter: delta=-0.999 < long_threshold 0.001 (regime=ranging)
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç `regime=ranging`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`source=symbol+ranging`)
- ‚úÖ –ü–æ—Ä–æ–≥–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É

---

### ‚úÖ ARM (Adaptive Regime Manager) - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û

**–ò–∑ –ª–æ–≥–æ–≤:**
```
ARM Detect Regime: Detected: RANGING (confidence: 50.0%)
–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥ –¥–ª—è ranging: base=0.167, win_rate=50.00%, final=0.158 (multiplier=0.95x)
RANGING —Ä–µ–∂–∏–º: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ –¥–æ 0.040
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (`RANGING`)
- ‚úÖ –ü–æ—Ä–æ–≥–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
- ‚úÖ Win rate —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

---

### ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ - –ê–î–ê–ü–¢–ò–í–ù–´–ï

**–ò–∑ –ª–æ–≥–æ–≤:**
```
–ù–∞–π–¥–µ–Ω—ã per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è DOGE-USDT (ranging)
–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è ranging (BTC-USDT): RSI overbought=70, oversold=30
–ì–õ–û–ë–ê–õ–¨–ù–´–ô: min_ma_difference_pct –¥–ª—è ranging: 0.03%
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- ‚úÖ Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–∞–∫ fallback
- ‚úÖ –†–µ–∂–∏–º —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### ‚úÖ Margin Calculator - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û

**–ò–∑ –ª–æ–≥–æ–≤:**
```
–ó–∞–≥—Ä—É–∂–µ–Ω safety_threshold=1.3 –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (regime=ranging)
regime_config –¥–ª—è ranging: {'safety_threshold': 1.3, 'risk_percentage': 0.025, ...}
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- ‚úÖ `safety_threshold` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ —Ä–µ–∂–∏–º—É
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä–∂–∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É

---

### ‚úÖ Risk Manager - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û

**–ò–∑ –ª–æ–≥–æ–≤:**
```
–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞: —Ä–µ–∂–∏–º=ranging, –ø—Ä–æ—Ñ–∏–ª—å=small, max_loss=2.0%, max_margin=85.0%
```

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É –∏ –±–∞–ª–∞–Ω—Å—É
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –±–∞–ª–∞–Ω—Å–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (`small`)

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. ‚úÖ **TSL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - `min_holding=60.0 –º–∏–Ω` ‚úÖ
   - `timeout=120 –º–∏–Ω` ‚úÖ
   - `loss_cut=4.0%` ‚úÖ
   - `initial_trail=0.020` ‚úÖ

2. ‚úÖ **–†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
   - `regime=ranging` ‚úÖ

3. ‚úÖ **–§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `symbol_profiles[symbol][regime].filters.*` ‚úÖ
   - –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ

4. ‚úÖ **ARM —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:**
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
   - –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä–æ–≥–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ ‚úÖ

5. ‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ:**
   - Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è ‚úÖ
   - –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–∞–∫ fallback ‚úÖ

6. ‚úÖ **Margin Calculator —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:**
   - `safety_threshold` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É ‚úÖ

7. ‚úÖ **Risk Manager —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:**
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É –∏ –±–∞–ª–∞–Ω—Å—É ‚úÖ

---

## üìã –ü–†–û–í–ï–†–ö–ê TP

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –õ–æ–≥–∏ TP –Ω–µ –Ω–∞–π–¥–µ–Ω—ã, –ø–æ—Ç–æ–º—É —á—Ç–æ:
- –ü–æ–∑–∏—Ü–∏–∏ –µ—â–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ TP (–æ—Ç–∫—Ä—ã—Ç—ã –Ω–µ–¥–∞–≤–Ω–æ)
- TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–∞ –ø—Ä–∏–±—ã–ª–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ TP –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ `tp_percent`

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è: `Per-regime TP –¥–ª—è {symbol} ({regime}): {tp_percent}%`
- TP –±—É–¥–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –ø–æ —Å–∏–º–≤–æ–ª—É –∏ —Ä–µ–∂–∏–º—É –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

---

## ‚úÖ –í–´–í–û–î

**–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ!**

- ‚úÖ TSL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ ARM —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ
- ‚úÖ Margin Calculator —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ
- ‚úÖ Risk Manager —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ì–†–£–ñ–ï–ù–´ –ü–†–ê–í–ò–õ–¨–ù–û –ò –†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

