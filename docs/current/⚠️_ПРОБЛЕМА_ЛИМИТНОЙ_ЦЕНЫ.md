# –ü–†–û–ë–õ–ï–ú–ê –õ–ò–ú–ò–¢–ù–û–ô –¶–ï–ù–´

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –¥–∞–ª–µ–∫–æ –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê

### –î–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–≥–æ–≤:
- **–°–∏–≥–Ω–∞–ª:** ETH-USDT LONG @ $2840.27
- **–õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞:** 2809.91
- **best_bid:** 2809.90
- **best_ask:** 2809.91
- **–†–∞–∑–Ω–∏—Ü–∞:** 2840.27 - 2809.91 = 30.36 USDT (–æ–∫–æ–ª–æ 1.07%)

### –ü—Ä–æ–±–ª–µ–º–∞:
–õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –ø–æ —Ü–µ–Ω–µ 2809.91, —á—Ç–æ –Ω–∞ 30.36 USDT –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã —Å–∏–≥–Ω–∞–ª–∞ (2840.27). –≠—Ç–æ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞.

---

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê

### –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è BUY:

**–°—Ç—Ä–æ–∫–∏ 299-343 –≤ `order_executor.py`:**

1. **–†–∞—Å—á–µ—Ç –æ—Ç best_ask:**
   ```python
   limit_price = best_ask * (1 + offset_percent / 100.0)
   # –ï—Å–ª–∏ offset_percent = 0.0, —Ç–æ limit_price = best_ask
   ```

2. **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ safe_buy_price:**
   ```python
   safe_buy_price = best_bid * 1.001  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è best_bid –≤–º–µ—Å—Ç–æ best_ask!
   limit_price = min(limit_price, safe_buy_price, max_buy_price)
   ```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–ª—è BUY –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `best_bid * 1.001` –≤–º–µ—Å—Ç–æ `best_ask`
- –≠—Ç–æ —Å—Ç–∞–≤–∏—Ç –æ—Ä–¥–µ—Ä –¥–∞–ª–µ–∫–æ –æ—Ç —Ä—ã–Ω–∫–∞ (–Ω–∞ —É—Ä–æ–≤–Ω–µ best_bid, –∞ –Ω–µ best_ask)
- –î–ª—è BUY –Ω—É–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –ø–æ best_ask (–∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –≤—ã—à–µ), –∞ –Ω–µ –ø–æ best_bid

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è BUY:

**–î–ª—è BUY (–ø–æ–∫—É–ø–∫–∞):**
- –ù—É–∂–Ω–æ –ø–æ–∫—É–ø–∞—Ç—å –ø–æ —Ü–µ–Ω–µ **best_ask** (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π offset (0.01-0.05%) –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
- –ù–ï –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `best_bid * 1.001` - —ç—Ç–æ —Å—Ç–∞–≤–∏—Ç –æ—Ä–¥–µ—Ä –¥–∞–ª–µ–∫–æ –æ—Ç —Ä—ã–Ω–∫–∞

**–î–ª—è SELL (–ø—Ä–æ–¥–∞–∂–∞):**
- –ù—É–∂–Ω–æ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –ø–æ —Ü–µ–Ω–µ **best_bid** (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)
- –ú–æ–∂–Ω–æ –≤—ã—á–µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π offset (0.01-0.05%) –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
- –ù–ï –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `best_ask * 0.999` - —ç—Ç–æ —Å—Ç–∞–≤–∏—Ç –æ—Ä–¥–µ—Ä –¥–∞–ª–µ–∫–æ –æ—Ç —Ä—ã–Ω–∫–∞

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è BUY ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `best_bid * 1.001` –¥–ª—è BUY
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `best_ask` (–∏–ª–∏ `best_ask * 1.0001` –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ `max_buy_price` –æ—Ç –±–∏—Ä–∂–∏

---

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è SELL ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `best_bid` –¥–ª—è SELL ‚úÖ
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ `min_sell_price` –æ—Ç –±–∏—Ä–∂–∏

---

### 3. –î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π offset –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è ‚úÖ

**–î–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞:**
- BUY: `best_ask * 1.0001` (0.01% –≤—ã—à–µ best_ask)
- SELL: `best_bid * 0.9999` (0.01% –Ω–∏–∂–µ best_bid)

**–≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç:**
- –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
- –ù–µ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ –æ—Ç —Ä—ã–Ω–∫–∞
- –≠–∫–æ–Ω–æ–º–∏—è –∫–æ–º–∏—Å—Å–∏–π (limit –≤–º–µ—Å—Ç–æ market)

---

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è BUY

