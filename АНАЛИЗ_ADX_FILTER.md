# üìä ADX Filter - –ü–æ–ª–Ω—ã–π –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –ê–Ω–∞–ª–∏–∑

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 21 –¥–µ–∫–∞–±—Ä—è 2025  
> **–ú–æ–¥—É–ª—å:** `src/strategies/scalping/futures/filters/adx_filter.py`  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production-Ready

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è

ADX Filter - —Ñ–∏–ª—å—Ç—Ä —Å–∏–ª—ã –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–π —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—É—â–µ–º—É —Ä—ã–Ω–æ—á–Ω–æ–º—É –∏–º–ø—É–ª—å—Å—É –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏.

---

## ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ADXFilterConfig)

```python
@dataclass
class ADXFilterConfig:
    enabled: bool = True              # –í–∫–ª—é—á–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä
    adx_threshold: float = 25.0       # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞
    di_difference: float = 5.0        # –¢—Ä–µ–±—É–µ–º–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É +DI –∏ -DI
    adx_period: int = 14              # –ü–µ—Ä–∏–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ ADX
    timeframe: str = "15m"            # –¢–∞–π–º—Ñ—Ä–µ–π–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è ADX –∑–Ω–∞—á–µ–Ω–∏–π:**

- **< 20:** –ù–µ—Ç —Ç—Ä–µ–Ω–¥–∞ (—Ñ–ª—ç—Ç) ‚ùå
- **20-25:** –°–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥ ‚ö†Ô∏è
- **25-50:** –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ ‚úÖ
- **> 50:** –û—á–µ–Ω—å —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ üöÄ

### 2. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ (ADXResult)

```python
@dataclass
class ADXResult:
    allowed: bool        # –°–∏–≥–Ω–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω
    adx_value: float     # –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ADX
    plus_di: float       # –ó–Ω–∞—á–µ–Ω–∏–µ +DI (–±—ã—á—å—è —Å–∏–ª–∞)
    minus_di: float      # –ó–Ω–∞—á–µ–Ω–∏–µ -DI (–º–µ–¥–≤–µ–∂—å—è —Å–∏–ª–∞)
    reason: str          # –ü—Ä–∏—á–∏–Ω–∞ —Ä–µ—à–µ–Ω–∏—è
```

---

## üîç –õ–æ–≥–∏–∫–∞ –§–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥: `check_trend_strength()`

#### –≠—Ç–∞–ø 1: –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

```python
adx = self._calculate_adx(candles)        # –°–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞
plus_di = self._calculate_plus_di(candles)   # –ë—ã—á—å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
minus_di = self._calculate_minus_di(candles) # –ú–µ–¥–≤–µ–∂—å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```

#### –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞

```python
if adx < self.config.adx_threshold:
    return ADXResult(
        allowed=False,
        reason=f"Weak trend: ADX={adx:.1f} < {threshold}"
    )
```

**–ë–ª–æ–∫–∏—Ä—É–µ—Ç:** –°–ª–∞–±—ã–µ —Ç—Ä–µ–Ω–¥—ã (ADX < 25)

#### –≠—Ç–∞–ø 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞

**–î–ª—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤:**

```python
if plus_di < minus_di + self.config.di_difference:
    return ADXResult(
        allowed=False,
        reason="+DI not dominant"
    )
```

**–¢—Ä–µ–±—É–µ—Ç:** +DI > -DI + 5.0 –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –±—ã—á—å–µ–≥–æ –∏–º–ø—É–ª—å—Å–∞

**–î–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤:**

```python
if minus_di < plus_di + self.config.di_difference:
    return ADXResult(
        allowed=False,
        reason="-DI not dominant"
    )
```

**–¢—Ä–µ–±—É–µ—Ç:** -DI > +DI + 5.0 –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –º–µ–¥–≤–µ–∂—å–µ–≥–æ –∏–º–ø—É–ª—å—Å–∞

---

## üìê –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

### 1. True Range (TR)

```python
TR = max(high - low, |high - prev_close|, |low - prev_close|)
```

**–ò–∑–º–µ—Ä—è–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å**

### 2. Directional Movement (+DM / -DM)

```python
+DM = high - prev_high  (–µ—Å–ª–∏ > 0 –∏ –±–æ–ª—å—à–µ down_move)
-DM = prev_low - low    (–µ—Å–ª–∏ > 0 –∏ –±–æ–ª—å—à–µ up_move)
```

### 3. Directional Indicators (+DI / -DI)

```python
ATR = Wilder_Smooth(TR, period=14)
+DI = 100 * Wilder_Smooth(+DM, 14) / ATR
-DI = 100 * Wilder_Smooth(-DM, 14) / ATR
```

### 4. ADX (Average Directional Index)

```python
DX = 100 * |+DI - -DI| / |+DI + -DI|
ADX = Wilder_Smooth(DX, period=14)
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:** ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–°–ò–õ–£** —Ç—Ä–µ–Ω–¥–∞, –Ω–æ **–Ω–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**!

### Wilder's Smoothing

```python
smoothed[i] = (smoothed[i-1] * (period - 1) + value[i]) / period
```

**–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –£–∞–π–ª–¥–µ—Ä–∞**

---

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –û—à–∏–±–æ–∫

### 1. –û–±—Ä–∞–±–æ—Ç–∫–∞ NaN –∑–Ω–∞—á–µ–Ω–∏–π

```python
if np.isnan(adx) or np.isnan(plus_di) or np.isnan(minus_di):
    logger.debug("‚ö†Ô∏è ADX: –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã nan –∑–Ω–∞—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback: ADX=0.0")
    adx = 0.0 if np.isnan(adx) else adx
    plus_di = 0.0 if np.isnan(plus_di) else plus_di
    minus_di = 0.0 if np.isnan(minus_di) else minus_di
```

**Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:** –ü—Ä–∏ NaN –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å

```python
# –í —Ä–∞—Å—á–µ—Ç–µ +DI/-DI
plus_di_vals = 100 * plus_di_smooth / (atr_safe + 1e-10)

# –í —Ä–∞—Å—á–µ—Ç–µ DX
di_sum = np.where(di_sum == 0, 1e-10, di_sum)
```

**–î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 1e-10 –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è**

### 3. Fail-Safe –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

```python
except Exception as e:
    logger.error(f"‚ùå ADX calculation error for {symbol}: {e}")
    return ADXResult(
        allowed=True,  # ‚ö†Ô∏è –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ñ–∏–ª—å—Ç—Ä –ø—Ä–∏ –æ—à–∏–±–∫–µ
        reason=f"ADX error (skipped): {e}"
    )
```

**–§–∏–ª–æ—Å–æ—Ñ–∏—è Fail-Open:** –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–µ —Ñ–∏–ª—å—Ç—Ä —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Å–∏–≥–Ω–∞–ª, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ARM (Adaptive Regime Manager)

### –ú–µ—Ç–æ–¥ `update_parameters()`

```python
def update_parameters(self, new_config: ADXFilterConfig):
    old_threshold = self.config.adx_threshold
    old_di = self.config.di_difference
    self.config = new_config
    
    logger.info(
        f"üîÑ ADX –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã:\n"
        f"  adx_threshold: {old_threshold} ‚Üí {new_config.adx_threshold}\n"
        f"  di_difference: {old_di} ‚Üí {new_config.di_difference}"
    )
```

**–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞:**

- **TRENDING —Ä–µ–∂–∏–º:** `adx_threshold=20.0`, `di_difference=3.0` (–±–æ–ª–µ–µ –º—è–≥–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- **RANGING —Ä–µ–∂–∏–º:** `adx_threshold=25.0`, `di_difference=5.0` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- **CHOPPY —Ä–µ–∂–∏–º:** `adx_threshold=30.0`, `di_difference=7.0` (—Å—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)

---

## üé® –ü—Ä–∏–º–µ—Ä—ã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ë–∞–∑–æ–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
config = ADXFilterConfig(
    enabled=True,
    adx_threshold=25.0,
    di_difference=5.0,
    adx_period=14
)
adx_filter = ADXFilter(config)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ LONG —Å–∏–≥–Ω–∞–ª–∞
result = adx_filter.check_trend_strength(
    symbol="BTC-USDT",
    side=OrderSide.BUY,
    candles=historical_candles
)

if result.allowed:
    print(f"‚úÖ –°–∏–≥–Ω–∞–ª –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω: {result.reason}")
    print(f"ADX={result.adx_value:.1f}, +DI={result.plus_di:.1f}, -DI={result.minus_di:.1f}")
else:
    print(f"‚ùå –°–∏–≥–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: {result.reason}")
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ç–æ—Ä–≥–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

```python
# –í signal_generator.py
adx_result = self.adx_filter.check_trend_strength(
    symbol=symbol,
    side=side,
    candles=candles_15m  # –ò—Å–ø–æ–ª—å–∑—É–µ–º 15m —Ç–∞–π–º—Ñ—Ä–µ–π–º
)

if not adx_result.allowed:
    logger.info(f"üö´ ADX –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Å–∏–≥–Ω–∞–ª: {adx_result.reason}")
    return None  # –û—Ç–∫–ª–æ–Ω—è–µ–º —Å–∏–≥–Ω–∞–ª

# –õ–æ–≥–∏—Ä—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è ADX –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
logger.debug(
    f"üìä ADX –ø—Ä–æ–≤–µ—Ä–∫–∞: ADX={adx_result.adx_value:.1f}, "
    f"+DI={adx_result.plus_di:.1f}, -DI={adx_result.minus_di:.1f}"
)
```

---

## ‚öñÔ∏è –°–∏–ª—å–Ω—ã–µ –∏ –°–ª–∞–±—ã–µ –°—Ç–æ—Ä–æ–Ω—ã

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–û–±—ä–µ–∫—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞** - –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞** - +DI/-DI –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –±—ã—á–∏–π/–º–µ–¥–≤–µ–∂–∏–π –∏–º–ø—É–ª—å—Å
3. **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω** - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ç –î–∂. –£–∞–π–ª–¥–µ—Ä–∞
4. **–ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ (ARM)** - —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
5. **–ù–∞–¥–µ–∂–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** - fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ NaN handling

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–ó–∞–ø–∞–∑–¥—ã–≤–∞–µ—Ç –∑–∞ —Ä—ã–Ω–∫–æ–º** - Wilder's smoothing —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É ~14 —Å–≤–µ—á–µ–π
2. **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–æ–∫–æ–≤–∏–∫–µ** - ADX < 20 –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã –¥–∞–∂–µ –µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
3. **–ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –Ω–∞—á–∞–ª–æ —Ç—Ä–µ–Ω–¥–∞** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä–µ–º—è –¥–ª—è —Ä–æ—Å—Ç–∞ ADX > 25
4. **–ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–µ—Ä–∏–æ–¥–∞** - –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (14) –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ –Ω–∞ 1m
5. **–ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±—ä–µ–º** - —Ç–æ–ª—å–∫–æ —Ü–µ–Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (high/low/close)

---

## üîó –°–≤—è–∑–∏ —Å –î—Ä—É–≥–∏–º–∏ –ú–æ–¥—É–ª—è–º–∏

### 1. Adaptive Regime Manager (ARM)

```python
# ARM –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ADX –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–µ–∂–∏–º–∞
adx_config = ADXFilterConfig(
    adx_threshold=regime_params.modules.adx_threshold,
    di_difference=regime_params.modules.adx_di_difference
)
self.adx_filter.update_parameters(adx_config)
```

**–û—Ç–Ω–æ—à–µ–Ω–∏–µ:** ADX –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç ARM –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

### 2. Multi-Timeframe Filter

```python
# MTF –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–µ–Ω–¥ –Ω–∞ 5m, ADX –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–ª—É —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ 15m
mtf_result = await self.mtf_filter.check_confirmation(symbol, "LONG")
adx_result = self.adx_filter.check_trend_strength(symbol, OrderSide.BUY, candles_15m)

if mtf_result.confirmed and adx_result.allowed:
    score += mtf_result.bonus  # –î–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
```

**–û—Ç–Ω–æ—à–µ–Ω–∏–µ:** –î–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ - MTF –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, ADX –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–ª—É

### 3. Signal Generator

```python
# –í validate_signal()
if not adx_result.allowed:
    self.stats.blocked_by_adx += 1
    return None
```

**–û—Ç–Ω–æ—à–µ–Ω–∏–µ:** ADX - –æ–¥–∏–Ω –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ —Ü–µ–ø–æ—á–∫–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä–∏–æ–¥–∞ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞

```python
# –í–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö 14 —Å–≤–µ—á–µ–π, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
adx_period: int = 9  # –ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:** –ù–∞ 1m/5m —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö 14 —Å–≤–µ—á–µ–π = 14 –º–∏–Ω—É—Ç –∑–∞–¥–µ—Ä–∂–∫–∏, —á—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞

### 2. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ—Ä–æ–≥–∞

```python
# –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä—ã–Ω–∫–∞
if volatility_percent > 5.0:
    adx_threshold = 20.0  # –°–Ω–∏–∂–∞–µ–º –ø–æ—Ä–æ–≥ –≤ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
else:
    adx_threshold = 25.0  # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä–æ–≥ –≤ —Å–ø–æ–∫–æ–π–Ω–æ–º —Ä—ã–Ω–∫–µ
```

### 3. –£—á–µ—Ç –æ–±—ä–µ–º–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

```python
# –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å ADX —Å Volume Profile
if adx_result.allowed and volume_ratio > 1.5:
    score += 1  # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å –∑–∞ –≤—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º + —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥
```

### 4. Fail-Open —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

```python
# –í–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ–ø—É—Å–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ
if calculation_failed:
    if error_count < 3:
        return ADXResult(allowed=True, reason="Temporary error")
    else:
        raise RuntimeError("Persistent ADX calculation failure")
```

---

## üéì –ö–ª—é—á–µ–≤—ã–µ –í—ã–≤–æ–¥—ã

1. **ADX Filter - –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–ª–∞–±—ã—Ö —Ç—Ä–µ–Ω–¥–æ–≤**, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥ –≤–∞—à —Ç–∞–π–º—Ñ—Ä–µ–π–º

2. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –î–í–ï –≤–µ—â–∏:** —Å–∏–ª—É —Ç—Ä–µ–Ω–¥–∞ (ADX) **–ò** –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ (+DI/-DI)

3. **–ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä—ã–Ω–æ—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã —á–µ—Ä–µ–∑ ARM** - –≤ CHOPPY –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, –≤ TRENDING - –±–æ–ª–µ–µ –º—è–≥–∫–∏–µ

4. **Fail-Open —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö** - –ª—É—á—à–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä, —á–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω—ã–π —Å–∏–≥–Ω–∞–ª

5. **–õ—É—á—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏** (MTF, Volume Profile) –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

---

## üìä –°—Ç–∞—Ç—É—Å –º–æ–¥—É–ª—è

**‚úÖ Production-Ready** —Å –æ—Ç–ª–∏—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ ARM

---

**–ö–æ–Ω–µ—Ü –¥–æ–∫—É–º–µ–Ω—Ç–∞**

