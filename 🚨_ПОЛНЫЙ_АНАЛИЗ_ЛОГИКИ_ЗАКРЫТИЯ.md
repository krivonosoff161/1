# üö® –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–ò–ö–ò –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ô

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤!** –ë–æ—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ—á–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è.

**–°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å ExitAnalyzer, –Ω–æ –æ–Ω –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø!**

---

## üìä –¢–ï–ö–£–©–ê–Ø –†–ï–ê–õ–¨–ù–ê–Ø –õ–û–ì–ò–ö–ê –ó–ê–ö–†–´–¢–ò–Ø

### 1. TrailingStopLoss.should_close_position() (–æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞):

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π loss_cut (2x) - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
- ‚úÖ –û–±—ã—á–Ω—ã–π loss_cut - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ —É–±—ã—Ç–∫–µ
- ‚úÖ Timeout (—É–±—ã—Ç–æ—á–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è) - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ N –º–∏–Ω—É—Ç
- ‚úÖ Trailing stop (—Ü–µ–Ω–∞ –¥–æ—Å—Ç–∏–≥–ª–∞ —Å—Ç–æ–ø–∞) - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ
- ‚úÖ Min_holding - –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ N –º–∏–Ω—É—Ç
- ‚úÖ Min_profit_to_close - –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å –º–∞–ª–∞
- ‚ùå **–ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ TP** (Take Profit)
- ‚ùå **–ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ big_profit_exit**
- ‚ùå **–ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ partial_tp**

**–ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**
- `trailing_sl_coordinator.update_trailing_stop_loss()`
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏

---

### 2. trailing_sl_coordinator._check_position_holding_time() (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏):

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- ‚úÖ Max_holding_time (20 –º–∏–Ω—É—Ç –¥–ª—è ranging) - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (>= 0.5%)
- ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ExitAnalyzer** –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
- ‚ùå **–ü—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏**, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∞–Ω–∞–ª–∏–∑

**–ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**
- `trailing_sl_coordinator.update_trailing_stop_loss()`
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ TSL

---

### 3. position_manager._check_position_safety() (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ TP):

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –º–∞—Ä–∂–∏ (–ª–∏–∫–≤–∏–¥–∞—Ü–∏—è)
- ‚úÖ TP (Take Profit) - —Å—Ç—Ä–æ–∫–∏ 1327-1331:
  ```python
  tp_percent = self._get_adaptive_tp_percent(symbol, regime, current_price)
  if pnl_percent >= tp_percent:
      await self._close_position_by_reason(position, "tp")
  ```
- ‚ùå **–ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ big_profit_exit**
- ‚ùå **–ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ partial_tp**
- ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ExitAnalyzer** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø–æ–Ω—è—Ç–Ω–æ, –≥–¥–µ –∏ –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_check_position_safety()`

---

### 4. position_manager._check_profit_harvesting() (–ø—Ä–æ–≤–µ—Ä–∫–∞ PH):

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- ‚úÖ Profit Harvest (PH) - —Ñ–∏–∫—Å–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

**–ì–¥–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:**
- `trailing_sl_coordinator.update_trailing_stop_loss()` (—Å—Ç—Ä–æ–∫–∏ 894-903)
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏

---

### 5. ExitAnalyzer.analyze_position() (–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø):

**–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –¥–µ–ª–∞—Ç—å:**
- ‚úÖ –ê–Ω–∞–ª–∏–∑ PnL, —Ç—Ä–µ–Ω–¥–∞, —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ TP
- ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏
- ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∏–±—ã–ª–∏ (trailing stop)

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚ùå –í—Å–µ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `None` (TODO - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- ‚ùå –ù–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ orchestrator
- ‚ùå –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è

---

## üîç –ß–¢–û –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢–°–Ø

### 1. Take Profit (TP):
- ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ TP –µ—Å—Ç—å –≤ `position_manager._check_position_safety()`
- ‚ùì –ù–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –≥–¥–µ –∏ –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ TrailingStopLoss.should_close_position()**
- ‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ trailing_sl_coordinator._check_position_holding_time()**

### 2. Big Profit Exit:
- ‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∏–≥–¥–µ**
- ‚ùå **–ö–æ–Ω—Ñ–∏–≥ –µ—Å—Ç—å, –Ω–æ –ª–æ–≥–∏–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**

### 3. Partial TP:
- ‚ùå **–ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∏–≥–¥–µ**
- ‚ùå **–ö–æ–Ω—Ñ–∏–≥ –µ—Å—Ç—å, –Ω–æ –ª–æ–≥–∏–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞**

### 4. ExitAnalyzer:
- ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏–≥–¥–µ**
- ‚ùå **–í—Å–µ –º–µ—Ç–æ–¥—ã - TODO**

---

## üìã –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–û –†–ï–ñ–ò–ú–ê–ú

### –†–µ–∂–∏–º `trending`:

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚úÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ADX –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Order Flow –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚ùå **ExitAnalyzer._generate_exit_for_trending()** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
- ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ADX** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚ùå **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Order Flow** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ —Ç–æ–ª—å–∫–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (30 –º–∏–Ω—É—Ç) –∏–ª–∏ trailing stop

---

### –†–µ–∂–∏–º `ranging`:

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚úÖ –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP
- ‚úÖ –ú–µ–Ω—å—à–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–π

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚ùå **ExitAnalyzer._generate_exit_for_ranging()** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (20 –º–∏–Ω—É—Ç) –∏–ª–∏ trailing stop
- ‚ùì –ü—Ä–æ–≤–µ—Ä–∫–∞ TP –µ—Å—Ç—å, –Ω–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

---

### –†–µ–∂–∏–º `choppy`:

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –ú–µ–Ω—å—à–∏–µ TP
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—ç—Ç–æ–≤

**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚ùå **ExitAnalyzer._generate_exit_for_choppy()** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (10 –º–∏–Ω—É—Ç) –∏–ª–∏ trailing stop
- ‚ùå **–ù–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ä–µ–∂–∏–º** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â—É—é –ª–æ–≥–∏–∫—É)

---

## üîç –î–ï–¢–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ü–û –ü–ê–†–ê–ú

### –í—Å–µ –ø–∞—Ä—ã (BTC, ETH, SOL, DOGE, XRP):

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
- ‚úÖ Trailing Stop Loss —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ loss_cut —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä
- ‚ùå **TP –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è** –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚ùå **Big profit exit –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è**
- ‚ùå **Partial TP –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –ø–∞—Ä—ã –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ, –Ω–µ —É—á–∏—Ç—ã–≤–∞—è:
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä—ã
- –¢–µ–∫—É—â–∏–π —Ç—Ä–µ–Ω–¥
- –†–∞–∑–≤–æ—Ä–æ—Ç —Ç—Ä–µ–Ω–¥–∞
- –ü—Ä–∏–∑–Ω–∞–∫–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ (Order Flow, MTF)

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### –ü—Ä–æ–±–ª–µ–º–∞ #1: ExitAnalyzer –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–í `exit_analyzer.py`:**
- –í—Å–µ –º–µ—Ç–æ–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `None` (TODO)
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ orchestrator
- –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

### –ü—Ä–æ–±–ª–µ–º–∞ #2: –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–†–µ–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ trailing stop ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ç–æ–ø–∞
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç (–¥–ª—è ranging)
3. –ü—Ä–æ–≤–µ—Ä–∫–∞ loss_cut ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —É–±—ã—Ç–∫–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- ‚ùå ADX –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–∞
- ‚ùå Order Flow –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- ‚ùå MTF –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
- ‚ùå –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–ª—ã –¥–≤–∏–∂–µ–Ω–∏—è
- ‚ùå –†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏

---

### –ü—Ä–æ–±–ª–µ–º–∞ #3: TP, big_profit_exit, partial_tp –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è

**–í –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å:**
- `tp_percent: 2.4`
- `big_profit_exit_percent_majors: 1.5`
- `big_profit_exit_percent_alts: 2.0`
- `partial_tp.enabled: true`

**–ù–æ –≤ –∫–æ–¥–µ:**
- ‚ùå TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ `position_manager._check_position_safety()`, –Ω–æ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ —á–∞—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
- ‚ùå Big profit exit **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∏–≥–¥–µ**
- ‚ùå Partial TP **–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∏–≥–¥–µ**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –∏–≥–Ω–æ—Ä–∏—Ä—É—è TP!

---

## ‚úÖ –ß–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨

### –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–æ–ª–∂–Ω–∞:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ExitAnalyzer –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
   - –ê–Ω–∞–ª–∏–∑ PnL, —Ç—Ä–µ–Ω–¥–∞, —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
   - –†–µ—à–µ–Ω–∏–µ –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ TP
   - –†–µ—à–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏
   - –†–µ—à–µ–Ω–∏–µ –æ –∑–∞—â–∏—Ç–µ –ø—Ä–∏–±—ã–ª–∏ (trailing stop)

2. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å TP, big_profit_exit, partial_tp:**
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP (2.4%) ‚Üí –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∏–ª–∏ –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ big_profit_exit (1.5%/2.0%) ‚Üí –∑–∞–∫—Ä—ã–≤–∞—Ç—å
   - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ partial_tp (0.4%) ‚Üí –∑–∞–∫—Ä—ã–≤–∞—Ç—å 60% –ø–æ–∑–∏—Ü–∏–∏

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –±–æ—Ç–∞:**
   - ADX –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–∞
   - Order Flow –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
   - MTF –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–ª—ã –¥–≤–∏–∂–µ–Ω–∏—è
   - –†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏

4. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ–¥ —Ä–µ–∂–∏–º –∏ –ø–∞—Ä—É:**
   - –†–∞–∑–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è trending/ranging/choppy
   - –†–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è BTC/ETH/SOL/DOGE/XRP
   - –£—á–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏

---

## üìã –í–´–í–û–î–´

1. ‚ùå **ExitAnalyzer —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**
2. ‚ùå **–ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ trailing stop**
3. ‚ùå **TP, big_profit_exit, partial_tp –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ**
4. ‚ùå **–í—Å–µ —Ä–µ—Å—É—Ä—Å—ã –±–æ—Ç–∞ (ADX, Order Flow, MTF) –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è**

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∞–≤:** –î–ª—è —Ç–∞–∫–æ–π –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–∫–∏ (–∑–∞–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ 20 –º–∏–Ω—É—Ç) –Ω–µ –Ω—É–∂–µ–Ω —Å–ª–æ–∂–Ω—ã–π –±–æ—Ç —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –º–æ–¥—É–ª—è–º–∏.

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å ExitAnalyzer
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å ExitAnalyzer –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TP, big_profit_exit, partial_tp
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ —Ä–µ—Å—É—Ä—Å—ã –±–æ—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

---

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞:** ‚úÖ
**ExitAnalyzer –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** ‚úÖ
**TP –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–µ:** ‚úÖ
**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:** ‚ö†Ô∏è








