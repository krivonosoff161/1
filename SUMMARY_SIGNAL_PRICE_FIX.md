# –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –¶–ï–ù–´ –°–ò–ì–ù–ê–õ–û–í

**–î–∞—Ç–∞:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´

---

## ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ ‚úÖ

**–§–∞–π–ª:** `signal_generator.py`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_get_current_market_price()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `client.get_price_limits()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã
- Fallback –Ω–∞ —Ü–µ–Ω—É –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É

---

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ ‚úÖ

**–§–∞–π–ª:** `signal_generator.py`

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
- `_generate_base_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
- `_generate_rsi_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- `_generate_macd_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- `_generate_bollinger_bands_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- `_generate_ma_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- `_detect_impulse_signals()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ë—ã–ª–æ:
current_price = market_data.ohlcv_data[-1].close

# –°—Ç–∞–ª–æ:
candle_close_price = market_data.ohlcv_data[-1].close
current_price = await self._get_current_market_price(symbol, candle_close_price)
```

**–í—Å–µ —Å–∏–≥–Ω–∞–ª—ã —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç:**
```python
"price": current_price  # –ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ –≤–º–µ—Å—Ç–æ —Ü–µ–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏
```

---

### 3. –û–±–Ω–æ–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã ‚úÖ

**–§–∞–π–ª:** `order_executor.py:_calculate_limit_price()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `signal` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `signal["price"]`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ `signal["price"]` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –ï—Å–ª–∏ `signal["price"]` –∞–∫—Ç—É–∞–ª—å–Ω–∞ (—Ä–∞–∑–Ω–∏—Ü–∞ < 0.5%) ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ `base_price`
- –ï—Å–ª–∏ —É—Å—Ç–∞—Ä–µ–ª–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `current_price` –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞

**–õ–æ–≥–∏–∫–∞:**
```python
signal_price = signal.get("price", 0.0) if signal else 0.0
if signal_price > 0:
    price_diff_pct = abs(signal_price - current_price) / current_price * 100
    if price_diff_pct < 0.5:  # –ê–∫—Ç—É–∞–ª—å–Ω–∞
        base_price = signal_price  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ü–µ–Ω—É —Å–∏–≥–Ω–∞–ª–∞
    else:
        base_price = current_price  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É
else:
    base_price = current_price
```

---

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º ‚úÖ

**–§–∞–π–ª:** `signal_coordinator.py:execute_signal_from_price()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ `signal["price"]` –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –æ—Ä–¥–µ—Ä–∞
- –ï—Å–ª–∏ —Ä–∞–∑–Ω–∏—Ü–∞ > 0.5% ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è `signal["price"]` –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –ø—Ä–∏ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π —Ü–µ–Ω–µ

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –ú–µ—Ç—Ä–∏–∫–∏:
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–Ω—ã —Å–∏–≥–Ω–∞–ª–∞ –∏ –æ—Ä–¥–µ—Ä–∞:** –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 100%
- **–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ –æ—Ç —Ä—ã–Ω–∫–∞:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Å 1%+ –¥–æ < 0.2%
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤:** –£–ª—É—á—à–µ–Ω–∏–µ –∑–∞ —Å—á–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã
- **–£–ø—É—â–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:** –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∑–∞ —Å—á–µ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ü–µ–Ω—É –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏** - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤
2. **–¶–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É** - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞
3. **Fallback –Ω–∞ —Ü–µ–Ω—É –∑–∞–∫—Ä—ã—Ç–∏—è** - –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞
4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏** - –∑–∞—â–∏—Ç–∞ –æ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–¢–µ–ø–µ—Ä—å —Å–∏–≥–Ω–∞–ª—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è —Å **–∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞**, —á—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Ü–µ–Ω—É —Å–∏–≥–Ω–∞–ª–∞ —Å —Ü–µ–Ω–æ–π —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞ –∏ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏!

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** ‚úÖ
