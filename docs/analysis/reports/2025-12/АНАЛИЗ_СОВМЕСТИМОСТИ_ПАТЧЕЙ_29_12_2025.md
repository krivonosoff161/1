# –ê–ù–ê–õ–ò–ó –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò –ü–ê–¢–ß–ï–ô –° –¢–ï–ö–£–©–ò–ú –ö–û–î–û–ú (29.12.2025)

**–î–∞—Ç–∞:** 29.12.2025  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø–æ–¥—Ö–æ–¥—è—Ç –ª–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—á–∏ –∫ —Ç–µ–∫—É—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∫–æ–¥–∞

---

## üìã –û–ë–©–ò–ô –í–ï–†–î–ò–ö–¢

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ü–∞—Ç—á–∏ –ü–û–î–•–û–î–Ø–¢, –Ω–æ —Ç—Ä–µ–±—É—é—Ç –ê–î–ê–ü–¢–ê–¶–ò–ò –ø–æ–¥ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ç–æ–¥—ã/–∞—Ç—Ä–∏–±—É—Ç—ã, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ —Ç–µ–∫—É—â–µ–º –∫–æ–¥–µ
2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥–∞ —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –Ω–æ –∫–æ–¥ –∏—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
3. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞—Ç—á–∏ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (—Ñ–∏–ª—å—Ç—Ä—ã —É–∂–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —á–µ—Ä–µ–∑ `overrides`)

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–ê–ñ–î–û–ì–û –ü–ê–¢–ß–ê

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1: SL/TP/Max_Holding per-symbol

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–î–•–û–î–ò–¢, –Ω–æ –Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è**

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `get_exit_params(symbol, regime)` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `symbol` ‚úÖ
- –ö–æ–Ω—Ñ–∏–≥ —É–∂–µ –∏–º–µ–µ—Ç `by_symbol.ETH-USDT.sl_atr_multiplier: 3.0` ‚úÖ
- –ù–æ –∫–æ–¥ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `by_symbol` –¥–ª—è —ç—Ç–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚ùå

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—á:**
```python
# ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ - —Ç–∞–∫–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞ –Ω–µ—Ç
symbol_params = self.config_manager.by_symbol.get(symbol, {})
```

**–ê–î–ê–ü–¢–ò–†–û–í–ê–ù–ù–´–ô –ü–ê–¢–ß (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):**
```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 199, –ø–µ—Ä–µ–¥ return exit_params or {}
# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É by_symbol
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ)
        if "sl_atr_multiplier" in symbol_config:
            exit_params["sl_atr_multiplier"] = _to_float(
                symbol_config["sl_atr_multiplier"], "sl_atr_multiplier",
                exit_params.get("sl_atr_multiplier", 2.0)
            )
        if "tp_atr_multiplier" in symbol_config:
            exit_params["tp_atr_multiplier"] = _to_float(
                symbol_config["tp_atr_multiplier"], "tp_atr_multiplier",
                exit_params.get("tp_atr_multiplier", 1.0)
            )
        if "max_holding_minutes" in symbol_config:
            exit_params["max_holding_minutes"] = _to_float(
                symbol_config["max_holding_minutes"], "max_holding_minutes",
                exit_params.get("max_holding_minutes", 25.0)
            )
        logger.debug(
            f"‚úÖ ParameterProvider: Exit –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol: "
            f"sl_atr={exit_params.get('sl_atr_multiplier')}, "
            f"tp_atr={exit_params.get('tp_atr_multiplier')}, "
            f"max_holding={exit_params.get('max_holding_minutes')}"
        )
```

**–ö–æ–Ω—Ñ–∏–≥ (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):**
```yaml
by_symbol:
  ETH-USDT:
    sl_atr_multiplier: 3.0  # ‚úÖ –£–∂–µ –µ—Å—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ!
    tp_atr_multiplier: 4.0  # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
    max_holding_minutes: 30.0  # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å
```

**–í—ã–≤–æ–¥:** ‚úÖ –ü–∞—Ç—á –Ω—É–∂–µ–Ω –∏ –ª–µ–≥–∫–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è

---

### ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ü–û–î–•–û–î–ò–¢, –Ω–æ –Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è**

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `TALibRSI.__init__()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `overbought` –∏ `oversold` ‚úÖ
- `get_indicator_params(symbol, regime)` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚úÖ
- –ù–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ ‚ùå

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—á:**
```python
# ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ - –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç (symbol, regime), –∞ –Ω–µ (indicator_name, regime, symbol)
params = self.parameter_provider.get_indicator_params('rsi', regime, symbol)
```

**–ê–î–ê–ü–¢–ò–†–û–í–ê–ù–ù–´–ô –ü–ê–¢–ß (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π):**

**–®–∞–≥ 1: –í `signal_generator.py` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:**
```python
# –í–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏ 92-103)
# –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ä–µ–∂–∏–º–∞
regime = self._get_current_regime(symbol)  # –∏–ª–∏ –∏–∑ market_data
indicator_params = self.parameter_provider.get_indicator_params(symbol, regime)

# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
rsi_period = indicator_params.get("rsi_period", 14)
rsi_overbought = indicator_params.get("rsi_overbought", 70)
rsi_oversold = indicator_params.get("rsi_oversold", 30)

macd_fast = indicator_params.get("macd_fast", 12)
macd_slow = indicator_params.get("macd_slow", 26)
macd_signal = indicator_params.get("macd_signal", 9)

# –°–æ–∑–¥–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
rsi_indicator = TALibRSI(period=rsi_period, overbought=rsi_overbought, oversold=rsi_oversold)
```

**–®–∞–≥ 2: –î–æ–±–∞–≤–∏—Ç—å per-symbol –≤ `get_indicator_params()`:**
```python
# parameter_provider.py:get_indicator_params() - –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 368
# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É by_symbol.{symbol}.indicators
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        symbol_indicators = symbol_config.get("indicators", {})
        if isinstance(symbol_indicators, dict):
            # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ)
            indicators.update(symbol_indicators)
            logger.debug(
                f"‚úÖ ParameterProvider: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol"
            )
```

**–ö–æ–Ω—Ñ–∏–≥ (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å):**
```yaml
by_symbol:
  ETH-USDT:
    indicators:
      rsi_overbought: 80  # –î–ª—è ETH –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥
      rsi_oversold: 20
      macd_fast: 10  # –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π MACD –¥–ª—è ETH
      macd_slow: 22
```

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è –ü–∞—Ç—á –Ω—É–∂–µ–Ω, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö

---

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 3: –§–∏–ª—å—Ç—Ä—ã –ü–æ—Ä–æ–≥–∏ Adaptive

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–ñ–ï –ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `FundingRateFilter.is_signal_valid()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `overrides` ‚úÖ
- `LiquidityFilter.evaluate()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `thresholds_override` ‚úÖ
- –ü–æ—Ä–æ–≥–∏ —É–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ `signal_generator.py` —á–µ—Ä–µ–∑ `overrides` ‚úÖ

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—á:**
```python
# ‚ùå –ù–ï –ù–£–ñ–ï–ù - —Ç–∞–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–µ—Ç –∏ –Ω–µ –Ω—É–∂–µ–Ω
params = self.parameter_provider.get_filter_params('funding_rate', regime, symbol)
```

**–¢–ï–ö–£–©–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):**
```python
# signal_generator.py –ø–µ—Ä–µ–¥–∞–µ—Ç overrides –≤ —Ñ–∏–ª—å—Ç—Ä—ã
funding_overrides = self._get_funding_overrides(symbol, regime)
is_valid = await self.funding_rate_filter.is_signal_valid(
    symbol, side, overrides=funding_overrides
)
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `_get_funding_overrides()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `by_symbol`
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è per-symbol –ø–æ—Ä–æ–≥

**–í—ã–≤–æ–¥:** ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### ‚ùå –ü–†–ò–û–†–ò–¢–ï–¢ 4: –†–µ–∂–∏–º—ã –ü–æ –ë–∞–ª–∞–Ω—Å—É

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –ü–û–î–•–û–î–ò–¢ - –∏–∑–±—ã—Ç–æ—á–Ω–æ**

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `detect_regime()` –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `balance` ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º, –∞ –Ω–µ –ø–æ –±–∞–ª–∞–Ω—Å—É ‚úÖ

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—á:**
```python
# ‚ùå –ù–ï –ü–û–î–•–û–î–ò–¢ - —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –±–∞–ª–∞–Ω—Å–∞
if balance is not None and balance < 100:
    self.adx_threshold_ranging = 20.0  # –ë—ã–ª–æ 18
```

**–ü–æ—á–µ–º—É –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç:**
- –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (TRENDING/RANGING/CHOPPY) - —ç—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞, –∞ –Ω–µ –±–∞–ª–∞–Ω—Å–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–æ–≤ —Ä–µ–∂–∏–º–∞ –ø–æ –±–∞–ª–∞–Ω—Å—É –∏—Å–∫–∞–∑–∏—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
- –õ—É—á—à–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ –±–∞–ª–∞–Ω—Å—É, –∞ –Ω–µ —Ä–µ–∂–∏–º

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è):**
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø–æ –±–∞–ª–∞–Ω—Å—É (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ `balance_profiles`)
- –ù–µ –º–µ–Ω—è—Ç—å –ø–æ—Ä–æ–≥–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞

**–í—ã–≤–æ–¥:** ‚ùå –ü–∞—Ç—á –Ω–µ –Ω—É–∂–µ–Ω - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

---

### ‚ö†Ô∏è –ü–†–ò–û–†–ò–¢–ï–¢ 5: PnL Adaptive –ü–æ Leverage

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨**

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- –§–∞–π–ª `trailing_stop_loss.py` –Ω–µ –Ω–∞–π–¥–µ–Ω (–≤–æ–∑–º–æ–∂–Ω–æ –¥—Ä—É–≥–æ–π –ø—É—Ç—å)
- PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏ (—É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ) ‚úÖ
- –ö–æ–º–∏—Å—Å–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —É—á–µ—Ç leverage

**–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã–π –ø–∞—Ç—á:**
```python
# ‚ö†Ô∏è –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨ - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
net_pnl_pct = gross_pnl_pct - (fee_pct * leverage)
```

**–ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ì–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è PnL –∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ª–∏ –∫–æ–º–∏—Å—Å–∏–∏
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ leverage –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –∫–æ–º–∏—Å—Å–∏–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è net PnL

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–ò

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ü–∞—Ç—á | –°—Ç–∞—Ç—É—Å | –ù—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è? | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|------|--------|-------------------|-------------|
| #1 | SL/TP/Max_Holding per-symbol | ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç | ‚úÖ –î–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `_raw_config_dict` –≤–º–µ—Å—Ç–æ `by_symbol` |
| #2 | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive | ‚ö†Ô∏è –ü–æ–¥—Ö–æ–¥–∏—Ç | ‚úÖ –î–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `get_indicator_params()` |
| #3 | –§–∏–ª—å—Ç—Ä—ã –ü–æ—Ä–æ–≥–∏ Adaptive | ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚ùå –ù–µ—Ç | –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| #4 | –†–µ–∂–∏–º—ã –ü–æ –ë–∞–ª–∞–Ω—Å—É | ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç | ‚ùå –ù–µ—Ç | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ |
| #5 | PnL Adaptive –ü–æ Leverage | ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å | ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ | –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –°—Ä–æ—á–Ω–æ (–∫—Ä–∏—Ç–∏—á–Ω–æ):
1. ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `by_symbol` –≤ `get_exit_params()` (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ç—á)
2. ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ç—á)

### –í–∞–∂–Ω–æ (—É–ª—É—á—à–∏—Ç —Ç–æ—á–Ω–æ—Å—Ç—å):
3. ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:** –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ —Ñ–∏–ª—å—Ç—Ä–æ–≤
4. ‚ö†Ô∏è **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—á–µ—Ç leverage –≤ –∫–æ–º–∏—Å—Å–∏—è—Ö PnL

### –ù–µ –Ω—É–∂–Ω–æ:
5. ‚ùå **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4:** –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

---

## üìù –ê–î–ê–ü–¢–ò–†–û–í–ê–ù–ù–´–ï –ü–ê–¢–ß–ò (–ì–û–¢–û–í–´–ï –ö –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ)

### –ü–∞—Ç—á #1: SL/TP/Max_Holding per-symbol

**–§–∞–π–ª:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ú–µ—Ç–æ–¥:** `get_exit_params()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 199)

```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 199, –ø–µ—Ä–µ–¥ return exit_params or {}
# ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ by_symbol –¥–ª—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ exit_params.{regime})
        if "sl_atr_multiplier" in symbol_config:
            exit_params["sl_atr_multiplier"] = _to_float(
                symbol_config["sl_atr_multiplier"], "sl_atr_multiplier",
                exit_params.get("sl_atr_multiplier", 2.0)
            )
        if "tp_atr_multiplier" in symbol_config:
            exit_params["tp_atr_multiplier"] = _to_float(
                symbol_config["tp_atr_multiplier"], "tp_atr_multiplier",
                exit_params.get("tp_atr_multiplier", 1.0)
            )
        if "max_holding_minutes" in symbol_config:
            exit_params["max_holding_minutes"] = _to_float(
                symbol_config["max_holding_minutes"], "max_holding_minutes",
                exit_params.get("max_holding_minutes", 25.0)
            )
        logger.debug(
            f"‚úÖ ParameterProvider: Exit –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol: "
            f"sl_atr={exit_params.get('sl_atr_multiplier')}, "
            f"tp_atr={exit_params.get('tp_atr_multiplier')}, "
            f"max_holding={exit_params.get('max_holding_minutes')}"
        )
```

---

### –ü–∞—Ç—á #2: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive

**–§–∞–π–ª 1:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ú–µ—Ç–æ–¥:** `get_indicator_params()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 368)

```python
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 368, –ø–µ—Ä–µ–¥ return indicators
# ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ by_symbol.{symbol}.indicators –¥–ª—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        symbol_indicators = symbol_config.get("indicators", {})
        if isinstance(symbol_indicators, dict):
            # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ regime)
            indicators.update(symbol_indicators)
            logger.debug(
                f"‚úÖ ParameterProvider: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol: "
                f"{list(symbol_indicators.keys())}"
            )
```

**–§–∞–π–ª 2:** `src/strategies/scalping/futures/signal_generator.py`  
**–ú–µ—Ç–æ–¥:** `_generate_base_signals()` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π

```python
# –í–º–µ—Å—Ç–æ —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 92-103)
# –ü–æ–ª—É—á–∞–µ–º —Ä–µ–∂–∏–º
regime = self._get_current_regime(symbol)  # –∏–ª–∏ –∏–∑ market_data

# –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è —Ä–µ–∂–∏–º–∞ –∏ —Å–∏–º–≤–æ–ª–∞
if self.parameter_provider:
    indicator_params = self.parameter_provider.get_indicator_params(symbol, regime)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
    rsi_period = indicator_params.get("rsi_period", 14)
    rsi_overbought = indicator_params.get("rsi_overbought", 70)
    rsi_oversold = indicator_params.get("rsi_oversold", 30)
    
    macd_fast = indicator_params.get("macd_fast", 12)
    macd_slow = indicator_params.get("macd_slow", 26)
    macd_signal = indicator_params.get("macd_signal", 9)
    
    bb_period = indicator_params.get("bb_period", 20)
    bb_std_multiplier = indicator_params.get("bb_std_multiplier", 2.0)
    
    ema_fast = indicator_params.get("ema_fast", 12)
    ema_slow = indicator_params.get("ema_slow", 26)
else:
    # Fallback –Ω–∞ –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    rsi_period = 14
    rsi_overbought = 70
    rsi_oversold = 30
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
```

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

**–ß—Ç–æ –ü–û–î–•–û–î–ò–¢:**
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: SL/TP/Max_Holding per-symbol (–Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive (–Ω—É–∂–Ω–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –§–∏–ª—å—Ç—Ä—ã –ü–æ—Ä–æ–≥–∏ Adaptive (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–ß—Ç–æ –ù–ï –ü–û–î–•–û–î–ò–¢:**
- ‚ùå –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –†–µ–∂–∏–º—ã –ü–æ –ë–∞–ª–∞–Ω—Å—É (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

**–ß—Ç–æ –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨:**
- ‚ö†Ô∏è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: PnL Adaptive –ü–æ Leverage (—Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ç—á–∏ –¥–ª—è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ 1 –∏ 2. –≠—Ç–æ –¥–∞—Å—Ç –ø–æ–ª–Ω—É—é –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å per-symbol –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–∞—Ç—á–∏ –ø–æ–¥—Ö–æ–¥—è—Ç —Å –∞–¥–∞–ø—Ç–∞—Ü–∏–µ–π –ø–æ–¥ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥–∞


