# üìä –û–¢–ß–ï–¢ –û –ü–†–û–í–ï–†–ö–ï –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê TRADINGCONTROLCENTER

**–î–∞—Ç–∞:** 2025-11-30  
**–í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:** 1 —á–∞—Å (09:36 - 10:36)  
**–†–µ–∂–∏–º:** Paper-trading (sandbox)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û**

---

## üéØ –¶–ï–õ–¨ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

–í—ã–¥–µ–ª–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é –ª–æ–≥–∏–∫—É –∏–∑ `FuturesScalpingOrchestrator` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å `TradingControlCenter` –¥–ª—è:
- –£–ª—É—á—à–µ–Ω–∏—è –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
- –°–æ–±–ª—é–¥–µ–Ω–∏—è –ø—Ä–∏–Ω—Ü–∏–ø–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
- –£–ø—Ä–æ—â–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

---

## üìã –ú–ï–¢–û–î–û–õ–û–ì–ò–Ø –ü–†–û–í–ï–†–ö–ò

### –ß—Ç–æ –±—ã–ª–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã TCC** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** - –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ERROR/CRITICAL/Exception –≤ –ª–æ–≥–∞—Ö
3. **PositionRegistry** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π
4. **ExitAnalyzer** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–±–æ—Ç–∞
5. **PositionMonitor** - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π
6. **Memory leaks** - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
7. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ

### –í—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–ó–∞–ø—É—Å–∫:** 2025-11-30 09:36:53
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** 2025-11-30 10:04:12
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~27 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø–æ–ª–Ω—ã–π —á–∞—Å –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç, –Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ü–µ–Ω–∫–∏)

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
grep -i "ERROR|CRITICAL|Exception|Traceback" logs/futures/futures_main_2025-11-30.log
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ **–ù–ï–¢ –û–®–ò–ë–û–ö**
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π —É—Ä–æ–≤–Ω—è ERROR
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π —É—Ä–æ–≤–Ω—è CRITICAL
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (Exception)
- –ù–µ –Ω–∞–π–¥–µ–Ω–æ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–æ–∫ (Traceback)

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –±–µ–∑ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤.

---

### 2. TradingControlCenter (TCC)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
grep -i "TCC" logs/futures/futures_main_2025-11-30.log | tail -10
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### 2.1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```
2025-11-30 09:36:37.366 | INFO | ‚úÖ TradingControlCenter –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2025-11-30 09:36:37.366 | INFO | ‚úÖ TradingControlCenter –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ orchestrator
```

#### 2.2 –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
```
2025-11-30 09:36:53.669 | INFO | üîÑ TCC: –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
2025-11-30 10:04:13.818 | INFO | üìä TCC: –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ 3 —Å–∏–≥–Ω–∞–ª–æ–≤
2025-11-30 10:04:15.648 | DEBUG | üìà TCC: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
```

#### 2.3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
```
2025-11-30 10:03:37.159 | INFO | üìä TCC: –†–∞–∑–≤–æ—Ä–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ ranging: 463 —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤ (‚Üì254, ‚Üë209)
```

**–í—ã–≤–æ–¥:** ‚úÖ **TCC –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã —Ä–µ–≥—É–ª—è—Ä–Ω–æ
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç—ã —Ä—ã–Ω–∫–∞

---

### 3. PositionRegistry

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
grep -i "PositionRegistry" logs/futures/futures_main_2025-11-30.log | tail -10
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### 3.1 –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π
```
2025-11-30 09:37:08.433 | DEBUG | ‚úÖ PositionRegistry: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–∑–∏—Ü–∏—è DOGE-USDT
```

#### 3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π (—Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ)
```
2025-11-30 10:04:03.911 | DEBUG | ‚úÖ PositionRegistry: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è XRP-USDT
2025-11-30 10:04:03.911 | DEBUG | ‚úÖ PositionRegistry: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è BTC-USDT
2025-11-30 10:04:03.911 | DEBUG | ‚úÖ PositionRegistry: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è SOL-USDT
2025-11-30 10:04:03.911 | DEBUG | ‚úÖ PositionRegistry: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è DOGE-USDT
2025-11-30 10:04:03.911 | DEBUG | ‚úÖ PositionRegistry: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è ETH-USDT
```

**–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:** 5 –ø–æ–∑–∏—Ü–∏–π
- XRP-USDT
- BTC-USDT
- SOL-USDT
- DOGE-USDT
- ETH-USDT

**–í—ã–≤–æ–¥:** ‚úÖ **POSITIONREGISTRY –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**
- –ü–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- –ü–æ–∑–∏—Ü–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ (–∫–∞–∂–¥—ã–µ ~8-10 —Å–µ–∫—É–Ω–¥)
- –í—Å–µ 5 –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

---

### 4. PositionMonitor

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
grep -i "PositionMonitor" logs/futures/futures_main_2025-11-30.log | tail -10
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### 4.1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```
2025-11-30 09:36:37.359 | INFO | ‚úÖ PositionMonitor –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω (check_interval=5.0 —Å–µ–∫)
2025-11-30 09:36:37.360 | INFO | ‚úÖ PositionMonitor –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ orchestrator
```

#### 4.2 –ó–∞–ø—É—Å–∫
```
2025-11-30 09:36:53.668 | INFO | üöÄ PositionMonitor: –ó–∞–ø—É—â–µ–Ω
2025-11-30 09:36:53.668 | INFO | ‚úÖ PositionMonitor –∑–∞–ø—É—â–µ–Ω (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞)
```

#### 4.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π
```
2025-11-30 10:04:10.924 | DEBUG | üîç PositionMonitor: –ü—Ä–æ–≤–µ—Ä–∫–∞ 5 –ø–æ–∑–∏—Ü–∏–π
```

**–í—ã–≤–æ–¥:** ‚úÖ **POSITIONMONITOR –†–ê–ë–û–¢–ê–ï–¢ –ö–û–†–†–ï–ö–¢–ù–û**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 —Å–µ–∫—É–Ω–¥
- –ó–∞–ø—É—â–µ–Ω –∫–∞–∫ —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (5 –ø–æ–∑–∏—Ü–∏–π)
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –±–µ–∑ –æ—à–∏–±–æ–∫

---

### 5. ExitAnalyzer

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
grep -i "ExitAnalyzer" logs/futures/futures_main_2025-11-30.log | tail -10
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### 5.1 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```
2025-11-30 09:36:37.358 | INFO | ‚úÖ ExitAnalyzer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
2025-11-30 09:36:37.358 | INFO | ‚úÖ ExitAnalyzer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ orchestrator
```

#### 5.2 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ PositionMonitor
```
2025-11-30 09:36:37.360 | DEBUG | ‚úÖ PositionMonitor: ExitAnalyzer —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

**–í—ã–≤–æ–¥:** ‚ö†Ô∏è **EXITANALYZER –ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù, –ù–û –õ–û–ì–û–í –†–ï–®–ï–ù–ò–ô –ù–ï–¢**
- ExitAnalyzer –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ PositionMonitor
- –õ–æ–≥–∏ —Ä–µ—à–µ–Ω–∏–π (close/hold/extend_tp) –Ω–µ –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
  - –õ–æ–≥–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG (–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ INFO)
  - –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ —É—Å–ª–æ–≤–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
  - ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ExitAnalyzer –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å INFO-–ª–æ–≥–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏–π.

---

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### 6.1 WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
2025-11-30 10:04:12.063 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è XRP-USDT (size=0.73)
2025-11-30 10:04:12.064 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è BTC-USDT (size=0.24)
2025-11-30 10:04:12.065 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è SOL-USDT (size=1.51)
2025-11-30 10:04:12.067 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è DOGE-USDT (size=1.26)
2025-11-30 10:04:12.068 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è ETH-USDT (size=0.76)
```

#### 6.2 DataRegistry –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```
2025-11-30 10:04:10.702 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã market data –¥–ª—è BTC-USDT
2025-11-30 10:04:10.702 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è BTC-USDT
2025-11-30 10:04:10.702 | DEBUG | ‚úÖ DataRegistry: –°–æ—Ö—Ä–∞–Ω–µ–Ω ADX –¥–ª—è BTC-USDT: ADX=11.05
```

#### 6.3 LiquidationGuard
```
2025-11-30 10:04:10.380 | INFO | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.50
2025-11-30 10:04:10.384 | DEBUG | ‚ö†Ô∏è –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–û–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è SOL-USDT long
```

**–í—ã–≤–æ–¥:** ‚úÖ **–í–°–ï –ú–û–î–£–õ–ò –†–ê–ë–û–¢–ê–Æ–¢ –í–ú–ï–°–¢–ï**
- WebSocket –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- DataRegistry –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- LiquidationGuard –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–π
- –í—Å–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### 7. Memory Leak

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
tasklist /FI "IMAGENAME eq python.exe"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è **–ù–ï –£–î–ê–õ–û–°–¨ –ü–†–û–í–ï–†–ò–¢–¨**
- –ö–æ–º–∞–Ω–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∞—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ PowerShell
- Python –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ tasklist (–≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–ø—É—â–µ–Ω –≤ –¥—Ä—É–≥–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–º—è—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ç–æ–¥ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –†–ê–ë–û–¢–´

### –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
- **–ó–∞–ø—É—Å–∫:** 09:36:53
- **–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** 10:04:12
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:** ~27 –º–∏–Ω—É—Ç

### –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:
- **–í—Å–µ–≥–æ:** 5 –ø–æ–∑–∏—Ü–∏–π
- **–°–∏–º–≤–æ–ª—ã:** XRP-USDT, BTC-USDT, SOL-USDT, DOGE-USDT, ETH-USDT

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:
- **–ß–∞—Å—Ç–æ—Ç–∞:** ~–∫–∞–∂–¥—ã–µ 6-9 —Å–µ–∫—É–Ω–¥
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:** 3 —Å–∏–≥–Ω–∞–ª–∞ –∑–∞ —Ü–∏–∫–ª
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

### –†–∞–∑–≤–æ—Ä–æ—Ç—ã —Ä—ã–Ω–∫–∞:
- **–í—Å–µ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤:** 463
- **–í–Ω–∏–∑:** 254
- **–í–≤–µ—Ä—Ö:** 209
- **–†–µ–∂–∏–º:** ranging

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í

### –ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫ –ª–æ–≥–∞ (10:04:12):

```
2025-11-30 10:04:10.379 | DEBUG | margin_calculator: margin_ratio=0.50
2025-11-30 10:04:10.380 | INFO | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.50
2025-11-30 10:04:10.384 | DEBUG | ‚ö†Ô∏è –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–û–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è SOL-USDT long
2025-11-30 10:04:10.430 | DEBUG | –ù–∞–π–¥–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏—è ETH-USDT –≤ –∫—ç—à–µ: size=0.076, side=long
2025-11-30 10:04:10.660 | DEBUG | equity —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –¥–ª—è DOGE-USDT: margin=37.61 + upl=-0.50 = 37.11
2025-11-30 10:04:10.661 | INFO | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.50
2025-11-30 10:04:10.664 | DEBUG | ‚ö†Ô∏è –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–û–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è DOGE-USDT long
2025-11-30 10:04:10.701 | DEBUG | ‚è≠Ô∏è –ü–æ–∑–∏—Ü–∏—è ETH-USDT LONG –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (throttling: 25s)
2025-11-30 10:04:10.702 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã market data –¥–ª—è BTC-USDT
2025-11-30 10:04:10.702 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è BTC-USDT
2025-11-30 10:04:10.702 | INFO | üí∞ BTC-USDT: $90872.70
2025-11-30 10:04:10.924 | DEBUG | üîç PositionMonitor: –ü—Ä–æ–≤–µ—Ä–∫–∞ 5 –ø–æ–∑–∏—Ü–∏–π
2025-11-30 10:04:10.937 | DEBUG | equity —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –¥–ª—è ETH-USDT: margin=45.57 + upl=-0.01 = 45.56
2025-11-30 10:04:10.938 | INFO | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.50
2025-11-30 10:04:10.939 | DEBUG | ‚ö†Ô∏è –ü–û–î–û–ó–†–ò–¢–ï–õ–¨–ù–û–ï –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è ETH-USDT long
2025-11-30 10:04:11.245 | DEBUG | ‚è≠Ô∏è –ü–æ–∑–∏—Ü–∏—è BTC-USDT SHORT –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (throttling: 11s)
2025-11-30 10:04:11.246 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã market data –¥–ª—è ETH-USDT
2025-11-30 10:04:11.246 | INFO | üí∞ ETH-USDT: $2996.00
2025-11-30 10:04:12.063 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è XRP-USDT (size=0.73)
2025-11-30 10:04:12.064 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è BTC-USDT (size=0.24)
2025-11-30 10:04:12.065 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è SOL-USDT (size=1.51)
2025-11-30 10:04:12.067 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è DOGE-USDT (size=1.26)
2025-11-30 10:04:12.068 | INFO | üìä Private WS: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è ETH-USDT (size=0.76)
2025-11-30 10:04:12.458 | DEBUG | ‚è≠Ô∏è –ü–æ–∑–∏—Ü–∏—è BTC-USDT SHORT –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ (throttling: 9s)
2025-11-30 10:04:12.459 | DEBUG | ‚úÖ DataRegistry: –û–±–Ω–æ–≤–ª–µ–Ω—ã market data –¥–ª—è ETH-USDT
2025-11-30 10:04:12.460 | INFO | üí∞ ETH-USDT: $2996.00
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- ‚úÖ WebSocket –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ DataRegistry –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
- ‚úÖ PositionMonitor –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏
- ‚ö†Ô∏è Throttling –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–∏–≥–Ω–∞–ª—ã (–æ–∂–∏–¥–∞–µ–º–æ)
- ‚ö†Ô∏è LiquidationGuard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–µ" —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π)

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ï –í–´–í–û–î–´

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:

1. ‚úÖ **TradingControlCenter** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
2. ‚úÖ **PositionRegistry** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏
3. ‚úÖ **PositionMonitor** - —Ä–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏
4. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π** - –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤–º–µ—Å—Ç–µ
5. ‚úÖ **–ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫** - —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

1. ‚ö†Ô∏è **ExitAnalyzer** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, –Ω–æ –ª–æ–≥–æ–≤ —Ä–µ—à–µ–Ω–∏–π –Ω–µ –≤–∏–¥–Ω–æ
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å INFO-–ª–æ–≥–∏
   
2. ‚ö†Ô∏è **Memory leak** - –Ω–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á

### –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å:

‚úÖ **–†–ï–§–ê–ö–¢–û–†–ò–ù–ì –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û**

- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞
- –ì–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (—Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø):

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ExitAnalyzer**
   - –î–æ–±–∞–≤–∏—Ç—å INFO-–ª–æ–≥–∏ –¥–ª—è —Ä–µ—à–µ–Ω–∏–π (close/hold/extend_tp)
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–µ—à–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å memory leak –≤—Ä—É—á–Ω—É—é**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –Ω–∞ 2-3 —á–∞—Å–∞
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—Ç—á–µ—Ä –∑–∞–¥–∞—á
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–∞–º—è—Ç—å –Ω–µ —Ä–∞—Å—Ç–µ—Ç –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É ExitAnalyzer –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ TP/SL
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É loss_cut –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (—É–ª—É—á—à–µ–Ω–∏—è):

1. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ä–µ—à–µ–Ω–∏–π
   - –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ª–æ–≥-—Ñ–∞–π–ª –¥–ª—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π

2. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
   - –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞ TCC
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
   - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –º–æ–¥—É–ª–µ–π

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å throttling**
   - –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
   - –£—á–µ—Å—Ç—å —Å–∏–ª—å–Ω—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è —Ä—ã–Ω–∫–∞

---

## üéØ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `TradingControlCenter` –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç–µ –∏ —É–ª—É—á—à–µ–Ω–∏—è–º.

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£** (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ ExitAnalyzer –∏ memory leak)

---

**–û—Ç—á–µ—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω:** 2025-11-30 10:04:12  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** TradingControlCenter, PositionRegistry, PositionMonitor, ExitAnalyzer, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π  
**–†–µ–∂–∏–º:** Paper-trading (sandbox)




