# ‚úÖ –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò DataRegistry

**–î–∞—Ç–∞:** 25.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

---

## üîç –ü–†–û–í–ï–î–ï–ù–ù–´–ï –ü–†–û–í–ï–†–ö–ò

### 1. ‚úÖ –õ–ò–ù–¢–ï–† –ò –°–ò–ù–¢–ê–ö–°–ò–°
- ‚úÖ **–ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞** - –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- ‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å Python –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω** - –≤—Å–µ —Ñ–∞–π–ª—ã –≤–∞–ª–∏–¥–Ω—ã
- ‚úÖ **–ò–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã** - –≤—Å–µ –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 2. ‚úÖ –ò–ú–ü–û–†–¢–´ –ò –ó–ê–í–ò–°–ò–ú–û–°–¢–ò
- ‚úÖ **DataRegistry –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** –≤ 6 –º–æ–¥—É–ª—è—Ö:
  - orchestrator.py
  - position_manager.py
  - exit_analyzer.py
  - trading_control_center.py
  - position_monitor.py
  - signal_generator.py (—á–µ—Ä–µ–∑ set_data_registry)

### 3. ‚úÖ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò –ü–ï–†–ï–î–ê–ß–ê
- ‚úÖ **DataRegistry —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ orchestrator** - —Å—Ç—Ä–æ–∫–∞ 105
- ‚úÖ **–ü–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –º–æ–¥—É–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ**:
  - SignalGenerator (—Å—Ç—Ä–æ–∫–∞ 357)
  - WebSocketCoordinator (—Å—Ç—Ä–æ–∫–∞ 369)
  - SignalCoordinator (—Å—Ç—Ä–æ–∫–∞ 617)
  - RiskManager (—Å—Ç—Ä–æ–∫–∞ 443)
  - FilterManager (—á–µ—Ä–µ–∑ SignalGenerator)

### 4. ‚úÖ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –ú–ï–¢–û–î–û–í

**–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (update_*):**
- ‚úÖ `update_market_data()` - WebSocketCoordinator (—Å—Ç—Ä–æ–∫–∞ 189)
- ‚úÖ `update_indicators()` - SignalGenerator (—Å—Ç—Ä–æ–∫–∞ 1448), WebSocketCoordinator (—Å—Ç—Ä–æ–∫–∞ 231)
- ‚úÖ `update_regime()` - RegimeManager (—Å—Ç—Ä–æ–∫–∏ 535, 569)
- ‚úÖ `update_balance()` - Orchestrator (—Å—Ç—Ä–æ–∫–∏ 744, 1276)
- ‚úÖ `update_margin()` - Orchestrator (—Å—Ç—Ä–æ–∫–∏ 1537, 1562)

**–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (get_*):**
- ‚úÖ `get_balance()` - SignalCoordinator, RiskManager, Orchestrator
- ‚úÖ `get_margin()` - Orchestrator (—Å—Ç—Ä–æ–∫–∞ 2389)
- ‚úÖ `get_indicators()` - FilterManager (—Å—Ç—Ä–æ–∫–∞ 290)
- ‚úÖ `get_regime()` - SignalCoordinator

### 5. ‚úÖ –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö
- ‚úÖ **–í—Å–µ –≤—ã–∑–æ–≤—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ try-except**:
  - WebSocketCoordinator (—Å—Ç—Ä–æ–∫–∏ 201-204, 233-234)
  - SignalGenerator (—Å—Ç—Ä–æ–∫–∞ 1450-1451)
  - RegimeManager (—Å—Ç—Ä–æ–∫–∏ 543-546, 575-576)
  - SignalCoordinator (—Å—Ç—Ä–æ–∫–∏ 356-357)
  - RiskManager (—Å—Ç—Ä–æ–∫–∞ 171-172)
  - Orchestrator (–≤—Å–µ –≤—ã–∑–æ–≤—ã –∏–º–µ—é—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É)

### 6. ‚úÖ –ü–†–û–í–ï–†–ö–ò –ù–ê –ùONE
- ‚úÖ **–í—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ data_registry**:
  - `if self.data_registry:` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–∞–º–∏
  - `if not self.data_registry:` - –≤ FilterManager (—Å—Ç—Ä–æ–∫–∞ 286)
  - Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 7. ‚úÖ ASYNC/AWAIT
- ‚úÖ **–í—Å–µ async –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Å await**:
  - –í—Å–µ `update_*` –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç await
  - –í—Å–µ `get_*` –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç await
  - –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ async –º–µ—Ç–æ–¥–æ–≤

### 8. ‚úÖ –ü–ê–†–ê–ú–ï–¢–†–´ –ú–ï–¢–û–î–û–í
- ‚úÖ **–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**:
  - `update_market_data(symbol, data)` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - `update_indicators(symbol, indicators)` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - `update_regime(symbol, regime, params)` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - `update_balance(balance, profile)` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
  - `update_margin(used, available, total)` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### 9. ‚úÖ FALLBACK –ú–ï–•–ê–ù–ò–ó–ú–´
- ‚úÖ **Fallback –Ω–∞ –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API** —Ä–∞–±–æ—Ç–∞–µ—Ç:
  - SignalCoordinator (—Å—Ç—Ä–æ–∫–∞ 361)
  - RiskManager (—Å—Ç—Ä–æ–∫–∞ 169-172)
  - Orchestrator (–≤—Å–µ –Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞)

### 10. ‚úÖ THREAD SAFETY
- ‚úÖ **DataRegistry –∏—Å–ø–æ–ª—å–∑—É–µ—Ç asyncio.Lock** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ thread-safe
- ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### –ú–æ–¥—É–ª–∏, –æ–±–Ω–æ–≤–ª—è—é—â–∏–µ DataRegistry:
- ‚úÖ WebSocketCoordinator - market data, ADX
- ‚úÖ SignalGenerator - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, MACD, MA, BB, ATR)
- ‚úÖ RegimeManager - —Ä–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞
- ‚úÖ Orchestrator - –±–∞–ª–∞–Ω—Å, –º–∞—Ä–∂–∞

### –ú–æ–¥—É–ª–∏, —á–∏—Ç–∞—é—â–∏–µ –∏–∑ DataRegistry:
- ‚úÖ SignalCoordinator - –±–∞–ª–∞–Ω—Å, —Ä–µ–∂–∏–º
- ‚úÖ RiskManager - –±–∞–ª–∞–Ω—Å
- ‚úÖ FilterManager - –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–±–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- ‚úÖ Orchestrator - –±–∞–ª–∞–Ω—Å, –º–∞—Ä–∂–∞ (–Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Å—Ç–∞)

---

## ‚úÖ –í–´–í–û–î–´

**–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!**

1. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –∏–ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
2. ‚úÖ –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
3. ‚úÖ –í—Å–µ –º–µ—Ç–æ–¥—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ –º–µ—Å—Ç–µ
5. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ None –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
6. ‚úÖ Async/await –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
7. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
8. ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç
9. ‚úÖ Thread-safety –æ–±–µ—Å–ø–µ—á–µ–Ω

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è DataRegistry –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ! ‚úÖ**

---

## üöÄ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

DataRegistry –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! üéâ**

