# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ü–û–°–õ–ï –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê 28.11.2025

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-11-28 22:35+  
**–í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏:** ~22:35:34 - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–†–û–í–ï–†–ö–ò

### 1. ‚úÖ SlippageGuard - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- SlippageGuard –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω: `max_slippage=0.100%, max_spread=0.050%, timeout=30.0—Å`
- –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –æ—à–∏–±–æ–∫ `could not convert string to float: ''`
- Market –æ—Ä–¥–µ—Ä–æ–≤ –≤ —Å–µ—Å—Å–∏–∏ –Ω–µ –±—ã–ª–æ (–ø–æ–∑–∏—Ü–∏–∏ –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∏—Å—å)

**–í—ã–≤–æ–¥:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ. –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ market –æ—Ä–¥–µ—Ä–æ–≤ –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—è `px`.

---

### 2. ‚úÖ ADX=nan - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π:
```
‚ö†Ô∏è ADX: atr —Å–æ–¥–µ—Ä–∂–∏—Ç nan –∏–ª–∏ –Ω—É–ª–∏ –¥–ª—è 200 —Å–≤–µ—á–µ–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback –∑–Ω–∞—á–µ–Ω–∏–µ 0.0
üìä ADX BTC-USDT: ADX=0.0, +DI=0.0, -DI=0.0
üìä ADX DOGE-USDT: ADX=0.0, +DI=0.0, -DI=0.0
üìä ADX SOL-USDT: ADX=0.0, +DI=0.0, -DI=0.0
```

**–ê–Ω–∞–ª–∏–∑:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: –≤–º–µ—Å—Ç–æ –æ—à–∏–±–∫–∏ `ADX=nan` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `ADX=0.0`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –≤–∏–¥–Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ fallback –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- ‚ö†Ô∏è **–ù–û–í–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** ADX –≤—Å–µ–≥–¥–∞ = 0.0 –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤

**–ü—Ä–∏—á–∏–Ω–∞ ADX=0.0:**
- –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–µ—á–µ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ ADX (–Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 14+1 —Å–≤–µ—á–µ–π)
- `_wilder_smooth` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `nan` –¥–ª—è –ø–µ—Ä–≤—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —ç—Ç–æ, –≤–æ–∑–≤—Ä–∞—â–∞—è 0.0

**–í—ã–≤–æ–¥:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ ADX=0.0 –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞.

---

### 3. ‚úÖ Margin ratio –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π - –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ –≥–æ—Ç–æ–≤, –Ω–æ –ø–æ–∑–∏—Ü–∏–∏ –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∏—Å—å

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ö–æ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ `margin_calculator.py`
- –ü–∞—Ä–∞–º–µ—Ç—Ä `position_age_seconds` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `is_position_safe()`
- –í –ª–æ–≥–∞—Ö –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö (–ø–æ–∑–∏—Ü–∏–∏ –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–∏—Å—å)

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –ü–æ–∑–∏—Ü–∏–∏ < 30 —Å–µ–∫: `margin_ratio = 2.0` (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ)
- –ü–æ–∑–∏—Ü–∏–∏ < 60 —Å–µ–∫: `margin_ratio = 1.5` (—É–º–µ—Ä–µ–Ω–Ω–æ)
- –ü–æ–∑–∏—Ü–∏–∏ > 60 —Å–µ–∫: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç

**–í—ã–≤–æ–¥:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ. –ë—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–µ—Ä–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏.

---

## üîç –û–ë–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï –°–ï–°–°–ò–ò

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–ë–∞–ª–∞–Ω—Å:** $886.57 USDT
- **–ü—Ä–æ—Ñ–∏–ª—å:** small (–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- **–†–µ–∂–∏–º:** RANGING (confidence: 50-90%)
- **–û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π:** 0
- **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:** 0 (–≤—Å–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è ADX —Ñ–∏–ª—å—Ç—Ä–æ–º)

### –ü—Ä–æ–±–ª–µ–º—ã:
1. **ADX —Ñ–∏–ª—å—Ç—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã:**
   - ADX=0.0 –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö)
   - –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è: `Weak trend: ADX=0.0 < 15.0`
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã

2. **–†–µ–∂–∏–º RANGING —Å –Ω–∏–∑–∫–æ–π confidence:**
   - BTC-USDT: confidence=50.0% (default to RANGING)
   - ETH-USDT: confidence=50.0% (default to RANGING)
   - DOGE-USDT: confidence=79.9% (Narrow range)
   - SOL-USDT: confidence=85.7% (Narrow range)
   - XRP-USDT: confidence=83.6% (Narrow range)

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

### –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

1. ‚úÖ **SlippageGuard** - –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ, –æ—à–∏–±–æ–∫ –Ω–µ—Ç
2. ‚úÖ **ADX=nan** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0.0 –≤–º–µ—Å—Ç–æ nan
3. ‚úÖ **Margin ratio** - –∫–æ–¥ –≥–æ—Ç–æ–≤, –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **ADX=0.0 –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ:**
   - –ù—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–º–∏–Ω–∏–º—É–º 15 —Å–≤–µ—á–µ–π –¥–ª—è ADX period=14)
   - –ü–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö ADX –Ω–∞—á–Ω–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å margin_ratio –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏:**
   - –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–µ—Ä–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
     - `‚úÖ –ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (< 30 —Å–µ–∫): –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç margin_ratio=2.0`
     - `‚úÖ –ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è (< 60 —Å–µ–∫): –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç margin_ratio=1.5`

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ ADX –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É SlippageGuard –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ market –æ—Ä–¥–µ—Ä–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç. –°–µ—Å—Å–∏—è –∑–∞–ø—É—â–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –æ–∂–∏–¥–∞–µ—Ç—Å—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.

