# üìÅ –°–•–ï–ú–ê –°–¢–†–£–ö–¢–£–†–´ –õ–û–ì–û–í –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-22  
**–¶–µ–ª—å:** –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è –≤—Å–µ—Ö –ª–æ–≥–æ–≤ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞

---

## üóÇÔ∏è –û–ë–©–ê–Ø –°–¢–†–£–ö–¢–£–†–ê

```
logs/futures/
‚îú‚îÄ‚îÄ archived/                    # –ê—Ä—Ö–∏–≤—ã –ª–æ–≥–æ–≤ –ø–æ –¥–∞—Ç–∞–º
‚îÇ   ‚îú‚îÄ‚îÄ logs_2025-12-21_23-42-26/  # –ê—Ä—Ö–∏–≤ –∑–∞ 21.12.2025 (23:42:26)
‚îÇ   ‚îú‚îÄ‚îÄ logs_2025-12-22_00-16-39/  # –ê—Ä—Ö–∏–≤ –∑–∞ 21-22.12.2025 (00:16:39)
‚îÇ   ‚îî‚îÄ‚îÄ logs_2025-12-22_16-35-54/  # –ê—Ä—Ö–∏–≤ –∑–∞ 22.12.2025 (16:35:54)
‚îú‚îÄ‚îÄ debug/                       # Debug –ª–æ–≥–∏ (—Ä–µ—à–µ–Ω–∏—è ExitAnalyzer)
‚îÇ   ‚îî‚îÄ‚îÄ exit_decisions/         # JSON —Ñ–∞–π–ª—ã —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏
‚îú‚îÄ‚îÄ structured/                  # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSONL)
‚îÇ   ‚îî‚îÄ‚îÄ position_closures_*.jsonl
‚îî‚îÄ‚îÄ temp_archive/               # –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∞—Ä—Ö–∏–≤—ã
```

---

## 1. üìã –ê–†–•–ò–í–ò–†–û–í–ê–ù–ù–´–ï –õ–û–ì–ò (`logs/futures/archived/`)

### 1.1 –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `logs_2025-12-21_23-42-26/` ‚≠ê **–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø**

**–ü—É—Ç—å:** `logs/futures/archived/logs_2025-12-21_23-42-26/`  
**–°–æ–∑–¥–∞–Ω:** 2025-12-21 23:42:26  
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 14:11 - 22:32 (–≤–µ—Å—å —Ç–æ—Ä–≥–æ–≤—ã–π –¥–µ–Ω—å)

#### üìÑ –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (.log)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–∞–∑–º–µ—Ä | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|----------|--------|---------------|
| `futures_main_2025-12-21.log` | –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ | ~22,788 —Å—Ç—Ä–æ–∫ | –ü–æ–ª–Ω—ã–π –ª–æ–≥ –∑–∞ –¥–µ–Ω—å, –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –≤ 22:32:11 |
| `futures_main_2025-12-21.*.log` | –†–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (–º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤) | ~5MB –∫–∞–∂–¥—ã–π | –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (14:11-22:02) |
| `info_2025-12-21.log` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è | ~4.5MB | –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| `info_2025-12-21.*.log` | –†–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ info –ª–æ–≥–∏ | ~5MB –∫–∞–∂–¥—ã–π | 4 —Ñ–∞–π–ª–∞: 14:11, 15:28, 17:15, 18:39 |
| `errors_2025-12-21.log` | –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è | ~518KB | –í—Å–µ –æ—à–∏–±–∫–∏ –∑–∞ –¥–µ–Ω—å |

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
- `sl_percent`, `tp_percent`, `ph_threshold` ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `ADAPTIVE_LEVERAGE` ‚Äî —Ä–∞—Å—á–µ—Ç –ª–µ–≤–µ—Ä–∏–¥–∂–∞
- `ExitAnalyzer` ‚Äî —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π
- `calculate_leverage` ‚Äî —Ä–∞—Å—á–µ—Ç –ª–µ–≤–µ—Ä–∏–¥–∂–∞
- `UnboundLocalError`, `datetime` ‚Äî –æ—à–∏–±–∫–∏

#### üìä CSV –¥–∞–Ω–Ω—ã–µ (.csv)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ö–æ–ª–æ–Ω–∫–∏ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|----------|---------|---------------|
| `trades_2025-12-21.csv` | –í—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ | timestamp, symbol, side, entry_price, exit_price, size, gross_pnl, commission, net_pnl, duration_sec, reason, win_rate | –ê–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫, PnL, –ø—Ä–∏—á–∏–Ω –∑–∞–∫—Ä—ã—Ç–∏—è |
| `signals_2025-12-21.csv` | –í—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã | timestamp, symbol, side, price, strength, regime, filters_passed, executed, order_id | –ê–Ω–∞–ª–∏–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `orders_2025-12-21.csv` | –í—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ | timestamp, symbol, side, order_type, order_id, size, price, status, fill_price, fill_size, execution_time_ms, slippage | –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤, –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è |
| `positions_open_2025-12-21.csv` | –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ | –î–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–∏—Ö –ø–æ–∑–∏—Ü–∏—è—Ö | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π |
| `debug_20251221_141141.csv` | Debug –¥–∞–Ω–Ω—ã–µ | –†–∞–∑–ª–∏—á–Ω—ã–µ debug –º–µ—Ç—Ä–∏–∫–∏ | –û—Ç–ª–∞–¥–∫–∞ –∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ |

#### üì¶ JSON –¥–∞–Ω–Ω—ã–µ (.json)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|----------|---------------|
| `candles_init_2025-12-21.json` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–µ—á–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö |
| `candles_new_2025-12-21.json` | –ù–æ–≤—ã–µ —Å–≤–µ—á–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–≤–µ—á–µ–π |
| `candles_usage_2025-12-21.json` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–µ—á–µ–π | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≤–µ—á–µ–π |

---

### 1.2 –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `logs_2025-12-22_00-16-39/`

**–ü—É—Ç—å:** `logs/futures/archived/logs_2025-12-22_00-16-39/`  
**–°–æ–∑–¥–∞–Ω:** 2025-12-22 00:16:39  
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –∏–ª–∏ –ø–æ–ª–Ω—ã–π –¥–µ–Ω—å

#### üìÑ –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (.log)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|----------|---------------|
| `futures_main_2025-12-21.log` | –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –∑–∞ 21.12.2025 | –ï–¥–∏–Ω—ã–π —Ñ–∞–π–ª –±–µ–∑ —Ä–æ—Ç–∞—Ü–∏–∏ |
| `futures_main_2025-12-22.log` | –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ –∑–∞ 22.12.2025 | –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `info_2025-12-21.log` | Info –ª–æ–≥ –∑–∞ 21.12.2025 | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è |
| `errors_2025-12-21.log` | –û—à–∏–±–∫–∏ –∑–∞ 21.12.2025 | –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è |

#### üìä CSV –¥–∞–Ω–Ω—ã–µ (.csv)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|----------|---------------|
| `trades_2025-12-21.csv` | –í—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (169 —Å–¥–µ–ª–æ–∫) | –ê–Ω–∞–ª–∏–∑ —Å–¥–µ–ª–æ–∫ |
| `signals_2025-12-21.csv` | –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã (5,523 —Å–∏–≥–Ω–∞–ª–∞) | –ê–Ω–∞–ª–∏–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ |
| `orders_2025-12-21.csv` | –í—Å–µ –æ—Ä–¥–µ—Ä–∞ | –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è |
| `positions_open_2025-12-21.csv` | –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ |
| `debug_20251221_234257.csv` | Debug –¥–∞–Ω–Ω—ã–µ (–∫–æ–Ω–µ—Ü –¥–Ω—è: 23:42) | –û—Ç–ª–∞–¥–∫–∞ |

---

## 2. üêõ DEBUG –õ–û–ì–ò (`logs/futures/debug/`)

### 2.1 Exit Decisions (`debug/exit_decisions/`)

**–ü—É—Ç—å:** `logs/futures/debug/exit_decisions/`  
**–§–æ—Ä–º–∞—Ç:** JSON —Ñ–∞–π–ª—ã  
**–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:** `{SYMBOL}_{YYYY-MM-DD}_{HH-MM-SS-{–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã}}.json`

#### –ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤:
- `BTC-USDT_2025-12-21_05-43-53-165.json`
- `ETH-USDT_2025-12-21_14-22-10-543.json`
- `SOL-USDT_2025-12-21_18-45-32-789.json`

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON —Ñ–∞–π–ª–∞:
```json
{
  "timestamp": "2025-12-21T05:43:53.165274",
  "symbol": "BTC-USDT",
  "decision": "hold" | "close",
  "action": "hold" | "close",
  "reason": "sl_reached" | "tp_reached" | "profit_harvest" | "max_holding_exceeded_but_loss" | ...,
  "pnl_pct": -0.43368029614470605,
  "regime": "ranging" | "trending" | "choppy" | null,
  "trend_strength": null,
  "reversal_confidence": null,
  "minutes_in_position": 37.41,
  "max_holding_minutes": 28.0,
  "metadata": {
    "duration_minutes": null,
    "entry_price": null,
    "current_price": null,
    "position_side": null
  },
  "position_data": {
    "symbol": "BTC-USDT",
    "instId": "BTC-USDT-SWAP",
    "pos": "0.28",
    "posSide": "long",
    "avgPx": "89010.5",
    "markPx": "89000.1",
    "size": 0.0028,
    "entry_price": 89010.5,
    "position_side": "long",
    "margin_used": 12.46147,
    "lever": "20",
    "upl": "-0.0291199999999837",
    "uplRatio": "-0.0023368029614468",
    "realizedPnl": "-0.1246147",
    "liqPx": "84942.3149673531",
    "mgnRatio": "11.086441975283686",
    ...
  }
}
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Ä–µ—à–µ–Ω–∏—è. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ñ–∞–π–ª–∞—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
- `sl_percent`, `tp_percent`, `ph_threshold` ‚Äî –µ—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ —Å–≤—è–∑–∞–Ω–æ —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ SL/TP/PH
- `atr_value`, `atr_sl_percent` ‚Äî –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ATR-based SL
- `gross_pnl_pct` ‚Äî –≤–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å –±–µ–∑ —É—á–µ—Ç–∞ –∫–æ–º–∏—Å—Å–∏–∏

#### –ß—Ç–æ –∏—Å–∫–∞—Ç—å:
- **sl_percent** ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π SL% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è
- **tp_percent** ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π TP% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è
- **atr_value** ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ ATR (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ATR-based SL)
- **atr_sl_percent** ‚Äî ATR-based SL% (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **reason** ‚Äî –ø—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è/—É–¥–µ—Ä–∂–∞–Ω–∏—è
- **pnl_pct** ‚Äî —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π PnL% –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–µ—à–µ–Ω–∏—è
- **regime** ‚Äî —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–µ—à–µ–Ω–∏—è

#### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–∏—Å–∫–∞:
```bash
# Windows PowerShell
cd logs/futures/debug/exit_decisions

# –ù–∞–π—Ç–∏ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è BTC-USDT –∑–∞ 21.12.2025
Get-ChildItem -Filter "BTC-USDT_2025-12-21*.json"

# –ù–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —Å –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ SL
Select-String -Path "*.json" -Pattern '"reason":\s*"sl_reached"' | Select-Object -First 20

# –ù–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º sl_percent
Select-String -Path "*.json" -Pattern '"sl_percent":\s*0\.8' | Select-Object -First 20

# –ù–∞–π—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —Å ATR-based SL
Select-String -Path "*.json" -Pattern '"atr_sl_percent":\s*[^n]' | Select-Object -First 20
```

---

## 3. üìä –°–¢–†–£–ö–¢–£–†–ò–†–û–í–ê–ù–ù–´–ï –õ–û–ì–ò (`logs/futures/structured/`)

### 3.1 Position Closures (`position_closures_*.jsonl`)

**–ü—É—Ç—å:** `logs/futures/structured/position_closures_2025-12-21.jsonl`  
**–§–æ—Ä–º–∞—Ç:** JSONL (JSON Lines) ‚Äî –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω JSON –æ–±—ä–µ–∫—Ç

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø–∏—Å–∏:
```json
{
  "timestamp": "2025-12-21T11:15:11.643074+00:00",
  "event": "exchange_side_closure",
  "symbol": "BTC-USDT",
  "side": "SHORT",
  "size": 0.0028,
  "entry_price": 88603.6,
  "entry_time": "None",
  "duration_sec": 0.0,
  "reason": "exchange_side",
  "possible_causes": ["TSL", "Liquidation", "ADL", "Manual"]
}
```

#### –ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **–ó–∞–∫—Ä—ã—Ç–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –±–∏—Ä–∂–∏** (exchange_side_closure)
- **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:** TSL, Liquidation, ADL, Manual
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** timestamp, symbol, side, size, entry_price

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –±–∏—Ä–∂–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–π –∏ ADL
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TSL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

#### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
```bash
# Windows PowerShell
cd logs/futures/structured

# –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –∑–∞ 21.12.2025
Get-Content position_closures_2025-12-21.jsonl | ConvertFrom-Json

# –ü–æ–∏—Å–∫ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ —Å–∏–º–≤–æ–ª—É
Select-String -Path "position_closures_2025-12-21.jsonl" -Pattern '"symbol":\s*"ETH-USDT"'

# –ü–æ–∏—Å–∫ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–π
Select-String -Path "position_closures_2025-12-21.jsonl" -Pattern "Liquidation"
```

---

## 4. üîç –ë–´–°–¢–†–´–ô –ü–û–ò–°–ö –§–ê–ô–õ–û–í –ü–û –ó–ê–ü–†–û–°–£

### 4.1 –ü–æ–∏—Å–∫ –ª–æ–≥–æ–≤ —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ SL/TP

**–ó–∞–ø—Ä–æ—Å:** "–ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sl_percent=0.8"

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
1. ‚úÖ **–í –ª–æ–≥–∞—Ö:** `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21*.log`
2. ‚úÖ **–í exit_decisions:** `logs/futures/debug/exit_decisions/*.json`
3. ‚úÖ **–í CSV:** `logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv` (–∫–æ–ª–æ–Ω–∫–∞ `reason`)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –í –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "sl_percent.*0\.8"

# –í exit_decisions JSON
Select-String -Path "logs\futures\debug\exit_decisions\*2025-12-21*.json" -Pattern '"sl_percent":\s*0\.8'
```

---

### 4.2 –ü–æ–∏—Å–∫ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ -0.2%

**–ó–∞–ø—Ä–æ—Å:** "–ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å PnL ‚âà -0.2%"

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
1. ‚úÖ **–í CSV:** `trades_2025-12-21.csv` (–∫–æ–ª–æ–Ω–∫–∞ `net_pnl`)
2. ‚úÖ **–í exit_decisions:** JSON —Ñ–∞–π–ª—ã (–ø–æ–ª–µ `pnl_pct`)
3. ‚úÖ **–í –ª–æ–≥–∞—Ö:** `futures_main_2025-12-21*.log` (–ø–æ–∏—Å–∫ –ø–æ "-0.2")

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –í CSV (Python)
import pandas as pd
df = pd.read_csv('logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv')
df[df['net_pnl'].between(-0.25, -0.15)]

# –í exit_decisions JSON
Select-String -Path "logs\futures\debug\exit_decisions\*2025-12-21*.json" -Pattern '"pnl_pct":\s*-0\.2'

# –í –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "-0\.2"
```

---

### 4.3 –ü–æ–∏—Å–∫ —Ä–∞—Å—á–µ—Ç–æ–≤ –ª–µ–≤–µ—Ä–∏–¥–∂–∞

**–ó–∞–ø—Ä–æ—Å:** "–ù–∞–π—Ç–∏ –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ª–µ–≤–µ—Ä–∏–¥–∂–∞ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è"

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
1. ‚úÖ **–í –ª–æ–≥–∞—Ö:** `futures_main_2025-12-21*.log` (–ø–æ–∏—Å–∫ `ADAPTIVE_LEVERAGE`)
2. ‚úÖ **–í –∫–æ–¥–µ:** `src/strategies/scalping/futures/risk/adaptive_leverage.py`

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –í –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "ADAPTIVE_LEVERAGE|calculate_leverage"

# –ü–æ–∏—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ª–µ–≤–µ—Ä–∏–¥–∂–∞
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "leverage.*20|leverage.*5|leverage.*10"
```

---

### 4.4 –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ datetime

**–ó–∞–ø—Ä–æ—Å:** "–ù–∞–π—Ç–∏ –≤—Å–µ –æ—à–∏–±–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å datetime"

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
1. ‚úÖ **–í –ª–æ–≥–∞—Ö –æ—à–∏–±–æ–∫:** `errors_2025-12-21.log`
2. ‚úÖ **–í –æ—Å–Ω–æ–≤–Ω—ã—Ö –ª–æ–≥–∞—Ö:** `futures_main_2025-12-21*.log` (–ø–æ–∏—Å–∫ `ERROR`)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –í –ª–æ–≥–∞—Ö –æ—à–∏–±–æ–∫
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\errors_2025-12-21.log" -Pattern "UnboundLocalError|datetime|TypeError.*datetime"

# –í –æ—Å–Ω–æ–≤–Ω—ã—Ö –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "ERROR.*datetime|UnboundLocalError"
```

---

### 4.5 –ü–æ–∏—Å–∫ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä—ã

**–ó–∞–ø—Ä–æ—Å:** "–ù–∞–π—Ç–∏ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è ExitAnalyzer –¥–ª—è ETH-USDT –∑–∞ 21.12.2025"

**–ì–¥–µ –∏—Å–∫–∞—Ç—å:**
1. ‚úÖ **–í exit_decisions:** `logs/futures/debug/exit_decisions/ETH-USDT_2025-12-21_*.json`
2. ‚úÖ **–í –ª–æ–≥–∞—Ö:** `futures_main_2025-12-21*.log` (–ø–æ–∏—Å–∫ `ExitAnalyzer.*ETH-USDT`)

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# –í exit_decisions
Get-ChildItem -Path "logs\futures\debug\exit_decisions" -Filter "ETH-USDT_2025-12-21*.json"

# –í –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "ExitAnalyzer.*ETH-USDT"
```

---

## 5. üìã –¢–ê–ë–õ–ò–¶–ê –ë–´–°–¢–†–û–ì–û –î–û–°–¢–£–ü–ê

| –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ | –ì–¥–µ –∏—Å–∫–∞—Ç—å | –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É |
|----------------|------------|--------------|
| **–ó–Ω–∞—á–µ–Ω–∏—è SL/TP/PH** | –õ–æ–≥–∏ | `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21*.log` |
| **–ó–Ω–∞—á–µ–Ω–∏—è SL/TP/PH** | Exit Decisions | `logs/futures/debug/exit_decisions/*2025-12-21*.json` |
| **–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ -0.2%** | CSV —Å–¥–µ–ª–æ–∫ | `logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv` |
| **–ó–∞–∫—Ä—ã—Ç–∏—è –ø–æ -0.2%** | Exit Decisions | `logs/futures/debug/exit_decisions/*2025-12-21*.json` (–ø–æ–ª–µ `pnl_pct`) |
| **–†–∞—Å—á–µ—Ç –ª–µ–≤–µ—Ä–∏–¥–∂–∞** | –õ–æ–≥–∏ | `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21*.log` (–ø–æ–∏—Å–∫ `ADAPTIVE_LEVERAGE`) |
| **–û—à–∏–±–∫–∏ datetime** | –õ–æ–≥–∏ –æ—à–∏–±–æ–∫ | `logs/futures/archived/logs_2025-12-21_23-42-26/errors_2025-12-21.log` |
| **–†–µ—à–µ–Ω–∏—è ExitAnalyzer** | Exit Decisions | `logs/futures/debug/exit_decisions/{SYMBOL}_2025-12-21_*.json` |
| **–í—Å–µ —Å–¥–µ–ª–∫–∏** | CSV | `logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv` |
| **–í—Å–µ —Å–∏–≥–Ω–∞–ª—ã** | CSV | `logs/futures/archived/logs_2025-12-21_23-42-26/signals_2025-12-21.csv` |
| **–í—Å–µ –æ—Ä–¥–µ—Ä–∞** | CSV | `logs/futures/archived/logs_2025-12-21_23-42-26/orders_2025-12-21.csv` |
| **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è** | JSONL | `logs/futures/structured/position_closures_2025-12-21.jsonl` |

---

## 6. üìù –û–ü–ò–°–ê–ù–ò–ï –¢–ò–ü–û–í –§–ê–ô–õ–û–í

### 6.1 –õ–æ–≥–∏ (.log)

#### `futures_main_YYYY-MM-DD.log`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞
- **–°–æ–¥–µ—Ä–∂–∏—Ç:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –±–æ—Ç–∞, —Ä–µ—à–µ–Ω–∏—è, —Ä–∞—Å—á–µ—Ç—ã, –æ—à–∏–±–∫–∏
- **–§–æ—Ä–º–∞—Ç:** –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- **–†–∞–∑–º–µ—Ä:** ~5MB –Ω–∞ —Ñ–∞–π–ª (–ø—Ä–∏ —Ä–æ—Ç–∞—Ü–∏–∏)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ü–æ–∏—Å–∫ –∑–Ω–∞—á–µ–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (SL/TP/PH)
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤ –ª–µ–≤–µ—Ä–∏–¥–∂–∞
  - –ê–Ω–∞–ª–∏–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
  - –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫

#### `info_YYYY-MM-DD.log`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–°–æ–¥–µ—Ä–∂–∏—Ç:** –í–∞–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

#### `errors_YYYY-MM-DD.log`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–°–æ–¥–µ—Ä–∂–∏—Ç:** –í—Å–µ –æ—à–∏–±–∫–∏, –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ü–æ–∏—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º —Å datetime
  - –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º

---

### 6.2 CSV –¥–∞–Ω–Ω—ã–µ (.csv)

#### `trades_YYYY-MM-DD.csv`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ –¥–µ–Ω—å
- **–ö–æ–ª–æ–Ω–∫–∏:**
  - `timestamp` ‚Äî –≤—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è
  - `symbol` ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª
  - `side` ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (long/short)
  - `entry_price` ‚Äî —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
  - `exit_price` ‚Äî —Ü–µ–Ω–∞ –≤—ã—Ö–æ–¥–∞
  - `size` ‚Äî —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
  - `gross_pnl` ‚Äî –≤–∞–ª–æ–≤–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
  - `commission` ‚Äî –∫–æ–º–∏—Å—Å–∏—è
  - `net_pnl` ‚Äî —á–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å/—É–±—ã—Ç–æ–∫
  - `duration_sec` ‚Äî –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ (—Å–µ–∫—É–Ω–¥—ã)
  - `reason` ‚Äî –ø—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (sl_reached, tp_reached, profit_harvest, etc.)
  - `win_rate` ‚Äî —Ç–µ–∫—É—â–∏–π winrate
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ PnL –ø–æ —Å–¥–µ–ª–∫–∞–º
  - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è SL% vs —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π PnL
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –∑–∞–∫—Ä—ã—Ç–∏—è
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª–∞–º

#### `signals_YYYY-MM-DD.csv`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã –∑–∞ –¥–µ–Ω—å
- **–ö–æ–ª–æ–Ω–∫–∏:**
  - `timestamp` ‚Äî –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞
  - `symbol` ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª
  - `side` ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (buy/sell)
  - `price` ‚Äî —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞
  - `strength` ‚Äî —Å–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞ (0.0-1.0)
  - `regime` ‚Äî —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (trending/ranging/choppy)
  - `filters_passed` ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - `executed` ‚Äî –±—ã–ª –ª–∏ —Å–∏–≥–Ω–∞–ª –∏—Å–ø–æ–ª–Ω–µ–Ω (0/1)
  - `order_id` ‚Äî ID –æ—Ä–¥–µ—Ä–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ winrate –ø–æ strength
  - –ê–Ω–∞–ª–∏–∑ —Ä–µ–∂–∏–º–æ–≤ —Ä—ã–Ω–∫–∞

#### `orders_YYYY-MM-DD.csv`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Å–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –∑–∞ –¥–µ–Ω—å
- **–ö–æ–ª–æ–Ω–∫–∏:**
  - `timestamp` ‚Äî –≤—Ä–µ–º—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
  - `symbol` ‚Äî —Ç–æ—Ä–≥–æ–≤—ã–π —Å–∏–º–≤–æ–ª
  - `side` ‚Äî –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (buy/sell)
  - `order_type` ‚Äî —Ç–∏–ø –æ—Ä–¥–µ—Ä–∞ (limit/market)
  - `order_id` ‚Äî ID –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ
  - `size` ‚Äî —Ä–∞–∑–º–µ—Ä –æ—Ä–¥–µ—Ä–∞
  - `price` ‚Äî —Ü–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞
  - `status` ‚Äî —Å—Ç–∞—Ç—É—Å (placed/filled/cancelled)
  - `fill_price` ‚Äî —Ü–µ–Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
  - `fill_size` ‚Äî –∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä
  - `execution_time_ms` ‚Äî –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (–º—Å)
  - `slippage` ‚Äî –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
  - –ê–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤ –æ—Ä–¥–µ—Ä–æ–≤ (limit vs market)

#### `positions_open_YYYY-MM-DD.csv`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –º–æ–º–µ–Ω—Ç –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π

#### `debug_YYYYMMDD_HHMMSS.csv`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** Debug –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º
  - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

---

### 6.3 JSON –¥–∞–Ω–Ω—ã–µ (.json)

#### Exit Decisions: `{SYMBOL}_{YYYY-MM-DD}_{HH-MM-SS-{ms}}.json`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è ExitAnalyzer –¥–ª—è –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∏—Ü–∏–∏
- **–°–æ–¥–µ—Ä–∂–∏—Ç:**
  - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã SL/TP/PH
  - –¢–µ–∫—É—â–∏–π PnL%
  - –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞
  - –†–µ—à–µ–Ω–∏–µ (close/hold) –∏ –ø—Ä–∏—á–∏–Ω–∞
  - ATR –∑–Ω–∞—á–µ–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è ATR-based SL
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –∑–∞–∫—Ä—ã—Ç–∏—è/—É–¥–µ—Ä–∂–∞–Ω–∏—è

#### Candles: `candles_*.json`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –æ —Å–≤–µ—á–∞—Ö
- **–¢–∏–ø—ã:**
  - `candles_init_*.json` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–µ—á–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  - `candles_new_*.json` ‚Äî –Ω–æ–≤—ã–µ —Å–≤–µ—á–∏ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è)
  - `candles_usage_*.json` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≤–µ—á–µ–π
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–≤–µ—á–µ–π

---

### 6.4 JSONL –¥–∞–Ω–Ω—ã–µ (.jsonl)

#### `position_closures_YYYY-MM-DD.jsonl`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫—Ä—ã—Ç–∏—è—Ö –ø–æ–∑–∏—Ü–∏–π
- **–§–æ—Ä–º–∞—Ç:** JSON Lines (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ = –æ–¥–∏–Ω JSON –æ–±—ä–µ–∫—Ç)
- **–°–æ–¥–µ—Ä–∂–∏—Ç:**
  - –ó–∞–∫—Ä—ã—Ç–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –±–∏—Ä–∂–∏ (exchange_side_closure)
  - –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã (TSL, Liquidation, ADL, Manual)
  - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** 
  - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–π
  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ TSL

---

## 7. üéØ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –ü—Ä–∏–º–µ—Ä 1: –ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ SL –¥–ª—è ETH-USDT

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å CSV: `logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv`
2. –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å: `symbol == "ETH-USDT" AND reason == "sl_reached"`
3. –ò–ª–∏ –≤ PowerShell:
```powershell
Import-Csv "logs\futures\archived\logs_2025-12-21_23-42-26\trades_2025-12-21.csv" | 
    Where-Object { $_.symbol -eq "ETH-USDT" -and $_.reason -eq "sl_reached" }
```

---

### –ü—Ä–∏–º–µ—Ä 2: –ù–∞–π—Ç–∏ –≤—Å–µ —Ä–µ—à–µ–Ω–∏—è ExitAnalyzer —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ATR-based SL

**–®–∞–≥–∏:**
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é: `logs/futures/debug/exit_decisions/`
2. –ü–æ–∏—Å–∫ –≤ JSON —Ñ–∞–π–ª–∞—Ö: `"atr_sl_percent": [–Ω–µ null]`
3. –ö–æ–º–∞–Ω–¥–∞:
```powershell
Select-String -Path "logs\futures\debug\exit_decisions\*2025-12-21*.json" -Pattern '"atr_sl_percent":\s*[^n]' | 
    Select-Object -First 20
```

---

### –ü—Ä–∏–º–µ—Ä 3: –ù–∞–π—Ç–∏ –≤—Å–µ —Ä–∞—Å—á–µ—Ç—ã –ª–µ–≤–µ—Ä–∏–¥–∂–∞ —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º 20x

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å –ª–æ–≥–∏: `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21*.log`
2. –ü–æ–∏—Å–∫: `ADAPTIVE_LEVERAGE.*20x` –∏–ª–∏ `leverage.*20`
3. –ö–æ–º–∞–Ω–¥–∞:
```powershell
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "ADAPTIVE_LEVERAGE.*20|leverage.*20" | 
    Select-Object -First 50
```

---

### –ü—Ä–∏–º–µ—Ä 4: –ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–∫—Ä—ã—Ç–∏—è —Å PnL –º–µ–∂–¥—É -0.25% –∏ -0.15%

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä—ã—Ç—å CSV: `trades_2025-12-21.csv`
2. –§–∏–ª—å—Ç—Ä: `net_pnl BETWEEN -0.25 AND -0.15`
3. Python:
```python
import pandas as pd
df = pd.read_csv('logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv')
df['net_pnl_pct'] = df['net_pnl'] / (df['entry_price'] * df['size']) * 100
result = df[df['net_pnl_pct'].between(-0.25, -0.15)]
print(result[['symbol', 'reason', 'net_pnl', 'duration_sec']])
```

---

## 8. üìç –ü–û–õ–ù–´–ï –ü–£–¢–ò –ö –§–ê–ô–õ–ê–ú

### –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞ 21.12.2025:

#### –õ–æ–≥–∏:
- `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21.log`
- `logs/futures/archived/logs_2025-12-21_23-42-26/futures_main_2025-12-21.*.log` (—Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ)
- `logs/futures/archived/logs_2025-12-21_23-42-26/info_2025-12-21.log`
- `logs/futures/archived/logs_2025-12-21_23-42-26/errors_2025-12-21.log`

#### CSV:
- `logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv`
- `logs/futures/archived/logs_2025-12-21_23-42-26/signals_2025-12-21.csv`
- `logs/futures/archived/logs_2025-12-21_23-42-26/orders_2025-12-21.csv`
- `logs/futures/archived/logs_2025-12-21_23-42-26/positions_open_2025-12-21.csv`

#### JSON (Exit Decisions):
- `logs/futures/debug/exit_decisions/{SYMBOL}_2025-12-21_*.json`
- –ü—Ä–∏–º–µ—Ä—ã:
  - `logs/futures/debug/exit_decisions/BTC-USDT_2025-12-21_05-43-53-165.json`
  - `logs/futures/debug/exit_decisions/ETH-USDT_2025-12-21_14-22-10-543.json`

#### JSONL (Structured):
- `logs/futures/structured/position_closures_2025-12-21.jsonl`

---

## 9. üîß –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê

### 9.1 PowerShell –∫–æ–º–∞–Ω–¥—ã

```powershell
# –ü–æ–∏—Å–∫ –∑–Ω–∞—á–µ–Ω–∏–π SL/TP/PH –≤ –ª–æ–≥–∞—Ö
Select-String -Path "logs\futures\archived\logs_2025-12-21_23-42-26\futures_main_2025-12-21*.log" -Pattern "sl_percent|tp_percent|ph_threshold"

# –ü–æ–∏—Å–∫ –≤ exit_decisions JSON
Select-String -Path "logs\futures\debug\exit_decisions\*2025-12-21*.json" -Pattern '"sl_percent"|"tp_percent"|"ph_threshold"'

# –ü–æ–¥—Å—á–µ—Ç —Ñ–∞–π–ª–æ–≤ exit_decisions –¥–ª—è —Å–∏–º–≤–æ–ª–∞
(Get-ChildItem -Path "logs\futures\debug\exit_decisions" -Filter "ETH-USDT_2025-12-21*.json").Count
```

### 9.2 Python —Å–∫—Ä–∏–ø—Ç—ã

```python
import pandas as pd
import json
import glob

# –ê–Ω–∞–ª–∏–∑ CSV —Å–¥–µ–ª–æ–∫
trades = pd.read_csv('logs/futures/archived/logs_2025-12-21_23-42-26/trades_2025-12-21.csv')
print(f"–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫: {len(trades)}")
print(f"–ó–∞–∫—Ä—ã—Ç–∏–π –ø–æ SL: {len(trades[trades['reason'] == 'sl_reached'])}")

# –ê–Ω–∞–ª–∏–∑ exit_decisions JSON
json_files = glob.glob('logs/futures/debug/exit_decisions/*2025-12-21*.json')
sl_decisions = []
for file in json_files:
    with open(file, 'r') as f:
        data = json.load(f)
        if data.get('reason') == 'sl_reached':
            sl_decisions.append(data)

print(f"–†–µ—à–µ–Ω–∏–π –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ SL: {len(sl_decisions)}")
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-22  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –°—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞, –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

