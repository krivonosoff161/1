# üî¨ –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–û–î–ê –ò –õ–û–ì–û–í –° –£–ß–ï–¢–û–ú –í–°–ï–• –ê–î–ê–ü–¢–ê–¶–ò–ô

## üìä –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –ê–î–ê–ü–¢–ê–¶–ò–ò

### 1. **–ê–î–ê–ü–¢–ê–¶–ò–Ø –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ô**

**–¶–µ–ø–æ—á–∫–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (–∏–∑ –∫–æ–¥–∞ `_calculate_position_size`):**

```
1. Balance Profile (small/medium/large)
   ‚îú‚îÄ –ë–∞–ª–∞–Ω—Å: $824 ‚Üí Profile: small
   ‚îú‚îÄ –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è: $824 ‚Üí base_position_usd = $82.40
   ‚îú‚îÄ min_position_usd: $50.0
   ‚îî‚îÄ max_position_usd: $150.0

2. Per-symbol multiplier (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ symbol_profiles)
   ‚îî‚îÄ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ base_position_usd

3. Regime multiplier (position_size_multiplier)
   ‚îú‚îÄ RANGING: 1.0x (–∏–∑ adaptive_regime)
   ‚îú‚îÄ TRENDING: 1.2x
   ‚îî‚îÄ CHOPPY: 0.8x

4. Strength multiplier (–∏–∑ adaptive_risk_params)
   ‚îú‚îÄ –ö–æ–Ω—Ñ–ª–∏–∫—Ç: 0.4x (ranging)
   ‚îú‚îÄ Very strong (>0.85): 1.4x (ranging)
   ‚îú‚îÄ Strong (>0.65): 1.1x (ranging)
   ‚îú‚îÄ Medium (>0.45): 0.9x (ranging)
   ‚îî‚îÄ Weak: 0.7x (ranging)

5. Volatility adjustment (ATR-based)
   ‚îú‚îÄ base_atr_percent: 2.0% (ranging)
   ‚îú‚îÄ min_multiplier: 0.5x
   ‚îî‚îÄ max_multiplier: 1.3x (ranging)

6. –ó–∞—â–∏—Ç—ã (max_margin_percent, max_loss_per_trade_percent, max_margin_safety_percent)
   ‚îú‚îÄ max_margin_percent: 85% (small, ranging)
   ‚îú‚îÄ max_loss_per_trade_percent: 2.0% (small, ranging)
   ‚îî‚îÄ max_margin_safety_percent: 90% (small, ranging)
```

**–¢–µ–∫—É—â–∏–π —Ä–∞—Å—á–µ—Ç –¥–ª—è ETH-USDT (–∏–∑ –ª–æ–≥–æ–≤):**
- –ë–∞–ª–∞–Ω—Å: $824
- Profile: small
- base_position_usd: $82.40 (–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
- –†–µ–∂–∏–º: ranging ‚Üí multiplier: 1.0x
- Strength: ~1.0 (medium) ‚Üí multiplier: 0.9x
- –ò—Ç–æ–≥–æ: $82.40 * 1.0 * 0.9 = $74.16
- –ù–æ –≤ –ª–æ–≥–∞—Ö: notional=$147.33, margin=$29.47
- **–ü–†–û–ë–õ–ï–ú–ê:** –†–∞–∑–º–µ—Ä –±–æ–ª—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ! –í–æ–∑–º–æ–∂–Ω–æ, volatility adjustment —É–≤–µ–ª–∏—á–∏–ª

**–ê–Ω–∞–ª–∏–∑:**
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª
- –ü—Ä–∏ –±–∞–ª–∞–Ω—Å–µ $824 –∏ –ø—Ä–æ—Ñ–∏–ª–µ small: base=$82.40
- –ü–æ—Å–ª–µ –≤—Å–µ—Ö –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π: ~$74-100
- –ù–æ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: $147 (–ø–æ—á—Ç–∏ –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ!)

---

### 2. **–ê–î–ê–ü–¢–ê–¶–ò–Ø TRAILING STOP LOSS**

**–¶–µ–ø–æ—á–∫–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ (–∏–∑ –∫–æ–¥–∞ `_get_trailing_sl_params`):**

```
1. –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (trailing_sl)
   ‚îú‚îÄ initial_trail: 0.5%
   ‚îú‚îÄ max_trail: 2.0%
   ‚îî‚îÄ min_profit_to_close: 0.1%

2. –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∂–∏–º—É (by_regime)
   ‚îú‚îÄ RANGING:
   ‚îÇ  ‚îú‚îÄ initial_trail: 0.8%
   ‚îÇ  ‚îú‚îÄ max_trail: 2.0%
   ‚îÇ  ‚îú‚îÄ min_profit_to_close: 0.55%
   ‚îÇ  ‚îú‚îÄ min_holding_minutes: 2.0
   ‚îÇ  ‚îú‚îÄ extend_time_on_profit: true
   ‚îÇ  ‚îú‚îÄ extend_time_multiplier: 1.5 (–±–∞–∑–æ–≤—ã–π, –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω)
   ‚îÇ  ‚îú‚îÄ regime_multiplier: 1.2
   ‚îÇ  ‚îî‚îÄ trail_growth:
   ‚îÇ     ‚îú‚îÄ low_profit_multiplier: 1.5
   ‚îÇ     ‚îú‚îÄ medium_profit_multiplier: 2.0
   ‚îÇ     ‚îî‚îÄ high_profit_multiplier: 3.0
   ‚îÇ
   ‚îú‚îÄ TRENDING:
   ‚îÇ  ‚îú‚îÄ initial_trail: 1.0%
   ‚îÇ  ‚îú‚îÄ max_trail: 3.0%
   ‚îÇ  ‚îî‚îÄ trail_growth.medium_profit_multiplier: 2.5
   ‚îÇ
   ‚îî‚îÄ CHOPPY:
      ‚îú‚îÄ initial_trail: 0.6%
      ‚îú‚îÄ max_trail: 1.5%
      ‚îî‚îÄ trail_growth.medium_profit_multiplier: 1.5
```

**–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**
–í –∫–æ–¥–µ `trailing_stop_loss.py` —Å—Ç—Ä–æ–∫–∞ 217 –∏ 238:
```python
self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * 2,  # ‚ùå –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û 2.0!
    self.max_trail,
)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–´–ô –º–Ω–æ–∂–∏—Ç–µ–ª—å `2.0`
- –í –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å `trail_growth.medium_profit_multiplier: 2.0` –¥–ª—è ranging
- –ù–æ –∫–æ–¥ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞!
- –≠—Ç–æ –ù–ï –∞–¥–∞–ø—Ç–∏–≤–Ω–æ - –≤—Å–µ–≥–¥–∞ 2.0, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ä–µ–∂–∏–º–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `trail_growth_medium_multiplier` –∏–∑ params
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É—Ä–æ–≤–Ω—é –ø—Ä–∏–±—ã–ª–∏ (low/medium/high)

---

### 3. **–ê–ù–ê–õ–ò–ó –†–ï–ê–õ–¨–ù–´–• –ü–ê–†–ê–ú–ï–¢–†–û–í –ò–ó –õ–û–ì–û–í**

**–ò–∑ –ª–æ–≥–æ–≤ (ETH-USDT, ranging —Ä–µ–∂–∏–º):**

```
Entry: 2779.82
TrailingStopLoss –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:
  - trail=0.800% ‚úÖ (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è ranging)
  - fee=0.100% ‚úÖ
  - loss_cut=0.80% –æ—Ç –º–∞—Ä–∂–∏ ‚úÖ (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è ranging)
  - min_holding=2.0 –º–∏–Ω ‚úÖ (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è ranging)
  - regime=ranging ‚úÖ

–¶–µ–Ω–∞ –ø–æ–¥–Ω—è–ª–∞—Å—å –¥–æ 2944.56:
  - profit=5.83% (net —Å –∫–æ–º–∏—Å—Å–∏–µ–π)
  - trail=2.00% (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω max_trail=2.0%)
  - —Å—Ç–æ–ø=2885.67 (2% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞)

–¶–µ–Ω–∞ –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å –¥–æ 2784.28:
  - profit=0.06% (net —Å –∫–æ–º–∏—Å—Å–∏–µ–π)
  - —Å—Ç–æ–ø=2756.77 (–Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è)
  - –ü–æ–∑–∏—Ü–∏—è –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è: min_holding=3.0 –º–∏–Ω (2.0 * 1.5)
```

**–ê–Ω–∞–ª–∏–∑:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ù–æ `extend_time_multiplier` –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è ranging ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5
- effective_min_holding = 2.0 * 1.5 = 3.0 –º–∏–Ω—É—Ç—ã
- –≠—Ç–æ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –¥–ª—è ranging —Ä–µ–∂–∏–º–∞

---

## üö® –ù–ê–ô–î–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### –ü–†–û–ë–õ–ï–ú–ê #1: –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–´–ô –ú–ù–û–ñ–ò–¢–ï–õ–¨ –¢–†–ï–ô–õ–ò–ù–ì–ê

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`
**–°—Ç—Ä–æ–∫–∏:** 217, 238

**–¢–µ–∫—É—â–∏–π –∫–æ–¥:**
```python
self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * 2,  # ‚ùå –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û!
    self.max_trail,
)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ú–Ω–æ–∂–∏—Ç–µ–ª—å `2.0` –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω
- –í –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å `trail_growth.medium_profit_multiplier` (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
- –ö–æ–¥ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- –î–ª—è ranging: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 2.0 (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ)
- –î–ª—è choppy: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1.5 (–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 2.0!)

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `trail_growth_medium_multiplier` –∏–∑ params
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É—Ä–æ–≤–Ω—é –ø—Ä–∏–±—ã–ª–∏ (low/medium/high)

---

### –ü–†–û–ë–õ–ï–ú–ê #2: EXTEND_TIME_MULTIPLIER –ù–ï –ü–ï–†–ï–û–ü–†–ï–î–ï–õ–ï–ù –î–õ–Ø RANGING

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
trailing_sl:
  extend_time_multiplier: 1.5  # –ë–∞–∑–æ–≤—ã–π
  by_regime:
    ranging:
      extend_time_on_profit: true
      # extend_time_multiplier –ù–ï –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–ª—è ranging –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π `extend_time_multiplier = 1.5`
- effective_min_holding = 2.0 * 1.5 = 3.0 –º–∏–Ω—É—Ç—ã
- –≠—Ç–æ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –¥–ª—è ranging —Ä–µ–∂–∏–º–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `extend_time_multiplier` –¥–ª—è ranging: 1.0 (–Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å)
- –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å `extend_time_on_profit` –¥–ª—è ranging: false

---

### –ü–†–û–ë–õ–ï–ú–ê #3: –†–ê–ó–ú–ï–† –ü–û–ó–ò–¶–ò–ò –ú–ï–ù–¨–®–ï –†–ê–°–ß–ï–¢–ù–û–ì–û

**–ò–∑ –ª–æ–≥–æ–≤:**
- –†–∞—Å—á–µ—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä: ~$74-100 (–ø–æ—Å–ª–µ –≤—Å–µ—Ö –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π)
- –†–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: $147.33 notional, $29.47 margin

**–ê–Ω–∞–ª–∏–∑:**
- –†–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–æ–ª—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–≥–æ
- –í–æ–∑–º–æ–∂–Ω–æ, volatility adjustment —É–≤–µ–ª–∏—á–∏–ª —Ä–∞–∑–º–µ—Ä
- –ò–ª–∏ strength_multiplier –±—ã–ª –±–æ–ª—å—à–µ (very_strong = 1.4x)

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –†–∞–∑–º–µ—Ä –≤—Å–µ —Ä–∞–≤–Ω–æ –º–∞–ª –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–º–∏—Å—Å–∏–π
- –ü—Ä–∏ $147 notional: –∫–æ–º–∏—Å—Å–∏—è = $0.147 (0.1% –æ—Ç $147)
- –ü—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ 0.5%: gross = $0.74, net = $0.59 (–º–∏–∫—Ä–æ-–ø—Ä–∏–±—ã–ª—å)

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å `base_position_usd` –¥–ª—è small –ø—Ä–æ—Ñ–∏–ª—è
- –ò–ª–∏ —É–≤–µ–ª–∏—á–∏—Ç—å `size_at_max` –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

---

### –ü–†–û–ë–õ–ï–ú–ê #4: PARTIAL TP –°–û–ó–î–ê–ï–¢ –î–£–ë–õ–ò–†–£–Æ–©–ò–ï –û–†–î–ï–†–ê

**–ò–∑ –ª–æ–≥–æ–≤:**
```
20:22:11 - Partial TP: pnl=0.68%, –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –ª–∏–º–∏—Ç sell 0.126 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
20:22:11 - Partial TP: pnl=0.68%, –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –ª–∏–º–∏—Ç sell 0.126 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–î–£–ë–õ–ò–ö–ê–¢!)
20:22:11 - Partial TP: pnl=0.68%, –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –ª–∏–º–∏—Ç sell 0.126 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–î–£–ë–õ–ò–ö–ê–¢!)
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Partial TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤
- –°–æ–∑–¥–∞—é—Ç—Å—è 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ—Ä–¥–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `partial_tp_pending` –≤ –ø–æ–∑–∏—Ü–∏—é
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ Partial TP

---

## üéØ –ö–û–ù–ö–†–ï–¢–ù–´–ï –†–ï–®–ï–ù–ò–Ø –° –£–ß–ï–¢–û–ú –ê–î–ê–ü–¢–ê–¶–ò–ò

### –†–ï–®–ï–ù–ò–ï #1: –ò–°–ü–†–ê–í–ò–¢–¨ –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–´–ô –ú–ù–û–ñ–ò–¢–ï–õ–¨ –¢–†–ï–ô–õ–ò–ù–ì–ê

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ 217, 238):**
```python
self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * 2,  # ‚ùå –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û
    self.max_trail,
)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥:**
```python
# ‚úÖ –ê–î–ê–ü–¢–ò–í–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º trail_growth multipliers –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
trail_multiplier = 2.0  # Fallback
if profit_pct_total < 0.005:  # < 0.5%
    trail_multiplier = getattr(self, 'trail_growth_low_multiplier', 1.5)
elif profit_pct_total < 0.015:  # 0.5-1.5%
    trail_multiplier = getattr(self, 'trail_growth_medium_multiplier', 2.0)
else:  # > 1.5%
    trail_multiplier = getattr(self, 'trail_growth_high_multiplier', 3.0)

self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * trail_multiplier,
    self.max_trail,
)
```

**–≠—Ñ—Ñ–µ–∫—Ç:**
- –î–ª—è ranging: medium_multiplier = 2.0 (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- –î–ª—è choppy: medium_multiplier = 1.5 (—É–º–µ–Ω—å—à–∏—Ç—Å—è —Å 2.0)
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –ø–æ —É—Ä–æ–≤–Ω—é –ø—Ä–∏–±—ã–ª–∏

---

### –†–ï–®–ï–ù–ò–ï #2: –£–í–ï–õ–ò–ß–ò–¢–¨ –ü–ê–†–ê–ú–ï–¢–†–´ TSL –î–õ–Ø RANGING

**–§–∞–π–ª:** `config/config_futures.yaml`

**–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è ranging:**
```yaml
ranging:
  initial_trail: 0.008  # 0.8%
  max_trail: 0.02  # 2.0%
  min_profit_to_close: 0.0055  # 0.55%
  min_holding_minutes: 2.0
  extend_time_on_profit: true
  # extend_time_multiplier: –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5)
  trail_growth:
    medium_profit_multiplier: 2.0
```

**–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
ranging:
  initial_trail: 0.015  # –ë—ã–ª–æ 0.008 ‚Üí —Å—Ç–∞–ª–æ 1.5% (—É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 1.875 —Ä–∞–∑–∞)
  max_trail: 0.03  # –ë—ã–ª–æ 0.02 ‚Üí —Å—Ç–∞–ª–æ 3.0% (—É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 1.5 —Ä–∞–∑–∞)
  min_profit_to_close: 0.008  # –ë—ã–ª–æ 0.0055 ‚Üí —Å—Ç–∞–ª–æ 0.8% (—É–≤–µ–ª–∏—á–µ–Ω–æ)
  min_holding_minutes: 2.0  # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  extend_time_on_profit: false  # –ë—ã–ª–æ true ‚Üí –æ—Ç–∫–ª—é—á–µ–Ω–æ
  # –ò–õ–ò –µ—Å–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å true:
  # extend_time_multiplier: 1.0  # –ë—ã–ª–æ 1.5 (–±–∞–∑–æ–≤—ã–π) ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ 1.0
  trail_growth:
    medium_profit_multiplier: 1.5  # –ë—ã–ª–æ 2.0 ‚Üí —É–º–µ–Ω—å—à–∏—Ç—å –¥–æ 1.5
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `initial_trail` 1.5% –≤–º–µ—Å—Ç–æ 0.8% = –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤
- `max_trail` 3.0% –≤–º–µ—Å—Ç–æ 2.0% = –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤
- `min_profit_to_close` 0.8% –≤–º–µ—Å—Ç–æ 0.55% = –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ (0.2%) + –±—É—Ñ–µ—Ä (0.6%)
- `extend_time_on_profit` false = –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å –≤—Ä–µ–º—è (effective = 2.0 –º–∏–Ω –≤–º–µ—Å—Ç–æ 3.0)
- `medium_profit_multiplier` 1.5 –≤–º–µ—Å—Ç–æ 2.0 = –±–æ–ª–µ–µ –ø–ª–∞–≤–Ω—ã–π —Ç—Ä–µ–π–ª–∏–Ω–≥

---

### –†–ï–®–ï–ù–ò–ï #3: –£–í–ï–õ–ò–ß–ò–¢–¨ –†–ê–ó–ú–ï–† –ü–û–ó–ò–¶–ò–ô –î–õ–Ø SMALL –ü–†–û–§–ò–õ–Ø

**–§–∞–π–ª:** `config/config_futures.yaml`

**–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è small:**
```yaml
small:  # $500 - $1500
  min_balance: 500.0
  size_at_min: 50.0
  size_at_max: 150.0
  base_position_usd: 100.0
  min_position_usd: 50.0
  max_position_usd: 150.0
```

**–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
small:  # $500 - $1500
  min_balance: 500.0
  size_at_min: 80.0  # –ë—ã–ª–æ 50.0 ‚Üí —Å—Ç–∞–ª–æ 80.0 (—É–≤–µ–ª–∏—á–µ–Ω–æ –Ω–∞ 60%)
  size_at_max: 200.0  # –ë—ã–ª–æ 150.0 ‚Üí —Å—Ç–∞–ª–æ 200.0 (—É–≤–µ–ª–∏—á–µ–Ω–æ –Ω–∞ 33%)
  base_position_usd: 120.0  # –ë—ã–ª–æ 100.0 ‚Üí —Å—Ç–∞–ª–æ 120.0 (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  min_position_usd: 80.0  # –ë—ã–ª–æ 50.0 ‚Üí —Å—Ç–∞–ª–æ 80.0
  max_position_usd: 200.0  # –ë—ã–ª–æ 150.0 ‚Üí —Å—Ç–∞–ª–æ 200.0
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–∏ –±–∞–ª–∞–Ω—Å–µ $824: –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –¥–∞—Å—Ç ~$120-150 –≤–º–µ—Å—Ç–æ $82-100
- –≠—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç –ø—Ä–∏–±—ã–ª—å –ø—Ä–∏ —Ç–æ–º –∂–µ % –¥–≤–∏–∂–µ–Ω–∏—è
- –ö–æ–º–∏—Å—Å–∏–∏ –±—É–¥—É—Ç –ø–æ–∫—Ä—ã–≤–∞—Ç—å—Å—è –ª–µ–≥—á–µ

---

### –†–ï–®–ï–ù–ò–ï #4: –ò–°–ü–†–ê–í–ò–¢–¨ PARTIAL TP

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤
- Partial TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `partial_tp_pending` –≤ –ø–æ–∑–∏—Ü–∏—é
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ Partial TP
- –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É)

---

## üìä –°–í–Ø–ó–ò –ú–ï–ñ–î–£ –ü–ê–†–ê–ú–ï–¢–†–ê–ú–ò

### –¶–µ–ø–æ—á–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:

```
Balance ($824)
  ‚Üì
Balance Profile (small)
  ‚Üì
base_position_usd ($82.40 - –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
  ‚Üì
Per-symbol multiplier (–µ—Å–ª–∏ –µ—Å—Ç—å)
  ‚Üì
Regime multiplier (ranging: 1.0x)
  ‚Üì
Strength multiplier (medium: 0.9x)
  ‚Üì
Volatility adjustment (ATR-based: 0.5x-1.3x)
  ‚Üì
–ó–∞—â–∏—Ç—ã (max_margin_percent: 85%, max_loss: 2.0%)
  ‚Üì
–§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
```

### –¶–µ–ø–æ—á–∫–∞ –≤–ª–∏—è–Ω–∏—è –Ω–∞ TSL:

```
–†–µ–∂–∏–º (ranging)
  ‚Üì
–ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL (trailing_sl)
  ‚Üì
–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Ä–µ–∂–∏–º—É (by_regime.ranging)
  ‚Üì
Per-symbol overrides (–µ—Å–ª–∏ –µ—Å—Ç—å)
  ‚Üì
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TSL
  ‚Üì
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ (—Å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–º –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º 2.0 ‚ùå)
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (min_holding, min_profit_to_close, extend_time)
```

---

## üéØ –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (–∫–æ–¥):

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞:**
   - –§–∞–π–ª: `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`
   - –°—Ç—Ä–æ–∫–∏: 217, 238
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `trail_growth_medium_multiplier` –∏–∑ params
   - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É—Ä–æ–≤–Ω—é –ø—Ä–∏–±—ã–ª–∏ (low/medium/high)

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å Partial TP:**
   - –§–∞–π–ª: `src/strategies/scalping/futures/position_manager.py`
   - –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤

### –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–û–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø:

3. **–£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging:**
   - `initial_trail`: 0.008 ‚Üí 0.015 (1.5%)
   - `max_trail`: 0.02 ‚Üí 0.03 (3.0%)
   - `min_profit_to_close`: 0.0055 ‚Üí 0.008 (0.8%)
   - `extend_time_on_profit`: true ‚Üí false
   - `trail_growth.medium_profit_multiplier`: 2.0 ‚Üí 1.5

4. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small:**
   - `size_at_min`: 50.0 ‚Üí 80.0
   - `size_at_max`: 150.0 ‚Üí 200.0
   - `min_position_usd`: 50.0 ‚Üí 80.0
   - `max_position_usd`: 150.0 ‚Üí 200.0

---

## üìù –ó–ê–ú–ï–¢–ö–ò –û –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–û–°–¢–ò

**–ß—Ç–æ –ê–î–ê–ü–¢–ò–í–ù–û (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞):**
- ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π (balance_profile, regime, strength, volatility)
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TSL (initial_trail, max_trail, min_profit_to_close)
- ‚úÖ min_holding_minutes, extend_time_multiplier
- ‚úÖ loss_cut_percent, timeout_loss_percent

**–ß—Ç–æ –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û (–Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å):**
- ‚ùå –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ (2.0 –≤–º–µ—Å—Ç–æ trail_growth_medium_multiplier)
- ‚ùå –§–æ—Ä–º—É–ª–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç low/medium/high multipliers)

**–ß—Ç–æ –ß–ê–°–¢–ò–ß–ù–û –ê–î–ê–ü–¢–ò–í–ù–û:**
- ‚ö†Ô∏è extend_time_multiplier –¥–ª—è ranging (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5, –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω)

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ù–ê–ë–õ–Æ–î–ï–ù–ò–Ø

1. **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª:**
   - –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ù–æ –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (size_at_min/max) –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã

2. **TSL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ, –Ω–æ –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω:**
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ù–æ —Ñ–æ—Ä–º—É–ª–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π 2.0

3. **extend_time_multiplier –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è ranging:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5
   - –≠—Ç–æ –¥–∞–µ—Ç effective_min_holding = 3.0 –º–∏–Ω—É—Ç—ã (—Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ)

4. **Partial TP —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –æ—Ä–¥–µ—Ä–∞:**
   - –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

1. **–í–´–°–û–ö–ò–ô:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ (–∫–æ–¥)
2. **–í–´–°–û–ö–ò–ô:** –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging (–∫–æ–Ω—Ñ–∏–≥)
3. **–í–´–°–û–ö–ò–ô:** –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small (–∫–æ–Ω—Ñ–∏–≥)
4. **–°–†–ï–î–ù–ò–ô:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å Partial TP (–∫–æ–¥)
5. **–°–†–ï–î–ù–ò–ô:** –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å extend_time_multiplier –¥–ª—è ranging (–∫–æ–Ω—Ñ–∏–≥)

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –¢—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ –ë–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤ (initial_trail 1.5% –≤–º–µ—Å—Ç–æ 0.8%)
- ‚úÖ –ú–µ–Ω—å—à–µ –º–∏–∫—Ä–æ-–ø—Ä–∏–±—ã–ª–∏ (min_profit_to_close 0.8% –≤–º–µ—Å—Ç–æ 0.55%)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Å—Ç–æ–ø–∞ (–±–µ–∑ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏)
- ‚úÖ –ë–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π (–ª—É—á—à–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–º–∏—Å—Å–∏–π)
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö Partial TP –æ—Ä–¥–µ—Ä–æ–≤

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó: –ì–î–ï –ß–¢–û –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û

### ‚úÖ –ê–î–ê–ü–¢–ò–í–ù–û (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞):

1. **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π:**
   - Balance profiles (small/medium/large) ‚úÖ
   - Regime multipliers (position_size_multiplier) ‚úÖ
   - Strength multipliers (–∏–∑ adaptive_risk_params) ‚úÖ
   - Volatility adjustment (ATR-based) ‚úÖ
   - –í—Å–µ –∑–∞—â–∏—Ç—ã (max_margin_percent, max_loss_percent) ‚úÖ

2. **Trailing Stop Loss –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - initial_trail, max_trail, min_trail ‚úÖ
   - min_profit_to_close, min_holding_minutes ‚úÖ
   - extend_time_on_profit, extend_time_multiplier ‚úÖ
   - loss_cut_percent, timeout_loss_percent ‚úÖ
   - regime_multiplier, trend_strength_boost ‚úÖ

3. **Trail growth multipliers (–≤ –∫–æ–Ω—Ñ–∏–≥–µ):**
   - low_profit_multiplier, medium_profit_multiplier, high_profit_multiplier ‚úÖ
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É (by_regime) ‚úÖ

### ‚ùå –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û (–Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å):

1. **–ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –≤ —Ñ–æ—Ä–º—É–ª–µ:**
   - –§–∞–π–ª: `trailing_stop_loss.py`, —Å—Ç—Ä–æ–∫–∏ 217, 238
   - –ö–æ–¥: `* 2` (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ)
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `trail_growth_medium_multiplier` –∏–∑ params
   - –ü—Ä–æ–±–ª–µ–º–∞: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ orchestrator, –Ω–æ –ù–ï –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ TSL!

2. **–§–æ—Ä–º—É–ª–∞ —Ç—Ä–µ–π–ª–∏–Ω–≥–∞:**
   - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç low/medium/high multipliers
   - –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–∏–Ω –º–Ω–æ–∂–∏—Ç–µ–ª—å (2.0)

### ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û –ê–î–ê–ü–¢–ò–í–ù–û:

1. **extend_time_multiplier –¥–ª—è ranging:**
   - –ù–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5
   - –ù—É–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ

---

## üîß –ö–û–ù–ö–†–ï–¢–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1: –ü–µ—Ä–µ–¥–∞—Ç—å trail_growth multipliers –≤ TSL

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã `trail_growth_*_multiplier` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ `_get_trailing_sl_params`
- –ù–æ –ù–ï –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `TrailingStopLoss`
- TSL –Ω–µ –∑–Ω–∞–µ—Ç –æ –Ω–∏—Ö –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π 2.0

**–†–µ—à–µ–Ω–∏–µ:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ `TrailingStopLoss.__init__`:
   ```python
   self.trail_growth_low_multiplier = trail_growth_low_multiplier or 1.5
   self.trail_growth_medium_multiplier = trail_growth_medium_multiplier or 2.0
   self.trail_growth_high_multiplier = trail_growth_high_multiplier or 3.0
   ```

2. –ü–µ—Ä–µ–¥–∞—Ç—å –∏–∑ orchestrator:
   ```python
   tsl = TrailingStopLoss(
       ...
       trail_growth_low_multiplier=params.get("trail_growth_low_multiplier"),
       trail_growth_medium_multiplier=params.get("trail_growth_medium_multiplier"),
       trail_growth_high_multiplier=params.get("trail_growth_high_multiplier"),
   )
   ```

3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º—É–ª–µ:
   ```python
   if profit_pct_total < 0.005:  # < 0.5%
       trail_multiplier = self.trail_growth_low_multiplier
   elif profit_pct_total < 0.015:  # 0.5-1.5%
       trail_multiplier = self.trail_growth_medium_multiplier
   else:  # > 1.5%
       trail_multiplier = self.trail_growth_high_multiplier
   ```

---

## üìã –°–í–û–î–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–µ–∫—É—â–µ–µ | –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ | –ì–¥–µ –∏–∑–º–µ–Ω–∏—Ç—å | –¢–∏–ø |
|----------|---------|--------------|--------------|-----|
| **TSL –¥–ª—è ranging:** |
| initial_trail | 0.8% | 1.5% | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| max_trail | 2.0% | 3.0% | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| min_profit_to_close | 0.55% | 0.8% | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| extend_time_on_profit | true | false | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| trail_growth.medium_multiplier | 2.0 | 1.5 | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small:** |
| size_at_min | $50 | $80 | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| size_at_max | $150 | $200 | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| min_position_usd | $50 | $80 | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| max_position_usd | $150 | $200 | config_futures.yaml | –ö–æ–Ω—Ñ–∏–≥ |
| **–ö–æ–¥:** |
| –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ | 2.0 (hardcode) | –ò–∑ params | trailing_stop_loss.py | –ö–æ–¥ |
| Partial TP –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | –ù–µ—Ç | –î–æ–±–∞–≤–∏—Ç—å | position_manager.py | –ö–æ–¥ |

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´

**–ì–ª–∞–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. –ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω (2.0) –≤–º–µ—Å—Ç–æ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ (–º–∞–ª–µ–Ω—å–∫–∏–µ)
3. –†–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–º–∏—Å—Å–∏–π
4. Partial TP —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –æ—Ä–¥–µ—Ä–∞

**–ì–ª–∞–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:**
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥: –ø–µ—Ä–µ–¥–∞—Ç—å trail_growth multipliers –≤ TSL –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö
2. –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging –≤ –∫–æ–Ω—Ñ–∏–≥–µ
3. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small –ø—Ä–æ—Ñ–∏–ª—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ
4. –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É Partial TP –≤ –∫–æ–¥

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ!**

---

## üîç –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –ö–û–î–ê: –ì–î–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø –ú–ù–û–ñ–ò–¢–ï–õ–¨

### –ú–µ—Ç–æ–¥ `update()` (—Å—Ç—Ä–æ–∫–∞ 217, 238):
```python
self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * 2,  # ‚ùå –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–û 2.0
    self.max_trail,
)
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–∏—Ç–µ–ª—å 2.0 –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞.

### –ú–µ—Ç–æ–¥ `should_close_position()` (—Å—Ç—Ä–æ–∫–∞ 610+):
```python
regime_multiplier = getattr(self, "regime_multiplier", None) or 1.0
# ...
adjusted_trail = min(
    self.current_trail * effective_regime_multiplier, self.max_trail
)
```
**–ê–Ω–∞–ª–∏–∑:** `regime_multiplier` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ —Å—Ç–æ–ø–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è, –Ω–æ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞—Å—á–µ—Ç `current_trail` –≤ `update()`.

**–í—ã–≤–æ–¥:** 
- `current_trail` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–º 2.0
- `regime_multiplier` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è, –Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∞–º —Ç—Ä–µ–π–ª–∏–Ω–≥
- `trail_growth_*_multiplier` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –Ω–æ –ù–ï –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ TSL –∏ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

---

## üéØ –§–ò–ù–ê–õ–¨–ù–´–ï –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:

1. **–ú–Ω–æ–∂–∏—Ç–µ–ª—å —Ç—Ä–µ–π–ª–∏–Ω–≥–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω –≤ `update()`:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `* 2` –≤–º–µ—Å—Ç–æ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - `trail_growth_*_multiplier` –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –Ω–æ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ TSL
   - –ù—É–∂–Ω–æ: –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ TSL –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ñ–æ—Ä–º—É–ª–µ

2. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ:**
   - `initial_trail` 0.8% —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è ranging (30%+ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
   - `max_trail` 2.0% —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è –æ—Ç–∫–∞—Ç–æ–≤ 2-3%
   - `min_profit_to_close` 0.55% –µ–¥–≤–∞ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ (0.2%)
   - `extend_time_multiplier` –Ω–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–π 1.5

3. **–†–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π —Å–ª–∏—à–∫–æ–º –º–∞–ª—ã:**
   - –ü—Ä–∏ –±–∞–ª–∞–Ω—Å–µ $824: base=$82.40 (–ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è)
   - –ü–æ—Å–ª–µ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π: ~$74-100
   - –ö–æ–º–∏—Å—Å–∏–∏ "—Å—ä–µ–¥–∞—é—Ç" –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –º–∏–∫—Ä–æ-–ø—Ä–∏–±—ã–ª–∏

4. **Partial TP —Å–æ–∑–¥–∞–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –æ—Ä–¥–µ—Ä–∞:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
   - –§–ª–∞–≥ `partial_tp_done` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–æ —ç—Ç–æ–≥–æ

### –†–ï–®–ï–ù–ò–Ø:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥:**
   - –ü–µ—Ä–µ–¥–∞—Ç—å `trail_growth_*_multiplier` –≤ TSL
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –º–µ—Ç–æ–¥–µ `update()` –≤–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ 2.0
   - –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ —É—Ä–æ–≤–Ω—é –ø—Ä–∏–±—ã–ª–∏ (low/medium/high)

2. **–ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥:**
   - –£–≤–µ–ª–∏—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL –¥–ª—è ranging
   - –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small –ø—Ä–æ—Ñ–∏–ª—è
   - –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å `extend_time_multiplier` –¥–ª—è ranging

3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å Partial TP:**
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º (race condition –∑–∞—â–∏—Ç–∞)
   - –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üìä –°–í–û–î–ö–ê: –ß–¢–û –ê–î–ê–ü–¢–ò–í–ù–û, –ß–¢–û –ù–ï–¢

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ê–¥–∞–ø—Ç–∏–≤–Ω–æ? | –ì–¥–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è | –ü—Ä–æ–±–ª–µ–º–∞ |
|----------|------------|-------------------|----------|
| **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π** |
| Balance profile | ‚úÖ –î–∞ | config_futures.yaml | - |
| Regime multiplier | ‚úÖ –î–∞ | config_futures.yaml | - |
| Strength multiplier | ‚úÖ –î–∞ | config_futures.yaml | - |
| Volatility adjustment | ‚úÖ –î–∞ | config_futures.yaml | - |
| **Trailing Stop Loss** |
| initial_trail, max_trail | ‚úÖ –î–∞ | config_futures.yaml | –°–ª–∏—à–∫–æ–º –º–∞–ª—ã –¥–ª—è ranging |
| min_profit_to_close | ‚úÖ –î–∞ | config_futures.yaml | –°–ª–∏—à–∫–æ–º –º–∞–ª (0.55%) |
| min_holding_minutes | ‚úÖ –î–∞ | config_futures.yaml | - |
| extend_time_multiplier | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | config_futures.yaml | –ù–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è ranging |
| trail_growth multipliers | ‚ùå –ù–µ—Ç | config_futures.yaml | –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è |
| –ú–Ω–æ–∂–∏—Ç–µ–ª—å –≤ —Ñ–æ—Ä–º—É–ª–µ | ‚ùå –ù–µ—Ç | - | –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω 2.0 –≤ –∫–æ–¥–µ |

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### 1. –ò–°–ü–†–ê–í–ò–¢–¨ –ö–û–î (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
- [ ] –ü–µ—Ä–µ–¥–∞—Ç—å `trail_growth_*_multiplier` –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä TSL
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –≤ –º–µ—Ç–æ–¥–µ `update()` –≤–º–µ—Å—Ç–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–≥–æ 2.0
- [ ] –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É Partial TP –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤

### 2. –ò–ó–ú–ï–ù–ò–¢–¨ –ö–û–ù–§–ò–ì (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å `initial_trail` –¥–ª—è ranging: 0.008 ‚Üí 0.015
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å `max_trail` –¥–ª—è ranging: 0.02 ‚Üí 0.03
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å `min_profit_to_close` –¥–ª—è ranging: 0.0055 ‚Üí 0.008
- [ ] –û—Ç–∫–ª—é—á–∏—Ç—å `extend_time_on_profit` –¥–ª—è ranging: true ‚Üí false
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å `trail_growth.medium_multiplier` –¥–ª—è ranging: 2.0 ‚Üí 1.5
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π –¥–ª—è small: size_at_min 50 ‚Üí 80, size_at_max 150 ‚Üí 200

### 3. –ü–†–û–í–ï–†–ò–¢–¨ –†–ï–ó–£–õ–¨–¢–ê–¢–´:
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –±–æ–ª—å—à–µ–π –ø—Ä–∏–±—ã–ª—å—é
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö Partial TP –æ—Ä–¥–µ—Ä–æ–≤

---

**–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å - –Ω–∏—á–µ–≥–æ –Ω–µ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ!**

