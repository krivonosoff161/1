# –ü–û–õ–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô –ü–û –ê–ù–ê–õ–ò–ó–£

**–î–∞—Ç–∞:** 28.12.2025  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å —Ä–µ–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º –ø—Ä–æ–µ–∫—Ç–∞

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π](#1-–ø—Ä–æ–≤–µ—Ä–∫–∞-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π)
2. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω–æ](#2-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-1-–∫—Ä–∏—Ç–∏—á–Ω–æ)
3. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω–æ](#3-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-2-–≤–∞–∂–Ω–æ)
4. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ](#4-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç-3-–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ)
5. [–ò—Ç–æ–≥–æ–≤—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π](#5-–∏—Ç–æ–≥–æ–≤—ã–π-–ø–ª–∞–Ω-–¥–µ–π—Å—Ç–≤–∏–π)

---

## 1. –ü–†–û–í–ï–†–ö–ê –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ô

### ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ:

1. **#1 (–¢–∏–ø—ã –≤ ExitAnalyzer)** - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
   - –í `exit_analyzer.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `_to_float()` –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –í `parameter_provider.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤

2. **#2 (check_safety)** - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
   - –í `margin_monitor.py` –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `check_safety()` —Å `getattr()` –¥–ª—è `RiskConfig`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `'RiskConfig' object has no attribute 'get'`

3. **#10 (PnL —Ä–∞—Å—á–µ—Ç—ã)** - ‚úÖ **–†–ï–®–ï–ù–û**
   - –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã PnL –æ—Ç –º–∞—Ä–∂–∏, –Ω–µ –æ—Ç —Ü–µ–Ω—ã
   - 8 –≤—ã–∑–æ–≤–æ–≤ `get_profit_pct()` –ø–µ—Ä–µ–¥–∞—é—Ç `margin_used` –∏ `unrealized_pnl`

4. **#11 (WS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)** - ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ WebSocket –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –≤ `futures_client.py`
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `orchestrator.py` –∏ `websocket_coordinator.py`

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

---

## 2. –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ö–†–ò–¢–ò–ß–ù–û

### üî¥ #12: ATR=None –æ—à–∏–±–∫–∏

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û** - ATRProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –Ω–æ –µ—Å—Ç—å fallback —á–µ—Ä–µ–∑ IndicatorManager

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `exit_analyzer.py` —Å—Ç—Ä–æ–∫–∞ 1128-1129: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `self.atr_provider.get_atr(symbol, fallback=None)`
- –í `exit_analyzer.py` —Å—Ç—Ä–æ–∫–∞ 1163-1175: –µ—Å—Ç—å fallback —á–µ—Ä–µ–∑ `indicator_manager.get_indicator('atr')` - **–≠–¢–û –ü–†–û–ë–õ–ï–ú–ê!**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```python
# ‚ùå –ü–†–û–ë–õ–ï–ú–ê –≤ exit_analyzer.py —Å—Ç—Ä–æ–∫–∞ ~1168:
if hasattr(self.orchestrator, "signal_generator"):
    indicator_manager = getattr(
        self.orchestrator.signal_generator, "indicator_manager", None
    )
    if indicator_manager:
        # ‚ùå IndicatorManager –Ω–µ –∏–º–µ–µ—Ç –º–µ—Ç–æ–¥–∞ get_indicator()
        atr_result = indicator_manager.get_indicator('atr')  # –û–®–ò–ë–ö–ê!
```

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£–±—Ä–∞—Ç—å fallback —á–µ—Ä–µ–∑ IndicatorManager, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ ATRProvider
# –í exit_analyzer.py _get_sl_percent (~1163-1175):
# –£–î–ê–õ–ò–¢–¨ –≤–µ—Å—å –±–ª–æ–∫ —Å indicator_manager.get_indicator()
# –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:
if atr_1m is None:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    logger.warning(
        f"‚ö†Ô∏è [ATR_SL] {symbol}: ATR –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SL={sl_percent:.2f}%"
    )
    return sl_percent
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`  
**–°—Ç—Ä–æ–∫–∏:** 1163-1175 (—É–¥–∞–ª–∏—Ç—å fallback —á–µ—Ä–µ–∑ IndicatorManager)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ

---

### üî¥ #9: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û** - `_block_stats` –¥–æ–±–∞–≤–ª–µ–Ω, –Ω–æ –Ω–µ—Ç –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `signal_coordinator.py` —Å—Ç—Ä–æ–∫–∞ 137-144: `_block_stats` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
- –í `signal_coordinator.py` —Å—Ç—Ä–æ–∫–∞ 177, 194: —Å—á–µ—Ç—á–∏–∫–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è
- **–ù–û:** –ù–µ—Ç –º–µ—Ç–æ–¥–∞ `_log_block_stats()` –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `check_for_signals()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ WebSocket –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä–∞, –Ω–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏
- –í –ª–æ–≥–∞—Ö –Ω–µ—Ç –∏—Ç–æ–≥–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≤ signal_coordinator.py –ø–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞ check_for_signals (~1500):
def _log_block_stats(self):
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫"""
    total_blocked = sum(self._block_stats.values())
    if total_blocked > 0:
        logger.info(
            f"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ (–≤—Å–µ–≥–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: {total_blocked}):\n"
            f"   - Circuit breaker: {self._block_stats['circuit_breaker']}\n"
            f"   - Side blocked: {self._block_stats['side_blocked']}\n"
            f"   - Low strength: {self._block_stats['low_strength']}\n"
            f"   - Existing position: {self._block_stats['existing_position']}\n"
            f"   - Margin unsafe: {self._block_stats['margin_unsafe']}\n"
            f"   - Other: {self._block_stats['other']}"
        )

# ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≤—ã–∑–æ–≤ –≤ –∫–æ–Ω—Ü–µ process_signals (~250):
async def process_signals(self, signals: List[Dict[str, Any]]):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    # ‚úÖ –ù–û–í–û–ï: –õ–æ–≥–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
    self._log_block_stats()
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`  
**–°—Ç—Ä–æ–∫–∏:** 
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_log_block_stats()` –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ ~1500
- –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `self._log_block_stats()` –≤ –∫–æ–Ω—Ü–µ `process_signals()` (~250)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ

---

## 3. –ü–†–ò–û–†–ò–¢–ï–¢ 2: –í–ê–ñ–ù–û

### üü° #13: Sync delay –ø–æ–∑–∏—Ü–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ß–ê–°–¢–ò–ß–ù–û** - –µ—Å—Ç—å fallback, –Ω–æ –Ω–µ—Ç retry –ª–æ–≥–∏–∫–∏

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `orchestrator.py` —Å—Ç—Ä–æ–∫–∞ 1866: `_sync_positions_with_exchange()` —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º
- –í `entry_manager.py` —Å—Ç—Ä–æ–∫–∞ 15056-15058: –µ—Å—Ç—å retry —á–µ—Ä–µ–∑ 0.5 —Å–µ–∫, –Ω–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
- –í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω–æ: –ø–æ–∑–∏—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ —Å—Ä–∞–∑—É, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback `entry_price`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Retry —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ (0.5 —Å–µ–∫)
- –ù–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ —Å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–µ–π—Å—è –∑–∞–¥–µ—Ä–∂–∫–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –≤ entry_manager.py open_position_with_size (~15056):
# –ó–ê–ú–ï–ù–ò–¢–¨:
# ‚ö†Ô∏è EntryManager: –ü–æ–∑–∏—Ü–∏—è ETH-USDT –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ —Å—Ä–∞–∑—É, –∂–¥—ë–º 0.5 —Å–µ–∫ –∏ –¥–µ–ª–∞–µ–º retry...
# await asyncio.sleep(0.5)
# retry_positions = await self.client.get_positions()

# –ù–ê:
max_retries = 3
retry_delays = [0.5, 1.0, 2.0]  # –£–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–µ—Å—è –∑–∞–¥–µ—Ä–∂–∫–∏
for retry_num in range(max_retries):
    await asyncio.sleep(retry_delays[retry_num])
    retry_positions = await self.client.get_positions()
    # ... –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ ...
    if position_found:
        break
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/entry_manager.py`  
**–°—Ç—Ä–æ–∫–∏:** ~15056-15058 (—É–ª—É—á—à–∏—Ç—å retry –ª–æ–≥–∏–∫—É)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### üü° #4: –°–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä—ã–π SL

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `config_futures.yaml`: `sl_atr_multiplier` —É–≤–µ–ª–∏—á–µ–Ω (ranging: 2.0, trending: 0.8, choppy: 0.7)
- –í `exit_analyzer.py` —Å—Ç—Ä–æ–∫–∞ 3190: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `_get_sl_percent()` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π `min_holding_minutes`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ `min_holding_minutes` —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ SL
- –í `exit_analyzer.py` —Å—Ç—Ä–æ–∫–∞ ~3195: –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ `smart_close_threshold`, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `min_holding_minutes`

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ü–†–û–í–ï–†–ò–¢–¨ –≤ exit_analyzer.py _generate_exit_for_ranging (~3190):
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π SL –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ min_holding_minutes:
min_holding_minutes = self.parameter_provider.get_exit_params(symbol, regime).get("min_holding_minutes", 0.5)
if minutes_in_position < min_holding_minutes:
    logger.debug(f"‚è≥ {symbol}: –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏ {minutes_in_position:.2f} –º–∏–Ω < min_holding {min_holding_minutes:.2f} –º–∏–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º SL")
    return {"action": "hold", "reason": "min_holding_not_reached"}
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`  
**–°—Ç—Ä–æ–∫–∏:** ~3190 (–¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É min_holding_minutes –ø–µ—Ä–µ–¥ SL)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### üü° #5: –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–Ω–∏–∂–µ–Ω—ã, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `config_futures.yaml` —Å—Ç—Ä–æ–∫–∞ 34-36: `min_signal_strength=0.65`, `min_adx=16.0` (—Å–Ω–∏–∂–µ–Ω–æ)
- –í `signal_generator.py` —Å—Ç—Ä–æ–∫–∞ ~1404: `generate_signals()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `_filter_and_rank_signals()`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `_filter_and_rank_signals()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `parameter_provider`, –∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ü–†–û–í–ï–†–ò–¢–¨ –≤ signal_generator.py _filter_and_rank_signals (~end):
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è parameter_provider:
if self.parameter_provider:
    regime_params = self.parameter_provider.get_regime_params(symbol, regime)
    min_signal_strength = regime_params.get("min_signal_strength", 0.65)
    min_adx = regime_params.get("min_adx", 16.0)
else:
    # Fallback –Ω–∞ –∫–æ–Ω—Ñ–∏–≥
    min_signal_strength = getattr(self.scalping_config, "min_signal_strength", 0.65)
    min_adx = getattr(self.scalping_config, "min_adx", 16.0)
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`  
**–°—Ç—Ä–æ–∫–∏:** –ú–µ—Ç–æ–¥ `_filter_and_rank_signals()` (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ parameter_provider)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### üü° #7: Min_holding_minutes –≤ TP check

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parameter_provider`

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `position_manager.py` —Å—Ç—Ä–æ–∫–∞ 2283-2289: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `parameter_provider.get_exit_params()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `min_holding_minutes`

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### üü° #8: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π Profit Harvesting

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑–º–µ–Ω–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `config_futures.yaml`: `ph_threshold_percent` —É–≤–µ–ª–∏—á–µ–Ω (ranging: 1.2%, trending: 3.0%, choppy: 1.5%)
- –í `position_manager.py` —Å—Ç—Ä–æ–∫–∞ 1648-1724: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π PH –æ—Ç –º–∞—Ä–∂–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `ph_threshold_percent` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ PH

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ü–†–û–í–ï–†–ò–¢–¨ –≤ position_manager.py _check_profit_harvesting (~1700):
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ ph_threshold_percent –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–∏—Ç–∞–µ—Ç—Å—è:
ph_threshold_percent = float(regime_config.get("ph_threshold_percent", 0.0))
# –ò —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Net PnL (–ø–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–π) –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
if ph_threshold_type == "margin_percent":
    net_pnl_percent = (unrealized_pnl / margin_used) * 100
    if net_pnl_percent >= ph_threshold_percent:  # ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º Net PnL
        return True
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–°—Ç—Ä–æ–∫–∏:** ~1700-1750 (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Net PnL –¥–ª—è PH)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

### üü° #14: Slippage –Ω–µ—É—á—Ç—ë–Ω –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø** - slippage_guard –µ—Å—Ç—å, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `order_executor.py` —Å—Ç—Ä–æ–∫–∞ ~500: –µ—Å—Ç—å `_place_order_with_retry()` —Å —É—á–µ—Ç–æ–º slippage
- –í `signal_generator.py` —Å—Ç—Ä–æ–∫–∞ 1471: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `current_price` –∏–∑ —Å–≤–µ—á–µ–π, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è slippage

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –°–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å —Ü–µ–Ω–æ–π –∏–∑ —Å–≤–µ—á–µ–π, –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ–µ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ
- –ü—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–∞ slippage —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è, –Ω–æ —Ü–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–µ–π

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –î–û–ë–ê–í–ò–¢–¨ –≤ signal_generator.py generate_signals (~1471):
# –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è current_price:
current_price = market_data.ohlcv_data[-1].close

# ‚úÖ –ù–û–í–û–ï: –£—á–∏—Ç—ã–≤–∞–µ–º slippage –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞
if hasattr(self, "slippage_guard") and self.slippage_guard:
    slippage_pct = self.slippage_guard.get_slippage_estimate(symbol) or 0.0
    # –î–ª—è LONG: —É–º–µ–Ω—å—à–∞–µ–º —Ü–µ–Ω—É –≤—Ö–æ–¥–∞ –Ω–∞ slippage (–ø–æ–∫—É–ø–∞–µ–º –¥–æ—Ä–æ–∂–µ)
    # –î–ª—è SHORT: —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ü–µ–Ω—É –≤—Ö–æ–¥–∞ –Ω–∞ slippage (–ø—Ä–æ–¥–∞–µ–º –¥–µ—à–µ–≤–ª–µ)
    if signal.get("side") == "buy":
        adjusted_price = current_price * (1 + slippage_pct / 100)
    else:  # sell
        adjusted_price = current_price * (1 - slippage_pct / 100)
    signal["price"] = adjusted_price
    logger.debug(f"üí∞ {symbol}: –¶–µ–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞ slippage {slippage_pct:.3f}%: {current_price:.2f} ‚Üí {adjusted_price:.2f}")
else:
    signal["price"] = current_price
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`  
**–°—Ç—Ä–æ–∫–∏:** ~1471-1550 (–¥–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç slippage –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ

---

## 4. –ü–†–ò–û–†–ò–¢–ï–¢ 3: –ñ–ï–õ–ê–¢–ï–õ–¨–ù–û

### üü¢ #6: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** - –≤–µ—Å–∞ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ `direction_analyzer.py`

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `direction_analyzer.py` —Å—Ç—Ä–æ–∫–∞ 31-37: `INDICATOR_WEIGHTS` –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
  - `adx`: 0.50 (—É–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.40)
  - `price_action`: 0.05 (—É–º–µ–Ω—å—à–µ–Ω–æ —Å 0.10)
  - `volume`: 0.05 (—É–º–µ–Ω—å—à–µ–Ω–æ —Å 0.10)
- –í `direction_analyzer.py` —Å—Ç—Ä–æ–∫–∞ 57: –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `regime` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫–æ–Ω—Ç—Ä-—Ç—Ä–µ–Ω–¥–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### üü¢ #15: TALib warnings –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø** - warnings –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ IndicatorManager

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –í `talib_wrapper.py` —Å—Ç—Ä–æ–∫–∞ 41-45: –ø—Ä–∏ –æ—à–∏–±–∫–µ TALib –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è warning –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback
- –í `base.py` —Å—Ç—Ä–æ–∫–∞ 423-425: –ø—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `IndicatorResult(name, 0.0, "ERROR")`

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Warnings –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ `IndicatorManager.calculate_all()`
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `ERROR`, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Ä–∞—Å—á–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –≤ base.py IndicatorManager.calculate_all (~423):
for name, indicator in self.indicators.items():
    try:
        if isinstance(indicator, ATR):
            result = indicator.calculate(highs, lows, closes)
        elif isinstance(indicator, VolumeIndicator):
            result = indicator.calculate(volumes)
        else:
            result = indicator.calculate(closes)
        
        # ‚úÖ –ù–û–í–û–ï: –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç ERROR, –ø—Ä–æ–±—É–µ–º fallback —Ä–∞—Å—á–µ—Ç
        if result.signal == "ERROR" or result.value == 0.0:
            # Fallback: –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –¥–ª—è closes
            if name.startswith("SMA") or name.startswith("EMA"):
                fallback_value = sum(closes[-indicator.period:]) / len(closes[-indicator.period:])
                result = IndicatorResult(name, fallback_value, "NEUTRAL")
                logger.debug(f"‚ö†Ô∏è IndicatorManager: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω fallback –¥–ª—è {name}: {fallback_value:.4f}")
        
        results[name] = result
    except Exception as e:
        logger.warning(f"‚ö†Ô∏è IndicatorManager: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ {name}: {e}")
        # Fallback –Ω–∞ –ø—Ä–æ—Å—Ç–æ–µ —Å—Ä–µ–¥–Ω–µ–µ
        if name.startswith("SMA") or name.startswith("EMA"):
            fallback_value = sum(closes[-20:]) / 20 if len(closes) >= 20 else closes[-1]
            results[name] = IndicatorResult(name, fallback_value, "NEUTRAL")
        else:
            results[name] = IndicatorResult(name, 0.0, "ERROR")
```

**–§–∞–π–ª:** `src/indicators/base.py`  
**–°—Ç—Ä–æ–∫–∏:** 413-427 (—É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å fallback)  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ

---

## 5. –ò–¢–û–ì–û–í–´–ô –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

1. **#12: –£–±—Ä–∞—Ç—å fallback —á–µ—Ä–µ–∑ IndicatorManager.get_indicator()**
   - –§–∞–π–ª: `src/strategies/scalping/futures/positions/exit_analyzer.py`
   - –°—Ç—Ä–æ–∫–∏: 1163-1175
   - –î–µ–π—Å—Ç–≤–∏–µ: –£–¥–∞–ª–∏—Ç—å –±–ª–æ–∫ —Å `indicator_manager.get_indicator('atr')`
   - –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ ATRProvider –∏ fallback –Ω–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SL

2. **#9: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**
   - –§–∞–π–ª: `src/strategies/scalping/futures/coordinators/signal_coordinator.py`
   - –°—Ç—Ä–æ–∫–∏: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_log_block_stats()` –ø–æ—Å–ª–µ ~1500
   - –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –≤ –∫–æ–Ω—Ü–µ `process_signals()` (~250)

### –≠—Ç–∞–ø 2: –í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Å–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

3. **#13: –£–ª—É—á—à–∏—Ç—å retry –ª–æ–≥–∏–∫—É –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π**
   - –§–∞–π–ª: `src/strategies/scalping/futures/positions/entry_manager.py`
   - –°—Ç—Ä–æ–∫–∏: ~15056-15058
   - –î–µ–π—Å—Ç–≤–∏–µ: –ó–∞–º–µ–Ω–∏—Ç—å –æ–¥–∏–Ω retry –Ω–∞ 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–º–∏—Å—è –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏

4. **#4: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É min_holding_minutes –ø–µ—Ä–µ–¥ SL**
   - –§–∞–π–ª: `src/strategies/scalping/futures/positions/exit_analyzer.py`
   - –°—Ç—Ä–æ–∫–∏: ~3190
   - –î–µ–π—Å—Ç–≤–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `minutes_in_position < min_holding_minutes` –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π SL

5. **#14: –£—á–µ—Å—Ç—å slippage –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤**
   - –§–∞–π–ª: `src/strategies/scalping/futures/signal_generator.py`
   - –°—Ç—Ä–æ–∫–∏: ~1471-1550
   - –î–µ–π—Å—Ç–≤–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫—É —Ü–µ–Ω—ã —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ slippage

6. **#5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ parameter_provider –≤ _filter_and_rank_signals**
   - –§–∞–π–ª: `src/strategies/scalping/futures/signal_generator.py`
   - –°—Ç—Ä–æ–∫–∏: –ú–µ—Ç–æ–¥ `_filter_and_rank_signals()`
   - –î–µ–π—Å—Ç–≤–∏–µ: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ `parameter_provider`, –∞ –Ω–µ —Ö–∞—Ä–¥–∫–æ–¥

7. **#8: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Net PnL –¥–ª—è PH**
   - –§–∞–π–ª: `src/strategies/scalping/futures/position_manager.py`
   - –°—Ç—Ä–æ–∫–∏: ~1700-1750
   - –î–µ–π—Å—Ç–≤–∏–µ: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ PH —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å Net PnL (–ø–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–π)

### –≠—Ç–∞–ø 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

8. **#15: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É TALib warnings**
   - –§–∞–π–ª: `src/indicators/base.py`
   - –°—Ç—Ä–æ–∫–∏: 413-427
   - –î–µ–π—Å—Ç–≤–∏–µ: –î–æ–±–∞–≤–∏—Ç—å fallback —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö TALib

---

## üìù –ó–ê–ú–ï–¢–ö–ò –ü–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–ú

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

1. **ATRProvider –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `exit_analyzer.py` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ATR
2. **ParameterProvider –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. **Min_holding_minutes –≤ TP** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ `parameter_provider` –≤ `position_manager.py`
4. **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤** - –≤–µ—Å–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤ `direction_analyzer.py`
5. **MarginMonitor.check_safety()** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å `RiskConfig.get()`

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:

1. **Fallback —á–µ—Ä–µ–∑ IndicatorManager** - –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ ATRProvider
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
3. **Retry –ª–æ–≥–∏–∫–∞** - –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π
4. **Slippage –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö** - –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
5. **TALib warnings** - –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ —Å fallback

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

1. **–°—Ä–æ—á–Ω–æ (—Å–µ–≥–æ–¥–Ω—è):**
   - #12: –£–±—Ä–∞—Ç—å IndicatorManager.get_indicator() fallback
   - #9: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

2. **–í–∞–∂–Ω–æ (—ç—Ç–∞ –Ω–µ–¥–µ–ª—è):**
   - #13: –£–ª—É—á—à–∏—Ç—å retry –ª–æ–≥–∏–∫—É
   - #4: –ü—Ä–æ–≤–µ—Ä–∫–∞ min_holding_minutes –ø–µ—Ä–µ–¥ SL
   - #14: –£—á–µ—Ç slippage –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö

3. **–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ (—Å–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è):**
   - #15: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É TALib warnings

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 28.12.2025  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

