# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: Leverage –∏ —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –∏–∑-–∑–∞ —Ç–æ–≥–æ, —á—Ç–æ leverage –Ω–∞ –±–∏—Ä–∂–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è:
- **BTC-USDT**: $52.81 –≤–º–µ—Å—Ç–æ $122.28 (-57%)
- **SOL-USDT**: $43.55 –≤–º–µ—Å—Ç–æ $91.71 (-53%)

## –ü—Ä–∏—á–∏–Ω–∞

1. ‚úÖ **–í –∫–æ–Ω—Ñ–∏–≥–µ**: leverage = 5x
2. ‚ùå **–ù–∞ –±–∏—Ä–∂–µ**: leverage = 3x (—Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
3. ‚ùå **–í sandbox mode**: leverage –ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª—Å—è –Ω–∞ –±–∏—Ä–∂–µ
4. ‚ùå **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å leverage = 5x, –Ω–æ –Ω–∞ –±–∏—Ä–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è leverage = 3x

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ leverage –≤ sandbox mode ‚úÖ

**–§–∞–π–ª**: `src/strategies/scalping/futures/orchestrator.py`

**–ë—ã–ª–æ**:
```python
if not self.client.sandbox:
    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º leverage —Ç–æ–ª—å–∫–æ –≤ production
    await self.client.set_leverage(symbol, leverage)
else:
    logger.info("Sandbox mode: –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É leverage")
```

**–°—Ç–∞–ª–æ**:
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º leverage –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–≤–∫–ª—é—á–∞—è sandbox)
leverage_config = getattr(self.scalping_config, "leverage", None)
if leverage_config is None or leverage_config <= 0:
    logger.warning(f"‚ö†Ô∏è leverage –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º 3 (fallback)")
    leverage_config = 3

for symbol in self.scalping_config.symbols:
    try:
        # ‚úÖ –í–ê–†–ò–ê–ù–¢ B: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º leverage –¥–∞–∂–µ –≤ sandbox mode
        await self.client.set_leverage(symbol, leverage_config)
        logger.info(f"‚úÖ –ü–ª–µ—á–æ {leverage_config}x —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è {symbol} (sandbox={self.client.sandbox})")
    except Exception as e:
        logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–µ—á–æ {leverage_config}x –¥–ª—è {symbol}: {e}")
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ leverage –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏ ‚úÖ

**–§–∞–π–ª**: `src/strategies/scalping/futures/orchestrator.py`

**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º leverage –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
# –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–∞ –±–∏—Ä–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π leverage
leverage_config = getattr(self.scalping_config, "leverage", None)
if leverage_config is None or leverage_config <= 0:
    logger.warning(f"‚ö†Ô∏è leverage –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è {symbol}, –∏—Å–ø–æ–ª—å–∑—É–µ–º 3 (fallback)")
    leverage_config = 3
try:
    await self.client.set_leverage(symbol, leverage_config)
    logger.debug(f"‚úÖ –ü–ª–µ—á–æ {leverage_config}x –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ/—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è {symbol} –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏")
except Exception as e:
    logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–µ—á–æ {leverage_config}x –¥–ª—è {symbol} –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º: {e}")
    # –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏, –Ω–æ –ª–æ–≥–∏—Ä—É–µ–º –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. ‚úÖ **Leverage —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è** –¥–∞–∂–µ –≤ sandbox mode –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
2. ‚úÖ **Leverage –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è** –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
3. ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏** –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç–∞–º:
   - **BTC**: ~$122 (–≤–º–µ—Å—Ç–æ $52) - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ 2.3 —Ä–∞–∑–∞
   - **SOL**: ~$92 (–≤–º–µ—Å—Ç–æ $43) - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ 2.1 —Ä–∞–∑–∞

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞** —Å –Ω–æ–≤—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏** –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É leverage:
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ –ü–ª–µ—á–æ 5x —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è BTC-USDT (sandbox=True)`
   - –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `‚úÖ –ü–ª–µ—á–æ 5x —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è SOL-USDT (sandbox=True)`
3. ‚ö†Ô∏è **–°—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏** (–æ—Ç–∫—Ä—ã—Ç—ã–µ —Å leverage = 3x):
   - –ú–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –≤—Ä—É—á–Ω—É—é
   - –ò–ª–∏ –ø–æ–¥–æ–∂–¥–∞—Ç—å, –ø–æ–∫–∞ –∑–∞–∫—Ä–æ—é—Ç—Å—è –ø–æ TP/SL
4. ‚úÖ **–ù–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏** –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏

## –í–∞–∂–Ω–æ

- ‚ö†Ô∏è **–°—Ç–∞—Ä—ã–µ –ø–æ–∑–∏—Ü–∏–∏** –±—ã–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã —Å–æ —Å—Ç–∞—Ä—ã–º leverage (3x) –∏ –º–∞–ª–µ–Ω—å–∫–∏–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- ‚úÖ **–ù–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏** –±—É–¥—É—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è —Å –Ω–æ–≤—ã–º leverage (5x) –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏
- üìä **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π** —É–≤–µ–ª–∏—á–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ 2.3 —Ä–∞–∑–∞

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ leverage
Get-Content "logs\futures\futures_main_2025-11-10.log" | Select-String -Pattern "–ü–ª–µ—á–æ.*—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ|set_leverage"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π
Get-Content "logs\futures\futures_main_2025-11-10.log" | Select-String -Pattern "–†–∞—Å—á–µ—Ç.*balance|notional.*BTC|notional.*SOL"
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í sandbox mode API –º–æ–∂–µ—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É leverage, –Ω–æ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ
- –ï—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ —É–¥–∞–µ—Ç—Å—è, —ç—Ç–æ –±—É–¥–µ—Ç –∑–∞–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–æ, –Ω–æ –Ω–µ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã leverage –Ω–∞ –±–∏—Ä–∂–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª leverage –≤ –∫–æ–Ω—Ñ–∏–≥–µ

