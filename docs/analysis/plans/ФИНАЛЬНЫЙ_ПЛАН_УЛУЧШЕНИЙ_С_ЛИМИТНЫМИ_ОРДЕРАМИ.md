# üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –£–õ–£–ß–®–ï–ù–ò–ô –ë–û–¢–ê

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-14  
**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π –±–æ—Ç–∞
- –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç—å–∏ Momentum Trading Strategy
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–¶–µ–ª—å:** –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –µ–¥–∏–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´ –ò –°–¢–†–£–ö–¢–£–†–ê –ü–õ–ê–ù–ê

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö–†–ò–¢–ò–ß–ù–û (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
- **–ö–†–ò–¢–ò–ß–ù–û:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ (–±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞!)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º Trailing Stop Loss
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Å—Ç–∞—Ç—å–∏ Momentum Trading

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–ê–ñ–ù–û (–±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)
- –£–ª—É—á—à–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π offset, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å)
- –£–ª—É—á—à–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ Trailing Stop Loss
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ —Å—Ç–∞—Ç—å–∏
- –£–ª—É—á—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

---

## üìã –ü–†–ò–û–†–ò–¢–ï–¢ 1: –ö–†–ò–¢–ò–ß–ù–û (–ù–ï–ú–ï–î–õ–ï–ù–ù–û)

### üî• 1.1. –ò–°–ü–†–ê–í–ò–¢–¨ –ö–†–ò–¢–ò–ß–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –õ–ò–ú–ò–¢–ù–´–• –û–†–î–ï–†–û–í

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –≤–∏—Å—è—Ç 1-2 —á–∞—Å–∞, —Ç–µ—Ä—è–µ—Ç—Å—è —Ä—ã–Ω–æ–∫, —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è

#### 1.1.1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è SELL (–ö–†–ò–¢–ò–ß–ù–û!)

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:307-309`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª—è SELL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `best_ask` –≤–º–µ—Å—Ç–æ `best_bid`

**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):
else:  # sell
    if best_ask > 0:
        limit_price = best_ask * 0.999  # -0.1% –æ—Ç best ask

# ‚úÖ –°–¢–ê–õ–û:
else:  # sell
    if best_bid > 0:
        # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è SELL –∏—Å–ø–æ–ª—å–∑—É–µ–º best_bid (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)
        limit_price = best_bid  # –ü–æ —Ü–µ–Ω–µ best bid = –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
        # –ò–ª–∏: limit_price = best_bid * 0.999  # -0.1% –Ω–∏–∂–µ best bid –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏
    else:
        limit_price = current_price * 0.999
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ SELL –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ü–µ–Ω–µ
- ‚úÖ –û—Ä–¥–µ—Ä–∞ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ

---

#### 1.1.2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å offset –¥–ª—è BUY (–ö–†–ò–¢–ò–ß–ù–û!)

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:265-266`  
**–ü—Ä–æ–±–ª–µ–º–∞:** Offset -0.1% —Å–ª–∏—à–∫–æ–º –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π, –æ—Ä–¥–µ—Ä–∞ –≤–∏—Å—è—Ç —á–∞—Å–∞–º–∏

**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û:
if best_ask > 0:
    limit_price = best_ask * 0.999  # -0.1% –æ—Ç best ask (—Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ!)

# ‚úÖ –°–¢–ê–õ–û:
if best_ask > 0:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è BUY –∏—Å–ø–æ–ª—å–∑—É–µ–º best_ask (–ø–æ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ = –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
    limit_price = best_ask  # –ü–æ —Ü–µ–Ω–µ best ask = –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
    # –ò–ª–∏: limit_price = best_ask * 1.001  # +0.1% –≤—ã—à–µ best ask (–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
else:
    limit_price = current_price
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ BUY –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –±–ª–∏–∂–µ –∫ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ
- ‚úÖ –û—Ä–¥–µ—Ä–∞ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ —Å–µ–∫—É–Ω–¥—ã, –∞ –Ω–µ —á–∞—Å—ã

---

#### 1.1.3. –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ—Ç–º–µ–Ω—É –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
order_executor:
  limit_order:
    max_wait_seconds: 60  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ (60 —Å–µ–∫)
    auto_cancel_enabled: true  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞
    auto_replace_enabled: true  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–∞ —Å –Ω–æ–≤–æ–π —Ü–µ–Ω–æ–π
    replace_with_market: true  # –ó–∞–º–µ–Ω—è—Ç—å –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:**
```python
async def _monitor_limit_orders(self):
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –∏ –∏—Ö –æ—Ç–º–µ–Ω–∞/–∑–∞–º–µ–Ω–∞ –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞"""
    try:
        limit_order_config = getattr(self.scalping_config, "order_executor", {}).get("limit_order", {})
        max_wait = limit_order_config.get("max_wait_seconds", 60)
        auto_cancel = limit_order_config.get("auto_cancel_enabled", True)
        replace_with_market = limit_order_config.get("replace_with_market", True)
        
        # –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ
        for symbol in self.scalping_config.symbols:
            try:
                active_orders = await self.client.get_active_orders(symbol)
                
                for order in active_orders:
                    order_id = order.get("ordId")
                    order_type = order.get("ordType", "")
                    state = order.get("state", "")
                    
                    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª–Ω–µ–Ω—ã
                    if order_type == "limit" and state == "live":
                        # –ü–æ–ª—É—á–∞–µ–º –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–¥–µ—Ä–∞
                        c_time = order.get("cTime")
                        if c_time:
                            order_time = datetime.fromtimestamp(int(c_time) / 1000)
                            wait_time = (datetime.now() - order_time).total_seconds()
                            
                            if wait_time > max_wait:
                                logger.warning(
                                    f"‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä {order_id} –≤–∏—Å–∏—Ç {wait_time:.0f} —Å–µ–∫ "
                                    f"(–ª–∏–º–∏—Ç: {max_wait} —Å–µ–∫), –æ—Ç–º–µ–Ω—è–µ–º..."
                                )
                                
                                # –û—Ç–º–µ–Ω—è–µ–º –æ—Ä–¥–µ—Ä
                                if auto_cancel:
                                    await self.order_executor.cancel_order(order_id, symbol)
                                
                                # –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä, –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ
                                if replace_with_market:
                                    side = order.get("side", "").lower()
                                    size = float(order.get("sz", "0"))
                                    
                                    if size > 0 and side in ["buy", "sell"]:
                                        logger.info(
                                            f"üìà –†–∞–∑–º–µ—â–∞–µ–º —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä –≤–º–µ—Å—Ç–æ –∑–∞–≤–∏—Å—à–µ–≥–æ –ª–∏–º–∏—Ç–Ω–æ–≥–æ: "
                                            f"{symbol} {side} {size:.6f}"
                                        )
                                        result = await self.order_executor._place_market_order(
                                            symbol, side, size
                                        )
                                        if result.get("success"):
                                            logger.info(
                                                f"‚úÖ –†—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â–µ–Ω –≤–º–µ—Å—Ç–æ –ª–∏–º–∏—Ç–Ω–æ–≥–æ: {result.get('order_id')}"
                                            )
                            
            except Exception as e:
                logger.debug(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ä–¥–µ—Ä–æ–≤ –¥–ª—è {symbol}: {e}")
                continue
                
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤: {e}")
```

**–î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª:**
```python
# –í –º–µ—Ç–æ–¥–µ _main_trading_loop –∏–ª–∏ _manage_positions
async def _main_trading_loop(self):
    while self.is_running:
        try:
            # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
            
            # ‚úÖ –ù–û–í–û–ï: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
            await self._monitor_limit_orders()
            
            # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –≤ —Ç–æ—Ä–≥–æ–≤–æ–º —Ü–∏–∫–ª–µ: {e}")
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ 60 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ó–∞–≤–∏—Å—à–∏–µ –æ—Ä–¥–µ—Ä–∞ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–µ
- ‚úÖ –°–∏–≥–Ω–∞–ª—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –∏–∑-–∑–∞ –∑–∞–≤–∏—Å—à–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤

---

### 1.2. –í—ã–Ω–µ—Å—Ç–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥

#### 1.2.1. –ö–æ–º–∏—Å—Å–∏—è –∏ Fees

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
# Commission & Fees
commission:
  trading_fee_rate: 0.0009  # 0.09% –Ω–∞ –∫—Ä—É–≥ (0.045% –≤—Ö–æ–¥ + 0.045% –≤—ã—Ö–æ–¥)
  tp_buffer_percent: 0.1  # –ó–∞–ø–∞—Å 0.1% –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ TP
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:582`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û:
commission_rate = 0.0009  # 0.09% –Ω–∞ –∫—Ä—É–≥

# ‚úÖ –°–¢–ê–õ–û:
commission_config = getattr(self.scalping_config, "commission", {})
commission_rate = commission_config.get("trading_fee_rate", 0.0009)
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:719`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û:
buffer_pct = 0.1  # –ó–∞–ø–∞—Å 0.1%

# ‚úÖ –°–¢–ê–õ–û:
buffer_pct = commission_config.get("tp_buffer_percent", 0.1) / 100.0
```

---

#### 1.2.2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä–∂–∏

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
# Margin Settings
margin:
  maintenance_margin_ratio: 0.01  # 1% maintenance margin
  initial_margin_ratio: 0.1  # 10% initial margin
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:97-98`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û:
maintenance_margin_ratio=0.01,
initial_margin_ratio=0.1,

# ‚úÖ –°–¢–ê–õ–û:
margin_config = getattr(self.scalping_config, "margin", {})
maintenance_margin_ratio = margin_config.get("maintenance_margin_ratio", 0.01)
initial_margin_ratio = margin_config.get("initial_margin_ratio", 0.1)
```

---

#### 1.2.3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—â–∏—Ç—ã –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
# Position Manager Settings
position_manager:
  false_trigger_protection:
    margin_ratio_threshold: 1.5  # –ü–æ—Ä–æ–≥ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
    pnl_threshold: 10.0  # –ü–æ—Ä–æ–≥ PnL –¥–ª—è –∑–∞—â–∏—Ç—ã (USDT)
    margin_ratio_minimum: 0.5  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π margin_ratio –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:263-274`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```python
# ‚ùå –ë–´–õ–û:
if margin_ratio <= 1.5 and abs(pnl) < 10:
    ...
if margin_ratio <= 0.5 and equity > 0:
    ...

# ‚úÖ –°–¢–ê–õ–û:
protection_config = getattr(self.scalping_config, "position_manager", {}).get("false_trigger_protection", {})
margin_ratio_threshold = protection_config.get("margin_ratio_threshold", 1.5)
pnl_threshold = protection_config.get("pnl_threshold", 10.0)
margin_ratio_minimum = protection_config.get("margin_ratio_minimum", 0.5)

if margin_ratio <= margin_ratio_threshold and abs(pnl) < pnl_threshold:
    ...
if margin_ratio <= margin_ratio_minimum and equity > 0:
    ...
```

---

### 1.3. –£–ª—É—á—à–∏—Ç—å Trailing Stop Loss

#### 1.3.1. –£–≤–µ–ª–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π–ª

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```yaml
trailing_sl:
  max_trail: 0.02  # ‚úÖ –£–í–ï–õ–ò–ß–ï–ù–û: 2% (–±—ã–ª–æ 0.01 = 1%) –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞
  by_regime:
    trending:
      max_trail: 0.03  # ‚úÖ 3% –¥–ª—è —Ç—Ä–µ–Ω–¥–∞ (–±–æ–ª—å—à–µ –º–µ—Å—Ç–∞ –¥–ª—è –æ—Ç–∫–∞—Ç–∞)
    ranging:
      max_trail: 0.02  # ‚úÖ 2% –¥–ª—è –±–æ–∫–æ–≤–∏–∫–∞
    choppy:
      max_trail: 0.015  # ‚úÖ 1.5% –¥–ª—è —Ö–∞–æ—Å–∞ (–±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ)
```

---

#### 1.3.2. –†–∞—Å—à–∏—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–ò–∑–º–µ–Ω–∏—Ç—å:**
```yaml
trailing_sl:
  by_regime:
    trending:
      regime_multiplier: 2.0  # ‚úÖ –£–í–ï–õ–ò–ß–ï–ù–û: 2.0 (–±—ã–ª–æ 1.5) - –±–æ–ª—å—à–µ –º–µ—Å—Ç–∞
    ranging:
      regime_multiplier: 1.2  # ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: 1.2 - –Ω–µ–±–æ–ª—å—à–æ–π –±—É—Ñ–µ—Ä –¥–∞–∂–µ –¥–ª—è ranging
    choppy:
      regime_multiplier: 0.9  # ‚úÖ –£–∂–µ –µ—Å—Ç—å: 0.9 - –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ
```

---

#### 1.3.3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –æ—Ç—Å–∫–æ–∫–æ–≤

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
trailing_sl:
  short_reversal_protection:
    enabled: true
    min_reversal_duration_seconds: 30  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Å–∫–æ–∫–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
    max_reversal_percent: 0.5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Ç—Å–∫–æ–∫ –¥–ª—è –∑–∞—â–∏—Ç—ã (0.5%)
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`  
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:**
```python
def _check_short_reversal(self, current_price: float, last_price: float, timestamp: float) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ—Ç—Å–∫–æ–∫ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–º.
    –ï—Å–ª–∏ –æ—Ç—Å–∫–æ–∫ –¥–ª–∏—Ç—Å—è –º–µ–Ω–µ–µ min_reversal_duration_seconds - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å.
    """
    if not self.short_reversal_protection.get("enabled", False):
        return True  # –ó–∞—â–∏—Ç–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ - –∑–∞–∫—Ä—ã–≤–∞–µ–º –∫–∞–∫ –æ–±—ã—á–Ω–æ
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Å–∫–æ–∫–∞
    reversal_duration = time.time() - timestamp
    min_duration = self.short_reversal_protection.get("min_reversal_duration_seconds", 30)
    
    if reversal_duration < min_duration:
        # –û—Ç—Å–∫–æ–∫ —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å
        return False
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä –æ—Ç—Å–∫–æ–∫–∞
    max_reversal = self.short_reversal_protection.get("max_reversal_percent", 0.5) / 100.0
    reversal_pct = abs(current_price - last_price) / last_price
    
    if reversal_pct > max_reversal:
        # –û—Ç—Å–∫–æ–∫ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π - –∑–∞–∫—Ä—ã–≤–∞—Ç—å
        return True
    
    return True
```

---

### 1.4. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ —Å—Ç–∞—Ç—å–∏ Momentum Trading

#### 1.4.1. –§–∏–ª—å—Ç—Ä –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞—á–∫–æ–≤

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
# Momentum Filter (–∏–∑ —Å—Ç–∞—Ç—å–∏ Momentum Trading)
momentum_filter:
  enabled: true
  reject_vertical_spikes: true
  max_spike_percent: 1.0  # –û—Ç–∫–ª–æ–Ω—è—Ç—å –µ—Å–ª–∏ —Å–∫–∞—á–æ–∫ > 1% –∑–∞ –ø–µ—Ä–∏–æ–¥
  spike_lookback_periods: 5  # –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –ø–µ—Ä–∏–æ–¥–æ–≤
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/filters/momentum_filter.py` (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π)  
**–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å:**
```python
class MomentumFilter:
    """
    –§–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ Momentum Trading –∏–∑ —Å—Ç–∞—Ç—å–∏.
    
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
    - –û—Ç–∫–ª–æ–Ω—è–µ—Ç –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ —Å–∫–∞—á–∫–∏ (vertical spikes)
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —É—Ä–æ–≤–Ω—é (grind into level)
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ä–æ—Å—Ç –æ–±—ä–µ–º–∞
    - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (staircase action)
    """
    
    async def check_momentum_criteria(
        self, 
        symbol: str, 
        candles: List[OHLCV], 
        current_price: float,
        level: Optional[float] = None
    ) -> Tuple[bool, str]:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫—Ä–∏—Ç–µ—Ä–∏–∏ –∏–º–ø—É–ª—å—Å–Ω–æ–π —Å–¥–µ–ª–∫–∏ –∏–∑ —Å—Ç–∞—Ç—å–∏.
        
        Returns:
            (is_valid, reason) - True –µ—Å–ª–∏ –≤—Å–µ –∫—Ä–∏—Ç–µ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
        """
        if not self.config.get("enabled", True):
            return True, "Momentum filter disabled"
        
        # 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞—á–∫–æ–≤
        if self.config.get("reject_vertical_spikes", True):
            if self._has_vertical_spike(candles, current_price):
                return False, "Vertical spike detected - reject signal"
        
        # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é
        if level is not None:
            if not self._check_grind_into_level(candles, level):
                return False, "Fast movement to level - not a grind"
        
        # 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –æ–±—ä–µ–º–∞
        if not self._check_volume_increasing(candles):
            return False, "Volume not consistently increasing"
        
        # 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
        if not self._check_staircase_action(candles):
            return False, "No staircase pattern detected"
        
        return True, "All momentum criteria met"
    
    def _has_vertical_spike(self, candles: List[OHLCV], current_price: float) -> bool:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ —Å–∫–∞—á–∫–∞."""
        max_spike = self.config.get("max_spike_percent", 1.0) / 100.0
        lookback = self.config.get("spike_lookback_periods", 5)
        
        if len(candles) < lookback:
            return False
        
        recent_candles = candles[-lookback:]
        for candle in recent_candles:
            body_size = abs(candle.close - candle.open) / candle.open
            if body_size > max_spike:
                return True  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫–∞—á–æ–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω
        
        return False
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`  
**–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É:**
```python
# –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞, –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º
if self.momentum_filter:
    is_valid, reason = await self.momentum_filter.check_momentum_criteria(
        symbol=symbol,
        candles=candles,
        current_price=current_price,
        level=pivot_level
    )
    if not is_valid:
        logger.debug(f"‚ö†Ô∏è Momentum filter rejected signal for {symbol}: {reason}")
        return []  # –û—Ç–∫–ª–æ–Ω—è–µ–º —Å–∏–≥–Ω–∞–ª
```

---

#### 1.4.2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –æ–±—ä–µ–º–∞

**–§–∞–π–ª:** `src/strategies/scalping/futures/filters/momentum_filter.py`  
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:**
```python
def _check_volume_increasing(self, candles: List[OHLCV]) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –æ–±—ä–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è."""
    lookback_periods = self.config.get("volume_increase_periods", 10)
    
    if len(candles) < lookback_periods:
        return False  # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
    
    volumes = [c.volume for c in candles[-lookback_periods:]]
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç—Ä–µ–Ω–¥ –æ–±—ä–µ–º–∞ (–æ–±—ä–µ–º –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏)
    increasing_count = 0
    for i in range(1, len(volumes)):
        if volumes[i] > volumes[i-1]:
            increasing_count += 1
    
    # –û–±—ä–µ–º –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏ –º–∏–Ω–∏–º—É–º –≤ 60% –ø–µ—Ä–∏–æ–¥–æ–≤
    min_increasing_ratio = 0.6
    increasing_ratio = increasing_count / (len(volumes) - 1)
    
    return increasing_ratio >= min_increasing_ratio
```

---

#### 1.4.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è

**–§–∞–π–ª:** `src/strategies/scalping/futures/filters/momentum_filter.py`  
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:**
```python
def _check_staircase_action(self, candles: List[OHLCV]) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è (staircase pattern)."""
    min_duration_hours = self.config.get("min_staircase_duration_hours", 2)
    min_candles = int(min_duration_hours * 60)  # –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º 1-–º–∏–Ω—É—Ç–Ω—ã–µ —Å–≤–µ—á–∏
    
    if len(candles) < min_candles:
        return False  # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
    
    recent_candles = candles[-min_candles:]
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–ª–µ—Å—Ç–Ω–∏—Ü—ã":
    # - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ –ø–æ–≤—ã—à–µ–Ω–∏—è —Å –æ—Ç–∫–∞—Ç–∞–º–∏
    # - –ë–æ–ª—å—à–µ –ø–æ–≤—ã—à–µ–Ω–∏–π, —á–µ–º –ø–∞–¥–µ–Ω–∏–π
    higher_closes = 0
    lower_closes = 0
    
    for i in range(1, len(recent_candles)):
        if recent_candles[i].close > recent_candles[i-1].close:
            higher_closes += 1
        elif recent_candles[i].close < recent_candles[i-1].close:
            lower_closes += 1
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø–æ–≤—ã—à–µ–Ω–∏–π –∫ –ø–∞–¥–µ–Ω–∏—è–º
    if higher_closes == 0:
        return False
    
    ratio = higher_closes / (higher_closes + lower_closes)
    min_ratio = 0.6  # –ú–∏–Ω–∏–º—É–º 60% —Å–≤–µ—á–µ–π –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–≤—ã—à–∞—é—â–∏–º–∏—Å—è
    
    return ratio >= min_ratio
```

---

## üìã –ü–†–ò–û–†–ò–¢–ï–¢ 2: –í–ê–ñ–ù–û (–ë–õ–ò–ñ–ê–ô–®–ï–ï –í–†–ï–ú–Ø)

### 2.1. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

#### 2.1.1. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π offset –¥–ª—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
order_executor:
  limit_order:
    # Offset –¥–ª—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
    limit_offset_percent: 0.01  # 0.01% –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è (–±–ª–∏–∂–µ –∫ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ)
    
    # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç—å –ø–æ —Ä–µ–∂–∏–º–∞–º
    by_regime:
      trending:
        limit_offset_percent: 0.02  # +0.02% –≤ —Ç—Ä–µ–Ω–¥–µ (–±–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ö–æ–¥–∞)
        max_wait_seconds: 30  # 30 —Å–µ–∫ –≤ —Ç—Ä–µ–Ω–¥–µ (–±—ã—Å—Ç—Ä–µ–µ)
      ranging:
        limit_offset_percent: 0.01  # +0.01% –≤ –±–æ–∫–æ–≤–∏–∫–µ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ)
        max_wait_seconds: 60  # 60 —Å–µ–∫ –≤ –±–æ–∫–æ–≤–∏–∫–µ
      choppy:
        limit_offset_percent: 0.0  # 0% –≤ —Ö–∞–æ—Å–µ (–ø–æ —Ä—ã–Ω–æ—á–Ω–æ–π —Ü–µ–Ω–µ = –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
        max_wait_seconds: 30  # 30 —Å–µ–∫ –≤ —Ö–∞–æ—Å–µ (–±—ã—Å—Ç—Ä–µ–µ)
        use_market_order: true  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –≤ —Ö–∞–æ—Å–µ
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py`  
**–ò–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥ `_calculate_limit_price`:**
```python
async def _calculate_limit_price(self, symbol: str, side: str, regime: Optional[str] = None) -> float:
    """
    ‚úÖ –£–õ–£–ß–®–ï–ù–ù–´–ô: –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã –¥–ª—è –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞ —Å —É—á–µ—Ç–æ–º —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞
    """
    try:
        # –ü–æ–ª—É—á–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
        limit_order_config = getattr(self.scalping_config, "order_executor", {}).get("limit_order", {})
        
        # –ü–æ–ª—É—á–∞–µ–º offset –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (—Å —É—á–µ—Ç–æ–º —Ä–µ–∂–∏–º–∞)
        default_offset = limit_order_config.get("limit_offset_percent", 0.01)
        
        if regime:
            regime_config = limit_order_config.get("by_regime", {}).get(regime, {})
            offset_percent = regime_config.get("limit_offset_percent", default_offset)
        else:
            offset_percent = default_offset
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ
        if regime:
            regime_config = limit_order_config.get("by_regime", {}).get(regime, {})
            use_market = regime_config.get("use_market_order", False)
            if use_market:
                logger.debug(f"üìä –†–µ–∂–∏–º {regime} —Ç—Ä–µ–±—É–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º 0 –¥–ª—è fallback –Ω–∞ market")
                return 0.0  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º 0 –¥–ª—è fallback –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä
        
        # –ü–æ–ª—É—á–∞–µ–º –ª–∏–º–∏—Ç—ã —Ü–µ–Ω—ã –±–∏—Ä–∂–∏
        price_limits = await self.client.get_price_limits(symbol)
        
        if not price_limits:
            return 0.0  # Fallback –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä
        
        best_bid = price_limits.get("best_bid", 0)
        best_ask = price_limits.get("best_ask", 0)
        current_price = price_limits.get("current_price", 0)
        
        if current_price <= 0:
            return 0.0
        
        # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê
        if side.lower() == "buy":
            if best_ask > 0:
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è BUY –∏—Å–ø–æ–ª—å–∑—É–µ–º best_ask + offset (–≤—ã—à–µ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
                limit_price = best_ask * (1 + offset_percent / 100.0)
            else:
                limit_price = current_price * (1 + offset_percent / 100.0)
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –±–∏—Ä–∂–∏
            max_buy_price = price_limits.get("max_buy_price", 0)
            if max_buy_price > 0 and limit_price > max_buy_price:
                limit_price = min(max_buy_price, best_ask) if best_ask > 0 else max_buy_price
                logger.warning(
                    f"‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ BUY –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç –±–∏—Ä–∂–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º: {limit_price:.2f}"
                )
        else:  # sell
            if best_bid > 0:
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–ª—è SELL –∏—Å–ø–æ–ª—å–∑—É–µ–º best_bid - offset (–Ω–∏–∂–µ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è)
                limit_price = best_bid * (1 - offset_percent / 100.0)
            else:
                limit_price = current_price * (1 - offset_percent / 100.0)
            
            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –±–∏—Ä–∂–∏
            min_sell_price = price_limits.get("min_sell_price", 0)
            if min_sell_price > 0 and limit_price < min_sell_price:
                limit_price = max(min_sell_price, best_bid) if best_bid > 0 else min_sell_price
                logger.warning(
                    f"‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ SELL –Ω–∏–∂–µ –ª–∏–º–∏—Ç–∞ –±–∏—Ä–∂–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º: {limit_price:.2f}"
                )
        
        logger.info(
            f"üí∞ –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è {symbol} {side}: {limit_price:.2f} "
            f"(best_bid={best_bid:.2f}, best_ask={best_ask:.2f}, offset={offset_percent:.3f}%, "
            f"—Ä–µ–∂–∏–º={regime or 'default'})"
        )
        
        return limit_price
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã –¥–ª—è {symbol}: {e}")
        return 0.0
```

---

#### 2.1.2. –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é "post-only" –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ maker fee

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
order_executor:
  limit_order:
    post_only: true  # –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç maker fee (0.02% –≤–º–µ—Å—Ç–æ 0.05%)
    # –ï—Å–ª–∏ post_only=true, –æ—Ä–¥–µ—Ä –Ω–µ –∏—Å–ø–æ–ª–Ω–∏—Ç—Å—è —Å—Ä–∞–∑—É, –Ω–æ –±—É–¥–µ—Ç maker
    # –ï—Å–ª–∏ post_only=false, –æ—Ä–¥–µ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç—å—Å—è —Å—Ä–∞–∑—É –∫–∞–∫ taker
```

**–§–∞–π–ª:** `src/clients/futures_client.py`  
**–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥ `place_futures_order`:**
```python
# –í payload –¥–æ–±–∞–≤–∏—Ç—å:
if order_type == "limit" and post_only:
    payload["postOnly"] = "true"  # –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç maker fee
```

---

### 2.2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP –≤ —Ç—Ä–µ–Ω–¥–µ

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
position_manager:
  tp_extension:
    enabled: true
    min_trend_strength: 0.7  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è
    extension_step: 0.5  # –®–∞–≥ –ø—Ä–æ–¥–ª–µ–Ω–∏—è TP (0.5%)
    max_tp_percent: 5.0  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π TP (5%)
    use_indicators: true  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥ `_check_tp_only`:**
```python
# –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ TP, –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏—è
tp_extension_config = getattr(self.scalping_config, "position_manager", {}).get("tp_extension", {})
if tp_extension_config.get("enabled", False):
    trend_strength = self._get_trend_strength(symbol, current_price)
    min_trend_strength = tp_extension_config.get("min_trend_strength", 0.7)
    
    if trend_strength >= min_trend_strength and pnl_percent > 0:
        # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º TP –≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è
        current_tp = tp_percent
        extension_step = tp_extension_config.get("extension_step", 0.5)
        max_tp = tp_extension_config.get("max_tp_percent", 5.0)
        
        new_tp = min(current_tp + extension_step, max_tp)
        
        logger.info(
            f"üìà –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –¥–ª—è {symbol}: {current_tp:.2f}% ‚Üí {new_tp:.2f}% "
            f"(—Ç—Ä–µ–Ω–¥: {trend_strength:.2f})"
        )
        
        # –û–±–Ω–æ–≤–ª—è–µ–º TP –≤ –ø–æ–∑–∏—Ü–∏–∏ (–≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è)
        # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ TP –Ω–∞ –±–∏—Ä–∂–µ
        return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∞ –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º TP
```

---

### 2.3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
position_manager:
  reversal_detection:
    enabled: true
    min_reversal_duration_seconds: 60  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Å–∫–æ–∫–∞
    rsi_check: true
    macd_check: true
    bollinger_check: true
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–î–æ–±–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥ `_update_trailing_stop_loss`:**
```python
# –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ Trailing Stop, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
reversal_config = getattr(self.scalping_config, "position_manager", {}).get("reversal_detection", {})
if reversal_config.get("enabled", False):
    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
    indicators = await self._get_indicators_for_symbol(symbol)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º RSI
    if reversal_config.get("rsi_check", True):
        rsi = indicators.get("rsi")
        if position_side == "long" and rsi < 30:
            # RSI –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω - –≤–æ–∑–º–æ–∂–µ–Ω —Ä–∞–∑–≤–æ—Ä–æ—Ç –≤–≤–µ—Ä—Ö (–ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å LONG)
            logger.debug(f"üìä RSI –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω ({rsi:.1f}) - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º LONG –ø–æ–∑–∏—Ü–∏—é")
            return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
        
        if position_side == "short" and rsi > 70:
            # RSI –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω - –≤–æ–∑–º–æ–∂–µ–Ω —Ä–∞–∑–≤–æ—Ä–æ—Ç –≤–Ω–∏–∑ (–ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å SHORT)
            logger.debug(f"üìä RSI –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω ({rsi:.1f}) - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º SHORT –ø–æ–∑–∏—Ü–∏—é")
            return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º MACD
    if reversal_config.get("macd_check", True):
        macd_line = indicators.get("macd_line")
        macd_signal = indicators.get("macd_signal")
        
        if position_side == "long" and macd_line > macd_signal:
            # MACD –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –≤–≤–µ—Ä—Ö (–ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å LONG)
            logger.debug(f"üìä MACD –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º LONG")
            return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º Bollinger Bands
    if reversal_config.get("bollinger_check", True):
        bb_upper = indicators.get("bb_upper")
        bb_lower = indicators.get("bb_lower")
        
        if position_side == "long" and current_price < bb_lower * 1.01:
            # –¶–µ–Ω–∞ –±–ª–∏–∑–∫–æ –∫ –Ω–∏–∂–Ω–µ–π –ø–æ–ª–æ—Å–µ - –≤–æ–∑–º–æ–∂–µ–Ω –æ—Ç—Å–∫–æ–∫ (–ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å LONG)
            logger.debug(f"üìä –¶–µ–Ω–∞ –±–ª–∏–∑–∫–æ –∫ –Ω–∏–∂–Ω–µ–π –ø–æ–ª–æ—Å–µ BB - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º LONG")
            return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
```

---

### 2.4. –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ç—Ä–µ–π–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–±—ã–ª–∏

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–î–æ–±–∞–≤–∏—Ç—å:**
```yaml
trailing_sl:
  trail_growth:
    low_profit_multiplier: 1.5  # –î–ª—è –ø—Ä–∏–±—ã–ª–∏ < 0.5%
    medium_profit_multiplier: 2.0  # –î–ª—è –ø—Ä–∏–±—ã–ª–∏ 0.5-1.5%
    high_profit_multiplier: 3.0  # –î–ª—è –ø—Ä–∏–±—ã–ª–∏ > 1.5%
```

**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`  
**–ò–∑–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥ `update`:**
```python
# ‚ùå –ë–´–õ–û:
self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * 2, 
    self.max_trail
)

# ‚úÖ –°–¢–ê–õ–û:
trail_growth_config = getattr(self, "trail_growth", {})
if profit_pct_total < 0.005:  # < 0.5%
    multiplier = trail_growth_config.get("low_profit_multiplier", 1.5)
elif profit_pct_total < 0.015:  # 0.5-1.5%
    multiplier = trail_growth_config.get("medium_profit_multiplier", 2.0)
else:  # > 1.5%
    multiplier = trail_growth_config.get("high_profit_multiplier", 3.0)

self.current_trail = min(
    self.initial_trail + max(profit_pct_total, 0.0) * multiplier,
    self.max_trail
)
```

---

### 2.5. –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É "–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é"

**–§–∞–π–ª:** `src/strategies/scalping/futures/filters/momentum_filter.py`  
**–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:**
```python
def _check_grind_into_level(self, candles: List[OHLCV], level: float) -> bool:
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ü–µ–Ω–∞ –º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é (–Ω–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫–∞—á–æ–∫)."""
    lookback_periods = self.config.get("grind_lookback_periods", 20)
    
    if len(candles) < lookback_periods:
        return False  # –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö
    
    recent_candles = candles[-lookback_periods:]
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é
    distances = []
    for candle in recent_candles:
        distance = abs(candle.close - level) / level
        distances.append(distance)
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ (–Ω–µ —Ä–µ–∑–∫–æ)
    # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–º
    if len(distances) < 3:
        return False
    
    avg_distance = sum(distances) / len(distances)
    variance = sum((d - avg_distance) ** 2 for d in distances) / len(distances)
    std_dev = variance ** 0.5
    cv = std_dev / avg_distance if avg_distance > 0 else 0
    
    # –ï—Å–ª–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏ —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π - —ç—Ç–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫–∞—á–æ–∫
    max_cv = 0.5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –≤–∞—Ä–∏–∞—Ü–∏–∏
    return cv <= max_cv
```

---

## üìä –ò–¢–û–ì–û–í–´–ô –°–ü–ò–°–û–ö –ó–ê–î–ê–ß

### ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ö—Ä–∏—Ç–∏—á–Ω–æ (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

#### üî• 1.1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è SELL** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `best_bid` –≤–º–µ—Å—Ç–æ `best_ask` (–ö–†–ò–¢–ò–ß–ù–û!)
2. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å offset –¥–ª—è BUY** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `best_ask` –≤–º–µ—Å—Ç–æ `best_ask - 0.1%` (–ö–†–ò–¢–ò–ß–ù–û!)
3. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –∏ –æ—Ç–º–µ–Ω—É** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—Ç—å –ª–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –ø–æ—Å–ª–µ 60 —Å–µ–∫—É–Ω–¥
4. ‚úÖ **–î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ–Ω—É –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä** - –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞ –∑–∞–º–µ–Ω—è—Ç—å –ª–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π

#### 1.2. –í—ã–Ω–µ—Å—Ç–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥
5. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ `commission_rate` –≤ –∫–æ–Ω—Ñ–∏–≥
6. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ `buffer_pct` –≤ –∫–æ–Ω—Ñ–∏–≥
7. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ä–∂–∏ –≤ –∫–æ–Ω—Ñ–∏–≥
8. ‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—â–∏—Ç—ã –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –≤ –∫–æ–Ω—Ñ–∏–≥

#### 1.3. –£–ª—É—á—à–∏—Ç—å Trailing Stop Loss
9. ‚úÖ –£–≤–µ–ª–∏—á–∏—Ç—å `max_trail` —Å 1% –¥–æ 2% (–¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞)
10. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é –ª–æ–≥–∏–∫—É –¥–ª—è ranging —Ä–µ–∂–∏–º–∞
11. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –æ—Ç—Å–∫–æ–∫–æ–≤

#### 1.4. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã Momentum Trading
12. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∫–∞—á–∫–æ–≤
13. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –æ–±—ä–µ–º–∞
14. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–µ—Å—Ç–Ω–∏—á–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è

---

### ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –í–∞–∂–Ω–æ (–±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è)

#### 2.1. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
15. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π offset –¥–ª—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
16. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π offset –ø–æ —Ä–µ–∂–∏–º–∞–º (trending/ranging/choppy)
17. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é post-only –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ maker fee

#### 2.2. –£–ª—É—á—à–µ–Ω–∏—è Trailing Stop Loss –∏ Position Manager
18. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP –≤ —Ç—Ä–µ–Ω–¥–µ
19. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
20. ‚úÖ –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ç—Ä–µ–π–ª–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–±—ã–ª–∏

#### 2.3. –£–ª—É—á—à–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
21. ‚úÖ –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É "–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é"

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1:

1. **–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤:**
   - –¢–µ–∫—É—â–∏–π: 1-2 —á–∞—Å–∞ (–∏–ª–∏ –≤–æ–æ–±—â–µ –Ω–µ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è)
   - –û–∂–∏–¥–∞–µ–º—ã–π: 30-60 —Å–µ–∫—É–Ω–¥ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–º–µ–Ω–∞ –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π)

2. **–ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤:**
   - –¢–µ–∫—É—â–∏–π: ~50-60% (–º–Ω–æ–≥–∏–µ –≤–∏—Å—è—Ç —á–∞—Å–∞–º–∏)
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~90-95% (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ 30-60 —Å–µ–∫)

3. **–ü–æ—Ç–µ—Ä—è —Å–∏–≥–Ω–∞–ª–æ–≤:**
   - –¢–µ–∫—É—â–∏–π: ~30-40% —Å–∏–≥–Ω–∞–ª–æ–≤ —Ç–µ—Ä—è—é—Ç—Å—è –∏–∑-–∑–∞ –∑–∞–≤–∏—Å—à–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~5-10% (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è)

4. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:**
   - –¢–µ–∫—É—â–∏–π: ~30-40%
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~15-20% (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 50%)

5. **–£–ª—É—á—à–µ–Ω–∏–µ Win Rate:**
   - –¢–µ–∫—É—â–∏–π: ~55-60%
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~65-70% (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 10-15%)

6. **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ PnL:**
   - –¢–µ–∫—É—â–∏–π: ~+0.1-0.3 USDT
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~+0.3-0.5 USDT (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 100%)

---

### –ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 2:

1. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ Win Rate:**
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~70-75% (—É–ª—É—á—à–µ–Ω–∏–µ –µ—â–µ –Ω–∞ 5-10%)

2. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ PnL:**
   - –û–∂–∏–¥–∞–µ–º—ã–π: ~+0.5-0.8 USDT (—É–ª—É—á—à–µ–Ω–∏–µ –µ—â–µ –Ω–∞ 50-100%)

3. **–£–ª—É—á—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:**
   - –ë–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Å–ª–æ–≤–∏–π –¥–ª—è –∏–º–ø—É–ª—å—Å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫
   - –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üéØ –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –ù–µ–¥–µ–ª—è 1: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1.1 (–ö–†–ò–¢–ò–ß–ù–û - –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞)

**–î–µ–Ω—å 1:**
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è SELL (1.1.1)
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å offset –¥–ª—è BUY (1.1.2)

**–î–µ–Ω—å 2:**
- –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–π–º–∞—É—Ç –∏ –æ—Ç–º–µ–Ω—É (1.1.3)
- –î–æ–±–∞–≤–∏—Ç—å –∑–∞–º–µ–Ω—É –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–π –æ—Ä–¥–µ—Ä (1.1.3)

**–î–µ–Ω—å 3:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

---

### –ù–µ–¥–µ–ª—è 2: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1.2-1.3 (–ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã + Trailing Stop)

**–î–µ–Ω—å 1-2:**
- –í—ã–Ω–µ—Å—Ç–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥ (1.2.1-1.2.3)

**–î–µ–Ω—å 3-4:**
- –£–ª—É—á—à–∏—Ç—å Trailing Stop Loss (1.3.1-1.3.3)

**–î–µ–Ω—å 5:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

### –ù–µ–¥–µ–ª—è 3: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1.4 (Momentum Filter)

**–î–µ–Ω—å 1-3:**
- –°–æ–∑–¥–∞—Ç—å MomentumFilter (1.4.1-1.4.3)

**–î–µ–Ω—å 4:**
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å MomentumFilter –≤ SignalGenerator

**–î–µ–Ω—å 5:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MomentumFilter

---

### –ù–µ–¥–µ–ª—è 4: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–£–ª—É—á—à–µ–Ω–∏—è)

**–î–µ–Ω—å 1-2:**
- –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ (2.1.1-2.1.2)

**–î–µ–Ω—å 3-4:**
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP –≤ —Ç—Ä–µ–Ω–¥–µ (2.2)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π (2.3)

**–î–µ–Ω—å 5:**
- –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ç—Ä–µ–π–ª–∞ (2.4)
- –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É "–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è –∫ —É—Ä–æ–≤–Ω—é" (2.5)

---

### –ù–µ–¥–µ–ª—è 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

**–î–µ–Ω—å 1-3:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ –¥–µ–º–æ-—Å—á–µ—Ç–µ

**–î–µ–Ω—å 4-5:**
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø

1. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1.1 (–õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞) - –ö–†–ò–¢–ò–ß–ù–û!**
   - –≠—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω—ã –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å
   - –ë–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ - –æ—Ä–¥–µ—Ä–∞ –≤–∏—Å—è—Ç —á–∞—Å–∞–º–∏
   - –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ—Ç –Ω–∞—á–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ

2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1.2-1.4 - –í–∞–∂–Ω–æ, –Ω–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç**
   - –£–ª—É—á—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
   - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º 1.1

3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 - –£–ª—É—á—à–µ–Ω–∏—è**
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-14  
**–í–µ—Ä—Å–∏—è:** 2.0 (—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤)  
**–ê–≤—Ç–æ—Ä:** AI Assistant
