# ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–ê–í–ï–†–®–ï–ù–´

**–î–∞—Ç–∞:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–†–û–ë–õ–ï–ú–ê –° –í–†–ï–ú–ï–ù–ï–ú (TIMEZONE)

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

1. **`entry_manager.py`** ‚úÖ
   - –î–æ–±–∞–≤–ª–µ–Ω `tz=timezone.utc` –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ timestamp –∏–∑ API

2. **`position_manager.py`** ‚úÖ
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 4 –º–µ—Å—Ç–∞ —Å `datetime.fromtimestamp()` - –¥–æ–±–∞–≤–ª–µ–Ω `tz=timezone.utc`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ datetime —Å timezone

3. **`orchestrator.py`** ‚úÖ
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 2 –º–µ—Å—Ç–∞ —Å `datetime.fromtimestamp()` - –¥–æ–±–∞–≤–ª–µ–Ω `tz=timezone.utc`

4. **`trailing_sl_coordinator.py`** ‚úÖ
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ 1 –º–µ—Å—Ç–æ —Å `datetime.fromtimestamp()` - –¥–æ–±–∞–≤–ª–µ–Ω `tz=timezone.utc`

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –í—Å–µ `datetime.fromtimestamp()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `tz=timezone.utc`
- ‚úÖ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- ‚úÖ `duration_sec` –∏ `max_holding_exceeded` –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: CSV –õ–û–ì–ò–†–û–í–ê–ù–ò–ï

### –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ `PerformanceTracker`:

1. **`record_position_open()`** ‚úÖ
   - –õ–æ–≥–∏—Ä—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ `logs/positions_open_YYYY-MM-DD.csv`
   - –§–æ—Ä–º–∞—Ç: timestamp, symbol, side, entry_price, size, regime, order_id, order_type

2. **`record_order()`** ‚úÖ
   - –õ–æ–≥–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –≤ `logs/orders_YYYY-MM-DD.csv`
   - –§–æ—Ä–º–∞—Ç: timestamp, symbol, side, order_type, order_id, size, price, status, fill_price, fill_size, execution_time_ms, slippage

3. **`record_signal()`** ‚úÖ
   - –õ–æ–≥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª—ã –≤ `logs/signals_YYYY-MM-DD.csv`
   - –§–æ—Ä–º–∞—Ç: timestamp, symbol, side, price, strength, regime, filters_passed, executed, order_id

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è CSV —Ñ–∞–π–ª–æ–≤:
- ‚úÖ –í—Å–µ CSV —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `PerformanceTracker`
- ‚úÖ –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `logs/`
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –í–´–ó–û–í–´ –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø

### 1. **`entry_manager.py`** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `set_performance_tracker()`
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `record_position_open()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `open_position_with_size()` –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

### 2. **`order_executor.py`** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `set_performance_tracker()`
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `record_order()` –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–∞ (market –∏ limit)
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `record_order()` –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ market –æ—Ä–¥–µ—Ä–∞ (fills)
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `record_order()` –ø—Ä–∏ retry —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞

### 3. **`signal_generator.py`** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `set_performance_tracker()`
- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `record_signal()` –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ `generate_signals()`
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∏–≥–Ω–∞–ª

### 4. **`orchestrator.py`** ‚úÖ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `performance_tracker` –≤ `entry_manager`, `order_executor` –∏ `signal_generator`
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `performance_tracker`

---

## üìã –ß–¢–û –ë–£–î–ï–¢ –õ–û–ì–ò–†–û–í–ê–¢–¨–°–Ø

### CSV —Ñ–∞–π–ª—ã:

1. **`logs/trades_YYYY-MM-DD.csv`** (—É–∂–µ –±—ã–ª–æ)
   - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
   - PnL, –∫–æ–º–∏—Å—Å–∏–∏, duration_sec, reason

2. **`logs/positions_open_YYYY-MM-DD.csv`** (–ù–û–í–û–ï) ‚úÖ
   - –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
   - Entry price, size, regime, order_id, order_type

3. **`logs/orders_YYYY-MM-DD.csv`** (–ù–û–í–û–ï) ‚úÖ
   - –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ (placed)
   - –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ (filled) - –¥–ª—è market –æ—Ä–¥–µ—Ä–æ–≤
   - –û—Ç–º–µ–Ω–∞ –æ—Ä–¥–µ—Ä–æ–≤ (cancelled) - –µ—Å–ª–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ
   - Fill price, fill size, execution time, slippage

4. **`logs/signals_YYYY-MM-DD.csv`** (–ù–û–í–û–ï) ‚úÖ
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
   - –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
   - –°–≤—è–∑—å —Å order_id (–ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏)

---

## üîç –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ó–ê–ü–£–°–ö–ê

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. ‚úÖ CSV —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `logs/`
2. ‚úÖ –ó–∞–ø–∏—Å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ `positions_open_*.csv` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π
3. ‚úÖ –ó–∞–ø–∏—Å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ `orders_*.csv` –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤
4. ‚úÖ –ó–∞–ø–∏—Å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ `orders_*.csv` –ø—Ä–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–æ–≤ (fills –¥–ª—è market)
5. ‚úÖ –ó–∞–ø–∏—Å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ `signals_*.csv` –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
6. ‚úÖ –ù–µ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø–æ–∑–∏—Ü–∏–∏
7. ‚úÖ `duration_sec` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
8. ‚úÖ `max_holding_exceeded` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìù –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞:
- ‚úÖ –†–∞–∑–º–µ—â–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- ‚ö†Ô∏è –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ (fills) –¥–ª—è –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fills –∏–∑ WebSocket –≤ –±—É–¥—É—â–µ–º (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è)

### –°–∏–≥–Ω–∞–ª—ã:
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- ‚ö†Ô∏è –°–≤—è–∑—å —Å order_id (executed=True) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–≥–Ω–∞–ª–æ–≤

---

## üöÄ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å timezone
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ CSV –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!**

