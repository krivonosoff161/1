# üìä –û–¢–ß–ï–¢ –û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –£–õ–£–ß–®–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-11-19  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏ scoring

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `TradingStatistics` (`src/strategies/modules/trading_statistics.py`)
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ win rate –ø–æ —Ä–µ–∂–∏–º–∞–º
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ PnL (wins –∏ losses)
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–¥–µ–ª–æ–∫
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `calculate_dynamic_threshold()` –≤ `AdaptiveRegimeManager`
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ—Ä–æ–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ win rate:
    - Win rate < 30%: +30% –∫ –ø–æ—Ä–æ–≥—É (—Å—Ç—Ä–æ–∂–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
    - Win rate < 40%: +20% –∫ –ø–æ—Ä–æ–≥—É
    - Win rate < 50%: +10% –∫ –ø–æ—Ä–æ–≥—É
    - Win rate >= 50%: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏:
    - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (>5%): +10% –∫ –ø–æ—Ä–æ–≥—É
    - –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (<2%): -5% –∫ –ø–æ—Ä–æ–≥—É

- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ `is_signal_valid()`:
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø–æ—Ä–æ–≥–∞ –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–∏–≥–Ω–∞–ª–∞
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ—Ä–æ–≥–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/strategies/modules/trading_statistics.py` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)
- `src/strategies/modules/adaptive_regime_manager.py`
- `src/strategies/scalping/futures/signal_generator.py`
- `src/strategies/scalping/futures/orchestrator.py`

---

### 2. ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `TradingStatistics` –≤ `orchestrator`:
  - –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `TradingStatistics` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –ü–µ—Ä–µ–¥–∞—á–∞ –≤ `signal_generator`
  - –ü–µ—Ä–µ–¥–∞—á–∞ –≤ `AdaptiveRegimeManager` (–æ–±—â–∏–π –∏ per-symbol)

- –ó–∞–ø–∏—Å—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π:
  - –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (buy/sell)
  - PnL
  - –¶–µ–Ω—ã –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
  - –í—Ä–µ–º—è –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞
  - –°–∏–ª–∞ —Å–∏–≥–Ω–∞–ª–∞
  - –¢–∏–ø —Å–∏–≥–Ω–∞–ª–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/strategies/scalping/futures/orchestrator.py`
- `src/strategies/scalping/futures/signal_generator.py`

---

## üîÑ –í –ü–†–û–¶–ï–°–°–ï

### 3. ‚è≥ Kelly Criterion –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π

**–ü–ª–∞–Ω:**
- –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ Kelly fraction –≤ `MarginCalculator`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `calculate_optimal_position_size()`
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å win rate –∏ risk/reward –∏–∑ `TradingStatistics`

**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 4. ‚è≥ –ü–æ–≤—ã—à–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ –≤—Ö–æ–¥–∞

**–ü–ª–∞–Ω:**
- –û–±–Ω–æ–≤–∏—Ç—å `config/config_futures.yaml`:
  - RANGING: 1.0 ‚Üí 1.5-2.0
  - TRENDING: 1.8 ‚Üí 2.5-3.0
  - CHOPPY: 2.2 ‚Üí 3.0-3.5

**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 5. ‚è≥ –£–ª—É—á—à–µ–Ω–∏–µ Risk/Reward

**–ü–ª–∞–Ω:**
- –£–≤–µ–ª–∏—á–∏—Ç—å TP (take profit) –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –£–ª—É—á—à–∏—Ç—å TSL (trailing stop loss) –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –¶–µ–ª—å: Risk/Reward 1:2 –∏–ª–∏ –ª—É—á—à–µ

**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 6. ‚è≥ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π

**–ü–ª–∞–Ω:**
- –ë–æ–ª—å—à–µ limit/post-only –æ—Ä–¥–µ—Ä–æ–≤
- Maker fee 0.02% –≤–º–µ—Å—Ç–æ taker 0.05%
- –¶–µ–ª—å: –∫–æ–º–∏—Å—Å–∏–∏ < 20% –æ—Ç gross PnL

**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### 7. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ –±–æ—Ç–∞ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–ü–ª–∞–Ω:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ race conditions
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–°—Ç–∞—Ç—É—Å:** –û–∂–∏–¥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìù –ó–ê–ú–ï–¢–ö–ò

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏** —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–º–∏–Ω–∏–º—É–º 10-20 —Å–¥–µ–ª–æ–∫)
2. **TradingStatistics** —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
3. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã - –µ—Å–ª–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –Ω–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Kelly Criterion
2. –û–±–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏ –≤ –∫–æ–Ω—Ñ–∏–≥–µ
3. –£–ª—É—á—à–∏—Ç—å Risk/Reward –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏
5. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ª–æ–≥–∏–∫–∏

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-11-19

