# üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ë–û–¢ –ó–ê–ö–†–´–í–ê–ï–¢ –ü–û–ó–ò–¶–ò–ò –ü–û –í–†–ï–ú–ï–ù–ò, –ù–ï –£–ß–ò–¢–´–í–ê–Ø –£–ë–´–¢–û–ö

## üìã –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ `max_holding_minutes`, **–ù–ï–ó–ê–í–ò–°–ò–ú–û** –æ—Ç —Ç–æ–≥–æ, –≤ –ø—Ä–∏–±—ã–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∏–ª–∏ –≤ —É–±—ã—Ç–∫–µ. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∑–∞–∫—Ä—ã—Ç–∏—é —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è trailing stop –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π.

---

## üîç –ê–ù–ê–õ–ò–ó –ö–û–î–ê

### 1. –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`

**–ú–µ—Ç–æ–¥:** `_check_position_holding_time()` (—Å—Ç—Ä–æ–∫–∏ 6116-6291)

**–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑:** `_update_trailing_stop_loss()` (—Å—Ç—Ä–æ–∫–∞ 5740)

**–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–∑–æ–≤–∞:** –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ trailing stop –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏

### 2. –õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

```python
# –°—Ç—Ä–æ–∫–∞ 6234: –ü—Ä–æ–≤–µ—Ä–∫–∞, –∏—Å—Ç–µ–∫–ª–æ –ª–∏ –≤—Ä–µ–º—è
if time_held >= actual_max_holding:
    # –°—Ç—Ä–æ–∫–∏ 6238-6259: –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
    if (extend_time_if_profitable 
        and not time_extended 
        and profit_pct > min_profit_for_extension):
        # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º –≤—Ä–µ–º—è
        return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
    
    # –°—Ç—Ä–æ–∫–∏ 6261-6279: –ü—Ä–æ–≤–µ—Ä–∫–∞ min_profit_to_close
    if (min_profit_to_close is not None 
        and profit_pct > min_profit_to_close):
        # –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å > min_profit_to_close
        return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º
    
    # –°—Ç—Ä–æ–∫–∏ 6281-6288: –ó–ê–ö–†–´–¢–ò–ï –ü–û –í–†–ï–ú–ï–ù–ò
    # ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–∑–∏—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã—à–µ
    # –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏!
    logger.info(
        f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
        f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
        f"–ø—Ä–∏–±—ã–ª—å: {profit_pct:.2%}, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
    )
    await self._close_position(symbol, "max_holding_time")
```

### 3. –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞

**–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
1. –ï—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ –ò –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ > `min_profit_for_extension` ‚Üí –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º –≤—Ä–µ–º—è
2. –ï—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ –ò –ø—Ä–∏–±—ã–ª—å > `min_profit_to_close` ‚Üí –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º
3. **–ï—Å–ª–∏ –≤—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ –ò –ø—Ä–∏–±—ã–ª—å <= `min_profit_to_close` (–≤–∫–ª—é—á–∞—è —É–±—ã—Ç–∫–∏) ‚Üí –ó–ê–ö–†–´–í–ê–ï–ú –ü–û –í–†–ï–ú–ï–ù–ò** ‚ö†Ô∏è

**–ü—Ä–æ–±–ª–µ–º–∞:** –£–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –¥–∞–∂–µ –µ—Å–ª–∏:
- Trailing stop –µ—â–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
- –ü–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
- –£–±—ã—Ç–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω trailing stop

---

## üìä –í–õ–ò–Ø–ù–ò–ï –ù–ê –¢–û–†–ì–û–í–õ–Æ

### –ò–∑ –∞–Ω–∞–ª–∏–∑–∞ CSV —Å–¥–µ–ª–æ–∫:

- **–í—Å–µ 60 —Å–¥–µ–ª–æ–∫** –∑–∞–∫—Ä—ã—Ç—ã –ø–æ –ø—Ä–∏—á–∏–Ω–µ `trailing_stop` (100%)
- **–ù–û:** –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞** –≤ –ª–æ–≥–∞—Ö!

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
1. –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ `max_holding_time`, –Ω–æ –≤ CSV –∑–∞–ø–∏—Å–∞–Ω–æ `trailing_stop`
2. –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ trailing stop –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω (–Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç)

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Å–¥–µ–ª–æ–∫:

1. **BTC-USDT LONG (—Å–¥–µ–ª–∫–∞ #60):**
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 40,065 —Å–µ–∫—É–Ω–¥ (11.1 —á–∞—Å–∞)
   - Net PnL: -$6.78 USDT
   - **–í–µ—Ä–æ—è—Ç–Ω–æ –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏**, –∞ –Ω–µ –ø–æ trailing stop

2. **DOGE-USDT SHORT (—Å–¥–µ–ª–∫–∞ #10):**
   - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 5,902 —Å–µ–∫—É–Ω–¥ (98 –º–∏–Ω—É—Ç = 1.6 —á–∞—Å–∞)
   - Net PnL: -$1.04 USDT
   - **–í–æ–∑–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏** (max_holding_minutes = 30-60 –º–∏–Ω—É—Ç)

---

## üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¢–û–õ–¨–ö–û –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ –∏–ª–∏ –æ–∫–æ–ª–æ –Ω—É–ª—è
- –£–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –¢–û–õ–¨–ö–û –ø–æ trailing stop –∏–ª–∏ loss cut

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 6281-6288: –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê
# –í—Ä–µ–º—è –∏—Å—Ç–µ–∫–ª–æ - –ø—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–Ω–æ –ª–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å
if time_held >= actual_max_holding:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    # –£–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ trailing stop –∏–ª–∏ loss cut
    if profit_pct < 0:
        # –ü–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        # –î–∞–µ–º trailing stop –∏–ª–∏ loss cut –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–±–æ—Ç–∞—Ç—å
        logger.info(
            f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
            f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
            f"–Ω–æ –ø—Ä–∏–±—ã–ª—å {profit_pct:.2%} < 0%, "
            f"–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∂–¥–µ–º trailing stop –∏–ª–∏ loss cut)"
        )
        return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    
    # –ü–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ –∏–ª–∏ –æ–∫–æ–ª–æ –Ω—É–ª—è - –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    logger.info(
        f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
        f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
        f"–ø—Ä–∏–±—ã–ª—å: {profit_pct:.2%}, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
    )
    await self._close_position(symbol, "max_holding_time")
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ < –Ω–µ–±–æ–ª—å—à–æ–≥–æ –ø–æ—Ä–æ–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, -0.5%)
- –ë–æ–ª—å—à–∏–µ —É–±—ã—Ç–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ trailing stop

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 6281-6288: –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê
if time_held >= actual_max_holding:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ
    max_loss_for_time_close = -0.005  # -0.5% –æ—Ç —Ü–µ–Ω—ã
    
    if profit_pct < max_loss_for_time_close:
        # –£–±—ã—Ç–æ–∫ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        logger.info(
            f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
            f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
            f"–Ω–æ —É–±—ã—Ç–æ–∫ {profit_pct:.2%} < {max_loss_for_time_close:.2%}, "
            f"–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∂–¥–µ–º trailing stop –∏–ª–∏ loss cut)"
        )
        return
    
    # –£–±—ã—Ç–æ–∫ –Ω–µ–±–æ–ª—å—à–æ–π –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    logger.info(
        f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
        f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
        f"–ø—Ä–∏–±—ã–ª—å: {profit_pct:.2%}, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
    )
    await self._close_position(symbol, "max_holding_time")
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ trailing stop –∏ loss cut

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 6281-6288: –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –õ–û–ì–ò–ö–ê
if time_held >= actual_max_holding:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¢–û–õ–¨–ö–û –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
    if profit_pct <= 0:
        # –ü–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ –∏–ª–∏ –Ω–∞ –Ω—É–ª–µ - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
        logger.info(
            f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
            f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
            f"–Ω–æ –ø—Ä–∏–±—ã–ª—å {profit_pct:.2%} <= 0%, "
            f"–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ trailing stop –∏ loss cut)"
        )
        return
    
    # –ü–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏
    logger.info(
        f"‚è∞ –ü–æ–∑–∏—Ü–∏—è {symbol} —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è {time_held:.1f} –º–∏–Ω—É—Ç "
        f"(–ª–∏–º–∏—Ç: {actual_max_holding:.1f} –º–∏–Ω—É—Ç), "
        f"–ø—Ä–∏–±—ã–ª—å: {profit_pct:.2%}, –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
    )
    await self._close_position(symbol, "max_holding_time")
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞—Ä–∏–∞–Ω—Ç 3** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ç–∫–ª—é—á–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π.

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –£–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø–æ trailing stop –∏–ª–∏ loss cut
2. –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∑–∞–∫—Ä—ã—Ç–∏—é
3. Trailing stop –∏ loss cut —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —É–±—ã—Ç–∫–æ–≤

**–ò—Å–∫–ª—é—á–µ–Ω–∏–µ:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2-3 —á–∞—Å–∞)
- –ù–æ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å –æ–±—ã—á–Ω—ã–º max_holding_minutes

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è –≤ –ª–æ–≥–∞—Ö

**–ê–Ω–∞–ª–∏–∑:** –í –ª–æ–≥–∞—Ö –ù–ï –Ω–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ `max_holding_time`. –í—Å–µ —Å–¥–µ–ª–∫–∏ –≤ CSV –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `trailing_stop`.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è:**
1. –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å –ø–æ trailing stop –î–û –∏—Å—Ç–µ—á–µ–Ω–∏—è max_holding_minutes
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∞ (–æ—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ)
3. –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º, –Ω–æ reason –∑–∞–ø–∏—Å—ã–≤–∞–ª—Å—è –∫–∞–∫ `trailing_stop`

**–ù–û:** –ü—Ä–æ–±–ª–µ–º–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –∫–æ–¥ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø—Ä–æ–±–ª–µ–º–∞–º –≤ –±—É–¥—É—â–µ–º.

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ

**–ü—Ä–æ–±–ª–µ–º–∞:** `_check_position_holding_time()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ trailing stop, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Ä–µ–º—è —Ä–µ–∂–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ –º–∏–Ω—É—Ç—É).

---

## ‚úÖ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. **–°—Ä–æ—á–Ω–æ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (–í–∞—Ä–∏–∞–Ω—Ç 3)
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –õ–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ `max_holding_time`
3. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å:** –ü—Ä–∏—á–∏–Ω—É –∑–∞–∫—Ä—ã—Ç–∏—è –≤ CSV, –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å:** –ß–∞—Å—Ç–æ—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

---

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-11-19  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ –í–´–°–û–ö–ê–Ø  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–û–ß–ù–û

