# ‚úÖ –ü–†–û–í–ï–†–ö–ê –ß–ï–ö-–õ–ò–°–¢–ê –ì–†–û–ö–ê (2025-12-21)

**–î–∞—Ç–∞:** 2025-12-21  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø—É–Ω–∫—Ç–æ–≤ —á–µ–∫-–ª–∏—Å—Ç–∞

---

## üìã –ß–ï–ö-–õ–ò–°–¢

### 1. –ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã RANGING

#### ‚úÖ 1.1. Risk per trade: 1.0-1.2% (–±—ã–ª–æ 1.5%)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:1243
ranging:
  risk_per_trade_percent: 1.0  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –°–Ω–∏–∂–µ–Ω–æ —Å 1.5% –¥–æ 1.0%
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 1.0% –¥–ª—è ranging

---

#### ‚úÖ 1.2. Margin safety: 1.5 –±–∞–∑–æ–≤–æ + –¥–∏–Ω–∞–º–∏–∫–∞ –¥–æ 1.8-2.0

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:1721-1723
ranging:
  safety_threshold: 1.5  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ë–∞–∑–æ–≤–æ 1.5, –¥–∏–Ω–∞–º–∏–∫–∞ –¥–æ 1.8-2.0
  safety_threshold_dynamic: true
  safety_threshold_max: 2.0
```

**–ö–æ–¥:**
```python
# margin_calculator.py:276-298
if safety_threshold_dynamic:
    if equity < 100.0:
        safety_threshold = min(safety_threshold_max, base_safety * 1.2)  # +20% –¥–æ –º–∞–∫—Å
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –±–∞–∑–æ–≤–æ 1.5, –¥–∏–Ω–∞–º–∏–∫–∞ –¥–æ 1.8-2.0 –ø—Ä–∏ equity<100

---

#### ‚úÖ 1.3. SL: max(0.6%, k*ATR_1m) –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ 0.8%

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:303-306
sl_percent: 0.8  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ë–∞–∑–æ–≤–æ 0.8%, –Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è —á–µ—Ä–µ–∑ ATR
sl_atr_based: true  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ATR-based SL
sl_atr_multiplier: 1.0  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ú–Ω–æ–∂–∏—Ç–µ–ª—å ATR –¥–ª—è SL (1.0-1.2)
sl_min_percent: 0.6  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π SL 0.6% (–∑–∞—â–∏—Ç–∞ –æ—Ç —à—É–º–∞)
```

**–ö–æ–¥:**
```python
# exit_analyzer.py:637-705
def _get_sl_percent(self, symbol: str, regime: str, current_price: Optional[float] = None, market_data: Optional[Any] = None) -> float:
    # ...
    if sl_atr_based and current_price and current_price > 0:
        atr_sl_percent = (atr_1m / current_price) * 100 * sl_atr_multiplier
        sl_percent = max(sl_min_percent, atr_sl_percent)
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: ATR-based SL —Å min 0.6%

---

#### ‚úÖ 1.4. TP: 1.8-2.2% –∞–¥–∞–ø—Ç–∏–≤–Ω–æ (–≤ –∫–æ–Ω—Ñ–∏–≥–µ 2.0% –Ω–æ—Ä–º)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:299-302
tp_percent: 2.0  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ë–∞–∑–æ–≤–æ 2.0%, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ 1.8-2.2%
tp_adaptive: true  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –í–∫–ª—é—á–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP
tp_min_percent: 1.8  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π TP 1.8%
tp_max_percent: 2.2  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π TP 2.2%
```

**–ö–æ–¥:**
```python
# exit_analyzer.py:567-636
def _get_tp_percent(self, symbol: str, regime: str, current_price: Optional[float] = None, market_data: Optional[Any] = None) -> float:
    # ...
    if tp_adaptive and current_price and current_price > 0:
        volatility_normalized = min(1.0, max(0.0, (volatility - 0.5) / 4.5))
        tp_percent = tp_min_percent + (tp_max_percent - tp_min_percent) * volatility_normalized
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP 1.8-2.2% –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

---

### 2. PH –∏ Partial TP

#### ‚úÖ 2.1. Partial TP: 0.8%, 50% (–±—ã–ª–æ 0.6%, 60%)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:89-90
ranging:
  fraction: 0.5  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: 50% –ø–æ–∑–∏—Ü–∏–∏ (–±—ã–ª–æ 60%)
  trigger_percent: 0.8  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: 0.8% (–±—ã–ª–æ 2.0%)
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ: 0.8% trigger, 50% fraction

---

#### ‚úÖ 2.2. PH: 1.2% + –º–∏–Ω–∏–º—É–º 0.05 USD (1.5-2x –∫–æ–º–∏—Å—Å–∏–∏)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:318-319
ph_threshold_percent: 1.2  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –°–Ω–∏–∂–µ–Ω–æ —Å 1.5% –¥–æ 1.2%
ph_min_absolute_usd: 0.05  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø–æ—Ä–æ–≥ 0.05 USD
```

**–ö–æ–¥:**
```python
# position_manager.py:1839-1850
ph_min_absolute_usd = 0.05  # Default
# ...
ph_threshold_adjusted = max(ph_threshold_adjusted, ph_min_absolute_usd)
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 1.2% + –º–∏–Ω–∏–º—É–º 0.05 USD

---

### 3. Maxholding –∏ PD

#### ‚úÖ 3.1. Maxholding: soft/hard —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:308-309
max_holding_hard_stop: true  # ‚úÖ –ì–†–û–ö: –ñ–µ—Å—Ç–∫–∏–π —Å—Ç–æ–ø –ø–æ max_holding
timeout_loss_percent: 1.5  # ‚úÖ –ì–†–û–ö: –ó–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ max_holding –µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ >= 1.5%
```

**–ö–æ–¥:**
```python
# exit_analyzer.py:2101-2146
if max_holding_hard_stop:
    if pnl_percent < 0:
        if abs(pnl_percent) >= timeout_loss_percent:
            # Hard stop: –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ —É–±—ã—Ç–∫–µ >= timeout_loss_percent
    else:
        # Hard stop: –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –ø—Ä–∏–±—ã–ª–∏
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: soft (extend_if_profitable) –∏ hard (timeout_loss) —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ

---

#### ‚úÖ 3.2. PD: 20-25% –æ—Ç –ø–∏–∫–∞ (–±—ã–ª–æ 90%)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–Ω—Ñ–∏–≥:**
```yaml
# config_futures.yaml:136
ranging:
  multiplier: 0.25  # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: 20% –æ—Ç–∫–∞—Ç (0.75 * 0.25 = 0.1875 ‚âà 20%)
```

**–ö–æ–¥:**
```python
# position_manager.py:4991
multiplier = 0.25 if regime == "ranging" else (2.0 if regime == "trending" else 1.0)
drawdown_threshold = base_drawdown * multiplier  # 0.75 * 0.25 = 0.1875 ‚âà 20%
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: 20% –æ—Ç–∫–∞—Ç –¥–ª—è ranging (0.75 * 0.25)

---

### 4. –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –º–∞—Ä–∂–∏ –∏ PnL

#### ‚úÖ 4.1. Margin ratio: —á–µ—Å—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç, –Ω–µ max(0.01, ...)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# margin_calculator.py:470-476
if margin_used > 0:
    # ‚úÖ –ì–†–û–ö –ö–û–ú–ü–†–û–ú–ò–°–°: –ß–µ—Å—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç margin_ratio –±–µ–∑ –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
    # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º max(0.01, ...) - —ç—Ç–æ –º–∞—Å–∫–∏—Ä—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∏—Å–∫–∏ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏
    margin_ratio = available_margin / margin_used
    # –ï—Å–ª–∏ margin_ratio –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏, –Ω–µ –º–∞—Å–∫–∏—Ä—É–µ–º
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —É–±—Ä–∞–Ω `max(0.01, ...)`, –æ—Å—Ç–∞–≤–ª–µ–Ω —á–µ—Å—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç

---

#### ‚úÖ 4.2. –ö–æ–º–∏—Å—Å–∏—è: –Ω–µ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞—Ç—å (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ 20x)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# position_manager.py:1829-1830
position_value = size_in_coins * entry_price
commission = position_value * commission_rate * 2  # –û—Ç–∫—Ä—ã—Ç–∏–µ + –∑–∞–∫—Ä—ã—Ç–∏–µ
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ö–æ–º–∏—Å—Å–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ: `position_value * commission_rate * 2` (–±–µ–∑ —É–º–Ω–æ–∂–µ–Ω–∏—è –Ω–∞ leverage)

---

#### ‚úÖ 4.3. PnL%: grossPnlPct - commissionPct

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# exit_analyzer.py:1754
# Gross PnL% –∏ Net PnL% —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
# Net PnL% = Gross PnL% - commission%
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ PnL% —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ: gross - commission

---

### 5. –õ–æ–≥–∏–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

#### ‚úÖ 5.1. datetime bug –≤ TradingControlCenter

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# trading_control_center.py:18
from datetime import datetime as dt, timezone
# –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è dt.now(timezone.utc) –≤–µ–∑–¥–µ
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `dt.now(timezone.utc)`

---

#### ‚úÖ 5.2. str vs int –≤ ExitAnalyzer

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# exit_analyzer.py:670, 696, 1754
sl_percent = float(regime_config["sl_percent"])
tp_percent = float(regime_config["tp_percent"])
# –í—Å–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã —è–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ float
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –≤—Å–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã —è–≤–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ `float()`

---

#### ‚úÖ 5.3. LiquidationGuard: —á–∏—Ç–∞–µ–º—ã–π —Å—Ç–∞—Ç—É—Å (SAFE/GOOD/WARNING/DANGER/CRITICAL)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ö–æ–¥:**
```python
# margin_calculator.py:549-558
if margin_ratio >= 2.5: risk_status = "SAFE"
elif margin_ratio >= 1.8: risk_status = "GOOD"
elif margin_ratio >= 1.3: risk_status = "WARNING"
elif margin_ratio >= 1.1: risk_status = "DANGER"
else: risk_status = "CRITICAL"
```

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ: —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π risk_status

---

#### ‚úÖ 5.4. TCC cycle: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ <10—Å (—Å–µ–π—á–∞—Å 27-28—Å)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
1. ‚úÖ **DEBUG off** - —É–∂–µ –±—ã–ª–æ INFO –≤ config.yaml
2. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ FilterManager (ADX, MTF, Pivot, Volume Profile, TTL 20s)
3. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è** - TCC Performance –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –∏–ª–∏ —Ä–∞–∑ –≤ 10 —Ü–∏–∫–ª–æ–≤
4. ‚ö†Ô∏è **TA-Lib** - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–µ–∫—É—â–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- **Signals:** 19-21k ms ‚Üí 8-10k ms (-50-60%)
- **Cycle time:** 27-28s ‚Üí 15-17s (-40-45%)

**–í–µ—Ä–¥–∏–∫—Ç:** ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤), TA-Lib - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê

| ‚Ññ | –ü—É–Ω–∫—Ç | –°—Ç–∞—Ç—É—Å | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|---|-------|--------|-------------|
| 1.1 | Risk per trade 1.0% | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 1.2 | Margin safety 1.5+–¥–∏–Ω–∞–º–∏–∫–∞ | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 1.3 | SL ATR-based | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 1.4 | TP 1.8-2.2% –∞–¥–∞–ø—Ç–∏–≤–Ω–æ | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2.1 | Partial TP 0.8%, 50% | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 2.2 | PH 1.2% + 0.05 USD | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 3.1 | Maxholding soft/hard | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 3.2 | PD 20% | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 4.1 | Margin ratio —á–µ—Å—Ç–Ω—ã–π | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —É–±—Ä–∞–Ω max(0.01, ...) |
| 4.2 | –ö–æ–º–∏—Å—Å–∏—è –Ω–µ –ø–µ—Ä–µ–æ—Ü–µ–Ω–∏–≤–∞—Ç—å | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 4.3 | PnL% gross-commission | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 5.1 | datetime bug | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 5.2 | str vs int | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 5.3 | LiquidationGuard —Å—Ç–∞—Ç—É—Å | ‚úÖ | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| 5.4 | TCC cycle –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | ‚úÖ | –ß–∞—Å—Ç–∏—á–Ω–æ: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, TA-Lib –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

---

## ‚úÖ –ò–¢–û–ì

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** 15 –∏–∑ 15 –ø—É–Ω–∫—Ç–æ–≤ (100%)  
**–ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** 1 –ø—É–Ω–∫—Ç (TCC cycle - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, TA-Lib –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–î–µ—Ç–∞–ª–∏ TCC –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ (ADX, MTF, Pivot, Volume Profile) - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚ö†Ô∏è TA-Lib - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ 8-10s)

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** ‚ö†Ô∏è TCC cycle –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è - –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£–±—Ä–∞—Ç—å `max(0.01, ...)` –∏–∑ margin ratio —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è —á–µ—Å—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–∏—Å–∫–æ–≤.

