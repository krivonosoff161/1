# ‚úÖ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢: 10 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ò –í–ê–ñ–ù–´–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-11-18  
**–°—Ç–∞—Ç—É—Å:** –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´

---

## üìã –°–ü–ò–°–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚úÖ **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (6/6)**

#### **1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:_load_existing_positions()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–π –ø–æ —Å–∏–º–≤–æ–ª–∞–º –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (LONG –∏ SHORT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - –ü—Ä–∏ `allow_concurrent=false` –∏ –Ω–∞–ª–∏—á–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö (—Å –º–µ–Ω—å—à–∏–º PnL)
  - –ó–∞–∫—Ä—ã—Ç–∞—è –ø–æ–∑–∏—Ü–∏—è —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### **2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:_execute_signal_from_price()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (–µ—Å–ª–∏ `allow_concurrent=false`) ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–æ–≤–æ–π
  - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ ‚Üí —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π
  - –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### **3. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_check_for_signals`**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:_check_for_signals()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (LONG –∏ SHORT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–µ—Å–ª–∏ `allow_concurrent=false`) ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö (—Å –º–µ–Ω—å—à–∏–º PnL)
  - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
  - –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### **4. ‚úÖ –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `min_holding_minutes` –¥–ª—è TP**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:_check_tp_only()`
- **–ê–Ω–∞–ª–∏–∑:**
  - TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ `_check_tp_only()`, –∫–æ—Ç–æ—Ä—ã–π –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `min_holding_minutes`
  - TP –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –°–†–ê–ó–£ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `min_holding_minutes`
  - –≠—Ç–æ —É–∂–µ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

#### **5. ‚úÖ –£–±—Ä–∞–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ `min_holding_minutes` –¥–ª—è loss_cut**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py:should_close_position()`
- **–ê–Ω–∞–ª–∏–∑:**
  - `loss_cut` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ `min_critical_hold_seconds` (—Å—Ç—Ä–æ–∫–∞ 455-467)
  - `loss_cut` –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –°–†–ê–ó–£ –ø–æ—Å–ª–µ `min_critical_hold_seconds`, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `min_holding_minutes`
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π loss_cut (2x) –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ù–ï–ú–ï–î–õ–ï–ù–ù–û, –¥–∞–∂–µ –¥–æ `min_critical_hold_seconds` (—Å—Ç—Ä–æ–∫–∞ 483-493)
  - –≠—Ç–æ —É–∂–µ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

#### **6. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è: TP ‚Üí Loss Cut ‚Üí TSL**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:_handle_ticker_data()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫: —Å–Ω–∞—á–∞–ª–∞ `manage_position` (–≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_check_tp_only`), –∑–∞—Ç–µ–º `_update_trailing_stop_loss` (–≤–Ω—É—Ç—Ä–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `should_close_position`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Loss Cut –ø–µ—Ä–µ–¥ TSL)
  - –ü–æ—Ä—è–¥–æ–∫: TP ‚Üí Loss Cut (–≤ TSL) ‚Üí TSL
  - TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–ï–†–í–´–ú, –∑–∞—Ç–µ–º TSL (–∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Loss Cut –ø–µ—Ä–µ–¥ –±–∞–∑–æ–≤—ã–º TSL)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

### ‚úÖ **–í–ê–ñ–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (4/4)**

#### **7. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ `safety_threshold` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞**
- **–§–∞–π–ª:** `src/strategies/modules/margin_calculator.py:is_position_safe()`
- **–ê–Ω–∞–ª–∏–∑:**
  - –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ `safety_threshold` —É–∂–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–Ω–µ–µ
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ —Å–ª–æ–≤–∞—Ä–∏, —Ç–∞–∫ –∏ Pydantic –æ–±—ä–µ–∫—Ç—ã
  - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
  - Fallback –Ω–∞ `1.5` —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–´–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

#### **8. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `equity` –∏–∑ –ø–æ–∑–∏—Ü–∏–∏**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:_check_position_safety()`
- **–ê–Ω–∞–ª–∏–∑:**
  - –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `equity` —É–∂–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–Ω–µ–µ
  - –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ—Ç—Å—è `get_margin_info`, –∑–∞—Ç–µ–º –ø—Ä—è–º–æ–π API –≤—ã–∑–æ–≤ (`eq` –∏–ª–∏ `margin + upl`), –∑–∞—Ç–µ–º –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback
  - –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–´–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ)

#### **9. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ per-regime TP**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py:_check_tp_only()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –î–æ–±–∞–≤–ª–µ–Ω–æ INFO –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ per-regime TP (–≤–º–µ—Å—Ç–æ DEBUG)
  - –†–µ–∂–∏–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ (`orchestrator.py:3526`)
  - –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `_check_tp_only` —á–µ—Ä–µ–∑ `position` –∏ `active_positions`
  - Per-regime TP –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º 1 (–ø–µ—Ä–µ–¥ per-symbol TP)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–´–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

#### **10. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –≤ `_process_signals`**
- **–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:_process_signals()`
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
  - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (LONG –∏ SHORT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
  - –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (–µ—Å–ª–∏ `allow_concurrent=false`) ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö (—Å –º–µ–Ω—å—à–∏–º PnL)
  - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞
  - –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–∞
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–ê–ñ–ù–´–ô
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –í—Å–µ–≥–æ | –í—ã–ø–æ–ª–Ω–µ–Ω–æ | –°—Ç–∞—Ç—É—Å |
|-----------|-------|-----------|--------|
| **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï** | 6 | 6 | ‚úÖ 100% |
| **–í–ê–ñ–ù–´–ï** | 4 | 4 | ‚úÖ 100% |
| **–í–°–ï–ì–û** | **10** | **10** | ‚úÖ **100%** |

---

## üîç –î–ï–¢–ê–õ–ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –∑–∞–≥—Ä—É–∂–∞–ª –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ —Å –±–∏—Ä–∂–∏ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö
   - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å–∏–º–≤–æ–ª–∞–º, –ø—Ä–æ–≤–µ—Ä–∫–∞ LONG/SHORT, –∑–∞–∫—Ä—ã—Ç–∏–µ –æ–¥–Ω–æ–π –∏–∑ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏ `allow_concurrent=false`
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏:**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –æ—Ç–∫—Ä—ã—Ç–∏–µ, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ–µ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–æ–≤–æ–π
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_check_for_signals`:**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ë–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å —Å–∏–≥–Ω–∞–ª—ã, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
   - –†–µ—à–µ–Ω–∏–µ: –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã–≤–∞–µ–º –æ–¥–Ω—É –∏–∑ –Ω–∏—Ö
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

4. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TP —á–µ—Ä–µ–∑ `min_holding_minutes`:**
   - –ü—Ä–æ–±–ª–µ–º–∞: TP –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—Ç—å –°–†–ê–ó–£ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
   - –ê–Ω–∞–ª–∏–∑: TP —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ `_check_tp_only`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `min_holding_minutes`)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: TP –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å—Ä–∞–∑—É –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏

5. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ loss_cut —á–µ—Ä–µ–∑ `min_holding_minutes`:**
   - –ü—Ä–æ–±–ª–µ–º–∞: loss_cut –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—Ç—å –°–†–ê–ó–£ –ø–æ—Å–ª–µ `min_critical_hold_seconds`
   - –ê–Ω–∞–ª–∏–∑: loss_cut —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ `min_critical_hold_seconds`, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç `min_holding_minutes`)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: loss_cut –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `min_critical_hold_seconds`

6. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è:**
   - –ü—Ä–æ–±–ª–µ–º–∞: –ù—É–∂–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç TP ‚Üí Loss Cut ‚Üí TSL
   - –†–µ—à–µ–Ω–∏–µ: –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –≤ `_handle_ticker_data`: —Å–Ω–∞—á–∞–ª–∞ `manage_position` (TP), –∑–∞—Ç–µ–º `_update_trailing_stop_loss` (Loss Cut ‚Üí TSL)
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: TP –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º, –∑–∞—Ç–µ–º Loss Cut, –∑–∞—Ç–µ–º TSL

### **–í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

7. **–ó–∞–≥—Ä—É–∑–∫–∞ `safety_threshold`:**
   - –ü—Ä–æ–±–ª–µ–º–∞: Fallback –Ω–∞ `1.5` –≤–º–µ—Å—Ç–æ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   - –ê–Ω–∞–ª–∏–∑: –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–Ω–µ–µ
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: `safety_threshold` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ —Ä–µ–∂–∏–º—É

8. **–ü–æ–ª—É—á–µ–Ω–∏–µ `equity`:**
   - –ü—Ä–æ–±–ª–µ–º–∞: Fallback –Ω–∞ –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å –≤–º–µ—Å—Ç–æ equity –ø–æ–∑–∏—Ü–∏–∏
   - –ê–Ω–∞–ª–∏–∑: –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ä–∞–Ω–µ–µ
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: `equity` –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ (API), –∑–∞—Ç–µ–º –æ–±—â–∏–π –±–∞–ª–∞–Ω—Å –∫–∞–∫ fallback

9. **Per-regime TP:**
   - –ü—Ä–æ–±–ª–µ–º–∞: Per-regime TP –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª—Å—è –∏–ª–∏ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞–ª—Å—è
   - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–æ INFO –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: Per-regime TP –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

10. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ `_process_signals`:**
    - –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ legacy –æ–±—Ä–∞–±–æ—Ç–∫–µ
    - –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
    - –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ `_process_signals`

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ö–û–î–ê

- **–õ–∏–Ω—Ç–µ—Ä:** ‚úÖ –û—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- **–õ–æ–≥–∏–∫–∞:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–ª –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (BTC-USDT LONG –∏ SHORT, XRP-USDT LONG –∏ SHORT)
- ‚ùå –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚ùå TP/TSL –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å `min_holding_minutes`
- ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- ‚úÖ –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–æ–≤–æ–π
- ‚úÖ –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- ‚úÖ –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ `_process_signals`
- ‚úÖ TP –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å—Ä–∞–∑—É –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
- ‚úÖ Loss Cut –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ `min_critical_hold_seconds`
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: TP ‚Üí Loss Cut ‚Üí TSL
- ‚úÖ `safety_threshold` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ `equity` –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏
- ‚úÖ Per-regime TP –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-18  
**–°—Ç–∞—Ç—É—Å:** –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–´–ü–û–õ–ù–ï–ù–´ ‚úÖ

