# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤

## üìä –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è `_get_current_market_price()` - –ö–†–ò–¢–ò–ß–ù–û

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç DataRegistry (–∫—ç—à –∏–∑ WebSocket) - –ë–ï–ó API –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ fallback –ª–æ–≥–∏–∫–∞ (—Ü–µ–Ω–∞ –∏–∑ —Å–≤–µ—á–∏ ‚Üí API –∑–∞–ø—Ä–æ—Å)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (float, int, None)
- ‚úÖ –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `float`, –Ω–∏–∫–æ–≥–¥–∞ `None`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
1. **DataRegistry** (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ WebSocket) - –ë–´–°–¢–†–û ‚ö°
2. **–¶–µ–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —Å–≤–µ—á–∏** (fallback_price) - –ë–´–°–¢–†–û ‚ö°
3. **API –∑–∞–ø—Ä–æ—Å** (get_price_limits) - –ú–ï–î–õ–ï–ù–ù–û üêå (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** -15-20 —Å–µ–∫—É–Ω–¥

---

### 2. ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ - –ö–†–ò–¢–ò–ß–ù–û

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Ü–∏–∫–ª `for symbol in symbols:` –Ω–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —á–µ—Ä–µ–∑ `asyncio.gather()`
- ‚úÖ –í—Å–µ —Å–∏–º–≤–æ–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (list, Exception, –¥—Ä—É–≥–∏–µ)

**–ö–æ–¥:**
```python
# ‚úÖ –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
tasks = [_generate_symbol_signals_task(symbol) for symbol in symbols]
results = await asyncio.gather(*tasks, return_exceptions=True)
```

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** -15-20 —Å–µ–∫—É–Ω–¥ (–≤—Ä–µ–º—è = max –≤–º–µ—Å—Ç–æ sum)

---

### 3. ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —Å–∏–º–≤–æ–ª –≤ `_generate_symbol_signals_task()`
- ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä `regime` –≤ `_generate_symbol_signals()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ä–µ–∂–∏–º–∞ (str)
- ‚úÖ Fallback –Ω–∞ "ranging" –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:** -0.5-1 —Å–µ–∫—É–Ω–¥–∞

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω—ã:

1. **–¶–µ–Ω–∞ –∏–∑ DataRegistry:**
   ```python
   if price is not None and isinstance(price, (int, float)) and float(price) > 0:
       return float(price)
   ```

2. **Fallback —Ü–µ–Ω–∞:**
   ```python
   if fallback_price and isinstance(fallback_price, (int, float)) and float(fallback_price) > 0:
       return float(fallback_price)
   ```

3. **–¶–µ–Ω–∞ –∏–∑ API:**
   ```python
   if current_price and isinstance(current_price, (int, float)) and float(current_price) > 0:
       return float(current_price)
   ```

4. **–†–µ–∂–∏–º:**
   ```python
   if regime_obj:
       current_regime = (
           regime_obj.lower()
           if isinstance(regime_obj, str)
           else str(regime_obj).lower()
       )
   ```

5. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
   ```python
   if isinstance(result, Exception):
       # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏
   elif isinstance(result, list):
       signals.extend(result)
   else:
       # –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π —Ç–∏–ø
   ```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è:** 22.3 —Å–µ–∫—É–Ω–¥—ã  
**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:** **2-4 —Å–µ–∫—É–Ω–¥—ã** ‚úÖ

**–†–∞–∑–±–∏–≤–∫–∞:**
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω: -15-20 —Å–µ–∫
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: -15-20 —Å–µ–∫ (—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞: -0.5-1 —Å–µ–∫

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Ä–µ–∂–∏–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ä—ã–Ω–∫–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Ä–µ–º—è —Ü–∏–∫–ª–æ–≤ TCC –≤ –ª–æ–≥–∞—Ö
3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –µ—Å–ª–∏ –≤—Ä–µ–º—è –≤—Å–µ –µ—â–µ –≤—ã—Å–æ–∫–æ–µ, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å V-—Ä–∞–∑–≤–æ—Ä–æ—Ç—ã

---

**–î–∞—Ç–∞:** 23 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é





