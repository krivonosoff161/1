# –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –û–†–î–ï–†–ê –ò PNL

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –æ—Ä–¥–µ—Ä–∞, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã–ª–∞—Å—å –Ω–∞ –±–∏—Ä–∂–µ

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê 1: –û–®–ò–ë–ö–ê –ü–†–ò –†–ê–ó–ú–ï–©–ï–ù–ò–ò –û–†–î–ï–†–ê

### –û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∞—Ö:
```
2025-11-23 13:35:24 | ERROR | src.strategies.scalping.futures.order_executor:_execute_order:199 - –û—à–∏–±–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–∞: 'NoneType' object has no attribute 'get'
```

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ `_place_limit_order`:**
- –°—Ç—Ä–æ–∫–∞ 537-539: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `result.get("code") == "0"`, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `order_id`
- –°—Ç—Ä–æ–∫–∞ 609-618: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å —Å `order_id`, –Ω–æ –µ—Å–ª–∏ `code != "0"`, —Ç–æ `order_id` –º–æ–∂–µ—Ç –±—ã—Ç—å `None`
- –í `_execute_order` –Ω–∞ —Å—Ç—Ä–æ–∫–µ 185: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `result.get("success")`, –Ω–æ –µ—Å–ª–∏ `result` —Å–æ–¥–µ—Ä–∂–∏—Ç `order_id = None`, —Ç–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ `result.get("order_id")` –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –æ—à–∏–±–∫–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `_place_limit_order` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å `success` –∏ `order_id` (–¥–∞–∂–µ –µ—Å–ª–∏ `None`)
- –ò–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ `order_id` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê 2: PNL –ü–û–°–õ–ï –û–¢–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ò

### –î–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏:
- **–°–∏–º–≤–æ–ª:** ETH-USDT
- **–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** SHORT (5x)
- **–†–∞–∑–º–µ—Ä:** 0.064 ETH
- **–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:** 2816.28 USDT
- **–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞:** 2843.81 USDT
- **–ü–ª–∞–≤–∞—é—â–∏–π PnL:** -1.76 USDT (-4.87%)

### –†–∞—Å—á–µ—Ç PnL –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–∏:

**–§–æ—Ä–º—É–ª–∞ –¥–ª—è SHORT:**
```
PnL% –æ—Ç —Ü–µ–Ω—ã = (entry_price - current_price) / entry_price * 100
PnL% –æ—Ç –º–∞—Ä–∂–∏ = PnL% –æ—Ç —Ü–µ–Ω—ã * leverage
```

**–†–∞—Å—á–µ—Ç:**
```
PnL% –æ—Ç —Ü–µ–Ω—ã = (2816.28 - 2843.81) / 2816.28 * 100 = -0.98%
PnL% –æ—Ç –º–∞—Ä–∂–∏ = -0.98% * 5 = -4.9%
PnL –≤ USD = (2816.28 - 2843.81) * 0.064 = -1.76 USDT
```

**–í—ã–≤–æ–¥:** ‚úÖ PnL —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ü–æ–∑–∏—Ü–∏—è SHORT –æ—Ç–∫—Ä—ã—Ç–∞ –ø–æ 2816.28, —Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –¥–æ 2843.81 ‚Üí –ø–æ–∑–∏—Ü–∏—è –≤ –º–∏–Ω—É—Å–µ.

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê 3: –ü–†–ê–í–ò–õ–¨–ù–û–°–¢–¨ –ù–ê–ü–†–ê–í–õ–ï–ù–ò–Ø –°–ò–ì–ù–ê–õ–ê

### –î–∞–Ω–Ω—ã–µ –∏–∑ –ª–æ–≥–æ–≤:
- **–°–∏–≥–Ω–∞–ª:** ETH-USDT SHORT @ $2813.49 (—Å–∏–ª–∞=0.56)
- **–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞:** 2816.28 USDT
- **–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞:** 2843.81 USDT

### –ê–Ω–∞–ª–∏–∑ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

**–õ–æ–≥–∏–∫–∞ SHORT —Å–∏–≥–Ω–∞–ª–∞ (–∏–∑ –∫–æ–¥–∞):**
- `ma_fast < ma_slow` (–±—ã—Å—Ç—Ä–∞—è MA –Ω–∏–∂–µ –º–µ–¥–ª–µ–Ω–Ω–æ–π)
- `current_price < ma_fast` (—Ü–µ–Ω–∞ –Ω–∏–∂–µ –±—ã—Å—Ç—Ä–æ–π MA)
- `price_direction != "up"` (—Ü–µ–Ω–∞ –Ω–µ —Ä–∞—Å—Ç–µ—Ç)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ï—Å–ª–∏ —Å–∏–≥–Ω–∞–ª –±—ã–ª SHORT –ø—Ä–∏ —Ü–µ–Ω–µ 2813.49
- –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã–ª–∞—Å—å –ø–æ 2816.28 (—Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –Ω–∞ +0.1%)
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ 2843.81 (—Ü–µ–Ω–∞ –≤—ã—Ä–æ—Å–ª–∞ –µ—â–µ –Ω–∞ +1.0%)

**–í–æ–ø—Ä–æ—Å:** –ü–æ—á–µ–º—É —Å–∏–≥–Ω–∞–ª –±—ã–ª SHORT, –µ—Å–ª–∏ —Ü–µ–Ω–∞ —Ä–æ—Å–ª–∞?

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ –°–∏–≥–Ω–∞–ª –±—ã–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º (EMA –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞ –ø–∞–¥–µ–Ω–∏–µ), –Ω–æ —Ü–µ–Ω–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∞—Å—å
2. ‚ö†Ô∏è –°–∏–≥–Ω–∞–ª –±—ã–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º (EMA –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ —Ç–µ–∫—É—â–∏–π —Ä–æ—Å—Ç)
3. ‚ö†Ô∏è –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏

---

## üîç –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ `_place_limit_order` ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `result.get("code") != "0"`, —Ç–æ `order_id` –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ù–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å —Å `order_id = None`
- –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ—Å—Ç—É–ø–∞ –∫ `order_id`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `_place_limit_order` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å `success` –∏ `order_id`
- –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –æ—Ä–¥–µ—Ä –Ω–µ —Ä–∞–∑–º–µ—â–µ–Ω

---

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (SHORT/LONG)?
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã?
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä—ã?

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º —Ü–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö –∏ –ø–∞—Ä–∞—Ö

---

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç PnL ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è PnL –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π?
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–µ–≤–µ—Ä–∏–¥–∂?
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è PnL –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç –º–∞—Ä–∂–∏?

**–§–æ—Ä–º—É–ª–∞ –¥–ª—è SHORT:**
```
PnL% –æ—Ç —Ü–µ–Ω—ã = (entry_price - current_price) / entry_price * 100
PnL% –æ—Ç –º–∞—Ä–∂–∏ = PnL% –æ—Ç —Ü–µ–Ω—ã * leverage
PnL –≤ USD = (entry_price - current_price) * size
```

---

## ‚úÖ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É –≤ `_place_limit_order` ‚úÖ

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å —Å `success` –∏ `order_id`
- –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Å–ª—É—á–∞–π, –∫–æ–≥–¥–∞ –æ—Ä–¥–µ—Ä –Ω–µ —Ä–∞–∑–º–µ—â–µ–Ω
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–ª—É—á–∞–∏

---

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞
- –£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ç–µ–∫—É—â–µ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä—ã

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –°—Ä–∞–≤–Ω–∏—Ç—å —Å–∏–≥–Ω–∞–ª—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º –¥–≤–∏–∂–µ–Ω–∏–µ–º —Ü–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö –∏ –ø–∞—Ä–∞—Ö

---

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—á–µ—Ç PnL ‚úÖ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è PnL –¥–ª—è SHORT –ø–æ–∑–∏—Ü–∏–π
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–µ–≤–µ—Ä–∏–¥–∂
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è PnL –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç –º–∞—Ä–∂–∏

---

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

