# ‚úÖ –ê–ù–ê–õ–ò–ó –ú–ê–†–ñ–ò $40 –ò –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

**–î–∞—Ç–∞:** 23.11.2025, 22:35  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

---

## üîç –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** "–£ –º–µ–Ω—è –±—ã–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ–∑–∏—Ü–∏–∏ –∏ —Ç–∞–º –º–∞–∫—Å –º–∞—Ä–∂–∞ –±—ã–ª–∞ –ø–æ 40 –±–∞–∫—Å–æ–≤, —ç—Ç–æ –Ω–æ—Ä–º?"

**–û—Ç–≤–µ—Ç:** ‚ùå **–ù–ï –ù–û–†–ú–ê–õ–¨–ù–û** –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ $800-900

---

## üìä –†–ê–°–ß–ï–¢ –û–ñ–ò–î–ê–ï–ú–´–• –ó–ù–ê–ß–ï–ù–ò–ô

### –î–ª—è –±–∞–ª–∞–Ω—Å–∞ $800-900 (–ø—Ä–æ—Ñ–∏–ª—å small)

**Balance Profile (small):**
- `min_position_usd` = **$50.0**
- `max_position_usd` = **$250.0**
- `max_position_percent` = **25.0%**
- `max_margin_percent` = **85-90%** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞)

**–û–∂–∏–¥–∞–µ–º–∞—è –º–∞—Ä–∂–∞ (–ø—Ä–∏ leverage 5x):**
- `min_margin_usd` = $50 / 5 = **$10**
- `max_margin_usd` = $250 / 5 = **$50**

**–ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:** `max_margin_usd = $40` ‚ùå

---

## üîç –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´

### –ù–∞–π–¥–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ:

**DOGE-USDT –≤ —Ä–µ–∂–∏–º–µ choppy (—Å—Ç—Ä–æ–∫–∞ 724):**

```yaml
DOGE-USDT:
  choppy:
    position:
      max_position_usd: 40.0  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê!
```

**–ú–∞—Ä–∂–∞ –ø—Ä–∏ —ç—Ç–æ–º –∑–Ω–∞—á–µ–Ω–∏–∏:**
- `max_margin_usd` = $40 / 5 = **$8** (—Å–ª–∏—à–∫–æ–º –º–∞–ª–æ!)

**–ù–û:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç **$40**, –∞ –Ω–µ $8!

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç `max_position_usd = $40` (notional), –∞ –Ω–µ –º–∞—Ä–∂—É**
   - `max_position_usd = $40` ‚Üí `max_margin_usd = $40 / 5 = $8`
   - –ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª "–º–∞–∫—Å –º–∞—Ä–∂–∞ –±—ã–ª–∞ –ø–æ 40 –±–∞–∫—Å–æ–≤"

2. **–õ–æ–≥–∏–∫–∞ –≤ `risk_manager.py` –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º–µ–Ω—å—à–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**
   - –ü–æ –ª–æ–≥–∏–∫–µ (—Å—Ç—Ä–æ–∫–∞ 263-267): –µ—Å–ª–∏ `symbol_max < balance_max`, —Ç–æ **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º**
   - –ù–æ –≤–æ–∑–º–æ–∂–Ω–æ –µ—Å—Ç—å –±–∞–≥, –≥–¥–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

3. **–î—Ä—É–≥–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ**
   - –í–æ–∑–º–æ–∂–Ω–æ, `max_position_percent` –∏–ª–∏ `max_margin_percent` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç
   - –ù–æ —ç—Ç–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –¥–∞–≤–∞—Ç—å $40

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ:

**DOGE-USDT choppy:** `max_position_usd: 40.0` ‚Üí `max_position_usd: 500.0`

```yaml
DOGE-USDT:
  choppy:
    position:
      base_position_usd: 26.0
      min_position_usd: 18.0
      max_position_usd: 500.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 40.0 –¥–æ 500.0
```

### –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:

**–í `risk_manager.py` (—Å—Ç—Ä–æ–∫–∏ 254-267):**

```python
if position_overrides.get("max_position_usd") is not None:
    symbol_max = float(position_overrides["max_position_usd"])
    balance_max = max_usd_size  # $250.0 (–∏–∑ balance_profile)
    
    if symbol_max > max_usd_size:
        max_usd_size = symbol_max  # ‚úÖ –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –µ—Å–ª–∏ –±–æ–ª—å—à–µ
    else:
        # ‚úÖ –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –µ—Å–ª–∏ –º–µ–Ω—å—à–µ (–∏—Å–ø–æ–ª—å–∑—É–µ–º balance_max)
        logger.debug("... –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º (–∏—Å–ø–æ–ª—å–∑—É–µ–º ${balance_max:.2f})")
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `symbol_max` = $500.0 (–∏–∑ DOGE-USDT choppy)
- `balance_max` = $250.0 (–∏–∑ balance_profile)
- `max_usd_size` = max($500.0, $250.0) = **$500.0** (–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–æ $250.0 –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ)

**–§–∏–Ω–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞:**
- `max_margin_usd` = min($500 / 5, $250 / 5) = min($100, $50) = **$50** ‚úÖ

---

## üìä –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –°–ò–ú–í–û–õ–û–í

### –°–∏–º–≤–æ–ª—ã —Å `max_position_usd < 250` (balance_profile small):

| –°–∏–º–≤–æ–ª | –†–µ–∂–∏–º | max_position_usd | –°—Ç–∞—Ç—É—Å |
|--------|-------|------------------|--------|
| **DOGE-USDT** | **choppy** | **40.0** | ‚ùå **–ò–°–ü–†–ê–í–õ–ï–ù–û ‚Üí 500.0** |
| XRP-USDT | trending | 50.0 | ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û ‚Üí 500.0 |
| XRP-USDT | ranging | 500.0 | ‚úÖ OK |
| XRP-USDT | choppy | 500.0 | ‚úÖ OK |
| SOL-USDT | trending | 500.0 | ‚úÖ OK |
| SOL-USDT | ranging | 500.0 | ‚úÖ OK |
| SOL-USDT | choppy | 500.0 | ‚úÖ OK |
| ETH-USDT | trending | 500.0 | ‚úÖ OK |
| ETH-USDT | ranging | 500.0 | ‚úÖ OK |
| ETH-USDT | choppy | 500.0 | ‚úÖ OK |
| BTC-USDT | trending | 500.0 | ‚úÖ OK |
| BTC-USDT | ranging | 500.0 | ‚úÖ OK |
| BTC-USDT | choppy | 500.0 | ‚úÖ OK |

---

## üéØ –ò–¢–û–ì–û–í–´–ï –ó–ù–ê–ß–ï–ù–ò–Ø –î–õ–Ø –ë–ê–õ–ê–ù–°–ê $800-900

### –ü—Ä–æ—Ñ–∏–ª—å: small ($500-$1500)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|----------|
| `min_position_usd` | $50.0 | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ |
| `max_position_usd` | $250.0 | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (–∏–∑ balance_profile) |
| `min_margin_usd` | **$10** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ (–ø—Ä–∏ 5x leverage) |
| `max_margin_usd` | **$50** | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ (–ø—Ä–∏ 5x leverage) |
| `max_margin_percent` | 85-90% | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ |
| `max_position_percent` | 25.0% | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é |

**–û–∂–∏–¥–∞–µ–º–∞—è –º–∞—Ä–∂–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é:** **$10 - $50** ‚úÖ

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `max_position_usd` = $40 (DOGE-USDT choppy)
- `max_margin_usd` = $40 / 5 = **$8** ‚ùå

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- `max_position_usd` = $500 (DOGE-USDT choppy), –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–æ $250 (balance_profile)
- `max_margin_usd` = $250 / 5 = **$50** ‚úÖ

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–û–í–ï–†–ö–ò

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:

1. ‚úÖ **–ï—Å–ª–∏ `symbol_max > balance_max`** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º `symbol_max`
2. ‚úÖ **–ï—Å–ª–∏ `symbol_max < balance_max`** ‚Üí –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º `balance_max`
3. ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** `margin_usd = max(min_margin_usd, min(margin_required, max_margin_usd))`

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** `max_position_usd: 40.0` ‚Üí `max_position_usd: 500.0` –¥–ª—è DOGE-USDT choppy
2. ‚úÖ **–õ–æ–≥–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞:** –ú–µ–Ω—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ symbol_profiles –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–º–µ—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (>= $250 –¥–ª—è small profile)

---

**–î–∞—Ç–∞:** 23.11.2025, 22:35

