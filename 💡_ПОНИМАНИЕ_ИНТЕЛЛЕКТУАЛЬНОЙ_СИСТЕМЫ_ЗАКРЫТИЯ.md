# üí° –ü–û–ù–ò–ú–ê–ù–ò–ï: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

**–î–∞—Ç–∞:** 26.11.2025 21:12  
**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## üéØ –ö–û–ù–¶–ï–ü–¶–ò–Ø

**–ò–¥–µ—è:** –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º TP/SL, –∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ:

1. ‚úÖ **–ê–Ω–∞–ª–∏–∑–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤** (RSI, MACD, ADX, Order Flow, Bollinger Bands)
2. ‚úÖ **–†–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞** (trending/ranging/choppy)
3. ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –≤–∏–ª–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
4. ‚úÖ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π:** –∑–∞–∫—Ä—ã—Ç—å / –ø—Ä–æ–¥–ª–∏—Ç—å TP / –¥–µ—Ä–∂–∞—Ç—å –¥–∞–ª—å—à–µ

---

## üìä –ö–û–ú–ü–û–ù–ï–ù–¢–´ –°–ò–°–¢–ï–ú–´

### **1. ExitAnalyzer**

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–π

**–†–µ—à–µ–Ω–∏—è:**
- `close` - –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é
- `extend_tp` - –ø—Ä–æ–¥–ª–∏—Ç—å TP (–ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ)
- `partial_close` - —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–∫—Ä—ã—Ç—å
- `protect` - –∑–∞—â–∏—Ç–∏—Ç—å –ø—Ä–∏–±—ã–ª—å (trailing stop)

**–ê–Ω–∞–ª–∏–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞:**
- `_generate_exit_for_trending()` - –ª–æ–≥–∏–∫–∞ –¥–ª—è trending
- `_generate_exit_for_ranging()` - –ª–æ–≥–∏–∫–∞ –¥–ª—è ranging
- `_generate_exit_for_choppy()` - –ª–æ–≥–∏–∫–∞ –¥–ª—è choppy

---

### **2. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**

#### **ADX (FastADX):**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—É —Ç—Ä–µ–Ω–¥–∞ (ADX > 25 = —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥)
- `trend_strength` (0-1) –Ω–∞ –æ—Å–Ω–æ–≤–µ ADX

#### **Order Flow:**
- –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ (–ø–æ–∫—É–ø–∞—Ç–µ–ª–∏/–ø—Ä–æ–¥–∞–≤—Ü—ã)
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ —Ç—Ä–µ–Ω–¥–∞

#### **RSI:**
- –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å
- –°–∏–≥–Ω–∞–ª—ã —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

#### **MACD:**
- –ë—ã—á—å—è/–º–µ–¥–≤–µ–∂—å—è –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è
- –°–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞

#### **Bollinger Bands:**
- –£—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è
- –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

#### **Multi-Timeframe (MTF):**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö

---

### **3. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤–∏–ª–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

#### **–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞ (trending/ranging/choppy):**

**BTC-USDT –ø—Ä–∏–º–µ—Ä—ã:**

**Trending:**
- `tp_percent: 5.0%` (–≤—ã—à–µ, —Ç.–∫. —Ç—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π)
- `sl_percent: 1.5%`
- `big_profit_exit_percent: 2.5%` (–¥–µ—Ä–∂–∞—Ç—å –¥–æ–ª—å—à–µ)

**Ranging:**
- `tp_percent: 5.0%` (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–æ)
- `sl_percent: 2.0%`
- `big_profit_exit_percent: 2.5%`

**Choppy:**
- `tp_percent: 4.0%` (–º–µ–Ω—å—à–µ, —Ç.–∫. —Ö–∞–æ—Å)
- `sl_percent: 1.5%`
- `big_profit_exit_percent: 1.5%` (–±—ã—Å—Ç—Ä–µ–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å)

---

## üîç –õ–û–ì–ò–ö–ê –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–ô

### **–ü—Ä–∏–º–µ—Ä –¥–ª—è Trending —Ä–µ–∂–∏–º–∞:**

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- PnL = 4.93%
- ADX = 50+ (—Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥)
- Order Flow = –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π (–ø–æ–∫—É–ø–∞—Ç–µ–ª–∏)
- RSI = 60 (–Ω–µ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω)
- MACD = –±—ã—á—å—è –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ `extend_tp` - –ø—Ä–æ–¥–ª–∏—Ç—å TP (—Ç—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π)
- ‚ùå –ù–ï –∑–∞–∫—Ä—ã–≤–∞—Ç—å (—Ç—Ä–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)

**–ò–ª–∏:**

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- PnL = 4.93%
- ADX = 50+ (—Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥)
- Order Flow = —Ä–∞–∑–≤–æ—Ä–æ—Ç (–ø—Ä–æ–¥–∞–≤—Ü—ã –≤—Å—Ç—É–ø–∞—é—Ç)
- RSI = 75 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω)
- MACD = –º–µ–¥–≤–µ–∂—å—è –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ `close` - –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é (—Ä–∞–∑–≤–æ—Ä–æ—Ç —Ç—Ä–µ–Ω–¥–∞)

---

### **–ü—Ä–∏–º–µ—Ä –¥–ª—è Ranging —Ä–µ–∂–∏–º–∞:**

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- PnL = 4.93%
- ADX < 20 (—Å–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥)
- –¶–µ–Ω–∞ —É Bollinger –≤–µ—Ä—Ö–Ω–µ–π –ø–æ–ª–æ—Å—ã
- RSI = 70 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω)

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ `close` - –∑–∞–∫—Ä—ã—Ç—å (–¥–æ—Å—Ç–∏–≥–ª–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è)

---

## ‚ö†Ô∏è –ë–õ–û–ö–ò–†–û–í–ö–ê TSL - –≠–¢–û –§–ò–ß–ê!

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:**

**–ö–æ–≥–¥–∞ TSL –≥–æ–≤–æ—Ä–∏—Ç "–∑–∞–∫—Ä—ã—Ç—å" (—Ü–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ —Å—Ç–æ–ø):**

1. ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:
   - RSI –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω? (< 30 –¥–ª—è LONG) ‚Üí –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
   - MACD –±—ã—á—å—è –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è? ‚Üí –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
   - –¶–µ–Ω–∞ —É Bollinger –Ω–∏–∂–Ω–µ–π –ø–æ–ª–æ—Å—ã? ‚Üí –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å
   - ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥? ‚Üí –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å

2. ‚úÖ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ:
   - **–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ** - –µ—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω—ã–π —Ä–∞–∑–≤–æ—Ä–æ—Ç
   - **–†–∞–∑—Ä–µ—à–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ** - –µ—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç

3. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:
   - –ü–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π (—Ç—Ä–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)
   - –ò–ª–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (—Ä–∞–∑–≤–æ—Ä–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨

### **1. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ExitAnalyzer?**

**–í–æ–ø—Ä–æ—Å—ã:**
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ `ExitAnalyzer.analyze_position()`?
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã?
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ä–µ–∂–∏–º—ã?

### **2. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL?**

**–í–æ–ø—Ä–æ—Å—ã:**
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö?
- ‚úÖ –£—á–∏—Ç—ã–≤–∞–µ—Ç –ª–∏ –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã?
- ‚úÖ –ù–µ —Å–ª–∏—à–∫–æ–º –ª–∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞?

### **3. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤–∏–ª–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤?**

**–í–æ–ø—Ä–æ—Å—ã:**
- ‚úÖ –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞?
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞?
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—è?

---

## üìù –í–´–í–û–î–´

**–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL - —ç—Ç–æ –Ω–µ –±–∞–≥, –∞ –§–ò–ß–ê!** ‚úÖ

–û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ—Ç—É:
- –£—á–∏—Ç—ã–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ü—Ä–∏–Ω–∏–º–∞—Ç—å —É–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- –ù–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—Ç–∫–∞—Ç–∞—Ö –≤ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ

**–ù–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ù–µ —Å–ª–∏—à–∫–æ–º –ª–∏ –æ–Ω–∞ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è
- –£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ª–∏ –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üîß –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:**

**1. TrailingSLCoordinator –≤—ã–∑—ã–≤–∞–µ—Ç ExitAnalyzer:**

```python
# trailing_sl_coordinator.py, —Å—Ç—Ä–æ–∫–∞ 647
exit_decision = await self.exit_analyzer.analyze_position(symbol)
```

**2. ExitAnalyzer –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é:**

- –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (trending/ranging/choppy)
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (ADX, Order Flow, RSI, MACD, Bollinger)
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:
  - `close` - –∑–∞–∫—Ä—ã—Ç—å
  - `extend_tp` - –ø—Ä–æ–¥–ª–∏—Ç—å TP
  - `partial_close` - —á–∞—Å—Ç–∏—á–Ω–æ –∑–∞–∫—Ä—ã—Ç—å
  - `hold` - –¥–µ—Ä–∂–∞—Ç—å –¥–∞–ª—å—à–µ

**3. TrailingSLCoordinator –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ:**

```python
if action == "close":
    await self.close_position_callback(symbol, reason)
elif action == "partial_close":
    fraction = exit_decision.get("fraction", 0.5)
    await self.position_manager.close_partial_position(symbol, fraction)
elif action == "extend_tp":
    new_tp_percent = exit_decision.get("new_tp")
    # –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TSL
```

**4. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞):**

- –†–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –µ—Å–ª–∏ ExitAnalyzer –Ω–µ —Ä–µ—à–∏–ª –∑–∞–∫—Ä—ã—Ç—å
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, MACD, Bollinger)
- –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TSL, –µ—Å–ª–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç –≤ –Ω–∞—à—É –ø–æ–ª—å–∑—É

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –î–£–ë–õ–ò–†–û–í–ê–ù–ò–ï –õ–û–ì–ò–ö–ò

### **–°–µ–π—á–∞—Å:**

1. **ExitAnalyzer** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ
2. **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL** –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ –∂–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–≤–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ú–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º
- –õ–æ–≥–∏–∫–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è

### **–†–µ—à–µ–Ω–∏–µ:**

**–í–∞—Ä–∏–∞–Ω—Ç 1:** –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É TSL, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ ExitAnalyzer
- ExitAnalyzer —É–∂–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∂–∏–º–∞ –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL –∏–∑–±—ã—Ç–æ—á–Ω–∞

**–í–∞—Ä–∏–∞–Ω—Ç 2:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É TSL —Å ExitAnalyzer
- ExitAnalyzer –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ: `block_close` –∏–ª–∏ `allow_close`
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ

**–í–∞—Ä–∏–∞–Ω—Ç 3:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞)
- ExitAnalyzer –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏—è
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π

---

## üìù –í–´–í–û–î–´

‚úÖ **ExitAnalyzer —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —É–º–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å TrailingSLCoordinator

‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ TSL - —ç—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞:**
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç ExitAnalyzer
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ –∂–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –ú–æ–∂–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å —Ä–µ—à–µ–Ω–∏—è–º–∏ ExitAnalyzer

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —É–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É TSL –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –µ—ë —Å ExitAnalyzer
- ExitAnalyzer —É–∂–µ –¥–µ–ª–∞–µ—Ç –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ

---

## üîß –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç ExitAnalyzer - **–†–ê–ë–û–¢–ê–ï–¢**
2. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - **–ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø**
3. ‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ TSL - **–î–£–ë–õ–ò–†–£–ï–¢ ExitAnalyzer**
4. üí° –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ TSL —Å ExitAnalyzer –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

