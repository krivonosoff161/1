# ПОЛНАЯ ПРОВЕРКА ВСЕХ FALLBACK ВО ВСЕХ МОДУЛЯХ

**Дата:** 23 ноября 2025  
**Цель:** Проверить ВСЕ модули на правильное использование fallback значений

---

## ✅ ПРОВЕРЕННЫЕ МОДУЛИ

### 1. `order_executor.py` ✅ ИСПРАВЛЕНО

**Проверка:** Логика расчета `limit_offset_percent`
**Статус:** ✅ Правильная логика
- ✅ `offset_percent = None` (не используем fallback сразу)
- ✅ Проверяем per-symbol+regime из конфига
- ✅ Проверяем per-regime из конфига
- ✅ Fallback ТОЛЬКО если `offset_percent is None`

---

### 2. `position_manager.py` ✅ ИСПРАВЛЕНО

**Проверка:** Логика расчета `tp_percent` и `loss_cut_percent`
**Статус:** ✅ Исправлено

**`_get_adaptive_tp_percent`:**
- ✅ `tp_percent = None` (не используем fallback сразу)
- ✅ Проверяем per-regime TP из конфига
- ✅ Проверяем per-symbol TP из конфига
- ✅ Fallback ТОЛЬКО если `tp_percent is None`

**`loss_cut_percent`:**
- ⚠️ Используется `getattr(tsl_config, "loss_cut_percent", 1.5)` - это fallback
- ✅ Проверяется сначала `regime_params.get("loss_cut_percent")`
- ✅ Fallback используется ТОЛЬКО если значение не найдено

---

### 3. `config_manager.py` ⚠️ НУЖНО ПРОВЕРИТЬ

**Проверка:** Методы получения параметров из конфига
**Статус:** ⚠️ Проверяю...

---

### 4. `trailing_sl_coordinator.py` ⚠️ НУЖНО ПРОВЕРИТЬ

**Проверка:** Логика получения TSL параметров
**Статус:** ⚠️ Проверяю...

---

### 5. `risk_manager.py` ✅ ПРАВИЛЬНО

**Проверка:** Логика расчета position size
**Статус:** ✅ Правильная логика
- ✅ Используется `.get()` с fallback - это правильно
- ✅ Fallback используется ТОЛЬКО если значение не найдено в словаре

---

### 6. Фильтры ⚠️ НУЖНО ПРОВЕРИТЬ

**Проверка:** Логика получения параметров фильтров
**Статус:** ⚠️ Проверяю...

---

### 7. ARM (Adaptive Regime Manager) ⚠️ НУЖНО ПРОВЕРИТЬ

**Проверка:** Логика получения параметров режимов
**Статус:** ⚠️ Проверяю...

---

### 8. Margin Calculator ⚠️ НУЖНО ПРОВЕРИТЬ

**Проверка:** Логика расчета маржи
**Статус:** ⚠️ Проверяю...

---

**Статус:** ⚠️ ПРОВЕРКА В ПРОЦЕССЕ...

