# üö® –ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê: TSL –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ!

**–î–∞—Ç–∞:** 26.11.2025 21:10  
**–ü—Ä–æ–±–ª–µ–º–∞:** Trailing Stop Loss –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ

---

## ‚ùó –ü–†–û–ë–õ–ï–ú–ê

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –ø—Ä–∞–≤!** –ë–æ—Ç **–ë–õ–û–ö–ò–†–£–ï–¢** –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TSL, –∫–æ–≥–¥–∞ –≤–∏–¥–∏—Ç —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥!

### **–ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:**

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/trailing_sl_coordinator.py`

**–õ–æ–≥–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏:**
1. **–°—Ç—Ä–æ–∫–∞ 749:** `should_block_close = False` - —Ñ–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
2. **–°—Ç—Ä–æ–∫–∞ 750:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `if should_close_by_sl and profit_pct > 0:`
3. **–°—Ç—Ä–æ–∫–∏ 899, 905, 926, 933, 963, 973:** –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `should_block_close = True`
4. **–°—Ç—Ä–æ–∫–∞ 980:** –ü—Ä–æ–≤–µ—Ä–∫–∞ `if should_block_close:` - **–ë–õ–û–ö–ò–†–£–ï–¢ –ó–ê–ö–†–´–¢–ò–ï!**

---

## üîç –£–°–õ–û–í–ò–Ø –ë–õ–û–ö–ò–†–û–í–ö–ò

### **1. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ (ADX/Order Flow)**

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 899-905
if trend_strength > 0.7:  # –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥
    should_block_close = True
    logger.info("üö´ –ë–ª–æ–∫–∏—Ä—É–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ: —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `trend_strength > 0.7` (70%), –±–æ—Ç **–ù–ï –ó–ê–ö–†–´–í–ê–ï–¢** –ø–æ–∑–∏—Ü–∏—é –ø–æ TSL, –¥–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å!

### **2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ —Ä–µ–∂–∏–º–µ "trending"**

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 926-933
if market_regime == "trending":
    if trend_strength > 0.6:  # –°—Ä–µ–¥–Ω–∏–π —Ç—Ä–µ–Ω–¥ –≤ —Ç—Ä–µ–Ω–¥–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
        should_block_close = True
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Ä–µ–∂–∏–º–µ "trending" —Å —Å–∏–ª–æ–π —Ç—Ä–µ–Ω–¥–∞ > 60% –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è!

### **3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º Order Flow**

**–ö–æ–¥:**
```python
# –°—Ç—Ä–æ–∫–∞ 963-973
if position_side == "long" and current_delta > 0.1:
    # –°–∏–ª—å–Ω—ã–π –ø—Ä–∏—Ç–æ–∫ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π
    if trend_strength > 0.5:
        should_block_close = True
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–º –ø—Ä–∏—Ç–æ–∫–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π (–¥–ª—è LONG) –±–æ—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ!

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

### **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. ‚úÖ –¶–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ TSL —Å—Ç–æ–ø-–ª–æ—Å—Å
2. ‚úÖ `should_close_by_sl = True` (TSL –≥–æ–≤–æ—Ä–∏—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å)
3. ‚ùå **–ù–û** `should_block_close = True` (–ª–æ–≥–∏–∫–∞ —Ç—Ä–µ–Ω–¥–∞ –±–ª–æ–∫–∏—Ä—É–µ—Ç)
4. ‚ùå –ü–æ–∑–∏—Ü–∏—è **–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è**!

### **–ü—Ä–∏–º–µ—Ä –¥–ª—è BTC:**

- Entry: 88369.20
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: ~88600 (–ø—Ä–∏–º–µ—Ä–Ω–æ)
- TSL —Å—Ç–æ–ø-–ª–æ—Å—Å: ~88500 (–ø—Ä–∏–º–µ—Ä–Ω–æ, —Å —É—á–µ—Ç–æ–º —Ç—Ä–µ–π–ª–∞)
- –¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç –¥–æ 88400 (–ø—Ä–æ–±–∏–≤–∞–µ—Ç —Å—Ç–æ–ø)
- **–ù–û** —Ç—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π (ADX > 70, Order Flow –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∑–∏—Ü–∏—è –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è, —É–±—ã—Ç–æ–∫ —Ä–∞—Å—Ç–µ—Ç!

---

## üîß –†–ï–®–ï–ù–ò–ï

### **–í–∞—Ä–∏–∞–Ω—Ç 1: –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø–æ–ª–Ω–æ—Å—Ç—å—é**

**–ü—Ä–æ–±–ª–µ–º–∞:** TSL –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º! –ï—Å–ª–∏ —Ü–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ —Å—Ç–æ–ø-–ª–æ—Å—Å, –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç—Ä–µ–Ω–¥–∞.

**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ `should_block_close = True` –∏–ª–∏ —Å–¥–µ–ª–∞—Ç—å –∏—Ö –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏.

### **–í–∞—Ä–∏–∞–Ω—Ç 2: –°–º—è–≥—á–∏—Ç—å —É—Å–ª–æ–≤–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª–∏—à–∫–æ–º –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ—Ä–æ–≥ `trend_strength` (—Å 0.7 –¥–æ 0.9)
- –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
- –í—Å–µ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∏ —É–±—ã—Ç–∫–µ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç—Ä–µ–Ω–¥–∞

### **–í–∞—Ä–∏–∞–Ω—Ç 3: –°–¥–µ–ª–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ–π**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∂–µ—Å—Ç–∫–æ –∑–∞—à–∏—Ç–∞ –≤ –∫–æ–¥.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –∫–æ–Ω—Ñ–∏–≥: `trailing_sl.block_on_strong_trend: true/false`
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false` (–Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å)

---

## üìä –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### **1. –ö–†–ò–¢–ò–ß–ù–û: –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –ø—Ä–æ–±–∏—Ç–∏–∏ TSL**

**–ü—Ä–∏–Ω—Ü–∏–ø:** TSL —Å—Ç–æ–ø-–ª–æ—Å—Å - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω—è—è –ª–∏–Ω–∏—è –∑–∞—â–∏—Ç—ã! –ï—Å–ª–∏ —Ü–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ —Å—Ç–æ–ø, **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** –∑–∞–∫—Ä—ã–≤–∞—Ç—å, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç—Ä–µ–Ω–¥–∞!

### **2. –õ–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–∫–æ–π:**

```
–ï—Å–ª–∏ —Ü–µ–Ω–∞ –ø—Ä–æ–±–∏–ª–∞ TSL —Å—Ç–æ–ø-–ª–æ—Å—Å:
    ‚úÖ –ó–∞–∫—Ä—ã–≤–∞—Ç—å –í–°–ï–ì–î–ê
    ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç—Ä–µ–Ω–¥
    ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è—Ç—å Order Flow
    ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞
```

### **3. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è:**

- –£–≤–µ–ª–∏—á–µ–Ω–∏—è TP (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å, –∞ –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å)
- –ß–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è (–∑–∞–∫—Ä—ã—Ç—å 50%, –æ—Å—Ç–∞–≤–∏—Ç—å 50%)
- **–ù–û –ù–ò–ö–û–ì–î–ê –¥–ª—è –ø—Ä–æ–±–∏—Ç–∏—è —Å—Ç–æ–ø-–ª–æ—Å—Å–∞!**

---

## üéØ –ù–ï–ú–ï–î–õ–ï–ù–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

1. **–ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `should_block_close = True`**
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –±–ª–æ–∫–∏—Ä—É—é—Ç –ª–∏ –æ–Ω–∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TSL**
3. **–£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –¥–ª—è —Å–ª—É—á–∞—è –ø—Ä–æ–±–∏—Ç–∏—è —Å—Ç–æ–ø-–ª–æ—Å—Å–∞**
4. **–û—Å—Ç–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è TP (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)**

---

## üìù –í–´–í–û–î

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—ã–ª –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤!** –ë–æ—Ç –≤–∏–¥–∏—Ç —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TSL. –≠—Ç–æ **–û–ü–ê–°–ù–ê–Ø** –ª–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–æ–ª—å—à–∏–º —É–±—ã—Ç–∫–∞–º!

**–ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –°–†–û–ß–ù–û!**

