# ü§ñ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI Coding Agents - OKX Trading Bot

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 6 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** Scalping Strategy v2 (Spot + Futures)

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
2. [–ó–∞–ø—É—Å–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∑–∞–ø—É—Å–∫-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
3. [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã](#–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
4. [–®–∞–±–ª–æ–Ω—ã –∏ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏](#—à–∞–±–ª–æ–Ω—ã-–∏-–∫–æ–Ω–≤–µ–Ω—Ü–∏–∏)
5. [–¢–∏–ø–∏—á–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã](#—Ç–∏–ø–∏—á–Ω—ã–µ-—Ä–∞–±–æ—á–∏–µ-–ø—Ä–æ—Ü–µ—Å—Å—ã)

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–≠—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –¥–≤–µ —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏:

```
run.py (—Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞) ‚Üí –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (Spot/Futures)
  ‚îú‚îÄ src/main_spot.py ‚Üí ScalpingOrchestrator (Spot)
  ‚îî‚îÄ src/main_futures.py ‚Üí FuturesScalpingOrchestrator (Futures)
```

### –ì–ª–∞–≤–Ω—ã–π –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (Orchestrator Pattern)

**–§–∞–π–ª—ã:** `src/strategies/scalping/{spot,futures}/orchestrator.py`

–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ –≥–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞:
- **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é** –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- **–ì–ª–∞–≤–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª** (`run()` –º–µ—Ç–æ–¥ —Å `asyncio`)
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é** –º–µ–∂–¥—É SignalGenerator ‚Üí OrderExecutor ‚Üí PositionManager
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º** —á–µ—Ä–µ–∑ —Ä–µ–µ—Å—Ç—Ä—ã (DataRegistry, PositionRegistry)

**–ö–ª—é—á–µ–≤–æ–π –ø–∞—Ç—Ç–µ—Ä–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**

```python
class ScalpingOrchestrator:
    def __init__(self, client, config, ...):
        # 1. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
        self.indicators = self._setup_indicators()
        
        # 2. Phase 1 –º–æ–¥—É–ª–∏ (—á–µ—Ä–µ–∑ ModuleFactory)
        from .module_factory import ModuleFactory
        self.modules = ModuleFactory(client, config).create_phase1_modules()
        
        # 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏–≥–Ω–∞–ª–æ–≤
        self.signal_generator = SignalGenerator(...)
        
        # 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
        self.order_executor = OrderExecutor(...)
        self.position_manager = PositionManager(...)
```

### –î–≤—É—Ö—Ä–µ–∂–∏–º–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**Spot —Ä–µ–∂–∏–º** (`src/strategies/scalping/spot/`):
- –¢–æ—Ä–≥–æ–≤–ª—è –±–µ–∑ –ª–µ–≤–µ—Ä–∏–¥–∂–∞ (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ 1:1)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `config/config_spot.yaml`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (SMA, EMA, RSI, ATR, BB)

**Futures —Ä–µ–∂–∏–º** (`src/strategies/scalping/futures/`):
- –¢–æ—Ä–≥–æ–≤–ª—è —Å –ª–µ–≤–µ—Ä–∏–¥–∂–µ–º (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–µ–≤–µ—Ä–µ–¥–∂)
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `config/config_futures.yaml`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: Order Flow, Micro Pivot, Protection –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Phase 1

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:** `src/strategies/modules/`

–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–µ —á–µ—Ä–µ–∑ `ModuleFactory`:

| –ú–æ–¥—É–ª—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----------|
| `adaptive_regime_manager.py` | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —Ä—ã–Ω–æ—á–Ω–æ–º—É —Ä–µ–∂–∏–º—É (—Ç—Ä–µ–Ω–¥/–¥–∏–∞–ø–∞–∑–æ–Ω/–ø—Ä–µ—Ä—ã–≤–∏—Å—Ç–æ—Å—Ç—å) |
| `multi_timeframe.py` | MTF —Ñ–∏–ª—å—Ç—Ä (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö) |
| `correlation_filter.py` | –§–∏–ª—å—Ç—Ä –ø–∞—Ä–Ω–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ |
| `adx_filter.py` | –§–∏–ª—å—Ç—Ä —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞ |
| `pivot_points.py` | –û–ø–æ—Ä–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ |
| `volume_profile_filter.py` | –ü—Ä–æ—Ñ–∏–ª—å –æ–±—ä–µ–º–æ–≤ |
| `balance_checker.py` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π |
| `time_session_manager.py` | –§–∏–ª—å—Ç—Ä —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–µ—Å—Å–∏–π |

---

## –ó–∞–ø—É—Å–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ —Ä–µ–∂–∏–º—ã

**–§–∞–π–ª:** `run.py`

```bash
# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
python run.py

# –ò–ª–∏ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å
python run.py --mode spot
python run.py --mode futures
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

**–ì–ª–∞–≤–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏:** `config/config_spot.yaml`, `config/config_futures.yaml`

**–°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ (src/config.py):**

```python
config = BotConfig.load_from_file("config/config_spot.yaml")

# –î–æ—Å—Ç—É–ø –∫ –ø–æ–¥–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º
api_config = config.get_okx_config()  # APIConfig
risk_config = config.get_risk_config()  # RiskConfig
scalping_config = config.get_scalping_config()  # ScalpingConfig
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**

- `api`: OKX API –∫–ª—é—á–∏ (–∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ `.env`)
- `trading.symbols`: –°–ø–∏—Å–æ–∫ —Ç–æ—Ä–≥—É–µ–º—ã—Ö –ø–∞—Ä (BTC-USDT, ETH-USDT)
- `risk`: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ (max_position_size_percent, max_daily_loss_percent)
- `manual_pools`: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞ –ø–æ –ø—É–ª–∞–º —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
- `indicators`: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (SMA, EMA, RSI, ATR, BB)

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å Pool Allocation

**–ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:** `manual_pools` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

–ü–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–∞–ø–∏—Ç–∞–ª –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –ø—É–ª–∞–º–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:

```yaml
manual_pools:
  eth_pool:
    fixed_amount: 400.0          # –í—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∫–∞–ø–∏—Ç–∞–ª
    max_open_positions: 3
    priority: 1
    trending:                    # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ç—Ä–µ–Ω–¥–∞
      quantity_per_trade: 0.008
      tp_percent: 0.7
      sl_percent: 0.45
```

---

## –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. Signal Generator (–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤)

**–§–∞–π–ª:** `src/strategies/scalping/{spot,futures}/signal_generator.py`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã (LONG/SHORT/HOLD) –Ω–∞ –æ—Å–Ω–æ–≤–µ:
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (SMA, EMA, RSI, ATR, Bollinger Bands)
- –§–∏–ª—å—Ç—Ä–æ–≤ Phase 1 (MTF, Correlation, Pivot, Volume, ARM)
- –†—ã–Ω–æ—á–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π (—Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ AdaptiveRegimeManager)

**–í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:** `Signal(symbol, direction, confidence, reason)`

### 2. Order Executor (–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤)

**–§–∞–π–ª:** `src/strategies/scalping/{spot,futures}/order_executor.py`

–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ REST API OKX (`src/clients/`)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏ (take-profit) –∏ —Å—Ç–æ–ø-–ª–æ—Å—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

**–ü–∞—Ç—Ç–µ—Ä–Ω:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `asyncio`

### 3. Position Manager (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏)

**–§–∞–π–ª:** `src/strategies/scalping/{spot,futures}/position_manager.py`

–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏:
- –•—Ä–∞–Ω–∏—Ç `Position` –æ–±—ä–µ–∫—Ç—ã –≤ —Ä–µ–µ—Å—Ç—Ä–µ
- –û–±–Ω–æ–≤–ª—è–µ—Ç P&L –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø–æ –ª–µ—Å—Ç–Ω–∏—Ü–µ)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞ (–≤—Ä–µ–º—è, —Ü–µ–Ω–∞, —É–±—ã—Ç–æ–∫)

**–ö–ª—é—á–µ–≤–æ–π –∫–ª–∞—Å—Å:** `Position` –∏–∑ `src/models.py`

### 4. Risk Controller (–ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∏—Å–∫–æ–≤)

**–§–∞–π–ª:** `src/risk/risk_controller.py`

–ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ–ª–∏—Ç–∏–∫–∏ —Ä–∏—Å–∫–∞:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (% –æ—Ç –±–∞–ª–∞–Ω—Å–∞)
- –ú–∞–∫—Å–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —É–±—ã—Ç–∫–æ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∏—Å–∫ –ø–æ —Ä–µ–∂–∏–º—É —Ä—ã–Ω–∫–∞

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ø–µ—Ä–µ–¥** –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏

### 5. Market Data & WebSocket

**–§–∞–π–ª—ã:**
- `src/market_data_websocket.py` ‚Äî WebSocket –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–µ
- `src/websocket_manager.py` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏
- `src/websocket_order_executor.py` ‚Äî –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ WebSocket

**–ü–∞—Ç—Ç–µ—Ä–Ω:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ `klines`, `trades`, `books`

---

## –®–∞–±–ª–æ–Ω—ã –∏ –∫–æ–Ω–≤–µ–Ω—Ü–∏–∏

### –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å:** –í—Å–µ I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `async/await` —Å `asyncio`
   
   ```python
   async def process_symbol(self, symbol):
       data = await self.client.get_klines(symbol)
       # –æ–±—Ä–∞–±–æ—Ç–∫–∞...
   ```

2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `loguru` (—É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞)
   
   ```python
   from loguru import logger
   logger.info("–°–æ–æ–±—â–µ–Ω–∏–µ")
   logger.warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
   logger.error("–û—à–∏–±–∫–∞")
   ```

3. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `typing` –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
   
   ```python
   def calculate_signal(self, data: Dict[str, float]) -> str:
       ...
   ```

4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Pydantic –º–æ–¥–µ–ª–∏ (`src/config.py`)
   
   ```python
   from src.config import ScalpingConfig
   config = ScalpingConfig(**raw_dict)
   ```

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –ü–∞—Ç—Ç–µ—Ä–Ω | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|---------|---------------|
| **Orchestrator** | –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π |
| **Strategy** | –†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| **Factory** | `ModuleFactory` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Phase 1 –º–æ–¥—É–ª–µ–π |
| **Registry** | `DataRegistry`, `PositionRegistry` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| **Adapter** | `AdaptiveRegimeManager` –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã |

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –∏–º–ø–æ—Ä—Ç—ã

```
src/
‚îú‚îÄ‚îÄ clients/           # OKX API –∫–ª–∏–µ–Ω—Ç—ã (REST + WebSocket)
‚îú‚îÄ‚îÄ config.py          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ (Pydantic)
‚îú‚îÄ‚îÄ models.py          # Domain –º–æ–¥–µ–ª–∏ (Signal, Position, MarketData)
‚îú‚îÄ‚îÄ filters/           # –í–Ω–µ—à–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (TimeSessionManager)
‚îú‚îÄ‚îÄ indicators/        # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (IndicatorManager)
‚îú‚îÄ‚îÄ risk/              # Risk Controller
‚îú‚îÄ‚îÄ strategies/
‚îÇ   ‚îú‚îÄ‚îÄ modules/       # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ Phase 1 –º–æ–¥—É–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ scalping/
‚îÇ       ‚îú‚îÄ‚îÄ spot/      # Spot-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ futures/   # Futures-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îî‚îÄ‚îÄ balance/           # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–º
```

**–ü—Ä–∞–≤–∏–ª–æ –∏–º–ø–æ—Ä—Ç–æ–≤:**
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ä–µ–∂–∏–º–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏–∑ `spot/` –∏–ª–∏ `futures/`
- –û–±—â–∏–µ –º–æ–¥—É–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏–∑ `strategies/modules/`
- Domain –º–æ–¥–µ–ª–∏ –∏–∑ `models.py`
- –ö–ª–∏–µ–Ω—Ç—ã –∏–∑ `clients/`

---

## –¢–∏–ø–∏—á–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å** –≤ `src/indicators/` –∏–ª–∏ –≤ `IndicatorManager`
2. **–î–æ–±–∞–≤–∏—Ç—å** –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥: `config/config_spot.yaml`
3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** –≤ `SignalGenerator` —á–µ—Ä–µ–∑ `self.indicators`
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —á–µ—Ä–µ–∑ `test_adaptive_integration.py` –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç–æ—Ä–≥–æ–≤–ª–∏

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** `config/config_spot.yaml` –∏–ª–∏ `config/config_futures.yaml`
2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é: –æ–±—ã—á–Ω–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Å—Ç–∞—Ä—Ç–µ —á–µ—Ä–µ–∑ `BotConfig.load_from_file()`
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `AdaptiveRegimeManager.get_parameters(regime)`

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–∑–∏—Ü–∏—è–º–∏

1. **–õ–æ–≥–∏:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `logs/spot/` –∏–ª–∏ `logs/futures/`
2. **Position Manager:** –°–º–æ—Ç—Ä–∏—Ç–µ `position_registry.open_positions`
3. **API –∑–∞–ø—Ä–æ—Å—ã:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `clients/`
4. **WebSocket:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `websocket_manager.py` –Ω–∞ —Ä–∞–∑—Ä—ã–≤—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:** `test_adaptive_integration.py`

```bash
python test_adaptive_integration.py
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:
- –ó–∞–≥—Ä—É–∑–∫—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—é —Å–∏–≥–Ω–∞–ª–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤

---

## –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

| –ó–∞–¥–∞—á–∞ | –§–∞–π–ª—ã |
|--------|-------|
| –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ | `run.py`, `src/main_spot.py`, `src/main_futures.py` |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `config/*.yaml`, `src/config.py` |
| –°–∏–≥–Ω–∞–ª—ã | `src/strategies/scalping/{spot,futures}/signal_generator.py` |
| –û—Ä–¥–µ—Ä—ã | `src/strategies/scalping/{spot,futures}/order_executor.py` |
| –ü–æ–∑–∏—Ü–∏–∏ | `src/strategies/scalping/{spot,futures}/position_manager.py` |
| –†–∏—Å–∫ | `src/risk/risk_controller.py` |
| –§–∏–ª—å—Ç—Ä—ã | `src/strategies/modules/` (ARM, MTF, Correlation, Pivot, VP, Balance, Time) |
| –ú–æ–¥–µ–ª–∏ | `src/models.py`, `src/config.py` |
| API | `src/clients/{spot_client,futures_client}.py` |

---

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —ç—Ç—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é!
