# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–∏—Å—Ç–µ–º—ã)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
3. [–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞](#–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞)
4. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
5. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OKX API](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-okx-api)
6. [–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ø–µ—Ä–≤—ã–π-–∑–∞–ø—É—Å–∫-–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞)
8. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ-–≤-–ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
9. [–û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ-–∏-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
10. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üîß –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–∏—Å—Ç–µ–º–µ

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- OS: Ubuntu 20.04+ / Windows 10+ / macOS 10.15+
- RAM: 4GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB+)
- CPU: 2 —è–¥—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4+)
- –î–∏—Å–∫: 20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç: —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ 10+ –ú–±–∏—Ç/—Å

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- OS: Ubuntu 22.04 LTS
- RAM: 16GB
- CPU: 8 —è–¥–µ—Ä
- –î–∏—Å–∫: SSD 100GB
- –ò–Ω—Ç–µ—Ä–Ω–µ—Ç: –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª 100+ –ú–±–∏—Ç/—Å

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### Ubuntu/Debian:
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
sudo apt install -y \
    python3.10 \
    python3.10-dev \
    python3-pip \
    python3-venv \
    git \
    curl \
    wget \
    build-essential \
    libffi-dev \
    libssl-dev \
    pkg-config \
    redis-server \
    nginx \
    supervisor \
    htop \
    ntp

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è HMAC –ø–æ–¥–ø–∏—Å–µ–π)
sudo systemctl enable ntp
sudo systemctl start ntp
sudo timedatectl set-ntp true

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
timedatectl status
```

#### Windows:
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python (—Å–∫–∞—á–∞–π—Ç–µ —Å python.org –≤–µ—Ä—Å–∏—é 3.10+)
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Git (—Å–∫–∞—á–∞–π—Ç–µ —Å git-scm.com)
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Redis (—á–µ—Ä–µ–∑ WSL –∏–ª–∏ Docker)

# –í PowerShell (–æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
Set-ExecutionPolicy RemoteSigned
pip install --upgrade pip
```

#### macOS:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Homebrew (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
brew install python@3.10 git redis nginx
brew services start redis
```

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry
curl -sSL https://install.python-poetry.org | python3 -

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ PATH (–¥–æ–±–∞–≤—å—Ç–µ –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc)
export PATH="$HOME/.local/bin:$PATH"

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ shell –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
source ~/.bashrc

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
poetry --version
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pip

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pip-tools –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install pip-tools

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ pip
python -m pip install --upgrade pip
```

---

## üìÅ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
git clone https://github.com/your-username/enhanced-trading-bot-okx.git
cd enhanced-trading-bot-okx

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
git checkout -b production-config
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –í–∞—Ä–∏–∞–Ω—Ç A: Poetry (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
poetry install

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
poetry shell
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: venv
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è
# Linux/macOS:
source venv/bin/activate
# Windows:
# venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–ø–æ–∫
mkdir -p logs backups .secrets config/production

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chmod 700 .secrets
chmod 755 logs backups
```

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
nano .env
```

**.env —Ñ–∞–π–ª:**
```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
ENVIRONMENT=production
LOG_LEVEL=INFO
TIMEZONE=UTC

# –ú–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
MASTER_PASSWORD=your_very_secure_master_password_here

# OKX API (–±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
# OKX_API_KEY=your_api_key
# OKX_SECRET_KEY=your_secret_key  
# OKX_PASSPHRASE=your_passphrase

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///./trading_bot.db

# Redis (–¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—á–µ—Ä–µ–¥–µ–π)
REDIS_URL=redis://localhost:6379

# Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
WEB_HOST=localhost
WEB_PORT=8000
WEB_SECRET_KEY=your_web_secret_key_32_chars_min

# –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=8001

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
MAX_FAILED_AUTH_ATTEMPTS=5
TOKEN_EXPIRE_HOURS=24
ENABLE_RATE_LIMITING=true
```

### –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
python scripts/generate_secrets.py

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Python:
python -c "
import secrets
print('MASTER_PASSWORD:', secrets.token_urlsafe(32))
print('WEB_SECRET_KEY:', secrets.token_urlsafe(32))
print('JWT_SECRET:', secrets.token_urlsafe(32))
"
```

### –®–∞–≥ 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

```bash
# –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
python scripts/setup_secrets.py

# –°–∫—Ä–∏–ø—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç:
# - OKX API Key
# - OKX Secret Key  
# - OKX Passphrase
# –ò —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏—Ö –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
```

**scripts/setup_secrets.py:**
```python
#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–µ–π
"""

import getpass
import os
from src.core.security import SecretManager

def main():
    print("üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤")
    print("=" * 50)
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è
    master_password = os.environ.get('MASTER_PASSWORD')
    if not master_password:
        master_password = getpass.getpass("–í–≤–µ–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å: ")
    
    secret_manager = SecretManager(master_password)
    
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OKX API
    print("\nüìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OKX API")
    okx_api_key = getpass.getpass("OKX API Key: ")
    okx_secret_key = getpass.getpass("OKX Secret Key: ")
    okx_passphrase = getpass.getpass("OKX Passphrase: ")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
    secret_manager.set_secret('OKX_API_KEY', okx_api_key)
    secret_manager.set_secret('OKX_SECRET_KEY', okx_secret_key)
    secret_manager.set_secret('OKX_PASSPHRASE', okx_passphrase)
    
    print("‚úÖ –°–µ–∫—Ä–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ")
    
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
    print("\nüß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º...")
    test_api_key = secret_manager.get_secret('OKX_API_KEY')
    if test_api_key and test_api_key.startswith(okx_api_key[:5]):
        print("‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ")
    else:
        print("‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ–∫—Ä–µ—Ç–∞–º")
        return False
    
    return True

if __name__ == "__main__":
    main()
```

---

## üèóÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è OKX API

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ API –∫–ª—é—á–µ–π –Ω–∞ OKX

1. **–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç OKX** –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª API Management
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á** —Å –ø—Ä–∞–≤–∞–º–∏:
   - ‚úÖ Read (—á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)
   - ‚úÖ Trade (—Ç–æ—Ä–≥–æ–≤–ª—è)
   - ‚ùå Withdraw (–±–µ–∑ –ø—Ä–∞–≤–∞ –≤—ã–≤–æ–¥–∞!)
3. **–î–æ–±–∞–≤—å—Ç–µ IP –∞–¥—Ä–µ—Å** —Å–µ—Ä–≤–µ—Ä–∞ –≤ whitelist
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ** API Key, Secret Key –∏ Passphrase

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ sandbox —Ä–µ–∂–∏–º–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è sandbox
cp config/config.example.yaml config/sandbox.yaml

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ sandbox –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nano config/sandbox.yaml
```

**config/sandbox.yaml:**
```yaml
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ä–µ–¥—ã
environment: "sandbox"
debug: true

# OKX API –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
exchange:
  name: "okx"
  sandbox: true
  demo_trading: true
  api_base_url: "https://www.okx.com"
  
  # –°–µ–∫—Ä–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  credentials:
    api_key: "${OKX_API_KEY}"
    secret_key: "${OKX_SECRET_KEY}"
    passphrase: "${OKX_PASSPHRASE}"
  
  # –õ–∏–º–∏—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤
  rate_limits:
    rest_requests_per_second: 10
    websocket_connections: 5
    
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
  timeout: 30
  retry_attempts: 3
  retry_delay: 1.0

# –¢–æ—Ä–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
instruments:
  - symbol: "BTC-USDT-SWAP"
    inst_type: "SWAP"
    enabled: true
    min_size: 0.001
    tick_size: 0.1
    
  - symbol: "ETH-USDT-SWAP"
    inst_type: "SWAP"
    enabled: true
    min_size: 0.01
    tick_size: 0.01

# –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞
strategy:
  name: "enhanced_scalping"
  enabled: true
  
  # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏
  timeframes: ["1m", "5m"]
  max_trades_per_hour: 20
  max_concurrent_positions: 3
  
  # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
  indicators:
    rsi:
      period: 14
      overbought: 70
      oversold: 30
      adaptive: true
      
    macd:
      fast_period: 12
      slow_period: 26
      signal_period: 9
      adaptive: true
      
    bollinger_bands:
      period: 20
      std_multiplier: 2.0
      adaptive: true
      
    atr:
      period: 14
      
  # –£—Å–ª–æ–≤–∏—è –≤—Ö–æ–¥–∞
  entry:
    min_volatility_atr: 0.0008
    volume_threshold: 1.5
    correlation_threshold: 0.7
    
  # –£—Å–ª–æ–≤–∏—è –≤—ã—Ö–æ–¥–∞  
  exit:
    take_profit_levels: [1.2, 2.5, 4.0]  # ATR –º–Ω–æ–∂–∏—Ç–µ–ª–∏
    stop_loss_atr: 1.8
    max_holding_minutes: 30
    trailing_stop: true

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
risk_management:
  # –û—Å–Ω–æ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
  max_daily_loss_percent: 2.0
  max_position_size_percent: 5.0
  max_open_positions: 5
  max_correlation_exposure: 0.7
  
  # Sizing —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
  position_sizing:
    method: "kelly_criterion"
    base_risk_percent: 1.0
    kelly_lookback_trades: 100
    max_kelly_fraction: 0.25
    
  # Stop loss –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
  stop_loss:
    type: "adaptive_atr"
    atr_multiplier: 1.8
    max_loss_percent: 2.0
    
  # Take profit –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  take_profit:
    type: "multi_level"
    levels: [1.2, 2.5, 4.0]  # ATR –º–Ω–æ–∂–∏—Ç–µ–ª–∏
    size_distribution: [0.5, 0.3, 0.2]  # –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

# –§–∏–ª—å—Ç—Ä—ã –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏
time_filters:
  # –¢–æ—Ä–≥–æ–≤—ã–µ —Å–µ—Å—Å–∏–∏ (UTC)
  trading_sessions:
    asian: {start: "00:00", end: "09:00", weight: 0.8}
    european: {start: "07:00", end: "16:00", weight: 1.0}
    american: {start: "13:00", end: "22:00", weight: 1.0}
    overlap_eur_us: {start: "13:00", end: "16:00", weight: 1.2}
    
  # –ò–∑–±–µ–≥–∞–µ–º—ã–µ –ø–µ—Ä–∏–æ–¥—ã
  avoid_periods:
    - {start: "23:00", end: "01:00", reason: "low_liquidity"}
    - {weekday: "saturday", reason: "weekend"}
    - {weekday: "sunday", reason: "weekend"}

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
monitoring:
  health_checks:
    enabled: true
    interval_seconds: 30
    
  performance_tracking:
    enabled: true
    save_interval_minutes: 5
    
  alerts:
    telegram:
      enabled: false
      critical_only: true
    
    email:
      enabled: false
      smtp_server: ""
      
  metrics:
    prometheus:
      enabled: true
      port: 8001
      
# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging:
  level: "INFO"
  format: "detailed"
  file_rotation: "10 MB"
  retention_days: 30
  
  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  components:
    strategy: "DEBUG"
    risk_manager: "INFO"
    exchange_client: "INFO"
    websocket: "WARNING"
```

### –®–∞–≥ 3: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
python scripts/validate_config.py config/sandbox.yaml

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ OKX
python scripts/test_okx_connection.py --config config/sandbox.yaml
```

---

## üöÄ –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
python scripts/system_check.py

# –í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:
# ‚úÖ Python –≤–µ—Ä—Å–∏—è: 3.10.x
# ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
# ‚úÖ –°–µ–∫—Ä–µ—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
# ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
# ‚úÖ OKX API –¥–æ—Å—Ç—É–ø–Ω–æ
# ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω
# ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
```

### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
python scripts/init_database.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
python scripts/db_status.py
```

### –®–∞–≥ 3: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –≤ sandbox —Ä–µ–∂–∏–º–µ

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏—è (–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤)
python main.py --config config/sandbox.yaml --read-only

# –í –ª–æ–≥–∞—Ö –≤—ã —É–≤–∏–¥–∏—Ç–µ:
# 2024-01-01 12:00:00 | INFO     | Starting Enhanced Trading Bot v2.0
# 2024-01-01 12:00:01 | INFO     | Environment: sandbox
# 2024-01-01 12:00:01 | INFO     | Mode: READ-ONLY (no actual trading)
# 2024-01-01 12:00:02 | INFO     | OKX API connection established
# 2024-01-01 12:00:03 | INFO     | WebSocket connections established
# 2024-01-01 12:00:04 | INFO     | Strategy initialized: enhanced_scalping
# 2024-01-01 12:00:05 | INFO     | Bot started successfully
```

### –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f logs/trading_bot.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
htop

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
curl http://localhost:8000/health
# {"status": "healthy", "uptime": 300, "version": "2.0.0"}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl http://localhost:8001/metrics
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –±—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥–∞ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
python scripts/backtest.py \
  --config config/sandbox.yaml \
  --symbol BTC-USDT-SWAP \
  --start-date 2024-01-01 \
  --end-date 2024-01-07 \
  --initial-balance 10000

# –†–µ–∑—É–ª—å—Ç–∞—Ç:
# üìä Backtest Results for BTC-USDT-SWAP
# =====================================
# Period: 2024-01-01 to 2024-01-07
# Initial Balance: $10,000
# Final Balance: $10,243
# Total Return: 2.43%
# Sharpe Ratio: 1.34
# Max Drawdown: -1.2%
# Total Trades: 156
# Win Rate: 62.8%
# Profit Factor: 1.67
```

---

## üìä –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Prometheus
sudo mkdir -p /etc/prometheus
sudo nano /etc/prometheus/prometheus.yml
```

**/etc/prometheus/prometheus.yml:**
```yaml
global:
  scrape_interval: 15s
  
scrape_configs:
  - job_name: 'trading-bot'
    static_configs:
      - targets: ['localhost:8001']
    scrape_interval: 5s
    metrics_path: /metrics
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana Dashboard

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–∞
curl -X POST http://admin:admin@localhost:3000/api/dashboards/db \
  -H "Content-Type: application/json" \
  -d @deployment/monitoring/grafana-dashboard.json
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
nano scripts/setup_alerts.py
```

**scripts/setup_alerts.py:**
```python
import os
import asyncio
from src.monitoring.alerts import TelegramNotifier

async def setup_telegram_alerts():
    bot_token = input("–í–≤–µ–¥–∏—Ç–µ Telegram Bot Token: ")
    chat_id = input("–í–≤–µ–¥–∏—Ç–µ Telegram Chat ID: ")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    with open('.env', 'a') as f:
        f.write(f"\nTELEGRAM_BOT_TOKEN={bot_token}")
        f.write(f"\nTELEGRAM_CHAT_ID={chat_id}")
    
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    notifier = TelegramNotifier(bot_token, chat_id)
    await notifier.send_message("ü§ñ –¢–æ—Ä–≥–æ–≤—ã–π –±–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    
    print("‚úÖ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã")

if __name__ == "__main__":
    asyncio.run(setup_telegram_alerts())
```

---

## üö¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp config/sandbox.yaml config/production.yaml

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
nano config/production.yaml
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –≤ config/production.yaml:**
```yaml
# –û—Ç–∫–ª—é—á–µ–Ω–∏–µ sandbox —Ä–µ–∂–∏–º–∞
environment: "production"
debug: false

exchange:
  sandbox: false
  demo_trading: false  # –í–ù–ò–ú–ê–ù–ò–ï: –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Ç–æ—Ä–≥–æ–≤–ª—é!
  
# –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∏—Å–∫–∞
risk_management:
  max_daily_loss_percent: 1.0  # –°–Ω–∏–∂–µ–Ω–æ —Å 2.0%
  max_position_size_percent: 2.0  # –°–Ω–∏–∂–µ–Ω–æ —Å 5.0%
  
# –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã
strategy:
  max_trades_per_hour: 10  # –°–Ω–∏–∂–µ–Ω–æ —Å 20
  
# –ü—Ä–æ–¥–∞–∫—à–µ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
logging:
  level: "INFO"  # –ù–µ DEBUG –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### –®–∞–≥ 2: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

**Dockerfile:**
```dockerfile
FROM python:3.10-slim

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    && rm -rf /var/lib/apt/lists/*

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RUN useradd -m -s /bin/bash trader
USER trader
WORKDIR /home/trader/app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry
RUN pip install --user poetry
ENV PATH="/home/trader/.local/bin:$PATH"

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY --chown=trader:trader pyproject.toml poetry.lock ./
RUN poetry config virtualenvs.create false && poetry install --no-dev

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY --chown=trader:trader . .

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–ø–æ–∫
RUN mkdir -p logs backups .secrets

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
RUN chmod 700 .secrets && chmod 755 logs backups

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
HEALTHCHECK --interval=30s --timeout=10s --start-period=60s --retries=3 \
  CMD curl -f http://localhost:8000/health || exit 1

# –ó–∞–ø—É—Å–∫
CMD ["python", "main.py", "--config", "config/production.yaml"]
```

**docker-compose.prod.yml:**
```yaml
version: '3.8'

services:
  trading-bot:
    build: .
    restart: always
    environment:
      - ENVIRONMENT=production
    env_file:
      - .env
    volumes:
      - ./logs:/home/trader/app/logs
      - ./backups:/home/trader/app/backups
      - ./config:/home/trader/app/config:ro
    ports:
      - "8000:8000"  # Web interface
      - "8001:8001"  # Metrics
    depends_on:
      - redis
      - prometheus
    networks:
      - trading-network
      
  redis:
    image: redis:7-alpine
    restart: always
    volumes:
      - redis-data:/data
    networks:
      - trading-network
      
  prometheus:
    image: prom/prometheus:latest
    restart: always
    ports:
      - "9090:9090"
    volumes:
      - ./deployment/monitoring/prometheus.yml:/etc/prometheus/prometheus.yml:ro
      - prometheus-data:/prometheus
    networks:
      - trading-network
      
  grafana:
    image: grafana/grafana:latest
    restart: always
    ports:
      - "3000:3000"
    environment:
      - GF_SECURITY_ADMIN_PASSWORD=secure_password_here
    volumes:
      - grafana-data:/var/lib/grafana
      - ./deployment/monitoring/grafana-dashboard.json:/var/lib/grafana/dashboards/trading-dashboard.json:ro
    networks:
      - trading-network

volumes:
  redis-data:
  prometheus-data:
  grafana-data:

networks:
  trading-network:
    driver: bridge
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞
sudo nano /etc/systemd/system/trading-bot.service
```

**/etc/systemd/system/trading-bot.service:**
```ini
[Unit]
Description=Enhanced Trading Bot for OKX
After=network.target
Requires=redis.service

[Service]
Type=simple
User=trader
Group=trader
WorkingDirectory=/home/trader/enhanced-trading-bot-okx
Environment=PYTHONPATH=/home/trader/enhanced-trading-bot-okx
EnvironmentFile=/home/trader/enhanced-trading-bot-okx/.env
ExecStart=/home/trader/enhanced-trading-bot-okx/venv/bin/python main.py --config config/production.yaml
ExecReload=/bin/kill -HUP $MAINPID
Restart=always
RestartSec=10
StandardOutput=journal
StandardError=journal
SyslogIdentifier=trading-bot

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
PrivateTmp=true
NoNewPrivileges=true
ProtectHome=true
ProtectSystem=strict
ReadWritePaths=/home/trader/enhanced-trading-bot-okx/logs /home/trader/enhanced-trading-bot-okx/backups

[Install]
WantedBy=multi-user.target
```

```bash
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl daemon-reload
sudo systemctl enable trading-bot.service
sudo systemctl start trading-bot.service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status trading-bot.service
```

---

## üîç –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

**scripts/daily_check.sh:**
```bash
#!/bin/bash

echo "üîç –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞"
echo "====================================="

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–∞
echo "üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
systemctl is-active trading-bot.service

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
echo -e "\nüíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤:"
echo "–ü–∞–º—è—Ç—å: $(free -h | awk '/^Mem:/ {print $3 "/" $2}')"
echo "–î–∏—Å–∫: $(df -h / | awk 'NR==2 {print $3 "/" $2 " (" $5 ")"}')"
echo "CPU: $(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | sed 's/%us,//')"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—à–∏–±–∫–∏
echo -e "\nüìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö:"
tail -n 100 logs/trading_bot.log | grep -i error | tail -5

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
echo -e "\nüìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞:"
python scripts/performance_report.py --period 24h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
echo -e "\nüíø –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ:"
df -h logs/ backups/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—ç–∫–∞–ø–æ–≤
echo -e "\nüíæ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –±—ç–∫–∞–ø—ã:"
ls -lah backups/ | tail -5

echo -e "\n‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ dashboard –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
watch -n 5 'python scripts/status_dashboard.py'
```

**scripts/status_dashboard.py:**
```python
#!/usr/bin/env python3
"""
–ü—Ä–æ—Å—Ç–æ–π dashboard —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
"""

import asyncio
import json
from datetime import datetime, timedelta
import requests
import os

def get_bot_status():
    try:
        response = requests.get('http://localhost:8000/status', timeout=5)
        return response.json()
    except:
        return {"error": "Bot not responding"}

def get_performance_metrics():
    try:
        response = requests.get('http://localhost:8000/performance', timeout=5)
        return response.json()
    except:
        return {"error": "Metrics not available"}

def print_dashboard():
    os.system('clear')  # –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞
    
    print("ü§ñ Enhanced Trading Bot - Live Dashboard")
    print("=" * 50)
    print(f"‚è∞ {datetime.now().strftime('%Y-%m-%d %H:%M:%S UTC')}")
    print()
    
    # –°—Ç–∞—Ç—É—Å –±–æ—Ç–∞
    status = get_bot_status()
    if "error" not in status:
        print(f"üìä Status: {status.get('status', 'Unknown')}")
        print(f"üîÑ Uptime: {status.get('uptime_hours', 0):.1f} hours")
        print(f"üìà Active Positions: {status.get('active_positions', 0)}")
        print(f"‚è≥ Pending Orders: {status.get('pending_orders', 0)}")
    else:
        print("‚ùå Bot Status: OFFLINE")
    
    print()
    
    # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
    metrics = get_performance_metrics()
    if "error" not in metrics:
        print("üìä Performance (24h):")
        print(f"   üí∞ PnL: ${metrics.get('daily_pnl', 0):.2f}")
        print(f"   üìà Total Trades: {metrics.get('total_trades', 0)}")
        print(f"   üéØ Win Rate: {metrics.get('win_rate', 0):.1f}%")
        print(f"   üìä Sharpe Ratio: {metrics.get('sharpe_ratio', 0):.2f}")
    else:
        print("‚ùå Performance Metrics: UNAVAILABLE")
    
    print()
    
    # –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
    try:
        import psutil
        print("üíª System Resources:")
        print(f"   üñ•Ô∏è  CPU: {psutil.cpu_percent():.1f}%")
        print(f"   üíæ RAM: {psutil.virtual_memory().percent:.1f}%")
        print(f"   üíø Disk: {psutil.disk_usage('/').percent:.1f}%")
    except ImportError:
        print("üíª System Resources: Install psutil for monitoring")
    
    print("\n" + "=" * 50)
    print("Press Ctrl+C to exit")

if __name__ == "__main__":
    try:
        while True:
            print_dashboard()
            time.sleep(5)
    except KeyboardInterrupt:
        print("\nDashboard stopped.")
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∞–ª–µ—Ä—Ç—ã

**scripts/alert_monitor.py:**
```python
#!/usr/bin/env python3
"""
–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–ª–µ—Ä—Ç–æ–≤
"""

import asyncio
import json
from datetime import datetime, timedelta
import requests
import smtplib
from email.mime.text import MimeText
from email.mime.multipart import MimeMultipart

class AlertMonitor:
    def __init__(self):
        self.last_check = datetime.now()
        self.alert_thresholds = {
            'max_drawdown': -5.0,  # -5%
            'daily_loss': -2.0,    # -2%
            'error_rate': 10,      # 10 –æ—à–∏–±–æ–∫ –≤ —á–∞—Å
            'response_time': 5.0,  # 5 —Å–µ–∫—É–Ω–¥
        }
    
    async def check_critical_conditions(self):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏–π"""
        alerts = []
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
        if not await self.is_bot_responsive():
            alerts.append({
                'level': 'CRITICAL',
                'message': 'Trading bot is not responding',
                'action': 'Immediate attention required'
            })
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        metrics = await self.get_performance_metrics()
        if metrics:
            if metrics.get('daily_pnl', 0) < self.alert_thresholds['daily_loss']:
                alerts.append({
                    'level': 'HIGH',
                    'message': f"Daily loss exceeded threshold: {metrics['daily_pnl']:.2f}%",
                    'action': 'Review trading strategy'
                })
            
            if metrics.get('max_drawdown', 0) < self.alert_thresholds['max_drawdown']:
                alerts.append({
                    'level': 'CRITICAL',
                    'message': f"Max drawdown exceeded: {metrics['max_drawdown']:.2f}%",
                    'action': 'Consider stopping bot'
                })
        
        return alerts
    
    async def send_alerts(self, alerts):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤"""
        for alert in alerts:
            if alert['level'] == 'CRITICAL':
                await self.send_telegram_alert(alert)
                await self.send_email_alert(alert)
            elif alert['level'] == 'HIGH':
                await self.send_telegram_alert(alert)

async def main():
    monitor = AlertMonitor()
    
    while True:
        try:
            alerts = await monitor.check_critical_conditions()
            if alerts:
                await monitor.send_alerts(alerts)
            
            await asyncio.sleep(300)  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
            
        except Exception as e:
            print(f"Error in alert monitor: {e}")
            await asyncio.sleep(60)

if __name__ == "__main__":
    asyncio.run(main())
```

---

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. "Invalid Sign" –æ—à–∏–±–∫–∞ OKX API
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
timedatectl status

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
sudo ntpdate -s time.nist.gov

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
sudo systemctl restart trading-bot
```

#### 2. –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
python scripts/memory_profiler.py

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
python scripts/clear_cache.py

# –†–µ—Å—Ç–∞—Ä—Ç —Å –æ—á–∏—Å—Ç–∫–æ–π
sudo systemctl restart trading-bot
```

#### 3. –ü–æ—Ç–µ—Ä—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–µ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
ping www.okx.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ WebSocket
grep -i websocket logs/trading_bot.log | tail -20

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
curl -X POST http://localhost:8000/reconnect
```

#### 4. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
python scripts/check_db_locks.py

# –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (–û–°–¢–û–†–û–ñ–ù–û!)
python scripts/release_db_locks.py

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
python scripts/restore_database.py --backup backups/latest.db
```

### –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ kill-switch —á–µ—Ä–µ–∑ API
curl -X POST http://localhost:8000/emergency-stop

# –ò–ª–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export KILL_SWITCH=true

# –ò–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞-—Ñ–ª–∞–≥–∞
touch EMERGENCY_STOP
```

#### –ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
# –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
./scripts/emergency_recovery.sh

# –ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç:
# 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
# 2. –ó–∞–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
# 3. –û—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö –æ—Ä–¥–µ—Ä–æ–≤
# 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –±—ç–∫–∞–ø–∞
# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ
```

–≠—Ç–æ –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É, –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é –º–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏.