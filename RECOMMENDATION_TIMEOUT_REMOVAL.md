# –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –£–ë–†–ê–¢–¨ TIMEOUT –ò–õ–ò –°–î–ï–õ–ê–¢–¨ –ï–ì–û –£–ú–ù–´–ú

**–î–∞—Ç–∞:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

---

## üéØ –í–´–í–û–î

**–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤!** –ï—Å–ª–∏ ExitAnalyzer —É–º–Ω—ã–π –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding, –æ—Ç–¥–µ–ª—å–Ω—ã–π timeout –∏–∑–±—ã—Ç–æ—á–µ–Ω –∏ –º–æ–∂–µ—Ç –º–µ—à–∞—Ç—å.

---

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫:
1. ‚úÖ **ExitAnalyzer** (–≤ `position_manager.manage_position`) - –ü–†–ò–û–†–ò–¢–ï–¢ #0
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding —É–º–Ω–æ
   - –ú–æ–∂–µ—Ç –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
   - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

2. ‚ö†Ô∏è **Timeout** (–≤ `orchestrator._check_position_holding_time`) - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ TrailingSL
   - –ñ–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç (–Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è)
   - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–∏–±—ã–ª–∏
   - –ú–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é ExitAnalyzer —Ö–æ—Ç–µ–ª –ø—Ä–æ–¥–ª–∏—Ç—å!

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–ë–†–ê–¢–¨ TIMEOUT –í–û–û–ë–©–ï ‚úÖ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–õ–æ–≥–∏–∫–∞:**
- ExitAnalyzer —É–∂–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
- ExitAnalyzer —É–º–Ω—ã–π - –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- Timeout —Ç–æ–ª—å–∫–æ –º–µ—à–∞–µ—Ç –∏ –¥—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É timeout –∏–∑ `orchestrator._check_position_holding_time`
2. –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ max_holding –≤ ExitAnalyzer
3. ExitAnalyzer —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏

**–†–∏—Å–∫:** –ï—Å–ª–∏ ExitAnalyzer —Å–ª–æ–º–∞–µ—Ç—Å—è, –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥—É—Ç –≤–∏—Å–µ—Ç—å –¥–æ–ª–≥–æ
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã ExitAnalyzer + –∞–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–ú–ù–´–ô TIMEOUT (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç ExitAnalyzer –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º)

**–õ–æ–≥–∏–∫–∞:**
- –ü–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ timeout –ø—Ä–æ–≤–µ—Ä—è–µ–º ExitAnalyzer
- –ï—Å–ª–∏ ExitAnalyzer –≥–æ–≤–æ—Ä–∏—Ç "–ø—Ä–æ–¥–ª–µ–≤–∞–µ–º" ‚Üí –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º
- –ï—Å–ª–∏ ExitAnalyzer –≥–æ–≤–æ—Ä–∏—Ç "close" ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º
- –ï—Å–ª–∏ ExitAnalyzer –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (–±–∞–≥) ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ timeout

**–ö–æ–¥:**
```python
if timeout_minutes is not None and time_held >= timeout_minutes:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º ExitAnalyzer –ø–µ—Ä–µ–¥ –∂–µ—Å—Ç–∫–∏–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º
    exit_decision = await self.exit_analyzer.analyze_position(symbol)
    if exit_decision and exit_decision.get("action") == "extend_tp":
        # ExitAnalyzer —Ö–æ—á–µ—Ç –ø—Ä–æ–¥–ª–∏—Ç—å - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ timeout
        logger.info(f"‚è∞ Timeout –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–ª—è {symbol}, –Ω–æ ExitAnalyzer –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç - –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º")
        return
    else:
        # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ timeout (ExitAnalyzer –Ω–µ –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –∏–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç)
        await self._close_position(symbol, "timeout")
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–ß–ï–ù–¨ –ë–û–õ–¨–®–û–ô TIMEOUT (–∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞—â–∏—Ç–∞)

**–õ–æ–≥–∏–∫–∞:**
- Timeout = 3-4 —á–∞—Å–∞ (–≤–º–µ—Å—Ç–æ 7 –º–∏–Ω—É—Ç)
- –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∑–∞—â–∏—Ç–∞ –æ—Ç –±–∞–≥–æ–≤ ExitAnalyzer
- ExitAnalyzer —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ–º –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
trailing_sl:
  timeout_minutes: 240  # 4 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ 7 –º–∏–Ω—É—Ç
```

---

## üéØ –ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### ‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç 1: –£–±—Ä–∞—Ç—å timeout**

**–ü–æ—á–µ–º—É:**
1. ExitAnalyzer —É–∂–µ —É–º–Ω—ã–π –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç max_holding
2. ExitAnalyzer –º–æ–∂–µ—Ç –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
3. Timeout —Ç–æ–ª—å–∫–æ –º–µ—à–∞–µ—Ç –∏ –¥—É–±–ª–∏—Ä—É–µ—Ç –ª–æ–≥–∏–∫—É
4. –ï—Å–ª–∏ ExitAnalyzer —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, timeout –Ω–µ –Ω—É–∂–µ–Ω

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å:**
1. –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É timeout –∏–∑ `orchestrator._check_position_holding_time`
2. –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ max_holding –≤ ExitAnalyzer
3. ExitAnalyzer —Å–∞–º —Ä–µ—à–∞–µ—Ç –∫–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏

---

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. ‚úÖ –£–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É timeout –∏–∑ `_check_position_holding_time`
2. ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ max_holding –≤ ExitAnalyzer
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã ExitAnalyzer (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π)

---

**–ì–æ—Ç–æ–≤ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è!** ‚úÖ
