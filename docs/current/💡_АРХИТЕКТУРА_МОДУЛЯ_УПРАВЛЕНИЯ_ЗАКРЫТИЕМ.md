# üí° –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–π

## –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å-–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä**, –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (—Ñ–∏–ª—å—Ç—Ä—ã, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, WebSocket)
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏—Ç—É–∞—Ü–∏—é –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏/–ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–π
- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∏—Å–∫–∏ –∏ –∑–∞—â–∏—â–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å

## –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥—É–ª–∏ (–∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

### 1. Reversal Detection (—Ä–∞–∑–≤–æ—Ä–æ—Ç)
- **Order Flow**: –ê–Ω–∞–ª–∏–∑ delta (–ø–æ—Ç–æ–∫ –æ—Ä–¥–µ—Ä–æ–≤)
- **RSI**: –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å
- **MACD**: –°–∏–≥–Ω–∞–ª—ã —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- **Bollinger Bands**: –ö–∞—Å–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü
- **V-–æ–±—Ä–∞–∑–Ω—ã–π —Ä–∞–∑–≤–æ—Ä–æ—Ç**: –ê–Ω–∞–ª–∏–∑ —Å–≤–µ—á–µ–π

### 2. ADX Filter (—Ç—Ä–µ–Ω–¥)
- **ADX**: –°–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞ (0-100)
- **+DI / -DI**: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
- **–¢—Ä–µ–Ω–¥**: –í–æ—Å—Ö–æ–¥—è—â–∏–π, –Ω–∏—Å—Ö–æ–¥—è—â–∏–π, –Ω–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π

### 3. WebSocket –¥–∞–Ω–Ω—ã–µ (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
- **–¶–µ–Ω–∞**: Mark price, last price
- **–û–±—ä–µ–º**: Order book depth, trades
- **Order Flow**: Bid/ask volume, delta
- **–ü–æ–∑–∏—Ü–∏—è**: Unrealized PnL, margin, size

### 4. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑)
- **RSI**: Momentum
- **MACD**: –¢—Ä–µ–Ω–¥ –∏ –∏–º–ø—É–ª—å—Å
- **EMA/SMA**: –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
- **Bollinger Bands**: –í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å
- **Volume**: –û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤–ª–∏

### 5. –†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞ (ARM)
- **Trending**: –°–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥
- **Ranging**: –§–ª—ç—Ç
- **Choppy**: –•–∞–æ—Å

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

### –ù–∞–∑–≤–∞–Ω–∏–µ: `PositionExitAnalyzer` –∏–ª–∏ `ExitStrategyCoordinator`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
PositionExitAnalyzer
‚îú‚îÄ‚îÄ Data Collectors (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ ReversalAnalyzer      # –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ TrendAnalyzer         # –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–∞ (ADX)
‚îÇ   ‚îú‚îÄ‚îÄ WebSocketMonitor      # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ WebSocket –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ IndicatorAggregator   # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ RegimeDetector        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ Decision Engine (–ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π)
‚îÇ   ‚îú‚îÄ‚îÄ ExitSignalGenerator   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–∫—Ä—ã—Ç–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ExtensionEvaluator    # –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è TP
‚îÇ   ‚îú‚îÄ‚îÄ RiskCalculator        # –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ PriorityResolver      # –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
‚îÇ
‚îî‚îÄ‚îÄ Action Executor (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ)
    ‚îú‚îÄ‚îÄ CloseExecutor         # –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
    ‚îú‚îÄ‚îÄ ExtensionExecutor     # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP
    ‚îî‚îÄ‚îÄ ProtectionExecutor     # –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏ (—Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø)
```

## –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### 1. –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (–∫–∞–∂–¥–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ WebSocket)

```python
# –ü—Å–µ–≤–¥–æ–∫–æ–¥ (–ù–ï —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è!)

class PositionExitAnalyzer:
    async def analyze_position(self, symbol, position_data):
        # 1. –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
        data = {
            # Reversal Detection
            "reversal": {
                "order_flow_delta": order_flow.get_delta(),
                "order_flow_trend": order_flow.get_delta_trend(),  # "long", "short", "neutral"
                "rsi": indicators.get("rsi"),
                "macd_signal": indicators.get("macd").signal,
                "bollinger_position": indicators.get("bb").position,  # "upper", "middle", "lower"
                "v_reversal_detected": reversal_detector.check_v_reversal(),
            },
            
            # ADX Trend
            "trend": {
                "adx": adx_filter.get_adx(),
                "plus_di": adx_filter.get_plus_di(),
                "minus_di": adx_filter.get_minus_di(),
                "trend_direction": "bullish" if plus_di > minus_di else "bearish",
                "trend_strength": normalize_adx(adx),  # 0.0-1.0
            },
            
            # WebSocket Real-time
            "realtime": {
                "current_price": websocket.get_mark_price(symbol),
                "price_change_pct": calculate_change(entry_price, current_price),
                "volume": websocket.get_volume(symbol),
                "orderbook_imbalance": websocket.get_orderbook_imbalance(symbol),
                "trades_flow": websocket.get_recent_trades(symbol),  # –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–¥–µ–ª–æ–∫
            },
            
            # Indicators
            "indicators": {
                "rsi": indicators.get("rsi"),
                "macd": indicators.get("macd"),
                "ema_fast": indicators.get("ema_fast"),
                "ema_slow": indicators.get("ema_slow"),
                "bb_upper": indicators.get("bb").upper,
                "bb_lower": indicators.get("bb").lower,
            },
            
            # Position State
            "position": {
                "entry_price": position.get("entry_price"),
                "current_price": position.get("mark_price"),
                "pnl_percent": position.get("pnl_percent"),
                "size": position.get("size"),
                "side": position.get("side"),  # "long" or "short"
                "time_in_position": calculate_time(position.get("open_time")),
            },
            
            # Market Regime
            "regime": {
                "current": regime_manager.get_current_regime(),  # "trending", "ranging", "choppy"
                "confidence": regime_manager.get_confidence(),
            }
        }
        
        # 2. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Ç—É–∞—Ü–∏—é
        analysis = self._analyze_situation(data)
        
        # 3. –ü—Ä–∏–Ω–∏–º–∞–µ–º —Ä–µ—à–µ–Ω–∏–µ
        decision = self._make_decision(analysis, data)
        
        return decision
```

## –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Ç—Ä–µ–Ω–¥–µ

**–£—Å–ª–æ–≤–∏—è:**
- –ü—Ä–∏–±—ã–ª—å >= TP (–Ω–∞–ø—Ä–∏–º–µ—Ä, 4.0%)
- –¢—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π (ADX > 0.7, +DI –¥–æ–º–∏–Ω–∏—Ä—É–µ—Ç –¥–ª—è LONG)
- –ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ (Order Flow –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç)
- –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞: Trending –∏–ª–∏ Ranging —Å —Ç—Ä–µ–Ω–¥–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
```python
if (pnl >= tp and 
    trend_strength > 0.7 and 
    trend_direction == position_side and
    not reversal_detected and
    regime in ["trending", "ranging"]):
    
    # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º TP
    new_tp = min(current_tp + extension_step, max_tp)
    
    # –í–∫–ª—é—á–∞–µ–º –∑–∞—â–∏—Ç—É (—Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø)
    trailing_stop = calculate_trailing_stop(
        current_price, 
        max_profit, 
        profit_level=pnl
    )
    
    return Decision(
        action="extend_tp",
        new_tp=new_tp,
        trailing_stop=trailing_stop,
        reason="Strong trend, no reversal signs"
    )
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ

**–£—Å–ª–æ–≤–∏—è:**
- –ü—Ä–∏–±—ã–ª—å > 0 (–ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏)
- –û–±–Ω–∞—Ä—É–∂–µ–Ω —Ä–∞–∑–≤–æ—Ä–æ—Ç (Order Flow –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç)
- –¢—Ä–µ–Ω–¥ –æ—Å–ª–∞–±–µ–≤–∞–µ—Ç (ADX –ø–∞–¥–∞–µ—Ç)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç (RSI –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω –¥–ª—è LONG)

**–†–µ—à–µ–Ω–∏–µ:**
```python
if (pnl > 0 and
    reversal_detected and
    trend_strength_decreasing and
    indicators_confirm_reversal):
    
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é
    return Decision(
        action="close",
        reason="Reversal detected, trend weakening",
        urgency="high"  # –ó–∞–∫—Ä—ã–≤–∞–µ–º –±—ã—Å—Ç—Ä–æ
    )
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏ (—Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø)

**–£—Å–ª–æ–≤–∏—è:**
- –ü—Ä–∏–±—ã–ª—å >= Big Profit –ø–æ—Ä–æ–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 2.5%)
- –¢—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø –∞–∫—Ç–∏–≤–µ–Ω
- –¶–µ–Ω–∞ –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞

**–†–µ—à–µ–Ω–∏–µ:**
```python
if (pnl >= big_profit_threshold and
    trailing_stop_active and
    current_price < trailing_stop):
    
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø—É
    return Decision(
        action="close",
        reason="Trailing stop triggered",
        urgency="medium"
    )
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ TP (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ)

**–£—Å–ª–æ–≤–∏—è:**
- –ü—Ä–∏–±—ã–ª—å >= TP
- –¢—Ä–µ–Ω–¥ –Ω–µ —Å–∏–ª—å–Ω—ã–π (ADX < 0.7)
- –ù–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞

**–†–µ—à–µ–Ω–∏–µ:**
```python
if (pnl >= tp and
    trend_strength < 0.7 and
    not should_extend):
    
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ TP
    return Decision(
        action="close",
        reason="TP reached, weak trend",
        urgency="normal"
    )
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å WebSocket

### –î–∞–Ω–Ω—ã–µ –∏–∑ WebSocket:

1. **Mark Price** (—Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ PnL

2. **Order Book** (—Å—Ç–∞–∫–∞–Ω)
   - Bid/Ask –æ–±—ä–µ–º—ã
   - –ò–º–±–∞–ª–∞–Ω—Å (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π/–ø—Ä–æ–¥–∞–≤—Ü–æ–≤)

3. **Trades** (—Å–¥–µ–ª–∫–∏)
   - –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–¥–µ–ª–æ–∫
   - –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ (–±–æ–ª—å—à–µ –ø–æ–∫—É–ø–æ–∫ –∏–ª–∏ –ø—Ä–æ–¥–∞–∂)

4. **Order Flow Delta**
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ delta –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebSocket –¥–∞–Ω–Ω—ã—Ö:

```python
# –ü—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ WebSocket –¥–∞–Ω–Ω—ã—Ö

class WebSocketMonitor:
    def analyze_realtime_data(self, symbol):
        # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ WebSocket
        mark_price = websocket.get_mark_price(symbol)
        orderbook = websocket.get_orderbook(symbol)
        recent_trades = websocket.get_recent_trades(symbol, limit=20)
        
        # –ê–Ω–∞–ª–∏–∑ Order Book
        bid_volume = sum(orderbook["bids"][:5])  # –¢–æ–ø 5 –±–∏–¥–æ–≤
        ask_volume = sum(orderbook["asks"][:5])  # –¢–æ–ø 5 –∞—Å–∫–æ–≤
        imbalance = (bid_volume - ask_volume) / (bid_volume + ask_volume)
        
        # –ê–Ω–∞–ª–∏–∑ Trades
        buy_trades = [t for t in recent_trades if t["side"] == "buy"]
        sell_trades = [t for t in recent_trades if t["side"] == "sell"]
        trade_flow = len(buy_trades) - len(sell_trades)
        
        return {
            "price": mark_price,
            "orderbook_imbalance": imbalance,  # >0 = –¥–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π, <0 = –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
            "trade_flow": trade_flow,  # >0 = –±–æ–ª—å—à–µ –ø–æ–∫—É–ø–æ–∫, <0 = –±–æ–ª—å—à–µ –ø—Ä–æ–¥–∞–∂
            "momentum": calculate_momentum(recent_trades),  # –£—Å–∫–æ—Ä–µ–Ω–∏–µ/–∑–∞–º–µ–¥–ª–µ–Ω–∏–µ
        }
```

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ—à–µ–Ω–∏–π

### –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤:

| –°–∏—Ç—É–∞—Ü–∏—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|-----------|----------|
| –†–∞–∑–≤–æ—Ä–æ—Ç + –ø—Ä–∏–±—ã–ª—å >0 | **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** | –ó–∞–∫—Ä—ã—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ |
| –†–∞–∑–≤–æ—Ä–æ—Ç + —É–±—ã—Ç–æ–∫ | **–í–´–°–û–ö–ò–ô** | –ó–∞–∫—Ä—ã—Ç—å –±—ã—Å—Ç—Ä–æ (–∑–∞—â–∏—Ç–∞) |
| TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç + —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ | **–°–†–ï–î–ù–ò–ô** | –ü—Ä–æ–¥–ª–∏—Ç—å TP + —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø |
| TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç + —Å–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥ | **–ù–û–†–ú–ê–õ–¨–ù–´–ô** | –ó–∞–∫—Ä—ã—Ç—å –ø–æ TP |
| Big Profit + —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø | **–°–†–ï–î–ù–ò–ô** | –ó–∞–∫—Ä—ã—Ç—å –ø–æ —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø—É |
| SL –¥–æ—Å—Ç–∏–≥–Ω—É—Ç | **–í–´–°–û–ö–ò–ô** | –ó–∞–∫—Ä—ã—Ç—å –ø–æ SL |

## –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫

### 1. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –õ–æ–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –¢—Ä–µ–±–æ–≤–∞—Ç—å **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**:
  - Order Flow –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç
  - –ò **RSI** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω –¥–ª—è LONG)
  - –ò **MACD** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç (—Å–∏–≥–Ω–∞–ª —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞)
  - –ò **—Ü–µ–Ω–∞** –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç (–æ—Ç–∫–∞—Ç –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞)

**–ü—Ä–∏–º–µ—Ä:**
```python
reversal_confidence = 0.0

if order_flow_reversal:
    reversal_confidence += 0.3
if rsi_confirms:
    reversal_confidence += 0.3
if macd_confirms:
    reversal_confidence += 0.2
if price_confirms:
    reversal_confidence += 0.2

# –†–∞–∑–≤–æ—Ä–æ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ confidence >= 0.7
if reversal_confidence >= 0.7:
    return "reversal_confirmed"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∞–±—ã–π —Ç—Ä–µ–Ω–¥ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —Å–∏–ª—å–Ω—ã–º

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**:
  - ADX > –ø–æ—Ä–æ–≥–∞
  - –ò +DI/-DI –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —á–µ—Ç–∫–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
  - –ò EMA –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —Ç—Ä–µ–Ω–¥
  - –ò –æ–±—ä–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç (–≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ)

### 3. –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **min_holding** –∑–∞—â–∏—Ç—É
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å **–≤—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏** –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
- –î–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π: **–ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å min_holding**

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è

1. ‚úÖ **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π** - –≤—Å–µ –ª–æ–≥–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
2. ‚úÖ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö** - —Ñ–∏–ª—å—Ç—Ä—ã, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, WebSocket
3. ‚úÖ **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è** - —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ç—Ä–µ–Ω–¥, —Ä–∞–∑–≤–æ—Ä–æ—Ç, —Ä–µ–∂–∏–º)
4. ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
5. ‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —É—Å–ª–æ–≤–∏—è
6. ‚úÖ **–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É –ø—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ

## –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
   - –û–¥–∏–Ω –±–æ–ª—å—à–æ–π –º–æ–¥—É–ª—å –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∞–ª–µ–Ω—å–∫–∏—Ö?
   - –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–æ–¥—É–ª—è–º–∏?

2. **–ß–∞—Å—Ç–æ—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ WebSocket?
   - –ò–ª–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥)?

3. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã:**
   - –ö–∞–∫ —Ä–∞–∑—Ä–µ—à–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–≤–æ—Ä–æ—Ç vs –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP)?
   - –ö–∞–∫–∏–µ —É—Å–ª–æ–≤–∏—è –∫—Ä–∏—Ç–∏—á–Ω–µ–µ?

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ù–µ –±—É–¥–µ—Ç –ª–∏ –º–æ–¥—É–ª—å —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª—ã–º?
   - –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã?

5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π?
   - –ù—É–∂–Ω—ã –ª–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏?

## –°—Ç–∞—Ç—É—Å

üí° **–û–ë–°–£–ñ–î–ï–ù–ò–ï**: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏–µ–º










