# üìä –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í –ò –î–û–•–û–î–ù–û–°–¢–ò –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê
**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 26 –¥–µ–∫–∞–±—Ä—è 2025  
**–ü–µ—Ä–∏–æ–¥:** 25-26 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è –æ—Ç—á–µ—Ç–∞:** 1.0

---

## üéØ –ò–°–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ï –†–ï–ó–Æ–ú–ï

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **‚ùå ExitAnalyzer –æ—à–∏–±–∫–∞** - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å–æ—Ç–Ω–∏ —Ä–∞–∑, –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π
2. **‚ùå TCC datetime –æ—à–∏–±–∫–∞** - –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —á–∞—Å—Ç–æ, –Ω–∞—Ä—É—à–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
3. **‚ùå –ù–∏–∑–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** - –æ–±—â–∏–π PnL: **-8.41 USDT** (29 —Å–¥–µ–ª–æ–∫)
4. **‚ùå –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ —É–±—ã—Ç–æ—á–Ω—ã–µ** - —Ç–æ–ª—å–∫–æ ETH-USDT –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏:
- **–í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫:** 29
- **–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö:** 7 (24.14%)
- **–£–±—ã—Ç–æ—á–Ω—ã—Ö:** 22 (75.86%)
- **–û–±—â–∏–π PnL:** **-8.41 USDT**
- **Win Rate:** 24.14%

---

## üìà –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –°–î–ï–õ–ö–ê–ú

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫ | 29 |
| –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö | 7 (24.14%) |
| –£–±—ã—Ç–æ—á–Ω—ã—Ö | 22 (75.86%) |
| –û–±—â–∏–π PnL | **-8.41 USDT** |
| Win Rate | 24.14% |
| –°—Ä–µ–¥–Ω–∏–π –≤—ã–∏–≥—Ä—ã—à | ~1.5 USDT |
| –°—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ | ~-0.8 USDT |

### PnL –ø–æ —Å–∏–º–≤–æ–ª–∞–º:
| –°–∏–º–≤–æ–ª | PnL (USDT) | –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö | –£–±—ã—Ç–æ—á–Ω—ã—Ö | –°—Ç–∞—Ç—É—Å |
|--------|------------|------------|-----------|--------|
| **ETH-USDT** | **+6.52** | 5 | 7 | ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø—Ä–∏–±—ã–ª—å–Ω—ã–π |
| SOL-USDT | -4.64 | 0 | 4 | ‚ùå |
| XRP-USDT | -6.87 | 0 | 4 | ‚ùå |
| DOGE-USDT | -2.26 | 0 | 4 | ‚ùå |
| BTC-USDT | -1.16 | 0 | 3 | ‚ùå |

**–í—ã–≤–æ–¥:** –¢–æ–ª—å–∫–æ ETH-USDT –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å (+6.52 USDT), –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –º–∏–Ω—É—Å–µ.

---

## üîç –ü–†–ò–ß–ò–ù–´ –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ô

| –ü—Ä–∏—á–∏–Ω–∞ | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | % –æ—Ç –æ–±—â–µ–≥–æ |
|---------|------------|-------------|
| **sl_reached** | 9 | 31.0% |
| **max_holding_hard_stop_profit** | 7 | 24.1% |
| **emergency_loss_protection** | 7 | 24.1% |
| **big_profit_exit** | 3 | 10.3% |
| **tp_reached** | 2 | 6.9% |
| **profit_harvest** | 1 | 3.4% |

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω:

1. **sl_reached (9 —Ä–∞–∑, 31%)** - –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ Stop Loss
   - **–ü—Ä–æ–±–ª–µ–º–∞:** SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
   - **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
     - SL —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ –∫ entry price
     - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –≤ —Ä–µ–∂–∏–º–µ RANGING
     - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ SL

2. **max_holding_hard_stop_profit (7 —Ä–∞–∑, 24.1%)** - –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏–∏ –¥–µ—Ä–∂–∞—Ç—Å—è —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ –∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ
   - **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
     - `max_holding_minutes` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π
     - –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–∞—é—Ç TP, –Ω–æ –∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–∞—é—Ç SL
     - –õ–æ–≥–∏–∫–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

3. **emergency_loss_protection (7 —Ä–∞–∑, 24.1%)** - –ê–≤–∞—Ä–∏–π–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç —É–±—ã—Ç–∫–æ–≤ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ
   - **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
     - –ü–æ—Ä–æ–≥ `emergency_loss_protection` —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π
     - –ü–æ–∑–∏—Ü–∏–∏ –±—ã—Å—Ç—Ä–æ —É—Ö–æ–¥—è—Ç –≤ –º–∏–Ω—É—Å
     - –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ emergency loss

4. **big_profit_exit (3 —Ä–∞–∑–∞, 10.3%)** - –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–π –ø—Ä–∏–±—ã–ª–∏
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –º–∞–ª–æ

5. **tp_reached (2 —Ä–∞–∑–∞, 6.9%)** - –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ Take Profit
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –û—á–µ–Ω—å –º–∞–ª–æ –ø–æ–∑–∏—Ü–∏–π –¥–æ—Å—Ç–∏–≥–∞—é—Ç TP
   - **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
     - TP —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING
     - –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ä–∞–Ω—å—à–µ –ø–æ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º
     - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è TP

6. **profit_harvest (1 —Ä–∞–∑, 3.4%)** - –°–±–æ—Ä –ø—Ä–∏–±—ã–ª–∏
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–æ –æ—á–µ–Ω—å –º–∞–ª–æ

---

## ‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò –í –õ–û–ì–ê–•

### 1. ExitAnalyzer: '>' not supported between instances of 'str' and 'int'

**–ß–∞—Å—Ç–æ—Ç–∞:** –°–æ—Ç–Ω–∏ —Ä–∞–∑ –≤ –ª–æ–≥–∞—Ö  
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/positions/exit_analyzer.py:_generate_exit_for_ranging`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
```
‚ùå ExitAnalyzer: –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è ETH-USDT –≤ —Ä–µ–∂–∏–º–µ RANGING: 
'>' not supported between instances of 'str' and 'int'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- `actual_max_holding` –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `minutes_in_position >= actual_max_holding` –ø–∞–¥–∞–µ—Ç, –µ—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –æ–ø–µ—Ä–∞–Ω–¥–æ–≤ - —Å—Ç—Ä–æ–∫–∞
- –•–æ—Ç—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ, –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç

**–í–ª–∏—è–Ω–∏–µ:**
- ExitAnalyzer –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏
- –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–æ–≤—Ä–µ–º—è
- –õ–æ–≥–∏–∫–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–∑–∏—Ü–∏–π –Ω–∞—Ä—É—à–µ–Ω–∞

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º:**
- –í –∫–æ–¥–µ –µ—Å—Ç—å –ø–æ–ø—ã—Ç–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ `actual_max_holding` –≤ `float`
- –ù–æ –æ—à–∏–±–∫–∞ –≤—Å–µ –µ—â–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∑–Ω–∞—á–∏—Ç –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ –≤—Å–µ—Ö —Å–ª—É—á–∞—è—Ö
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `actual_max_holding`

---

### 2. TCC: cannot access local variable 'datetime' where it is not associated with a value

**–ß–∞—Å—Ç–æ—Ç–∞:** –ß–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è  
**–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `src/strategies/scalping/futures/core/trading_control_center.py:run_main_loop`

**–û–ø–∏—Å–∞–Ω–∏–µ:**
```
‚ùå TCC: –û—à–∏–±–∫–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ: 
cannot access local variable 'datetime' where it is not associated with a value
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `datetime`
- –í–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `datetime` –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –∞ –Ω–µ –∫–∞–∫ –º–æ–¥—É–ª—å
- –ò–ª–∏ `from datetime import datetime as dt` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–í–ª–∏—è–Ω–∏–µ:**
- –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
- –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- –°–∏–≥–Ω–∞–ª—ã –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º:**
- –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `from datetime import datetime as dt`
- –ù–æ –≥–¥–µ-—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `datetime` –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `datetime` –≤ `trading_control_center.py`

---

## üìä –ê–ù–ê–õ–ò–ó –î–û–•–û–î–ù–û–°–¢–ò

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é:

1. **–ù–∏–∑–∫–∏–π Win Rate (24.14%)**
   - –¢–æ–ª—å–∫–æ 7 –∏–∑ 29 —Å–¥–µ–ª–æ–∫ –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ
   - –≠—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ –±–µ–∑—É–±—ã—Ç–æ—á–Ω–æ—Å—Ç–∏ (–Ω—É–∂–Ω–æ ~50% –ø—Ä–∏ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ 1:1)
   - **–ü—Ä–∏—á–∏–Ω–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL –∏–ª–∏ emergency loss

2. **–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –æ–±—â–∏–π PnL (-8.41 USDT)**
   - –î–∞–∂–µ —Å –ø—Ä–∏–±—ã–ª—å—é –æ—Ç ETH-USDT (+6.52 USDT), –æ–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π
   - **–ü—Ä–∏—á–∏–Ω–∞:** –£–±—ã—Ç–∫–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—Ç –ø—Ä–∏–±—ã–ª—å

3. **–¢–æ–ª—å–∫–æ ETH-USDT –ø—Ä–∏–±—ã–ª—å–Ω—ã–π**
   - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (SOL, XRP, DOGE, BTC) –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —É–±—ã—Ç–∫–∏
   - **–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

4. **–ú–∞–ª–æ –ø–æ–∑–∏—Ü–∏–π –¥–æ—Å—Ç–∏–≥–∞—é—Ç TP (—Ç–æ–ª—å–∫–æ 2 –∏–∑ 29, 6.9%)**
   - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º
   - **–ü—Ä–∏—á–∏–Ω–∞:** TP —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π –∏–ª–∏ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ä–∞–Ω—å—à–µ

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º:

#### –†–∞—Å—á–µ—Ç PnL:
- **–§–∞–π–ª:** `src/strategies/scalping/futures/calculations/pnl_calculator.py`
- **–ú–µ—Ç–æ–¥:** `calculate_pnl()`
- **–õ–æ–≥–∏–∫–∞:**
  ```python
  if side.lower() == "long":
      gross_pnl = (exit_price - entry_price) * size_in_coins
  else:  # short
      gross_pnl = (entry_price - exit_price) * size_in_coins
  net_pnl = gross_pnl - total_commission
  ```
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ PnL –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è

#### –ö–æ–º–∏—Å—Å–∏–∏:
- **Maker fee:** 0.02% (0.0002)
- **Taker fee:** 0.05% (0.0005)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–º–∏—Å—Å–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### –ü—Ä–æ–±–ª–µ–º—ã:
1. **–í—ã—Å–æ–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏** - –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö —Å–¥–µ–ª–∫–∞—Ö –∫–æ–º–∏—Å—Å–∏–∏ —Å—ä–µ–¥–∞—é—Ç –ø—Ä–∏–±—ã–ª—å
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø—Ä–∏–±—ã–ª–∏** - —Å—Ä–µ–¥–Ω–∏–π –≤—ã–∏–≥—Ä—ã—à (~1.5 USDT) –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω–∏–π —É–±—ã—Ç–æ–∫ (~-0.8 USDT) –ø—Ä–∏ –Ω–∏–∑–∫–æ–º Win Rate

---

## üîç –ê–ù–ê–õ–ò–ó –°–ò–ì–ù–ê–õ–û–í

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º:
- **–í—Å–µ–≥–æ —Å–∏–≥–Ω–∞–ª–æ–≤:** –¢—ã—Å—è—á–∏ (–ø–æ –ª–æ–≥–∞–º)
- **–û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π:** 29
- **–ö–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª‚Üí–ø–æ–∑–∏—Ü–∏—è:** <1%

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏:

1. **–í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –≤ —Ä–µ–∂–∏–º–µ RANGING**
   - –í CSV –≤—Å–µ —Å–∏–≥–Ω–∞–ª—ã –∏–º–µ—é—Ç `regime=ranging`
   - –ù–µ—Ç —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è TRENDING –∏–ª–∏ CHOPPY
   - **–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ, RegimeManager –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≤—Å–µ —Ä–µ–∂–∏–º—ã –∫–∞–∫ RANGING

2. **–°–∏–≥–Ω–∞–ª—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è**
   - –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ñ–∏–ª—å—Ç—Ä—ã
   - **–ü—Ä–∏—á–∏–Ω—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–Ω–∏—è:**
     - ADX —Ñ–∏–ª—å—Ç—Ä
     - MTF —Ñ–∏–ª—å—Ç—Ä
     - Correlation —Ñ–∏–ª—å—Ç—Ä
     - EV_NEGATIVE (expected value –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π)
     - ADL rank —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π

3. **–ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª‚Üí–ø–æ–∑–∏—Ü–∏—è**
   - –ò–∑ —Ç—ã—Å—è—á —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 29 –ø–æ–∑–∏—Ü–∏–π
   - **–ü—Ä–∏—á–∏–Ω–∞:** –§–∏–ª—å—Ç—Ä—ã —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∫–æ–¥–æ–º:

#### –§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤:
- **–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`
- **–§–∏–ª—å—Ç—Ä—ã:**
  - ADX —Ñ–∏–ª—å—Ç—Ä
  - MTF —Ñ–∏–ª—å—Ç—Ä
  - Correlation —Ñ–∏–ª—å—Ç—Ä
  - EV (Expected Value) —Ñ–∏–ª—å—Ç—Ä
  - ADL rank —Ñ–∏–ª—å—Ç—Ä
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–µ

---

## üéØ –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

1. **‚ùå ExitAnalyzer –æ—à–∏–±–∫–∞**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é `actual_max_holding` –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö
   - **–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`

2. **‚ùå TCC datetime –æ—à–∏–±–∫–∞**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω `datetime`
   - **–§–∞–π–ª:** `src/strategies/scalping/futures/core/trading_control_center.py`

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é (—Ç—Ä–µ–±—É—é—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):

3. **‚ùå –ù–∏–∑–∫–∏–π Win Rate (27.6%)**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –£–≤–µ–ª–∏—á–∏—Ç—å `min_profit_to_close` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING
     - –£–º–µ–Ω—å—à–∏—Ç—å `sl_percent` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING
     - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—Ö–æ–¥–∞ –≤ –ø–æ–∑–∏—Ü–∏—é (–±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã)

4. **‚ùå –ú–∞–ª–æ –ø–æ–∑–∏—Ü–∏–π –¥–æ—Å—Ç–∏–≥–∞—é—Ç TP (6.9%)**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í–´–°–û–ö–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –£–º–µ–Ω—å—à–∏—Ç—å `tp_percent` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING (—Å 5% –¥–æ 3-4%)
     - –£–≤–µ–ª–∏—á–∏—Ç—å `min_holding_minutes` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING
     - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É trailing stop loss

5. **‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ SL (31%)**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –£–≤–µ–ª–∏—á–∏—Ç—å `sl_percent` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING (—Å 1.0% –¥–æ 1.5%)
     - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ SL —Å —É—á–µ—Ç–æ–º –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

6. **‚ùå Emergency loss protection —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ (24.1%)**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä–æ–≥ `emergency_loss_protection`
     - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ emergency loss

### –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–≥–Ω–∞–ª–∞–º–∏ (—Ç—Ä–µ–±—É—é—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏):

7. **‚ùå –í—Å–µ —Å–∏–≥–Ω–∞–ª—ã –≤ —Ä–µ–∂–∏–º–µ RANGING**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°–†–ï–î–ù–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É RegimeManager
     - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–µ–∂–∏–º—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

8. **‚ùå –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª‚Üí–ø–æ–∑–∏—Ü–∏—è (<1%)**
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–ò–ó–ö–ò–ô
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
     - –û—Å–ª–∞–±–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã (ADX, MTF, Correlation)
     - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ Expected Value

---

## üìã –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

### –≠—Ç–∞–ø 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å ExitAnalyzer –æ—à–∏–±–∫—É
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å TCC datetime –æ—à–∏–±–∫—É
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –≠—Ç–∞–ø 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING:
   - –£–º–µ–Ω—å—à–∏—Ç—å `tp_percent` —Å 5% –¥–æ 3-4%
   - –£–≤–µ–ª–∏—á–∏—Ç—å `sl_percent` —Å 1.0% –¥–æ 1.5%
   - –£–≤–µ–ª–∏—á–∏—Ç—å `min_profit_to_close` —Å —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è
   - –£–≤–µ–ª–∏—á–∏—Ç—å `min_holding_minutes` –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING

2. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É –≤—ã—Ö–æ–¥–∞ –∏–∑ –ø–æ–∑–∏—Ü–∏–π:
   - –£–ª—É—á—à–∏—Ç—å trailing stop loss
   - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É emergency loss protection
   - –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É max_holding_hard_stop

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ (–ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏)
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É RegimeManager
2. –û—Å–ª–∞–±–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤
3. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ Expected Value

---

## üìä –î–ï–¢–ê–õ–¨–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û –°–î–ï–õ–ö–ê–ú

### –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (–ø—Ä–∏–º–µ—Ä—ã):
1. **ETH-USDT** (12:51:50): `tp_reached`, PnL=+4.66 USDT
2. **ETH-USDT** (14:21:12): `tp_reached`, PnL=+2.58 USDT
3. **ETH-USDT** (02:33:15): `profit_harvest`, PnL=+5.37 USDT
4. **XRP-USDT** (20:58:50): `big_profit_exit`, PnL=+0.78 USDT
5. **BTC-USDT** (11:06:49): `max_holding_hard_stop_profit`, PnL=-0.15 USDT (–ø–æ—á—Ç–∏ –±–µ–∑—É–±—ã—Ç–æ–∫)

### –£–±—ã—Ç–æ—á–Ω—ã–µ —Å–¥–µ–ª–∫–∏ (–ø—Ä–∏–º–µ—Ä—ã):
1. **SOL-USDT** (10:36:33): `big_profit_exit`, PnL=-2.88 USDT
2. **XRP-USDT** (13:43:15): `emergency_loss_protection`, PnL=-5.79 USDT
3. **ETH-USDT** (14:02:46): `emergency_loss_protection`, PnL=-3.06 USDT
4. **SOL-USDT** (10:40:51): `emergency_loss_protection`, PnL=-1.49 USDT

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –§–∞–π–ª—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. `src/strategies/scalping/futures/positions/exit_analyzer.py` - ExitAnalyzer –æ—à–∏–±–∫–∞
2. `src/strategies/scalping/futures/core/trading_control_center.py` - TCC datetime –æ—à–∏–±–∫–∞
3. `config/config_futures.yaml` - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING
4. `src/strategies/scalping/futures/coordinators/signal_coordinator.py` - –§–∏–ª—å—Ç—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤
5. `src/strategies/scalping/futures/risk/adaptive_leverage.py` - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–µ–≤–µ—Ä–∏–¥–∂

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥–∞ –¥–ª—è —Ä–µ–∂–∏–º–∞ RANGING (–∏–∑ config_futures.yaml):

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|----------|-------------|
| `tp_percent` | 5.0% | ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 1.8% –¥–æ 5.0% (+178%) |
| `sl_percent` | 1.0% | ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 0.8% –¥–æ 1.0% |
| `min_profit_to_close` | –ù–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
| `min_holding_minutes` | 0.5 (30 —Å–µ–∫) | ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–æ —Å 1 –¥–æ 0.5 –º–∏–Ω—É—Ç—ã |
| `max_holding_minutes` | 25 | ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–æ —Å 28 –¥–æ 25 –º–∏–Ω—É—Ç |
| `min_score_threshold` | 1.8 | ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 1.6 –¥–æ 1.8 (+12.5%) |
| `max_trades_per_hour` | 15 | ‚úÖ –°–Ω–∏–∂–µ–Ω–æ —Å 20 –¥–æ 15 (-25%) |
| `tp_atr_multiplier` | 2.5 | ATR-based TP |
| `sl_atr_multiplier` | 1.5 | ATR-based SL |
| `ph_threshold_percent` | 0.9% | Profit Harvest –æ—Ç –º–∞—Ä–∂–∏ |

**–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:**
1. **TP —Å–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∏–π (5.0%)** - —Ç–æ–ª—å–∫–æ 2 –∏–∑ 29 –ø–æ–∑–∏—Ü–∏–π –¥–æ—Å—Ç–∏–≥–ª–∏ TP (6.9%)
2. **SL —Å–ª–∏—à–∫–æ–º –±–ª–∏–∑–∫–æ (1.0%)** - 9 –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã–ª–∏—Å—å –ø–æ SL (31%)
3. **max_holding_minutes (25 –º–∏–Ω)** - 7 –ø–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã–ª–∏—Å—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (24.1%)
4. **min_holding_minutes (0.5 –º–∏–Ω)** - —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è, –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —Ä–∞–Ω—å—à–µ –≤—Ä–µ–º–µ–Ω–∏

---

**–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞**

