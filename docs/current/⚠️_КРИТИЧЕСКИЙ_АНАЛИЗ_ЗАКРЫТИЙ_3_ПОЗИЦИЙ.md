# ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó: –ü–û–ß–ï–ú–£ –ü–û–ó–ò–¶–ò–ò –ó–ê–ö–†–´–õ–ò–°–¨ –†–ê–ù–¨–®–ï 40 –ú–ò–ù–£–¢

**–î–∞—Ç–∞:** 22.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚ùå –ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê!  
**–ü–æ–∑–∏—Ü–∏–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:** 3

---

## üìä –î–ê–ù–ù–´–ï –° –ë–ò–†–ñ–ò

### –ü–û–ó–ò–¶–ò–Ø 1: DOGE-USDT
- **–û—Ç–∫—Ä—ã—Ç–∞:** 10:48:39
- **–ó–∞–∫—Ä—ã—Ç–∞:** 10:50:47
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** **2 –º–∏–Ω—É—Ç—ã 8 —Å–µ–∫—É–Ω–¥** ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 40+ –º–∏–Ω—É—Ç!)
- **PnL:** +0.27 USDT (+0.90%)
- **Entry:** 0.13965
- **Exit:** 0.14000

### –ü–û–ó–ò–¶–ò–Ø 2: DOGE-USDT
- **–û—Ç–∫—Ä—ã—Ç–∞:** 10:47:18
- **–ó–∞–∫—Ä—ã—Ç–∞:** 10:48:13
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** **55 —Å–µ–∫—É–Ω–¥!** ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 40+ –º–∏–Ω—É—Ç!)
- **PnL:** +0.48 USDT (+1.62%)
- **Entry:** 0.13945
- **Exit:** 0.14000

### –ü–û–ó–ò–¶–ò–Ø 3: SOL-USDT
- **–û—Ç–∫—Ä—ã—Ç–∞:** 10:36:02
- **–ó–∞–∫—Ä—ã—Ç–∞:** 10:37:45
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** **1 –º–∏–Ω—É—Ç–∞ 43 —Å–µ–∫—É–Ω–¥—ã** ‚ùå (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 40+ –º–∏–Ω—É—Ç!)
- **PnL:** +0.28 USDT (+0.75%)
- **Entry:** 128.00
- **Exit:** 127.72

---

## üîç –ê–ù–ê–õ–ò–ó CSV –õ–û–ì–û–í

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:

**min_holding –∑–∞—â–∏—Ç–∞ –†–ê–ë–û–¢–ê–ï–¢ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –í CSV –≤–∏–¥–Ω–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π `min_holding_BLOCKED`
- TSL –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ 40 –º–∏–Ω—É—Ç
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ

**–ü—Ä–∏–º–µ—Ä –∏–∑ CSV:**
```
10:50:47.967,tsl_check,DOGE-USDT,check=min_holding_BLOCKED | minutes=2.0079 | min_hold=40.0000 | profit=-0.0006
```

‚úÖ **min_holding –∑–∞—â–∏—Ç–∞ –ê–ö–¢–ò–í–ù–ê –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ!**

---

## ‚ùå –ù–ê–ô–î–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê: PARTIAL TP

### üî¥ –ü–†–û–ë–õ–ï–ú–ê #1: Partial TP –û–ë–•–û–î–ò–¢ min_holding!

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ª–æ–≥–∞—Ö (10:50:47):**

```
10:50:47 | INFO | Partial TP DOGE-USDT: –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –ª–∏–º–∏—Ç sell 0.64 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ @ 0.1400 
           (pnl=0.93%, fraction=0.60, post_only=True)
10:50:47 | INFO | Partial TP –æ—Ä–¥–µ—Ä –¥–ª—è DOGE-USDT —Ä–∞–∑–º–µ—â–µ–Ω —É—Å–ø–µ—à–Ω–æ (ordId=...)
10:50:48 | INFO | Private WS: –ü–æ–∑–∏—Ü–∏—è DOGE-USDT –∑–∞–∫—Ä—ã—Ç–∞ (—Ä–∞–∑–º–µ—Ä=0)
```

**–ê–Ω–∞–ª–∏–∑:**
- Position Manager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **Partial TP** –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç TSL
- –ï—Å–ª–∏ profit >= **trigger (0.40%)** - –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ **60% –ø–æ–∑–∏—Ü–∏–∏**
- **Partial TP –ù–ï –ü–†–û–í–ï–†–Ø–ï–¢ min_holding!**
- –ü–æ—Å–ª–µ Partial TP –ø–æ–∑–∏—Ü–∏—è —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –¥–æ 0 –∏ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è**

### üìã –ö–û–î –ü–†–û–ë–õ–ï–ú–´:

**–í `position_manager.py`, –º–µ—Ç–æ–¥ `_check_tp_only`:**
```python
# –°—Ç—Ä–æ–∫–∞ ~1335
partial_tp_config = regime_profile.get("partial_tp", {})
if partial_tp_config:
    fraction = partial_tp_config.get("fraction", 1.0)  # 60% –ø–æ–∑–∏—Ü–∏–∏
    trigger = partial_tp_config.get("trigger", 0.0)    # 0.40% –æ—Ç –º–∞—Ä–∂–∏
    
    if pnl_percent >= trigger:  # ‚ùå –ù–ï–¢ –ü–†–û–í–ï–†–ö–ò min_holding!
        # –í—ã—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–¥–µ—Ä –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ 60% –ø–æ–∑–∏—Ü–∏–∏
        await self._close_position_by_reason(position, "partial_tp")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `_check_tp_only` **–ù–ï –ü–†–û–í–ï–†–Ø–ï–¢** `min_holding_minutes` –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ Partial TP!

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê #2: Position Manager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TP –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç TSL

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- **TSL** (TrailingStopLoss) –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –≤ `should_close_position()` - **–ü–†–û–í–ï–†–Ø–ï–¢ min_holding** ‚úÖ
- **Position Manager** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TP –≤ `_check_tp_only()` - **–ù–ï –ü–†–û–í–ï–†–Ø–ï–¢ min_holding** ‚ùå

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. TSL –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ (min_holding < 40 –º–∏–Ω—É—Ç) ‚úÖ
2. Position Manager –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Partial TP –æ—Ç–¥–µ–ª—å–Ω–æ ‚ùå
3. Partial TP —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ profit >= 0.40% ‚ùå
4. –í—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ—Ä–¥–µ—Ä –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ 60% –ø–æ–∑–∏—Ü–∏–∏ ‚ùå
5. –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é ‚ùå

**min_holding –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –≤ TSL, –Ω–æ –ù–ï –≤ Position Manager!**

---

## üìä –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï –í –õ–û–ì–ê–•

### –ü–æ–∑–∏—Ü–∏—è DOGE-USDT (10:48:39-10:50:47):

**10:50:47 - –ü–æ—Å–ª–µ–¥–Ω—è—è TSL –ø—Ä–æ–≤–µ—Ä–∫–∞:**
```
üîç TrailingSL check: side=long, price=0.13970, stop=0.13430, profit=-0.064%, 
   time_in_position=2.01 –º–∏–Ω, trail=4.000%
‚è±Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è: –ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è 2.01 –º–∏–Ω < 40.00 –º–∏–Ω, 
   –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º (branch=min_holding)
```

‚úÖ **TSL –ë–õ–û–ö–ò–†–£–ï–¢ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

**–ù–û –≤ —ç—Ç–æ –∂–µ –≤—Ä–µ–º—è (10:50:47):**
```
üìä Partial TP DOGE-USDT: —Ä–µ–∂–∏–º=ranging, fraction=60.0%, trigger=0.40%
üìä Partial TP –ø—Ä–æ–≥—Ä–µ—Å—Å DOGE-USDT: pnl=0.93% / —Ç—Ä–∏–≥–≥–µ—Ä=0.40% (233%, done=False)
üìà Partial TP DOGE-USDT: –≤—ã—Å—Ç–∞–≤–ª—è–µ–º –ª–∏–º–∏—Ç sell 0.64 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ @ 0.1400
```

‚ùå **Position Manager –≤—ã—Å—Ç–∞–≤–∏–ª Partial TP –æ—Ä–¥–µ—Ä –ë–ï–ó –ø—Ä–æ–≤–µ—Ä–∫–∏ min_holding!**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ (0.1400 = —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞)
- –ü–æ–∑–∏—Ü–∏—è —É–º–µ–Ω—å—à–∏–ª–∞—Å—å —Å 1.07 –¥–æ 0.43 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- –ó–∞—Ç–µ–º –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é (–æ—Å—Ç–∞—Ç–æ–∫ —Å–ª–∏—à–∫–æ–º –º–∞–ª)

---

## üéØ –ö–û–†–ù–ï–í–ê–Ø –ü–†–ò–ß–ò–ù–ê

### ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è

1. **TSL (TrailingStopLoss):**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `min_holding_minutes`
   - ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ 40 –º–∏–Ω—É—Ç
   - ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

2. **Position Manager (`_check_tp_only`):**
   - ‚ùå –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `min_holding_minutes`
   - ‚ùå –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ Partial TP –±–µ–∑ —É—á–µ—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏
   - ‚ùå –û–ë–•–û–î–ò–¢ –∑–∞—â–∏—Ç—É min_holding!

### üî¥ –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–û–ë–õ–ï–ú–´:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Position Manager                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ _check_tp_only()                         ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç profit >= trigger (0.40%)   ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - ‚ùå –ù–ï–¢ –ø—Ä–æ–≤–µ—Ä–∫–∏ min_holding!          ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é                     ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  TSL (TrailingStopLoss)                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îÇ
‚îÇ  ‚îÇ should_close_position()                  ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç min_holding                 ‚îÇ      ‚îÇ
‚îÇ  ‚îÇ  - ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ       ‚îÇ      ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–†–û–ë–õ–ï–ú–ê: Position Manager –æ–±—Ö–æ–¥–∏—Ç TSL –∑–∞—â–∏—Ç—É!
```

---

## üí° –í–´–í–û–î–´

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢:

1. **DebugLogger:** –ò–¥–µ–∞–ª—å–Ω–æ –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è ‚úÖ
2. **TSL min_holding –∑–∞—â–∏—Ç–∞:** –†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úÖ
3. **CSV –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Å–µ —Å–æ–±—ã—Ç–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è ‚úÖ

### ‚ùå –ß–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

1. **Position Manager Partial TP:** –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç min_holding ‚ùå
2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –î–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è ‚ùå
3. **min_holding –∑–∞—â–∏—Ç–∞:** –†–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –≤ TSL, –Ω–æ –ù–ï –≤ Position Manager ‚ùå

---

## üéØ –†–ï–®–ï–ù–ò–ï (–¢–û–õ–¨–ö–û –ê–ù–ê–õ–ò–ó, –ù–ï –ü–†–ê–í–ö–ê)

### –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨:

**–í `position_manager.py`, –º–µ—Ç–æ–¥ `_check_tp_only()`:**

**–î–û–ë–ê–í–ò–¢–¨ –ø—Ä–æ–≤–µ—Ä–∫—É min_holding –ø–µ—Ä–µ–¥ Partial TP:**

```python
# –ü–µ—Ä–µ–¥ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º Partial TP –æ—Ä–¥–µ—Ä–∞
if partial_tp_config and pnl_percent >= trigger:
    # ‚úÖ –î–û–ë–ê–í–ò–¢–¨: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å min_holding
    if hasattr(self, "orchestrator") and self.orchestrator:
        tsl = self.orchestrator.trailing_sl_by_symbol.get(symbol)
        if tsl and tsl.min_holding_minutes:
            minutes_in_position = (time.time() - tsl.entry_timestamp) / 60.0
            if minutes_in_position < tsl.min_holding_minutes:
                logger.debug(
                    f"‚è±Ô∏è Partial TP –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è "
                    f"{minutes_in_position:.2f} –º–∏–Ω < {tsl.min_holding_minutes:.2f} –º–∏–Ω"
                )
                return  # –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ Partial TP!
    
    # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ min_holding - –∑–∞–∫—Ä—ã–≤–∞–µ–º
    await self._close_position_by_reason(position, "partial_tp")
```

---

## üìä –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

**–ù–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:** ‚úÖ  
**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:** ‚úÖ  
**–†–µ—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ:** ‚úÖ  

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é! üéØ

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–í—Å–µ —Ç—Ä–∏ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–ª–∏—Å—å –ø–æ Partial TP:**
- PnL –±—ã–ª –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω –¥–ª—è trigger (0.40%)
- Position Manager –≤—ã—Å—Ç–∞–≤–∏–ª Partial TP –æ—Ä–¥–µ—Ä
- –û—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è —Å—Ä–∞–∑—É (—Ü–µ–Ω–∞ = –ª–∏–º–∏—Ç)
- –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
- **–ë–ï–ó —É—á–µ—Ç–∞ min_holding!**

**min_holding –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –≤ TSL, –Ω–æ Position Manager –µ–µ –æ–±—Ö–æ–¥–∏—Ç!**

---

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω! –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!** ‚úÖ

