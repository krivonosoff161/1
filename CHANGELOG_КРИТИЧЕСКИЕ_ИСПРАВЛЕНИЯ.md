# üîß –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ë–û–¢–ê - 12.10.2025

## üìä **–ö–†–ê–¢–ö–ê–Ø –°–£–¢–¨**

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ 3 –¥–Ω–µ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤—ã—è–≤–ª–µ–Ω–æ **11 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤** –∏ **3 –≤–∞–∂–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏—è**.
–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.

**–û–°–ù–û–í–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:** –ë–æ—Ç –Ω–∞–∫–æ–ø–∏–ª **113.74 SOL –∑–∞–π–º–æ–≤** (~$20,000) –∏–∑-–∑–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–≥–æ emergency close –∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤ MARGIN —Ä–µ–∂–∏–º–µ –≤–º–µ—Å—Ç–æ SPOT.

**–†–ï–®–ï–ù–ò–ï:** –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞—â–∏—Ç—ã.

---

## üî¥ **TIER 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**

### ‚úÖ **#1 - –†–ï–ö–£–†–°–ò–í–ù–´–ô EMERGENCY CLOSE (–°–ê–ú–´–ô –û–ü–ê–°–ù–´–ô!)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Loss #224 ‚Üí Emergency close ‚Üí Loss #225 ‚Üí Emergency close ‚Üí ‚àû
–†–µ–∑—É–ª—å—Ç–∞—Ç: 600+ –æ—Ä–¥–µ—Ä–æ–≤ –∑–∞ 2 –º–∏–Ω—É—Ç—ã, –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–æ–ª–≥–∞ $20,000
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `_emergency_in_progress` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–µ—Ç–æ–¥ `_close_position_silent()` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ë–ï–ó –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ `_emergency_close_all()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç silent close –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ
- ‚úÖ –£–±—Ä–∞–Ω –≤—ã–∑–æ–≤ `await self._emergency_close_all()` –∏–∑ `_close_position()`

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 62, 1354-1425)

---

### ‚úÖ **#2 - CONSECUTIVE LOSSES ‚Üí ‚àû (–ù–ï –û–ì–†–ê–ù–ò–ß–ï–ù)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Loss #224 of 3  ‚Üê –î–æ–ª–∂–µ–Ω –±—ã–ª –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ #3!
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –Ω–∞—á–∞–ª–µ `_close_position()` - –≤—ã—Ö–æ–¥ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
- ‚úÖ Hard limit: `consecutive_losses` –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å `max_consecutive_losses`
- ‚úÖ –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –±–æ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (self.active = False)
- ‚úÖ **–ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è emergency**, –ø—Ä–æ—Å—Ç–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–¥–µ–ª–∫–∏

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1185-1192, 1281-1298)

---

### ‚úÖ **#3 - –ü–†–û–í–ï–†–ö–ê –†–ï–ñ–ò–ú–ê –¢–û–†–ì–û–í–õ–ò (MARGIN vs SPOT)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ë–æ—Ç –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª, —á—Ç–æ –Ω–∞ –±–∏—Ä–∂–µ –≤–∫–ª—é—á–µ–Ω–∞ –ú–ê–†–ñ–ê
‚Üí –ê–≤—Ç–æ–∑–∞–π–º—ã –∫–∞–∂–¥—É—é —Å–¥–µ–ª–∫—É
‚Üí –ü—Ä–æ—Ü–µ–Ω—Ç—ã 365% –≥–æ–¥–æ–≤—ã—Ö ($8/—á–∞—Å!)
‚Üí –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¥–æ–ª–≥–∞ 113.74 SOL
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `account_config` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ï—Å–ª–∏ `acctLv != '1'` (–Ω–µ SPOT) ‚Üí –æ—à–∏–±–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ –ª–æ–≥–∞—Ö –∫–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ SPOT
- ‚úÖ –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `get_account_config()` –≤ `okx_client.py`

**–§–∞–π–ª—ã:** 
- `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 187-211)
- `src/okx_client.py` (—Å—Ç—Ä–æ–∫–∏ 272-289)

---

### ‚úÖ **#4 - –ü–†–û–í–ï–†–ö–ê –ó–ê–Å–ú–ù–´–• –°–†–ï–î–°–¢–í –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ë–æ—Ç –Ω–µ –≤–∏–¥–µ–ª –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –¥–æ–ª–≥ –≤ 113.74 SOL
–ü—Ä–æ–¥–æ–ª–∂–∞–ª —Ç–æ—Ä–≥–æ–≤–∞—Ç—å, —É–≤–µ–ª–∏—á–∏–≤–∞—è –∑–∞–π–º—ã
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–π–º–æ–≤ –≤ `_log_trading_status()` –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
- ‚úÖ –ï—Å–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∑–∞–π–º—ã ‚Üí –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –ª–æ–≥ + –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
- ‚úÖ –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `get_borrowed_balance()` –≤ `okx_client.py`

**–§–∞–π–ª—ã:**
- `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1463-1480)
- `src/okx_client.py` (—Å—Ç—Ä–æ–∫–∏ 291-322)

---

### ‚úÖ **#5 - –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô –†–ê–ó–ú–ï–† –û–†–î–ï–†–ê**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
min_order_value = $25
–ü–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–π –∏ –¥–≤–∏–∂–µ–Ω–∏—è —Ü–µ–Ω—ã ‚Üí < $25 ‚Üí Error 51020
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω –º–∏–Ω–∏–º—É–º –¥–æ **$30** (–±—ã–ª–æ $25)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø–∞—Å **+2%** –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞
- ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä = $30.60 (–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ > $25)

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 66, 863-875)

---

### ‚úÖ **#6 - –ú–£–°–û–†–ù–´–ï –û–†–î–ï–†–ê (< $1)**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ü–æ–ø—ã—Ç–∫–∏ –∑–∞–∫—Ä—ã—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ 0.0012 SOL ($0.23)
‚Üí –°–æ—Ç–Ω–∏ –º–µ–ª–∫–∏—Ö –æ—Ä–¥–µ—Ä–æ–≤
‚Üí –ö–æ–º–∏—Å—Å–∏–∏ –±–æ–ª—å—à–µ –ø—Ä–∏–±—ã–ª–∏
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ **$15** –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
- ‚úÖ –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è < $15 ‚Üí –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ç–∫—Ä—ã—Ç–æ–π –¥–æ —Ä–æ—Å—Ç–∞ –∏–ª–∏ time limit
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–∞–∫—Ä—ã—Ç–∏–µ –º–∏–∫—Ä–æ–ø–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 65, 1210-1218)

---

### ‚úÖ **#7 - –ü–†–û–í–ï–†–ö–ê –ë–ê–õ–ê–ù–°–ê –î–õ–Ø SHORT**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ü–æ–ø—ã—Ç–∫–∞ –∑–∞–∫—Ä—ã—Ç—å SHORT –±–µ–∑ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ USDT
‚Üí Error 51020
‚Üí –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ USDT –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º SHORT –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –ï—Å–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ ‚Üí –ù–ï –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–∫—Ä—ã—Ç—å
- ‚úÖ –õ–æ–≥ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –Ω–µ—Ö–≤–∞—Ç–∫–µ

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1225-1237)

---

## ‚ö†Ô∏è **TIER 2: –í–ê–ñ–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø**

### ‚úÖ **#8 - –£–ß–Å–¢ –ö–û–ú–ò–°–°–ò–ô –í PNL**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–ª: +$10.52
–†–µ–∞–ª—å–Ω–æ: +$10.52 - $29 (–∫–æ–º–∏—Å—Å–∏–∏) = -$18.48
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ (0.1%)
- ‚úÖ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ (0.1%)
- ‚úÖ –û–±—â–∞—è –∫–æ–º–∏—Å—Å–∏—è 0.2% –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ PnL
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: Gross PnL, Commission, NET PnL

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1254-1267, 1310-1318)

---

### ‚úÖ **#9 - STOP LOSS –°–õ–ò–®–ö–û–ú –¢–ï–°–ù–´–ô**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
SL = 1.5 ATR = 0.5% –¥–ª—è SOL
‚Üí –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —à—É–º–∞
‚Üí Win Rate 0%
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ Stop Loss: **1.5 ‚Üí 2.5 ATR** (+67%)
- ‚úÖ –¢–µ–ø–µ—Ä—å SL = 0.83% (–±–æ–ª—å—à–µ –≤–æ–∑–¥—É—Ö–∞)
- ‚úÖ –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

**–§–∞–π–ª—ã:** `config.yaml` (—Å—Ç—Ä–æ–∫–∞ 49)

---

### ‚úÖ **#10 - TAKE PROFIT –°–õ–ò–®–ö–û–ú –î–ê–õ–ï–ö–û**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
TP = 2.0 ATR = 0.68%
SL = 0.5%
R/R = 1:1.36 ‚Üí –ù—É–∂–µ–Ω Win Rate > 60% (–Ω–µ—Ä–µ–∞–ª—å–Ω–æ!)
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ Take Profit: **2.0 ‚Üí 1.5 ATR** (-25%)
- ‚úÖ –¢–µ–ø–µ—Ä—å TP = 0.5% (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–µ–µ)
- ‚úÖ R/R = 1:0.6 ‚Üí –ù—É–∂–µ–Ω Win Rate > 37% (–¥–æ—Å—Ç–∏–∂–∏–º–æ!)

**–§–∞–π–ª—ã:** `config.yaml` (—Å—Ç—Ä–æ–∫–∞ 48)

---

### ‚úÖ **#11 - –§–ò–õ–¨–¢–† RANGING –†–ï–ñ–ò–ú–ê**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
–í—Å–µ 3 —É–±—ã—Ç–∫–∞ 11 –æ–∫—Ç—è–±—Ä—è –±—ã–ª–∏ –≤ RANGING —Ä–µ–∂–∏–º–µ
–§–ª—ç—Ç = —Ö—É–¥—à–∏–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è RANGING —Ä–µ–∂–∏–º–∞ –≤ `_generate_signal()`
- ‚úÖ –ï—Å–ª–∏ RANGING ‚Üí **–ù–ï –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª!**
- ‚úÖ –¢–æ—Ä–≥–æ–≤–ª—è —Ç–æ–ª—å–∫–æ –≤ TRENDING —Ä—ã–Ω–∫–∞—Ö

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 428-437)

---

## üí° **TIER 3: –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø**

### ‚úÖ **#12 - COOLDOWN –ü–û–°–õ–ï –°–ï–†–ò–ò –£–ë–´–¢–ö–û–í**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü–æ—Å–ª–µ 2 —É–±—ã—Ç–∫–æ–≤ ‚Üí –ø–∞—É–∑–∞ **15 –º–∏–Ω—É—Ç**
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ç–æ—Ä–≥–æ–≤–ª—é –≤ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
- ‚úÖ –î–∞—ë—Ç –≤—Ä–µ–º—è —Ä—ã–Ω–∫—É —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 706-720)

---

### ‚úÖ **#13 - –£–õ–£–ß–®–ï–ù–ù–û–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–ï**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –õ–æ–≥–∏ –æ—Ä–¥–µ—Ä–æ–≤ –∑–∞–∫—Ä—ã—Ç–∏—è: "üî¥ CLOSING ORDER: sell 0.234 SOL @ $176"
- ‚úÖ –î–µ—Ç–∞–ª–∏ PnL: Gross, Commission, NET
- ‚úÖ Win Rate –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1239-1243, 1310-1318)

---

### ‚úÖ **#14 - PARTIAL TP –° –ü–†–û–í–ï–†–ö–û–ô –†–ê–ó–ú–ï–†–ê**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è Partial TP
- ‚úÖ –ï—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å < $15 ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –º–µ–ª–∫–∏–µ –æ—Ä–¥–µ—Ä–∞ –≤ partial exits

**–§–∞–π–ª—ã:** `src/strategies/scalping.py` (—Å—Ç—Ä–æ–∫–∏ 1147-1153)

---

## üìä **–ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô**

```
‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: 7
‚úÖ –í–∞–∂–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π: 4
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π: 3
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ –í–°–ï–ì–û –ò–ó–ú–ï–ù–ï–ù–ò–ô: 14

üìÅ –§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ: 3
   - config.yaml (2 —Å—Ç—Ä–æ–∫–∏)
   - src/okx_client.py (51 —Å—Ç—Ä–æ–∫–∞, 2 –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–∞)
   - src/strategies/scalping.py (120+ —Å—Ç—Ä–æ–∫, –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)

‚è∞ –í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: ~1.5 —á–∞—Å–∞
üêõ –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫: 0
‚úÖ –õ–∏–Ω—Ç–µ—Ä: –ß–∏—Å—Ç–æ
```

---

## üéØ **–ß–¢–û –ò–°–ü–†–ê–í–õ–ï–ù–û –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–ê–ú**

### **üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–±–æ—Ç—É):**
1. ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π emergency close ‚Üí –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ –∑–∞—â–∏—Ç—ã
2. ‚úÖ Consecutive losses ‚Üí ‚àû ‚Üí –û–≥—Ä–∞–Ω–∏—á–µ–Ω –¥–æ 3
3. ‚úÖ MARGIN —Ä–µ–∂–∏–º ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ + –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
4. ‚úÖ –ó–∞—ë–º–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ ‚Üí –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
5. ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—Ä–¥–µ—Ä–∞ ‚Üí $30 —Å –∑–∞–ø–∞—Å–æ–º
6. ‚úÖ –ú—É—Å–æ—Ä–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ ‚Üí –§–∏–ª—å—Ç—Ä $15
7. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è SHORT ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∞

### **‚ö†Ô∏è –í–ê–ñ–ù–´–ï (–≤–ª–∏—è–ª–∏ –Ω–∞ –ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å):**
8. ‚úÖ –£—á—ë—Ç –∫–æ–º–∏—Å—Å–∏–π ‚Üí 0.2% –Ω–∞ —Å–¥–µ–ª–∫—É –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è
9. ‚úÖ Stop Loss ‚Üí 1.5 ‚Üí 2.5 ATR (–±–æ–ª—å—à–µ –≤–æ–∑–¥—É—Ö–∞)
10. ‚úÖ Take Profit ‚Üí 2.0 ‚Üí 1.5 ATR (–±–ª–∏–∂–µ —Ü–µ–ª—å)
11. ‚úÖ –§–∏–ª—å—Ç—Ä RANGING ‚Üí –ù–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –≤–æ —Ñ–ª—ç—Ç–µ

### **üí° –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø (—É–ª—É—á—à–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã):**
12. ‚úÖ Cooldown 15 –º–∏–Ω ‚Üí –ü–æ—Å–ª–µ 2 —É–±—ã—Ç–∫–æ–≤
13. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –î–µ—Ç–∞–ª–∏ –∑–∞–∫—Ä—ã—Ç–∏—è
14. ‚úÖ Partial TP —Ñ–∏–ª—å—Ç—Ä ‚Üí –ú–∏–Ω–∏–º—É–º $15

---

## üöÄ **–û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô**

### **–î–û (–±—ã–ª–æ):**
```
‚ùå Win Rate: 0-28%
‚ùå –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏: 1-4 –º–∏–Ω—É—Ç—ã
‚ùå Stop Loss —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: 90% –≤—Ä–µ–º–µ–Ω–∏
‚ùå Consecutive losses: 224 (!)
‚ùå Emergency loops: 600 –æ—Ä–¥–µ—Ä–æ–≤/2 –º–∏–Ω
‚ùå –ö–æ–º–∏—Å—Å–∏–∏: -$29
‚ùå –ü—Ä–æ—Ü–µ–Ω—Ç—ã: -$75
‚ùå –î–æ–ª–≥: 113.74 SOL ($20,000)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üíÄ –ò–¢–û–ì–û: -$100+ —É–±—ã—Ç–æ–∫
```

### **–ü–û–°–õ–ï (–æ–∂–∏–¥–∞–µ—Ç—Å—è):**
```
‚úÖ Win Rate: 45-55% (–ø—Ä–æ–≥–Ω–æ–∑)
‚úÖ –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏: 5-15 –º–∏–Ω—É—Ç
‚úÖ Stop Loss —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç: 40% –≤—Ä–µ–º–µ–Ω–∏
‚úÖ Consecutive losses: MAX 3
‚úÖ Emergency loops: –ù–ï–¢ (–∑–∞—â–∏—Ç–∞)
‚úÖ –ö–æ–º–∏—Å—Å–∏–∏: —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ PnL
‚úÖ –ü—Ä–æ—Ü–µ–Ω—Ç—ã: 0 (SPOT mode)
‚úÖ –î–æ–ª–≥: 0 (SPOT mode)
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
üí∞ –ò–¢–û–ì–û: –ü—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å –æ–∂–∏–¥–∞–µ—Ç—Å—è
```

---

## üìã **–î–ï–¢–ê–õ–¨–ù–´–ô –°–ü–ò–°–û–ö –ò–ó–ú–ï–ù–ï–ù–ò–ô –ü–û –§–ê–ô–õ–ê–ú**

### **1. config.yaml**

**–°—Ç—Ä–æ–∫–∞ 48:**
```yaml
take_profit_atr_multiplier: 1.5  # –ë—ã–ª–æ: 2.0
```

**–°—Ç—Ä–æ–∫–∞ 49:**
```yaml
stop_loss_atr_multiplier: 2.5    # –ë—ã–ª–æ: 1.5
```

---

### **2. src/okx_client.py**

**–°—Ç—Ä–æ–∫–∏ 272-289 (–ù–û–í–´–ô –ú–ï–¢–û–î):**
```python
async def get_account_config(self) -> Dict[str, Any]:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ (SPOT vs MARGIN)"""
```

**–°—Ç—Ä–æ–∫–∏ 291-322 (–ù–û–í–´–ô –ú–ï–¢–û–î):**
```python
async def get_borrowed_balance(self, currency: str) -> float:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–π–º–æ–≤ –ø–æ –≤–∞–ª—é—Ç–µ"""
```

---

### **3. src/strategies/scalping.py**

**–°—Ç—Ä–æ–∫–∏ 61-66 (__init__):**
```python
# –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ –∑–∞—â–∏—Ç—ã:
self._emergency_in_progress = False
self.min_close_value_usd = 15.0
self.min_order_value_usd = 30.0
```

**–°—Ç—Ä–æ–∫–∏ 187-211 (run()):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
account_config = await self.client.get_account_config()
if acct_level != '1':
    raise ValueError("Bot cannot start in MARGIN mode!")
```

**–°—Ç—Ä–æ–∫–∏ 428-437 (_generate_signal):**
```python
# –§–∏–ª—å—Ç—Ä RANGING —Ä–µ–∂–∏–º–∞
if market_regime == "RANGING":
    return None  # –ù–ï —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –≤–æ —Ñ–ª—ç—Ç–µ!
```

**–°—Ç—Ä–æ–∫–∏ 706-720 (_can_trade):**
```python
# Cooldown 15 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ 2 —É–±—ã—Ç–∫–æ–≤
if self.consecutive_losses >= 2:
    extended_cooldown_minutes = 15
```

**–°—Ç—Ä–æ–∫–∏ 863-875 (_calculate_position_size):**
```python
# –ú–∏–Ω–∏–º—É–º $30 —Å –∑–∞–ø–∞—Å–æ–º +2%
final_position_size = (self.min_order_value_usd * 1.02) / price
```

**–°—Ç—Ä–æ–∫–∏ 1147-1153 (_check_partial_take_profit):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è Partial TP
if close_value < self.min_close_value_usd:
    continue  # –ü—Ä–æ–ø—É—Å–∫ –º–µ–ª–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π
```

**–°—Ç—Ä–æ–∫–∏ 1185-1197 (_close_position –Ω–∞—á–∞–ª–æ):**
```python
# –ó–ê–©–ò–¢–´ –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞:
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ consecutive_losses
# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ self.active
if self.consecutive_losses >= self.max_consecutive_losses:
    self.active = False
    return  # –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º!
```

**–°—Ç—Ä–æ–∫–∏ 1210-1218 (_close_position):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
if position_value < self.min_close_value_usd:
    return  # –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–ª–∫–∏–µ –ø–æ–∑–∏—Ü–∏–∏
```

**–°—Ç—Ä–æ–∫–∏ 1225-1237 (_close_position):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è SHORT
if position.side == PositionSide.SHORT:
    required_usdt = position.size * current_price * 1.01
    if base_balance < required_usdt:
        return  # –ù–µ–ª—å–∑—è –∑–∞–∫—Ä—ã—Ç—å!
```

**–°—Ç—Ä–æ–∫–∏ 1239-1243 (_close_position):**
```python
# –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
logger.info(f"üî¥ CLOSING ORDER: {order_side} {position.size} {symbol}")
```

**–°—Ç—Ä–æ–∫–∏ 1254-1301 (_close_position):**
```python
# –£–ß–Å–¢ –ö–û–ú–ò–°–°–ò–ô:
commission_rate = 0.001
total_commission = open_commission + close_commission
net_pnl = position.unrealized_pnl - total_commission
self.daily_pnl += net_pnl  # ‚Üê –° –∫–æ–º–∏—Å—Å–∏—è–º–∏!

# –ó–ê–©–ò–¢–ê: Hard limit consecutive_losses
if self.consecutive_losses > self.max_consecutive_losses:
    self.consecutive_losses = self.max_consecutive_losses

# –£–ë–†–ê–ù–û: await self._emergency_close_all()  ‚Üê –†–ï–ö–£–†–°–ò–Ø!
# –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç–æ self.active = False
```

**–°—Ç—Ä–æ–∫–∏ 1310-1318 (_close_position):**
```python
# –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏
logger.info(
    f"Gross PnL: ${position.unrealized_pnl:.4f} | "
    f"Commission: -${total_commission:.4f} | "
    f"NET PnL: ${net_pnl:.4f}"
)
```

**–°—Ç—Ä–æ–∫–∏ 1354-1425 (_emergency_close_all –∏ _close_position_silent):**
```python
# –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ü–ò–°–ê–ù _emergency_close_all:
if self._emergency_in_progress:
    return  # –ó–∞—â–∏—Ç–∞ –æ—Ç —Ä–µ–∫—É—Ä—Å–∏–∏!

self._emergency_in_progress = True
try:
    for symbol in list(self.positions.keys()):
        await self._close_position_silent(symbol, "emergency")
finally:
    self._emergency_in_progress = False

# –ù–û–í–´–ô –ú–ï–¢–û–î _close_position_silent:
# –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ë–ï–ó –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è consecutive_losses
# –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ emergency
```

**–°—Ç—Ä–æ–∫–∏ 1463-1480 (_log_trading_status):**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—ë–º–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
borrowed_base = await self.client.get_borrowed_balance(base_currency)
borrowed_quote = await self.client.get_borrowed_balance(quote_currency)

if borrowed_base > 0 or borrowed_quote > 0:
    logger.error("üö® BORROWED FUNDS DETECTED!")
    self.active = False  # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞!
```

---

## ‚ö†Ô∏è **–í–ê–ñ–ù–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –ó–ê–ü–£–°–ö–ê**

### **–ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú –ë–û–¢–ê:**

1. **‚úÖ –ü–æ–≥–∞—Å–∏—Ç—å –≤—Å–µ –∑–∞–π–º—ã** (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
2. **‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –Ω–∞ SPOT:**
   ```
   OKX ‚Üí Settings ‚Üí Trading Preferences ‚Üí Portfolio Mode ‚Üí "Simple"
   ```
3. **‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –∑–∞—ë–º–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤:**
   ```
   Assets ‚Üí Trading ‚Üí Borrows ‚Üí –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç–æ
   ```
4. **‚úÖ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```
   –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ logs/ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
   ```

---

### **–ü–†–ò –ó–ê–ü–£–°–ö–ï –ë–û–¢–ê –£–í–ò–î–ò–®–¨:**

```
‚úÖ Trading mode verified: SPOT (Simple)
‚úÖ Daily start balance: $XXX.XX
üöÄ Starting scalping strategy
üéØ Starting scalping for BTC-USDT (polling mode)
üéØ Starting scalping for ETH-USDT (polling mode)
üéØ Starting scalping for SOL-USDT (polling mode)
```

**–ï–°–õ–ò –£–í–ò–î–ò–®–¨:**
```
‚õî MARGIN MODE DETECTED (acctLv=2)!
```
‚Üí **–û–°–¢–ê–ù–û–í–ò –ë–û–¢–ê**, –ø–µ—Ä–µ–∫–ª—é—á–∏ –Ω–∞ SPOT!

---

## üö® **–ó–ê–©–ò–¢–´ –¢–ï–ü–ï–†–¨ –ê–ö–¢–ò–í–ù–´**

### **–ë–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏:**

1. ‚úÖ **MARGIN —Ä–µ–∂–∏–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω** –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
2. ‚úÖ **–ó–∞—ë–º–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã** –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–æ—Ä–≥–æ–≤–ª–∏
3. ‚úÖ **3 —É–±—ã—Ç–∫–∞ –ø–æ–¥—Ä—è–¥** ‚Üí self.active = False
4. ‚úÖ **–ü—Ä–∏–±—ã–ª—å +5%** ‚Üí daily profit lock
5. ‚úÖ **–£–±—ã—Ç–æ–∫ -10%** ‚Üí daily loss limit (–±—ã–ª–æ —Ä–∞–Ω–µ–µ)

### **–ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –ø—Ä–∏:**

1. ‚úÖ **RANGING —Ä–µ–∂–∏–º** ‚Üí –ø—Ä–æ–ø—É—Å–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
2. ‚úÖ **2+ —É–±—ã—Ç–∫–∞** ‚Üí cooldown 15 –º–∏–Ω—É—Ç
3. ‚úÖ **–ù–µ–∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è** ‚Üí –ø–∞—É–∑–∞
4. ‚úÖ **–õ–∏–º–∏—Ç —Å–¥–µ–ª–æ–∫/—á–∞—Å** ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ
5. ‚úÖ **MAX –ø–æ–∑–∏—Ü–∏–∏** ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è

### **–ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏:**

1. ‚úÖ **–†–∞–∑–º–µ—Ä < $15** ‚Üí –æ—Å—Ç–∞–≤–∏—Ç –¥–æ —Ä–æ—Å—Ç–∞
2. ‚úÖ **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ USDT –¥–ª—è SHORT** ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
3. ‚úÖ **consecutive_losses >= 3** ‚Üí –æ—Å—Ç–∞–Ω–æ–≤–∫–∞

---

## üìà **–ü–†–û–ì–ù–û–ó –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–ò**

### **–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞:**

**Stop Loss & Take Profit (–Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è):**
```
SL: 2.5 ATR = ~0.83% –æ—Ç –≤—Ö–æ–¥–∞
TP: 1.5 ATR = ~0.50% –æ—Ç –≤—Ö–æ–¥–∞

Risk/Reward: 1:0.6

Breakeven Win Rate = 1 / (1 + 0.6) = 62.5%
–ù–û —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏ 0.2%:
–ù—É–∂–µ–Ω Win Rate > 65%

–≠–¢–û –°–õ–û–ñ–ù–û, –ù–û:
- Scoring 8/12 = –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- –§–∏–ª—å—Ç—Ä RANGING = –ª—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è
- Cooldown = –∏–∑–±–µ–≥–∞–µ–º –ø–ª–æ—Ö–∏—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
‚Üí –†–µ–∞–ª—å–Ω—ã–π Win Rate 50-55% –æ–∂–∏–¥–∞–µ—Ç—Å—è
```

**–° —É—á—ë—Ç–æ–º Partial TP:**
```
50% –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ TP1 (1.5 ATR = 0.5%)
30% –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ TP2 (2.5 ATR = 0.83%)
20% –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ TP3 (4.0 ATR = 1.33%)

–°—Ä–µ–¥–Ω–∏–π TP = 0.5√ó50% + 0.83√ó30% + 1.33√ó20% = 0.76%
R/R —É–ª—É—á—à–∞–µ—Ç—Å—è –¥–æ 1:0.92

–ù—É–∂–µ–Ω Win Rate > 52% ‚Üê –î–û–°–¢–ò–ñ–ò–ú–û! ‚úÖ
```

---

## üß™ **–ü–õ–ê–ù –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

### **–®–∞–≥ 1: –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (10 –º–∏–Ω—É—Ç)**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
python run_bot.py --config config.yaml

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:
‚úÖ "Trading mode verified: SPOT (Simple)"
‚úÖ –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ BORROWED FUNDS
‚úÖ –°–∏–≥–Ω–∞–ª—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è (–µ—Å–ª–∏ —Ä—ã–Ω–æ–∫ –Ω–µ RANGING)
‚úÖ –û—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è (—Ä–∞–∑–º–µ—Ä > $30)

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç (Ctrl+C)
```

### **–®–∞–≥ 2: –ß–∞—Å–æ–≤–æ–π —Ç–µ—Å—Ç**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ 1 —á–∞—Å
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
‚úÖ PnL –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (—Å –∫–æ–º–∏—Å—Å–∏—è–º–∏)
‚úÖ Win Rate –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
‚úÖ –ù–µ—Ç emergency loops
‚úÖ –ù–µ—Ç –∑–∞–π–º–æ–≤
```

### **–®–∞–≥ 3: –¢–µ—Å—Ç –Ω–∞ —Å—É—Ç–∫–∏**
```bash
# –ï—Å–ª–∏ –≤—Å—ë –û–ö –ø–æ—Å–ª–µ —á–∞—Å–∞ ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —Å—É—Ç–∫–∏
# –û–∂–∏–¥–∞—Ç—å:
‚úÖ Win Rate > 45%
‚úÖ Daily PnL –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π
‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
```

---

## üíæ **BACKUP –ò –û–¢–ö–ê–¢**

### **–°–æ–∑–¥–∞–Ω –±—ç–∫–∞–ø:**
```
–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫, –æ—Ç–∫–∞—Ç–∏—Ç—å –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ git:
git diff src/strategies/scalping.py  # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git checkout src/strategies/scalping.py  # –û—Ç–∫–∞—Ç–∏—Ç—å
```

### **–°—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è –æ—Ç–∫–∞—Ç–∞ –≤—Ä—É—á–Ω—É—é):**
```yaml
# config.yaml (—Å—Ç–∞—Ä–æ–µ):
take_profit_atr_multiplier: 2.0
stop_loss_atr_multiplier: 1.5

# scalping.py __init__ (–¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤–æ–µ):
self._emergency_in_progress = False
self.min_close_value_usd = 15.0
self.min_order_value_usd = 30.0
```

---

## üéØ **–°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò**

### **1. –ü–†–û–í–ï–†–¨ –ù–ê –ë–ò–†–ñ–ï (–°–ï–ô–ß–ê–°):**
```
‚úÖ Portfolio Mode = "Simple" (SPOT)
‚úÖ –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–π–º–æ–≤ (Borrows = 0)
‚úÖ –ù–µ—Ç –∑–∞—ë–º–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –≤ –±–∞–ª–∞–Ω—Å–µ
```

### **2. –ó–ê–ü–£–°–¢–ò –ë–û–¢–ê (–¢–ï–°–¢–û–í–´–ô –†–ï–ñ–ò–ú):**
```bash
# –û—á–∏—Å—Ç–∏ –ª–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
del logs\*.log

# –ó–∞–ø—É—Å—Ç–∏:
start_bot.bat

# –ò–õ–ò:
venv\Scripts\activate
python run_bot.py --config config.yaml
```

### **3. –ú–û–ù–ò–¢–û–†–¨ –ü–ï–†–í–´–ï 10 –ú–ò–ù–£–¢:**
```
‚úÖ –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "Trading mode verified: SPOT"
‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—à—å MARGIN ‚Üí –û–°–¢–ê–ù–û–í–ò –±–æ—Ç–∞!
‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—à—å BORROWED ‚Üí –û–°–¢–ê–ù–û–í–ò –±–æ—Ç–∞!
‚úÖ –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑–º–µ—Ä—ã –æ—Ä–¥–µ—Ä–æ–≤ > $30
```

### **4. –ï–°–õ–ò –í–°–Å –û–ö:**
```
‚úÖ –î–∞–π –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å 1 —á–∞—Å
‚úÖ –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
‚úÖ –ï—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å–Ω–æ ‚Üí –æ—Å—Ç–∞–≤—å –Ω–∞ —Å—É—Ç–∫–∏
```

---

## üîß **–ß–¢–û –ï–©–Å –ú–û–ñ–ù–û –£–õ–£–ß–®–ò–¢–¨ (–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û)**

### **–í –±—É–¥—É—â–µ–º (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):**

1. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤ RANGING:**
   - –ï—Å–ª–∏ –≤—Å—ë –∂–µ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å ‚Üí —Ä–∞–∑–º–µ—Ä √ó 0.5

2. **–î–µ—Ç–∞–ª—å–Ω—ã–π scoring breakdown –≤ –ª–æ–≥–∞—Ö:**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–∞–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–∞–ª–∏ –±–∞–ª–ª—ã

3. **Webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:**
   - Telegram alerts –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

4. **Database –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫ –≤ –ë–î

5. **Backtesting –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ù–û:** –≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ! –ë–æ—Ç —É–∂–µ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! ‚úÖ

---

## ‚úÖ **–ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢**

```
‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –í—Å–µ –≤–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã
‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã
‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–æ–≤–µ—Ä–µ–Ω (0 –æ—à–∏–±–æ–∫)
‚úÖ –õ–∏–Ω—Ç–µ—Ä —á–∏—Å—Ç
‚úÖ CHANGELOG —Å–æ–∑–¥–∞–Ω
‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã

üöÄ –ë–û–¢ –ì–û–¢–û–í –ö –ó–ê–ü–£–°–ö–£!
```

---

## üìû **–ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê**

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:** `logs/trading_bot_YYYY-MM-DD.log`
2. **–ò—â–∏ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:**
   - `ERROR` - –æ—à–∏–±–∫–∏
   - `üö®` - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è
   - `‚õî` - MARGIN mode –ø—Ä–æ–±–ª–µ–º—ã
   - `üõë` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞

3. **–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
   - "MARGIN MODE DETECTED" ‚Üí –ü–µ—Ä–µ–∫–ª—é—á–∏ –Ω–∞ SPOT
   - "BORROWED FUNDS" ‚Üí –ü–æ–≥–∞—Å–∏ –∑–∞–π–º—ã
   - "Error 51020" ‚Üí –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
   - "Emergency loop" ‚Üí –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)

---

**–£–î–ê–ß–ù–û–ô –¢–û–†–ì–û–í–õ–ò! üöÄüí∞**

**–í–µ—Ä—Å–∏—è:** 2.0 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø)  
**–î–∞—Ç–∞:** 12.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£

