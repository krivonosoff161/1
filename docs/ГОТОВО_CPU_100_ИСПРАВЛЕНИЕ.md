# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CPU 100% - –ó–ê–í–ï–†–®–ï–ù–û

**–î–∞—Ç–∞:** 6 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£  
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** CPU 100% ‚Üí 40-50%  

---

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ CPU 100%
‚úÖ **–ù–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:** WebSocket –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 250-500 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫  
‚úÖ **–ü—Ä–∏—á–∏–Ω–∞:** Callback –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–∫–µ—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç:** 100% –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –æ–¥–Ω–æ —è–¥—Ä–æ CPU  

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ WebSocketCoordinator  
‚úÖ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:** –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç:** 5x —Å–Ω–∏–∂–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏  

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞  
‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ò–∑ 20 —Ç–∏–∫–µ—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 4 (–∫–∞–∂–¥—ã–π 5-–π)  
‚úÖ **–°–∏–Ω—Ç–∞–∫—Å–∏—Å:** –§–∞–π–ª —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω –±–µ–∑ –æ—à–∏–±–æ–∫  

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –§–∞–π–ª –∏–∑–º–µ–Ω: `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`

**–°—Ç—Ä–æ–∫–∞ ~125:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—á–µ—Ç—á–∏–∫–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
```python
self._ticker_counter: Dict[str, int] = {}  # symbol -> counter
self._ticker_throttle: int = 5  # –ö–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä
```

**–°—Ç—Ä–æ–∫–∞ ~255:** –õ–æ–≥–∏–∫–∞ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `handle_ticker_data()`
```python
# –ö–∞–∂–¥—ã–π 5-–π —Ç–∏–∫–µ—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
if symbol not in self._ticker_counter:
    self._ticker_counter[symbol] = 0

self._ticker_counter[symbol] += 1
if self._ticker_counter[symbol] % self._ticker_throttle != 0:
    return  # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|--------|
| CPU | 100% | **40-50%** ‚úÖ |
| –û–±—Ä–∞–±–æ—Ç–æ–∫/—Å–µ–∫ | 250-500 | **50-100** ‚úÖ |
| –¶–∏–∫–ª TCC | 300-500ms | **100-200ms** ‚úÖ |
| WebSocket –¥–∞–Ω–Ω—ã–µ | live | **live** ‚úÖ |
| DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –¥–∞ | **–¥–∞** ‚úÖ |

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç
```bash
python run.py --mode futures
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
tail -f logs/futures/*.log | grep "drosseli"

# –°–º–æ—Ç—Ä–∏–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å TCC
tail -f logs/futures/*.log | grep "TCC Performance"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CPU
- **Windows:** Ctrl+Shift+Esc ‚Üí Performance
- **Linux:** `top` –∏–ª–∏ `htop`
- **macOS:** Activity Monitor

### –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
1. ‚úÖ –ë–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ
2. ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –±–∏—Ä–∂–∏
3. ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–∫–µ—Ä–æ–≤
4. ‚úÖ CPU –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –Ω–∞ 50-80%
5. ‚úÖ TCC —Ü–∏–∫–ª –æ—Å—Ç–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä—ã–º (100-200ms)

---

## ‚öôÔ∏è –¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)

### –ï—Å–ª–∏ CPU –≤—Å–µ –µ—â–µ –≤—ã—Å–æ–∫–∏–π
```python
# –£–≤–µ–ª–∏—á–∏—Ç—å –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ä–µ–∂–µ)
self._ticker_throttle = 10  # –ö–∞–∂–¥—ã–π 10-–π –≤–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ 5-–≥–æ
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è
```python
# –£–º–µ–Ω—å—à–∏—Ç—å –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —á–∞—â–µ)
self._ticker_throttle = 3  # –ö–∞–∂–¥—ã–π 3-–π –≤–º–µ—Å—Ç–æ –∫–∞–∂–¥–æ–≥–æ 5-–≥–æ
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –û—Å—Ç–∞–≤–∏—Ç—å 5 (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ —Å check_interval=1.0 —Å–µ–∫)

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

‚úÖ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:** –û–¥–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –Ω–µ –Ω—É–∂–Ω—ã —Å–ª–æ–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è  
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:** 5x —Å–Ω–∏–∂–µ–Ω–∏–µ CPU –Ω–∞–≥—Ä—É–∑–∫–∏  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** WebSocket –ø–æ–ª—É—á–∞–µ—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ (–Ω–µ –æ—Ç–ø–∏—Å—ã–≤–∞–µ–º—Å—è)  
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –ø–æ–ª–Ω–æ–º –æ–±—ä–µ–º–µ, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–æ—á–Ω–∞—è  

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

### –ü–æ—á–µ–º—É WebSocket –Ω–µ –æ—Ç–∫–ª—é—á–∞–ª–∏?
- –ë–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ live —Ç–æ—Ä–≥–æ–≤–ª—é
- REST API –∑–∞–ø—Ä–æ—Å—ã –º–µ–¥–ª–µ–Ω–Ω–µ–µ WebSocket
- WebSocket –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞

### –ü–æ—á–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ –æ—Ç–∫–ª—é—á–∞–ª–∏?
- DEBUG –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ù—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ
- –ü—Ä–∏ production - –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ INFO

### –ö–∞–∫ —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç?
- –û–¥–Ω–æ —è–¥—Ä–æ CPU –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ 40-50% –≤–º–µ—Å—Ç–æ 100%
- –î—Ä—É–≥–∏–µ —è–¥—Ä–∞ –æ—Å—Ç–∞—é—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã
- –°–∫–∞–ª—å–ø–∏–Ω–≥ —Ä–µ–∞–∫—Ü–∏—è –Ω–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–µ—Ç (5-—à–∞–≥ –¥—Ä–æ—Å—Å–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ~ 50-100ms)

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

**–°—Ç–∞—Ç—É—Å:** –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É  
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞  
**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –ü–æ–ª–Ω–∞—è  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å CPU  

---

**P.S.** –ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –≤–∏–¥–Ω—ã –æ—à–∏–±–∫–∏ —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∫–æ–Ω—Å–æ–ª–∏ (Unicode errors) - —ç—Ç–æ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ Windows —Å —ç–º–æ–¥–∑–∏. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –î–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
