# –§–ò–ù–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 28.12.2025  
**–û—Å–Ω–æ–≤–∞:** –û—Ç–≤–µ—Ç Grok + –ê–Ω–∞–ª–∏–∑ Cursor  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–æ—á–Ω–æ ‚Üí –í–∞–∂–Ω–æ ‚Üí –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ  
**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~60 –º–∏–Ω—É—Ç

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–°—Ä–æ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#1-—Å—Ä–æ—á–Ω—ã–µ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
2. [–í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](#2-–≤–∞–∂–Ω—ã–µ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
3. [–ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è](#3-–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ-—É–ª—É—á—à–µ–Ω–∏—è)
4. [–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è](#4-–ø–æ—Ä—è–¥–æ–∫-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
5. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#5-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## 1. –°–†–û–ß–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### ‚úÖ #15: TALib Warnings ‚Üí Silent Fallback

**–§–∞–π–ª:** `src/indicators/talib_wrapper.py`  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –°—Ä–æ—á–Ω–æ  
**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤ (–∫—Ä–æ–º–µ RSI) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `logger.warning()` –ø—Ä–∏ TALib error ‚Äî –∑–∞—Å–æ—Ä—è–µ—Ç –ª–æ–≥–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### 1.1. TALibEMA (—Å—Ç—Ä–æ–∫–∞ 88-94)
```python
# –ë–´–õ–û:
except Exception as e:
    logger.warning(
        f"‚ö†Ô∏è TALibEMA: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —á–µ—Ä–µ–∑ TA-Lib ({type(e).__name__}: {e}), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback"
    )

# –°–¢–ê–õ–û:
except Exception as e:
    logger.debug(  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Silent fallback
        f"TALibEMA fallback: {type(e).__name__}: {e}"
    )
```

#### 1.2. TALibATR (—Å—Ç—Ä–æ–∫–∞ 143-149)
```python
# –ë–´–õ–û:
except Exception as e:
    logger.warning(
        f"‚ö†Ô∏è TALibATR: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —á–µ—Ä–µ–∑ TA-Lib ({type(e).__name__}: {e}), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback"
    )

# –°–¢–ê–õ–û:
except Exception as e:
    logger.debug(  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Silent fallback
        f"TALibATR fallback: {type(e).__name__}: {e}"
    )
```

#### 1.3. TALibMACD (—Å—Ç—Ä–æ–∫–∞ 206-210)
```python
# –ë–´–õ–û:
except Exception as e:
    logger.warning(
        f"‚ö†Ô∏è TALibMACD: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —á–µ—Ä–µ–∑ TA-Lib ({type(e).__name__}: {e}), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback"
    )

# –°–¢–ê–õ–û:
except Exception as e:
    logger.debug(  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Silent fallback
        f"TALibMACD fallback: {type(e).__name__}: {e}"
    )
```

#### 1.4. TALibSMA (—Å—Ç—Ä–æ–∫–∞ 257-261)
```python
# –ë–´–õ–û:
except Exception as e:
    logger.warning(
        f"‚ö†Ô∏è TALibSMA: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —á–µ—Ä–µ–∑ TA-Lib ({type(e).__name__}: {e}), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback"
    )

# –°–¢–ê–õ–û:
except Exception as e:
    logger.debug(  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Silent fallback
        f"TALibSMA fallback: {type(e).__name__}: {e}"
    )
```

#### 1.5. TALibBollingerBands (—Å—Ç—Ä–æ–∫–∞ 320-324)
```python
# –ë–´–õ–û:
except Exception as e:
    logger.warning(
        f"‚ö†Ô∏è TALibBollingerBands: –û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —á–µ—Ä–µ–∑ TA-Lib ({type(e).__name__}: {e}), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback"
    )

# –°–¢–ê–õ–û:
except Exception as e:
    logger.debug(  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Silent fallback
        f"TALibBollingerBands fallback: {type(e).__name__}: {e}"
    )
```

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** –ß–∏—Å—Ç—ã–µ –ª–æ–≥–∏ –≤ prod; warnings —Ç–æ–ª—å–∫–æ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç WARNING —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç TALib –≤ –ª–æ–≥–∞—Ö.

---

### ‚úÖ #9: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –°–∏–≥–Ω–∞–ª–æ–≤

**–§–∞–π–ª—ã:** 
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py`
- `src/strategies/scalping/futures/core/trading_control_center.py`

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –°—Ä–æ—á–Ω–æ  
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** `_block_stats` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –Ω–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (`check_for_signals` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –Ω–æ –±–µ–∑ log)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

#### 2.1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_log_block_stats()` –≤ SignalCoordinator (–µ—Å–ª–∏ –Ω–µ—Ç)

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`  
**–ú–µ—Å—Ç–æ:** –ü–æ—Å–ª–µ –º–µ—Ç–æ–¥–∞ `__init__()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 146)

```python
async def _log_block_stats(self):
    """
    ‚úÖ –ù–û–í–û–ï (28.12.2025): –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤.
    """
    if hasattr(self, '_block_stats'):
        total_blocked = sum(self._block_stats.values())
        if total_blocked > 0:
            logger.info(
                f"üìä Signal Block Stats (–≤—Å–µ–≥–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: {total_blocked}):\n"
                f"   - Circuit breaker: {self._block_stats['circuit_breaker']}\n"
                f"   - Side blocked: {self._block_stats['side_blocked']}\n"
                f"   - Low strength: {self._block_stats['low_strength']}\n"
                f"   - Existing position: {self._block_stats['existing_position']}\n"
                f"   - Margin unsafe: {self._block_stats['margin_unsafe']}\n"
                f"   - Other: {self._block_stats['other']}"
            )
    else:
        logger.info("üìä Signal Block Stats: No blocks recorded")
```

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ú–µ—Ç–æ–¥ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å—Ç—Ä–æ–∫–µ 647, –Ω–æ –æ–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π. –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω—É–∂–µ–Ω –ª–∏ async –∏–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º.

#### 2.2. –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –≤ TradingControlCenter.run_main_loop()

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/trading_control_center.py`  
**–ú–µ—Å—Ç–æ:** –í –º–µ—Ç–æ–¥–µ `run_main_loop()` –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 169 (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–µ—Ç—Ä–∏–∫)

```python
# ‚úÖ –ù–û–í–û–ï (28.12.2025): –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ —Å–∏–≥–Ω–∞–ª–æ–≤
if not hasattr(self, '_last_block_stats_log_time'):
    self._last_block_stats_log_time = time.time()
    self._block_stats_log_interval = 300.0  # –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

if (
    current_time - self._last_block_stats_log_time
    >= self._block_stats_log_interval
):
    if hasattr(self, 'signal_coordinator') and self.signal_coordinator:
        if hasattr(self.signal_coordinator, '_log_block_stats'):
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, async –∏–ª–∏ sync –º–µ—Ç–æ–¥
            if asyncio.iscoroutinefunction(self.signal_coordinator._log_block_stats):
                await self.signal_coordinator._log_block_stats()
            else:
                self.signal_coordinator._log_block_stats()
    self._last_block_stats_log_time = current_time
```

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** –í–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–∏—á–∏–Ω –Ω–∏–∑–∫–æ–π –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (low_strength vs margin_unsafe) ‚Äî –∫–ª—é—á –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä–æ–≥–æ–≤.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫.

---

### ‚úÖ #13: Retry –õ–æ–≥–∏–∫–∞ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ü–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –°—Ä–æ—á–Ω–æ  
**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** Delay –≤ `_sync_positions_with_exchange()` ‚Üí missed close/emergency loss

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å retry —Å exponential backoff

**–ú–µ—Å—Ç–æ:** –í –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞ `_sync_positions_with_exchange()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1876)

```python
async def _sync_positions_with_exchange(self, force: bool = False) -> None:
    """
    ‚úÖ –ú–û–î–ï–†–ù–ò–ó–ê–¶–ò–Ø: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏ –ª–∏–º–∏—Ç—ã —Å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –±–∏—Ä–∂–∏.
    ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û (28.12.2025): –î–æ–±–∞–≤–ª–µ–Ω–∞ retry –ª–æ–≥–∏–∫–∞ —Å exponential backoff
    """
    # ‚úÖ –ù–û–í–û–ï (28.12.2025): Retry –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ API
    max_retries = 4  # 0-3 = 4 –ø–æ–ø—ã—Ç–∫–∏
    retry_delays = [0.2, 0.4, 0.8, 1.6]  # Exponential backoff –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
    synced = False
    exchange_positions = None
    
    for attempt in range(max_retries):
        try:
            exchange_positions = await self.client.get_positions()
            synced = True
            break  # –£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–∏–ª–∏ –ø–æ–∑–∏—Ü–∏–∏
        except Exception as e:
            if attempt < max_retries - 1:
                delay = retry_delays[attempt]
                logger.debug(
                    f"‚ö†Ô∏è Sync retry {attempt+1}/{max_retries} –¥–ª—è –ø–æ–∑–∏—Ü–∏–π, "
                    f"sleep {delay:.1f}s: {e}"
                )
                await asyncio.sleep(delay)
            else:
                logger.warning(
                    f"‚ùå Sync failed –ø–æ—Å–ª–µ {max_retries} –ø–æ–ø—ã—Ç–æ–∫ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback: {e}"
                )
                return  # –í—ã—Ö–æ–¥–∏–º –±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
    
    if not synced or exchange_positions is None:
        logger.warning("‚ùå Sync failed –ø–æ—Å–ª–µ retry ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback prices")
        return
    
    # ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (—Å—Ç—Ä–æ–∫–∏ 1877+)
    now = time.time()
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ...
```

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** –ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è volatile (ETH) ‚Äî –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —É–±—ã—Ç–∫–∏ –æ—Ç delay close.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ retry –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö API.

---

## 2. –í–ê–ñ–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### ‚úÖ #4: –ó–∞—â–∏—Ç–∞ Min_Holding_Minutes –ü–µ—Ä–µ–¥ SL

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ  
**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–Ω–æ (31-36 —Å–µ–∫ < 1.0 –º–∏–Ω –≤ —Ç–æ—Ä–≥–æ–≤–ª–µ)

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å SL –µ—Å–ª–∏ hold < min

**–ú–µ—Å—Ç–æ:** –í –º–µ—Ç–æ–¥–µ `_generate_exit_for_ranging()` –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π SL (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 3210)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞:**

–í –∫–æ–¥–µ —É–∂–µ –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ `min_holding_minutes` –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 3200-3223. –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```python
# –°—Ç—Ä–æ–∫–∏ 3200-3223 —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫—É:
if minutes_in_position is not None and minutes_in_position < min_holding_minutes:
    logger.debug(
        f"‚è≥ ExitAnalyzer RANGING: –ü–æ–∑–∏—Ü–∏—è {symbol} –≤ —É–±—ã—Ç–∫–µ {gross_pnl_percent:.2f}%, "
        f"–Ω–æ –≤—Ä–µ–º—è {minutes_in_position:.2f} –º–∏–Ω < min_holding {min_holding_minutes:.2f} –º–∏–Ω - "
        f"–ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É SL"
    )
    return {
        "action": "hold",
        "reason": "min_holding_not_reached_before_sl",
        ...
    }
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ (ranging, trending, choppy).

**–ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, `_generate_exit_for_trending()`), –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É.**

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** –î–∞—ë—Ç –ø–æ–∑–∏—Ü–∏—è–º "–¥—ã—à–∞—Ç—å" –≤ ranging ‚Äî –ø–æ–≤—ã—Å–∏—Ç winrate.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏, —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL —Ä–∞–Ω—å—à–µ `min_holding_minutes`.

---

### ‚úÖ #5: –ù–∏–∑–∫–∞—è –ö–æ–Ω–≤–µ—Ä—Å–∏—è (Adaptive –ø–æ –ü–∞—Ä–µ)

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–∞–∂–Ω–æ  
**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ç—Ä–æ–≥–∏–µ –ø–æ—Ä–æ–≥–∏ ‚Üí –º–∞–ª–æ —Å–¥–µ–ª–æ–∫ (37.5% winrate –æ—Ç —Ä–µ–¥–∫–∏—Ö –≤—Ö–æ–¥–æ–≤)

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** Adaptive –ø–æ –ø–∞—Ä–µ (ETH volatile ‚Äî looser)

**–ú–µ—Å—Ç–æ:** –í —Å–µ–∫—Ü–∏–∏ `scalping` –∏ `by_symbol`

```yaml
scalping:
  min_signal_strength: 0.60  # ‚úÖ –ò–ó–ú–ï–ù–ï–ù–û: –ë—ã–ª–æ 0.65
  min_signal_strength_ranging: 0.60  # ‚úÖ –ò–ó–ú–ï–ù–ï–ù–û: –ë—ã–ª–æ 0.65
  min_adx: 16.0  # –û—Å—Ç–∞–µ—Ç—Å—è (–±—ã–ª–æ —Å–Ω–∏–∂–µ–Ω–æ —Ä–∞–Ω–µ–µ)

by_symbol:
  ETH-USDT:
    min_signal_strength: 0.55  # ‚úÖ –ù–û–í–û–ï: Looser –¥–ª—è ETH (volatile)
    sl_atr_multiplier: 3.0  # ‚úÖ –ù–û–í–û–ï: Wider SL –¥–ª—è ETH (volatility high)
    min_adx: 14.0  # ‚úÖ –ù–û–í–û–ï: Looser ADX –¥–ª—è ETH
  SOL-USDT:
    min_adx: 20.0  # ‚úÖ –ù–û–í–û–ï: Looser –¥–ª—è trending
    min_signal_strength: 0.58  # ‚úÖ –ù–û–í–û–ï: Looser –¥–ª—è SOL
  BTC-USDT:
    min_signal_strength: 0.62  # ‚úÖ –ù–û–í–û–ï: –ß—É—Ç—å looser –¥–ª—è BTC
```

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** ETH –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ wider SL (volatility high); –ø–æ–≤—ã—Å–∏—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é –±–µ–∑ overtrade.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å.

---

## 3. –ñ–ï–õ–ê–¢–ï–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### ‚úÖ #6: –í–µ—Å Price_Action –≤ –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

**–§–∞–π–ª:** `src/strategies/scalping/futures/analysis/direction_analyzer.py`  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ  
**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∏–∑–∫–∏–π –≤–µ—Å=0.10 ‚Üí —Å–ª–∞–±—ã–π —É—á—ë—Ç PA

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏—Ç—å –≤–µ—Å price_action —Å 0.10 –¥–æ 0.15

**–ú–µ—Å—Ç–æ:** –°—Ç—Ä–æ–∫–∞ 31-36 (–∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ `INDICATOR_WEIGHTS`)

```python
# –ë–´–õ–û:
INDICATOR_WEIGHTS = {
    "adx": 0.40,
    "ema": 0.25,
    "sma": 0.15,
    "price_action": 0.10,  # ‚ùå –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π
    "volume": 0.05,
}

# –°–¢–ê–õ–û:
INDICATOR_WEIGHTS = {
    "adx": 0.40,
    "ema": 0.25,
    "sma": 0.15,
    "price_action": 0.15,  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–≤–µ–ª–∏—á–µ–Ω —Å 0.10 –¥–æ 0.15
    "volume": 0.05,
}
```

**–¢—Ä–µ–π–¥–µ—Ä—Å–∫–∞—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞:** –õ—É—á—à–µ –ª–æ–≤–∏—Ç reversals (pinbar/doji).

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∏–≥–Ω–∞–ª—ã –ª—É—á—à–µ —É—á–∏—Ç—ã–≤–∞—é—Ç price action –ø–∞—Ç—Ç–µ—Ä–Ω—ã.

---

## 4. –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –≠—Ç–∞–ø 1: –°—Ä–æ—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (40 –º–∏–Ω—É—Ç)

1. ‚úÖ **#15: TALib Warnings** (15 –º–∏–Ω)
   - –û—Ç–∫—Ä—ã—Ç—å `src/indicators/talib_wrapper.py`
   - –ó–∞–º–µ–Ω–∏—Ç—å `logger.warning()` –Ω–∞ `logger.debug()` –≤ 5 –∫–ª–∞—Å—Å–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç WARNING —Å–æ–æ–±—â–µ–Ω–∏–π

2. ‚úÖ **#9: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫** (10 –º–∏–Ω)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥ `_log_block_stats()` –≤ `signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 647)
   - –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –≤ `trading_control_center.py` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 169)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç

3. ‚úÖ **#13: Retry –ª–æ–≥–∏–∫–∞** (15 –º–∏–Ω)
   - –û—Ç–∫—Ä—ã—Ç—å `src/strategies/scalping/futures/orchestrator.py`
   - –î–æ–±–∞–≤–∏—Ç—å retry –ª–æ–≥–∏–∫—É –≤ –Ω–∞—á–∞–ª–æ `_sync_positions_with_exchange()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 1876)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ retry —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö

### –≠—Ç–∞–ø 2: –í–∞–∂–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (15 –º–∏–Ω—É—Ç)

4. ‚úÖ **#4: Min_Holding_Minutes** (10 –º–∏–Ω)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–∂–µ –µ—Å—Ç—å –≤ `exit_analyzer.py` (—Å—Ç—Ä–æ–∫–∏ 3200-3223)
   - –ï—Å–ª–∏ –Ω–µ—Ç –≤ –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–∞—Ö ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Ä–∞–Ω–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ SL

5. ‚úÖ **#5: –ù–∏–∑–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è** (5 –º–∏–Ω)
   - –û—Ç–∫—Ä—ã—Ç—å `config/config_futures.yaml`
   - –ò–∑–º–µ–Ω–∏—Ç—å `min_signal_strength` —Å 0.65 –Ω–∞ 0.60
   - –î–æ–±–∞–≤–∏—Ç—å `by_symbol` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è ETH, SOL, BTC
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

### –≠—Ç–∞–ø 3: –ñ–µ–ª–∞—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (5 –º–∏–Ω—É—Ç)

6. ‚úÖ **#6: –í–µ—Å Price_Action** (5 –º–∏–Ω)
   - –û—Ç–∫—Ä—ã—Ç—å `src/strategies/scalping/futures/analysis/direction_analyzer.py`
   - –ò–∑–º–µ–Ω–∏—Ç—å `price_action` –≤–µ—Å —Å 0.10 –Ω–∞ 0.15 (—Å—Ç—Ä–æ–∫–∞ 34)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∏–≥–Ω–∞–ª—ã –ª—É—á—à–µ —É—á–∏—Ç—ã–≤–∞—é—Ç PA

---

## 5. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –≤ sandbox —Ä–µ–∂–∏–º–µ –Ω–∞ 4 —á–∞—Å–∞**
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å CSV (performance_tracker):**
   - Winrate > 50%
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è > 90 —Å–µ–∫—É–Ω–¥
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
   - ‚úÖ –ù–µ—Ç WARNING —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç TALib
   - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
   - ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
   - ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL —Ä–∞–Ω—å—à–µ `min_holding_minutes`
   - ‚úÖ –ö–æ–Ω–≤–µ—Ä—Å–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ —É–≤–µ–ª–∏—á–∏–ª–∞—Å—å

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å
   - Winrate –æ—Å—Ç–∞–ª—Å—è –Ω–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ–º —É—Ä–æ–≤–Ω–µ (>50%)
   - –°—Ä–µ–¥–Ω–∏–π PnL –Ω–∞ —Å–¥–µ–ª–∫—É –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–π

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

**–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** ‚úÖ **10/10** ‚Äî –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ live (sandbox ‚Üí real —Å small size)

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~60 –º–∏–Ω—É—Ç  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–æ—á–Ω–æ ‚Üí –í–∞–∂–Ω–æ ‚Üí –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –ø–æ–∫—Ä—ã—Ç—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 28.12.2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏




