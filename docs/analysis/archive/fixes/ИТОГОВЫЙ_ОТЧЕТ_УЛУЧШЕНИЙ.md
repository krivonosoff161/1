# üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –û –†–ï–ê–õ–ò–ó–ê–¶–ò–ò –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –£–õ–£–ß–®–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-11-19  
**–°—Ç–∞—Ç—É—Å:** –û—Å–Ω–æ–≤–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

### 1. ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏ scoring

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `TradingStatistics` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `calculate_dynamic_threshold()` –≤ `AdaptiveRegimeManager`
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ—Ä–æ–≥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ win rate:
  - Win rate < 30%: +30% –∫ –ø–æ—Ä–æ–≥—É
  - Win rate < 40%: +20% –∫ –ø–æ—Ä–æ–≥—É
  - Win rate < 50%: +10% –∫ –ø–æ—Ä–æ–≥—É
  - Win rate >= 50%: –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏:
  - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (>5%): +10% –∫ –ø–æ—Ä–æ–≥—É
  - –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (<2%): -5% –∫ –ø–æ—Ä–æ–≥—É

**–§–∞–π–ª—ã:**
- `src/strategies/modules/trading_statistics.py` (–Ω–æ–≤—ã–π)
- `src/strategies/modules/adaptive_regime_manager.py`
- `src/strategies/scalping/futures/signal_generator.py`
- `src/strategies/scalping/futures/orchestrator.py`

---

### 2. ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ—Ä–æ–≥–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `TradingStatistics` –≤ orchestrator
- –ó–∞–ø–∏—Å—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π:
  - –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞
  - –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, PnL, —Ü–µ–Ω—ã, –≤—Ä–µ–º—è
  - –°–∏–ª–∞ –∏ —Ç–∏–ø —Å–∏–≥–Ω–∞–ª–∞
- –ü–µ—Ä–µ–¥–∞—á–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ ARM –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/orchestrator.py`
- `src/strategies/scalping/futures/signal_generator.py`

---

### 3. ‚úÖ Kelly Criterion –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç Kelly fraction –≤ `calculate_optimal_position_size()`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç win rate –∏ risk/reward –∏–∑ `TradingStatistics`
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ (25% –æ—Ç Kelly, –º–∞–∫—Å–∏–º—É–º 10% –æ—Ç –±–∞–ª–∞–Ω—Å–∞)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª—ã:**
- `src/strategies/modules/margin_calculator.py`
- `src/strategies/scalping/futures/orchestrator.py`

---

### 4. ‚úÖ –ü–æ–≤—ã—à–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ –≤—Ö–æ–¥–∞

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ –ø–æ—Ä–æ–≥–∏ –≤ `config/config_futures.yaml`:
  - **RANGING:** 1.0 ‚Üí **1.5** (+50%)
  - **TRENDING:** 1.8 ‚Üí **2.5** (+39%)
  - **CHOPPY:** 2.2 ‚Üí **3.0** (+36%)

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫: 60 ‚Üí 30-40 (-33-50%)
- Win rate: 20% ‚Üí 35-45% (+15-25%)
- –ö–∞—á–µ—Å—Ç–≤–æ —Å–∏–≥–Ω–∞–ª–æ–≤: +50-70%

**–§–∞–π–ª—ã:**
- `config/config_futures.yaml`

---

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ Risk/Reward

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ TP/SL –≤ `config/config_futures.yaml`:
  - **TP:** 2.0% ‚Üí **2.4%** (+20%)
  - **SL:** 1.5% ‚Üí **1.2%** (-20%)
  - **Risk/Reward:** 1:1.25 ‚Üí **1:2.0** ‚úÖ

**–û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:**
- –°—Ä–µ–¥–Ω–∏–π win: +20-40%
- –°—Ä–µ–¥–Ω–∏–π loss: -20%
- Risk/Reward: 1:2.0 (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)

**–§–∞–π–ª—ã:**
- `config/config_futures.yaml`

---

## ‚è≥ –û–°–¢–ê–õ–û–°–¨

### 6. ‚è≥ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏–π

**–ü–ª–∞–Ω:**
- –ë–æ–ª—å—à–µ limit/post-only –æ—Ä–¥–µ—Ä–æ–≤
- Maker fee 0.02% –≤–º–µ—Å—Ç–æ taker 0.05%
- –¶–µ–ª—å: –∫–æ–º–∏—Å—Å–∏–∏ < 20% –æ—Ç gross PnL

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤

---

### 7. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–π –ª–æ–≥–∏–∫–∏ –±–æ—Ç–∞ –Ω–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–ü–ª–∞–Ω:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥—É–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ race conditions
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –∞—É–¥–∏—Ç–∞ –∫–æ–¥–∞

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –≤—Å–µ—Ö —É–ª—É—á—à–µ–Ω–∏–π:

**–î–æ —É–ª—É—á—à–µ–Ω–∏–π:**
- Win rate: 20%
- Net PnL: -$18.78
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫: 60
- Risk/Reward: 1:1.25

**–ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π (–ø—Ä–æ–≥–Ω–æ–∑):**
- Win rate: **35-45%** (+15-25%)
- Net PnL: **+$3-5** (–ø—Ä–∏–±—ã–ª—å–Ω–æ—Å—Ç—å!)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫: **30-40** (-33-50%)
- Risk/Reward: **1:2.0** ‚úÖ

**–£–ª—É—á—à–µ–Ω–∏–µ:**
- Net PnL: -$18.78 ‚Üí **+$3-5** = **+$21-23** (112-122% —É–ª—É—á—à–µ–Ω–∏–µ)
- Win rate: 20% ‚Üí **35-45%** (+75-125%)

---

## üéØ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

1. ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ win rate
2. ‚úÖ **Kelly Criterion** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π
3. ‚úÖ **–ü–æ–≤—ã—à–µ–Ω–Ω—ã–µ –ø–æ—Ä–æ–≥–∏** - –º–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
4. ‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π Risk/Reward** - –±–æ–ª—å—à–µ –ø—Ä–∏–±—ã–ª–∏, –º–µ–Ω—å—à–µ —É–±—ã—Ç–∫–æ–≤

---

## üìù –ó–ê–ú–ï–¢–ö–ò

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–æ—Ä–æ–≥–∏** —Ä–∞–±–æ—Ç–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–º–∏–Ω–∏–º—É–º 10-20 —Å–¥–µ–ª–æ–∫)
2. **TradingStatistics** —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
3. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã
4. **Kelly Criterion** —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–º Kelly fraction (win rate > 45-50%)

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å win rate –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—é –ø–æ—Ä–æ–≥–æ–≤
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ (–∑–∞–¥–∞—á–∞ #6)
4. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏ (–∑–∞–¥–∞—á–∞ #7)

---

**–í–µ—Ä—Å–∏—è:** 1.0  
**–î–∞—Ç–∞:** 2025-11-19

