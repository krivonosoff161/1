# ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

**–î–∞—Ç–∞:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** –í—Å–µ 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã

---

## üìã –°–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### 1. ‚úÖ –£–¥–∞–ª–µ–Ω Kelly Criterion

**–§–∞–π–ª:** `src/strategies/scalping/futures/calculations/margin_calculator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–¥–∞–ª–µ–Ω –≤–µ—Å—å –±–ª–æ–∫ —Ä–∞—Å—á–µ—Ç–∞ Kelly Criterion (—Å—Ç—Ä–æ–∫–∏ ~589-645)
- –£–ø—Ä–æ—â–µ–Ω —Ä–∞—Å—á–µ—Ç: `adjusted_risk_percentage = risk_percentage` (–±–µ–∑ –º–Ω–æ–∂–∏—Ç–µ–ª—è)
- –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—É–±—Ä–∞–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ Kelly multiplier)

**–ü—Ä–∏—á–∏–Ω–∞:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ —Å–ª–∏—à–∫–æ–º —à—É–º–Ω–∞—è ‚Üí Kelly –≤–≤–æ–¥–∏—Ç –ª–æ–∂–Ω–æ–µ –æ—â—É—â–µ–Ω–∏–µ "–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏"

**–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

---

### 2. ‚úÖ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤ trending —Ä–µ–∂–∏–º–µ

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/signal_generator.py`
- `config/config_futures.yaml`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

**–í `signal_generator.py`:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–∞
- –í `trending` —Ä–µ–∂–∏–º–µ: –ø–æ–ª–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (`continue`) –ø—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ EMA/RSI
- –í `ranging`/`choppy` —Ä–µ–∂–∏–º–∞—Ö: –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (–∫–∞–∫ –±—ã–ª–æ)

**–í `config_futures.yaml`:**
- `trending`: `block_counter_trend: true`, `conflict_multiplier: 0.0`
- `ranging`: `block_counter_trend: false`, `conflict_multiplier: 0.3`
- `choppy`: `block_counter_trend: false`, `conflict_multiplier: 0.5`

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ—Ä–≥–æ–≤–ª—è –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞ –≤ trending ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —É–±—ã—Ç–∫–æ–≤

**–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç

---

### 3. ‚úÖ –°–Ω–∏–∂–µ–Ω –±–∞–∑–æ–≤—ã–π —Ä–∏—Å–∫ –¥–æ 1% –∏ —Å–¥–µ–ª–∞–Ω –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º

**–§–∞–π–ª—ã:**
- `config/config_futures.yaml`
- `src/strategies/scalping/futures/calculations/margin_calculator.py`
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**

**–í `config_futures.yaml`:**
- `base_risk_percentage`: `0.03` ‚Üí `0.01` (3% ‚Üí 1%)
- `risk_per_trade_percent`: `1.5` ‚Üí `1.0` (1.5% ‚Üí 1.0%)
- –î–æ–±–∞–≤–ª–µ–Ω `risk_per_trade_percent` –≤ `by_regime`:
  - `trending`: `1.0%`
  - `ranging`: `1.5%`
  - `choppy`: `2.0%`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `max_loss_per_trade_percent`:
  - `trending`: `1.5%` ‚Üí `1.0%`
  - `ranging`: `2.0%` ‚Üí `1.5%`
  - `choppy`: `2.5%` ‚Üí `2.0%`

**–í `margin_calculator.py`:**
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è `risk_percentage`:
  - **–ü–†–ò–û–†–ò–¢–ï–¢ 1:** `risk_per_trade_percent` –∏–∑ —Ä–µ–∂–∏–º–∞
  - **–ü–†–ò–û–†–ò–¢–ï–¢ 2:** `risk_per_trade_percent` –∏–∑ `risk` —Å–µ–∫—Ü–∏–∏
  - **–ü–†–ò–û–†–ò–¢–ï–¢ 3:** `base_risk_percentage` –∏–∑ `scalping` —Å–µ–∫—Ü–∏–∏
  - **–ü–†–ò–û–†–ò–¢–ï–¢ 4:** Fallback `0.01` (1%)

**–í `signal_coordinator.py`:**
- –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞: –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `None` –≤ `margin_calculator`, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∏—Å–∫

**–ü—Ä–∏—á–∏–Ω–∞:** 3% –Ω–∞ —Å–¥–µ–ª–∫—É –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ 5‚Äì15 –º–∏–Ω—É—Ç ‚Äî —ç—Ç–æ –ø—É—Ç—å –∫ –±—ã—Å—Ç—Ä–æ–º—É drawdown

**–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

---

## üìä –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ live –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –≠—Ç–∞–ø | –û—Ü–µ–Ω–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π** | ‚≠ê‚≠ê (2/5) | –ù–µ –≥–æ—Ç–æ–≤ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ |
| **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π** | ‚≠ê‚≠ê‚≠ê‚≠ê (4/5) | **–ì–æ—Ç–æ–≤ –∫ sandbox ‚Üí live** |

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 1: Sandbox —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-4 –Ω–µ–¥–µ–ª–∏)

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ OKX sandbox
2. ‚úÖ –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CSV-–ª–æ–≥–∏:
   - Win rate (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 50%)
   - Avg win / avg loss (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 1.2)
   - Slippage (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å < 0.1%)
   - –ß–∞—Å—Ç–æ—Ç–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–∑—É–º–Ω–æ–π)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–æ—Ç–∏–≤–æ—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ trending

### –≠—Ç–∞–ø 2: –í–∞–∂–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 30 –º–∏–Ω—É—Ç)

3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å ATR-based TP/SL (–µ—Å–ª–∏ sandbox –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

### –≠—Ç–∞–ø 3: Live –∑–∞–ø—É—Å–∫

4. ‚úÖ Live —Å $50-100, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ 1-2 –Ω–µ–¥–µ–ª–∏
5. ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π scale, –µ—Å–ª–∏:
   - PnL —Å—Ç–∞–±–∏–ª–µ–Ω
   - Drawdown < 5%
   - Win rate > 50%
   - Profit factor > 1.2

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
- **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)
- **–õ–æ–≥–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:** ‚≠ê‚≠ê (2/5) - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ live:** ‚≠ê‚≠ê (2/5) - **–ù–ï –ì–û–¢–û–í**

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
- **–†–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
- **–õ–æ–≥–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5) - –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
- **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ live:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5) - **–ì–û–¢–û–í –ö SANDBOX ‚Üí LIVE**

---

## üí° –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.**

–ë–æ—Ç —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Kelly Criterion (—É–¥–∞–ª–µ–Ω)
- ‚úÖ –ù–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –≤ trending —Ä–µ–∂–∏–º–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∏—Å–∫ 1-2% –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∂–∏–º–∞

**–ì–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –≤ sandbox –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏!**

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-07

