# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï CORRELATION FILTER

## üìã –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç `max_correlated_positions` –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤:

**–†–µ–∂–∏–º `trending`:**
- –ë—ã–ª–æ: `max_correlated_positions: 3`
- –°—Ç–∞–ª–æ: `max_correlated_positions: 5` ‚úÖ
- **–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ—Ä–≥—É–µ–º 5 –ø–∞—Ä–∞–º–∏, –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ —Ç—Ä–µ–Ω–¥–µ

**–†–µ–∂–∏–º `ranging`:**
- –ë—ã–ª–æ: `max_correlated_positions: 4`
- –°—Ç–∞–ª–æ: `max_correlated_positions: 5` ‚úÖ
- **–ü—Ä–∏—á–∏–Ω–∞:** –¢–æ—Ä–≥—É–µ–º 5 –ø–∞—Ä–∞–º–∏, –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–æ —Ñ–ª—ç—Ç–µ

**–†–µ–∂–∏–º `choppy`:**
- –ë—ã–ª–æ: `max_correlated_positions: 6`
- –°—Ç–∞–ª–æ: `max_correlated_positions: 6` ‚úÖ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- **–ü—Ä–∏—á–∏–Ω–∞:** 6 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä —Å –∑–∞–ø–∞—Å–æ–º

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–õ–∏–º–∏—Ç –¥–ª—è `ranging`: 4** ‚Üí SOLUSDT –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª—Å—è (4 –∫–æ—Ä—Ä–µ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ >= 4)
- **–õ–∏–º–∏—Ç –¥–ª—è `trending`: 3** ‚Üí –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–∞—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏—Å—å
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –ª–∏–º–∏—Ç 2 –≤–º–µ—Å—Ç–æ 4 –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (fallback –∑–Ω–∞—á–µ–Ω–∏–µ)

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- **–õ–∏–º–∏—Ç –¥–ª—è `ranging`: 5** ‚Üí –í—Å–µ 5 –ø–∞—Ä –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚úÖ
- **–õ–∏–º–∏—Ç –¥–ª—è `trending`: 5** ‚Üí –í—Å–µ 5 –ø–∞—Ä –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚úÖ
- **–õ–∏–º–∏—Ç –¥–ª—è `choppy`: 6** ‚Üí –í—Å–µ 5 –ø–∞—Ä –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã —Å –∑–∞–ø–∞—Å–æ–º ‚úÖ

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞ —Å fallback –∑–Ω–∞—á–µ–Ω–∏–µ–º (2) –≤—Å–µ –µ—â–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∫–æ–¥–µ:**
- –í `signal_generator.py` —Å—Ç—Ä–æ–∫–∞ 756: `corr_max_positions = 2` (–∂–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω–æ)
- –í `signal_generator.py` —Å—Ç—Ä–æ–∫–∞ 413: fallback = 2

**–ù–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–∑ —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–∞–∂–¥–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞:**
- –°—Ç—Ä–æ–∫–∞ 3324-3332: `corr_new_config = CorrelationFilterConfig(...)` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏–∑ —Ä–µ–∂–∏–º–∞
- –°—Ç—Ä–æ–∫–∞ 3330: `self.correlation_filter.update_parameters(corr_new_config)`

**–í—ã–≤–æ–¥:** –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (5).

---

## üîç –ü–†–û–í–ï–†–ö–ê

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –í –ª–æ–≥–∞—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: `max_positions=5` (–¥–ª—è `ranging` —Ä–µ–∂–∏–º–∞)
2. –í –ª–æ–≥–∞—Ö –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: `Too many correlated positions (X/5)` –≤–º–µ—Å—Ç–æ `(X/2)`
3. –í—Å–µ 5 –ø–∞—Ä –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç—å—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ:** ‚úÖ
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥:** ‚úÖ
**–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞:** ‚ö†Ô∏è



