# üìã –ü–õ–ê–ù –ò–ù–¢–ï–ì–†–ê–¶–ò–ò DataRegistry - –î–ï–¢–ê–õ–¨–ù–´–ô –†–ê–ó–ë–û–†

**–î–∞—Ç–∞:** 25.11.2025  
**–°—Ç–∞—Ç—É—Å:** 3 —ç—Ç–∞–ø–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## ‚úÖ –î–ê, –ü–†–ê–í–ò–õ–¨–ù–û! –û—Å—Ç–∞–ª–æ—Å—å 3 –≠–¢–ê–ü–ê

–ù–æ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –¥–µ—Ç–∞–ª—å–Ω–æ:

---

## üéØ –≠–¢–ê–ü 1: –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• –í DataRegistry

**–¶–µ–ª—å:** –í—Å–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç/—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ, –¥–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–ª—è—Ç—å DataRegistry.

### –ó–∞–¥–∞—á–∞ 1.1: WebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç market data ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```python
# –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç WebSocket:
await self.data_registry.update_market_data(symbol, {
    "price": ticker["last"],
    "volume": ticker["vol24h"],
    "ticker": ticker,
    "updated_at": datetime.now()
})
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1-2 —á–∞—Å–∞)

---

### –ó–∞–¥–∞—á–∞ 1.2: SignalGenerator —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã ‚ö†Ô∏è (—Å—Ä–µ–¥–Ω—è—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/signal_generator.py`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ ADX ‚Üí `await data_registry.update_indicator(symbol, "adx", value)`
- –ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ MA ‚Üí `await data_registry.update_indicator(symbol, "ma_fast", value)`
- –ü–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞ RSI ‚Üí `await data_registry.update_indicator(symbol, "rsi", value)`
- –ò —Ç.–¥. –¥–ª—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω–µ (3-4 —á–∞—Å–∞)

---

### –ó–∞–¥–∞—á–∞ 1.3: RegimeManager –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º—ã ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```python
# –ü–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞:
regime = self.determine_regime(symbol)
params = self.get_regime_params(regime)
await self.data_registry.update_regime(symbol, regime, params)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1-2 —á–∞—Å–∞)

---

### –ó–∞–¥–∞—á–∞ 1.4: Orchestrator –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –∏ –º–∞—Ä–∂—É ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/orchestrator.py`

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```python
# –ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞:
balance = await self.client.get_balance()
profile = self.config_manager.get_balance_profile(balance)
await self.data_registry.update_balance(balance, profile)

# –ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –º–∞—Ä–∂–∏:
margin_used = await self._get_used_margin()
await self.data_registry.update_margin(used=margin_used)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1-2 —á–∞—Å–∞)

---

**–ò–¢–û–ì–û –≠–¢–ê–ü 1:** 4 –∑–∞–¥–∞—á–∏, ~6-10 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

---

## üìñ –≠–¢–ê–ü 2: –ß–¢–ï–ù–ò–ï –ò–ó DataRegistry

**–¶–µ–ª—å:** –í—Å–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–µ–π—á–∞—Å –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é, –¥–æ–ª–∂–Ω—ã —á–∏—Ç–∞—Ç—å –∏–∑ DataRegistry.

### –ó–∞–¥–∞—á–∞ 2.1: SignalCoordinator —á–∏—Ç–∞–µ—Ç –∏–∑ DataRegistry ‚ö†Ô∏è (—Å—Ä–µ–¥–Ω—è—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ß—Ç–æ –º–µ–Ω—è—Ç—å:**
```python
# –í–º–µ—Å—Ç–æ:
balance = await self.client.get_balance()
regime = signal_generator.regime_manager.get_current_regime()

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
balance_data = await self.data_registry.get_balance()
regime_data = await self.data_registry.get_regime(symbol)
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω–µ (2-3 —á–∞—Å–∞)

---

### –ó–∞–¥–∞—á–∞ 2.2: –§–∏–ª—å—Ç—Ä—ã —á–∏—Ç–∞—é—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ DataRegistry ‚ö†Ô∏è (—Å—Ä–µ–¥–Ω—è—è)
**–ì–¥–µ:** 
- `src/strategies/scalping/futures/filters/adx_filter.py`
- `src/strategies/scalping/futures/filters/multi_timeframe_filter.py`
- `src/strategies/scalping/futures/filters/correlation_filter.py`
- –ò –¥—Ä—É–≥–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã

**–ß—Ç–æ –º–µ–Ω—è—Ç—å:**
```python
# –í–º–µ—Å—Ç–æ:
adx_value = self.adx_filter.calculate(candles)
mtf_data = await self.mtf_filter.get_data(symbol)

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
adx_value = await self.data_registry.get_indicator(symbol, "adx")
mtf_data = await self.data_registry.get_indicator(symbol, "mtf")
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω–µ (3-4 —á–∞—Å–∞, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤)

---

### –ó–∞–¥–∞—á–∞ 2.3: RiskManager —á–∏—Ç–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ DataRegistry ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** `src/strategies/scalping/futures/risk_manager.py`

**–ß—Ç–æ –º–µ–Ω—è—Ç—å:**
```python
# –í–º–µ—Å—Ç–æ:
balance = await self.client.get_balance()
balance_profile = self.config_manager.get_balance_profile(balance)

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
balance_data = await self.data_registry.get_balance()
balance_profile = balance_data.get("profile")
```

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1 —á–∞—Å)

---

### –ó–∞–¥–∞—á–∞ 2.4: –î—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ —á–∏—Ç–∞—é—Ç –∏–∑ DataRegistry ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** –†–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∞—é—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞–ø—Ä—è–º—É—é

**–ß—Ç–æ –º–µ–Ω—è—Ç—å:**
- –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry
- –ó–∞–º–µ–Ω–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –¥—Ä—É–≥–∏–º –º–æ–¥—É–ª—è–º –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1-2 —á–∞—Å–∞)

---

**–ò–¢–û–ì–û –≠–¢–ê–ü 2:** 4 –∑–∞–¥–∞—á–∏, ~7-10 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

---

## üßπ –≠–¢–ê–ü 3: –û–ß–ò–°–¢–ö–ê –ò –£–î–ê–õ–ï–ù–ò–ï –î–£–ë–õ–ò–ö–ê–¢–û–í

**–¶–µ–ª—å:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∫—ç—à–∏ –∏ –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API.

### –ó–∞–¥–∞—á–∞ 3.1: –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∫—ç—à–∏ ‚ö†Ô∏è (—Å—Ä–µ–¥–Ω—è—è)
**–ì–¥–µ:** –†–∞–∑–Ω—ã–µ –º–æ–¥—É–ª–∏

**–ß—Ç–æ —É–¥–∞–ª—è—Ç—å:**
- `signal_generator.candles_cache` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DataRegistry
- `orchestrator.total_margin_used` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `data_registry.get_margin()`
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –∫—ç—à–∏ —Ü–µ–Ω –≤ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥—É–ª—è—Ö ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DataRegistry
- –ò –¥—Ä—É–≥–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω–µ (2-3 —á–∞—Å–∞, –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –∫—ç—à–∏)

---

### –ó–∞–¥–∞—á–∞ 3.2: –£–¥–∞–ª–∏—Ç—å –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API ‚úÖ (–ø—Ä–æ—Å—Ç–∞—è)
**–ì–¥–µ:** –í—Å–µ –º–æ–¥—É–ª–∏

**–ß—Ç–æ —É–¥–∞–ª—è—Ç—å:**
- `await client.get_balance()` ‚Üí `await data_registry.get_balance()`
- `await client.get_ticker(symbol)` ‚Üí `await data_registry.get_market_data(symbol)`
- –ò –¥—Ä—É–≥–∏–µ –ø—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ DataRegistry

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü¢ –õ–µ–≥–∫–æ (1-2 —á–∞—Å–∞, –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã)

---

### –ó–∞–¥–∞—á–∞ 3.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ (–≤–∞–∂–Ω–∞—è)
**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω–µ (2-3 —á–∞—Å–∞)

---

**–ò–¢–û–ì–û –≠–¢–ê–ü 3:** 3 –∑–∞–¥–∞—á–∏, ~5-8 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

### –í—Å–µ–≥–æ —ç—Ç–∞–ø–æ–≤: 3
### –í—Å–µ–≥–æ –∑–∞–¥–∞—á: 11
### –û–±—â–µ–µ –≤—Ä–µ–º—è: ~18-28 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:
- üü¢ –õ–µ–≥–∫–æ: 6 –∑–∞–¥–∞—á (~8-12 —á–∞—Å–æ–≤)
- üü° –°—Ä–µ–¥–Ω–µ: 5 –∑–∞–¥–∞—á (~10-16 —á–∞—Å–æ–≤)
- üî¥ –°–ª–æ–∂–Ω–æ: 0 –∑–∞–¥–∞—á

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–¢–´

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (—Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞—Ç—å):
1. ‚úÖ WebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç DataRegistry (–≠–¢–ê–ü 1.1)
2. ‚úÖ Orchestrator –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å/–º–∞—Ä–∂—É (–≠–¢–ê–ü 1.4)
3. ‚úÖ SignalCoordinator —á–∏—Ç–∞–µ—Ç –∏–∑ DataRegistry (–≠–¢–ê–ü 2.1)

**–ü–æ—á–µ–º—É:** –≠—Ç–æ –¥–∞—Å—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ø–æ—Ç–æ–º):
4. ‚ö†Ô∏è SignalGenerator —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–≠–¢–ê–ü 1.2)
5. ‚ö†Ô∏è –§–∏–ª—å—Ç—Ä—ã —á–∏—Ç–∞—é—Ç –∏–∑ DataRegistry (–≠–¢–ê–ü 2.2)

**–ü–æ—á–µ–º—É:** –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π, –Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–≤ –∫–æ–Ω—Ü–µ):
6. ‚úÖ RegimeManager –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º—ã (–≠–¢–ê–ü 1.3)
7. ‚úÖ RiskManager —á–∏—Ç–∞–µ—Ç –∏–∑ DataRegistry (–≠–¢–ê–ü 2.3)
8. ‚úÖ –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–≠–¢–ê–ü 3)

**–ü–æ—á–µ–º—É:** –ó–∞–≤–µ—Ä—à–∞—é—â–∏–µ —à—Ç—Ä–∏—Ö–∏, —É–ª—É—á—à–∞—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

---

## ‚úÖ –í–´–í–û–î

**–î–ê, –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –û—Å—Ç–∞–ª–æ—Å—å **3 –≠–¢–ê–ü–ê**, –Ω–æ –∫–∞–∂–¥—ã–π —ç—Ç–∞–ø –≤–∫–ª—é—á–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á (–≤—Å–µ–≥–æ 11 –∑–∞–¥–∞—á).

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1 (3 –∑–∞–¥–∞—á–∏), —ç—Ç–æ –¥–∞—Å—Ç –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–æ–∫–∞–∂–µ—Ç, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DataRegistry –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é? –ù–∞—á–Ω–µ–º —Å –≠–¢–ê–ü–ê 1.1 (WebSocket –æ–±–Ω–æ–≤–ª—è–µ—Ç DataRegistry)?** üöÄ






