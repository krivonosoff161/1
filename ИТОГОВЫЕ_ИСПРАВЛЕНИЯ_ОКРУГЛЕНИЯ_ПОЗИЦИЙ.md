# ‚úÖ –ò–¢–û–ì–û–í–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: –û–ö–†–£–ì–õ–ï–ù–ò–ï –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ô

**–î–∞—Ç–∞:** 2025-11-12  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–º–µ–Ω—å—à–∞–ª—Å—è –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã

---

## üîç –ü–†–û–ë–õ–ï–ú–ê

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
1. –£–º–µ–Ω—å—à–µ–Ω–∏—é —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –Ω–∞ –±–∏—Ä–∂–µ
2. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—é –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–∏
3. –ù–∞—Ä—É—à–µ–Ω–∏—é –º–∏–Ω–∏–º—É–º–æ–≤ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
4. –ù–µ—Ç–æ—á–Ω–æ–º—É —Ä–∞—Å—á–µ—Ç—É –º–∞—Ä–∂–∏ –∏ –Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã
- **–†–∞—Å—á–µ—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 0.0049 BTC (–º–∞—Ä–∂–∞ $180, leverage 3x, —Ü–µ–Ω–∞ $110,000)
- **–ü–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è:** 0.0048 BTC (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ ~2%)
- **–†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞:** $176.40 (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ $3.60)
- **–ù–∞—Ä—É—à–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º–∞:** –ï—Å–ª–∏ –º–∏–Ω–∏–º—É–º $50, –∞ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ $48, –ø–æ–∑–∏—Ü–∏—è –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï

### 1. –£—á–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ `_calculate_position_size`
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã, –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ `lotSz`, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º `minSz`, –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `min_margin_usd`
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

**–ö–æ–¥:**
```python
# ‚úÖ –ù–û–í–û–ï: –£—á–∏—Ç—ã–≤–∞–µ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
instrument_details = await self.client.get_instrument_details(symbol)
ct_val = instrument_details.get("ctVal", 0.01)
lot_sz = instrument_details.get("lotSz", 0.01)
min_sz = instrument_details.get("minSz", 0.01)

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
size_in_contracts = position_size / ct_val

# –û–∫—Ä—É–≥–ª—è–µ–º –¥–æ lotSz (–∫–∞–∫ –≤ place_futures_order)
rounded_size_in_contracts = round_to_step(size_in_contracts, lot_sz)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä
if rounded_size_in_contracts < min_sz:
    rounded_size_in_contracts = min_sz

# –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã (—Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)
real_position_size = rounded_size_in_contracts * ct_val

# –í—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∞–ª—å–Ω—É—é –Ω–æ–º–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
real_notional_usd = real_position_size * price
real_margin_usd = real_notional_usd / leverage

# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ >= min_margin_usd
if real_margin_usd < min_margin_usd:
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–æ –º–∏–Ω–∏–º—É–º–∞
    real_margin_usd = min_margin_usd
    real_notional_usd = real_margin_usd * leverage
    real_position_size = real_notional_usd / price
    
    # –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö –∏ –æ–∫—Ä—É–≥–ª—è–µ–º
    real_size_in_contracts = real_position_size / ct_val
    real_rounded_size_in_contracts = round_to_step(real_size_in_contracts, lot_sz)
    if real_rounded_size_in_contracts < min_sz:
        real_rounded_size_in_contracts = min_sz
    real_position_size = real_rounded_size_in_contracts * ct_val
    real_notional_usd = real_position_size * price
    real_margin_usd = real_notional_usd / leverage

# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
position_size = real_position_size
notional_usd = real_notional_usd
margin_usd = real_margin_usd
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è >= min_margin_usd
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ margin_usd
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- `margin_usd` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –º–∞—Ä–∂—É –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –≠—Ç–æ –≤–∞–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ `margin_usd` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `total_margin_used`

---

## üìä –í–õ–ò–Ø–ù–ò–ï –ù–ê –†–ê–°–ß–ï–¢–´

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. `position_size` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª—Å—è –±–µ–∑ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
2. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ –±–∏—Ä–∂—É —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∞–ª—Å—è –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
3. –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –±—ã–ª–∞ –º–µ–Ω—å—à–µ —Ä–∞—Å—á–µ—Ç–Ω–æ–π
4. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –º–æ–≥ —Å—Ç–∞—Ç—å –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞
5. –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. `position_size` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
2. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
3. –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞—Å—á–µ—Ç–Ω–æ–π
4. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞
5. –ù–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

---

## üîß –¶–ï–ü–û–ß–ö–ê –í–´–ó–û–í–û–í

### 1. –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (`_calculate_position_size`)
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –∏ —Ä–µ–∂–∏–º–∞
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (max margin percent, max loss per trade, min/max margin USD)
- **‚úÖ –ù–û–í–û–ï: –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã**
- **‚úÖ –ù–û–í–û–ï: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `position_size` (—É–∂–µ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤ (`_execute_signal_from_price`)
- –í—ã–∑—ã–≤–∞–µ—Ç `_calculate_position_size` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `position_size`
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç `size_usd = position_size * price` (notional)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `MaxSizeLimiter.can_open_position(symbol, size_usd)`
- –ü–µ—Ä–µ–¥–∞–µ—Ç `position_size` –≤ `order_executor.execute_signal(signal, position_size)`

### 3. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ (`order_executor.execute_signal`)
- –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç —Å–∏–≥–Ω–∞–ª —á–µ—Ä–µ–∑ `SlippageGuard`
- –í—ã–∑—ã–≤–∞–µ—Ç `_place_market_order` –∏–ª–∏ `_place_limit_order` —Å `position_size`

### 4. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –±–∏—Ä–∂–µ (`client.place_futures_order`)
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç `size` (–≤ –º–æ–Ω–µ—Ç–∞—Ö) –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- –û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ `lotSz`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –º–∏–Ω–∏–º—É–º `minSz`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ä–¥–µ—Ä –Ω–∞ –±–∏—Ä–∂—É

**‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ `_calculate_position_size` —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–º–µ—Ä—É –≤ `place_futures_order`, —Ç–∞–∫ –∫–∞–∫ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ.

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢–´

### 1. –¢–æ—á–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
- –ù–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
- –õ–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ `_calculate_position_size` –∏ `place_futures_order` –∏–¥–µ–Ω—Ç–∏—á–Ω–∞

### 2. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –º–∏–Ω–∏–º—É–º–∞–º
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –≤—Å–µ–≥–¥–∞ >= min_margin_usd
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∏–∑-–∑–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–æ –º–∏–Ω–∏–º—É–º–∞
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

---

## üîç –ü–†–û–í–ï–†–ö–ê

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –∏ –æ–∫—Ä—É–≥–ª—è–µ—Ç—Å—è –¥–æ `lotSz`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º `minSz`
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ –º–æ–Ω–µ—Ç—ã
- –õ–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –≤ `_calculate_position_size` –∏ `place_futures_order`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞
- –†–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ `min_margin_usd`
- –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–∞—è –º–∞—Ä–∂–∞ < min_margin_usd, —Ä–∞–∑–º–µ—Ä —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–æ –º–∏–Ω–∏–º—É–º–∞
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–æ –º–∏–Ω–∏–º—É–º–∞

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ `_calculate_position_size` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–∞–∑–º–µ—Ä—É –≤ `place_futures_order`
- –õ–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö –∏–¥–µ–Ω—Ç–∏—á–Ω–∞
- –ù–µ—Ç —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –º–µ–∂–¥—É —Ä–∞—Å—á–µ—Ç–Ω—ã–º –∏ —Ä–µ–∞–ª—å–Ω—ã–º —Ä–∞–∑–º–µ—Ä–æ–º

---

## üìù –í–´–í–û–î–´

1. **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É—á—Ç–µ–Ω–æ:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
2. **–ú–∏–Ω–∏–º—É–º —Å–æ–±–ª—é–¥–µ–Ω:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ >= –º–∏–Ω–∏–º—É–º–∞ –∏–∑ –±–∞–ª–∞–Ω—Å–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
3. **–¢–æ—á–Ω–æ—Å—Ç—å:** –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É –Ω–∞ –±–∏—Ä–∂–µ
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
5. **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ:** –õ–æ–≥–∏–∫–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –≤ `_calculate_position_size` –∏ `place_futures_order`

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –∏ –±–∞–ª–∞–Ω—Å–æ–≤—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ–± –æ–∫—Ä—É–≥–ª–µ–Ω–∏–∏
3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:** –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å

---

## üìã –§–ê–ô–õ–´ –ò–ó–ú–ï–ù–ï–ù–´

1. **src/strategies/scalping/futures/orchestrator.py**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –≤ `_calculate_position_size`
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º—É–º–∞ –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
   - –û–±–Ω–æ–≤–ª–µ–Ω `margin_usd` –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é –º–∞—Ä–∂—É –ø–æ—Å–ª–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

2. **–ê–ù–ê–õ–ò–ó_–¶–ï–ü–û–ß–ö–ò_–û–†–î–ï–†–û–í_–ò_–û–ö–†–£–ì–õ–ï–ù–ò–Ø.md**
   - –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ü–µ–ø–æ—á–∫–∏ –≤—ã–∑–æ–≤–æ–≤ –∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è

3. **–ò–¢–û–ì–û–í–´–ï_–ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø_–û–ö–†–£–ì–õ–ï–ù–ò–Ø_–ü–û–ó–ò–¶–ò–ô.md**
   - –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –∏—Ç–æ–≥–æ–≤—ã–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û  
**–î–∞—Ç–∞:** 2025-11-12  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞


