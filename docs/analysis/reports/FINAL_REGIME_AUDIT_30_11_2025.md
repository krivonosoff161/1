# –§–∏–Ω–∞–ª—å–Ω—ã–π –∞—É–¥–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —Ä–µ–∂–∏–º–∞–º

**–î–∞—Ç–∞:** 2025-11-30  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

### **1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞** ‚úÖ
- –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ `RegimeManager`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ: `"trending"`, `"ranging"`, `"choppy"`

### **2. –ü–µ—Ä–µ–¥–∞—á–∞ —Ä–µ–∂–∏–º–∞ –≤ —Å–∏–≥–Ω–∞–ª–µ** ‚úÖ
- –†–µ–∂–∏–º –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ —Å–∏–≥–Ω–∞–ª: `signal["regime"] = current_regime_name`
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** –ï—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω ‚Üí —è–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `"ranging"` —Å WARNING

### **3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –≤ OrderExecutor** ‚úÖ
- –†–µ–∂–∏–º –±–µ—Ä–µ—Ç—Å—è –∏–∑ —Å–∏–≥–Ω–∞–ª–∞: `regime = signal.get("regime", "ranging")`
- ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û:** `_get_regime_params()` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

### **4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** ‚úÖ
- TP/SL –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ `regime_params`
- `sl_percent` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `regime_params.get("sl_percent")`
- Fallback –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

---

## üìä –ê–î–ê–ü–¢–ò–í–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ü–û –†–ï–ñ–ò–ú–ê–ú

### **Ranging (—Ñ–ª—ç—Ç):**
- `sl_percent`: **2.0%**
- `tp_atr_multiplier`: 0.8
- `sl_atr_multiplier`: 0.5
- `max_holding_minutes`: 20

### **Trending (—Ç—Ä–µ–Ω–¥):**
- `sl_percent`: **1.5%**
- `tp_atr_multiplier`: 1.0
- `sl_atr_multiplier`: 0.5
- `max_holding_minutes`: 30

### **Choppy (—Ö–∞–æ—Å):**
- `sl_percent`: **1.0%**
- `tp_atr_multiplier`: 0.6
- `sl_atr_multiplier`: 0.4
- `max_holding_minutes`: 10

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `_get_regime_params()` –≤ OrderExecutor:**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ–Ω—Ñ–∏–≥—É: `self.scalping_config.adaptive_regime`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ Pydantic –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### **2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∂–∏–º–∞ –≤ SignalGenerator:**
- ‚úÖ –Ø–≤–Ω—ã–π fallback –Ω–∞ `"ranging"` –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
- ‚úÖ WARNING –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback

### **3. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `_calculate_tp_sl_prices()`:**
- ‚úÖ INFO –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ `sl_percent`
- ‚úÖ WARNING –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ fallback
- ‚úÖ INFO —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º–∏ TP/SL —Ü–µ–Ω–∞–º–∏

---

## üéØ –í–´–í–û–î

**‚úÖ –í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ü–ï–†–ï–î–ê–Æ–¢–°–Ø –ò –ò–°–ü–û–õ–¨–ó–£–Æ–¢–°–Ø –ü–†–ê–í–ò–õ–¨–ù–û!**

1. ‚úÖ –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
2. ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ —Å–∏–≥–Ω–∞–ª–µ
3. ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ —Ä–µ–∂–∏–º—É
4. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ `sl_percent` –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º–∞–º (2.0% –¥–ª—è ranging –≤–º–µ—Å—Ç–æ 1.2%)
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞, –∞ –Ω–µ –∏–∑ fallback
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏!**


