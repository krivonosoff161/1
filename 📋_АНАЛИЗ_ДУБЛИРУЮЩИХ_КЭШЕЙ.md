# üìã –ê–ù–ê–õ–ò–ó –î–£–ë–õ–ò–†–£–Æ–©–ò–• –ö–≠–®–ï–ô

**–î–∞—Ç–∞:** 25.11.2025  
**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ –∏ —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ –∫—ç—à–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ DataRegistry

---

## üîç –ù–ê–ô–î–ï–ù–ù–´–ï –ö–≠–®–ò

### ‚úÖ –û–°–¢–ê–í–ò–¢–¨ (–Ω–µ –¥—É–±–ª–∏–∫–∞—Ç—ã DataRegistry):

1. **`last_orders_cache` –∏ `active_orders_cache`** –≤ orchestrator
   - **–ü—Ä–∏—á–∏–Ω–∞:** DataRegistry –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –æ—Ä–¥–µ—Ä–∞, —Ç–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–∏
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å

2. **`liquidity_filter._cache`**, **`order_flow_filter._cache`**, **`funding_rate_filter._cache`**
   - **–ü—Ä–∏—á–∏–Ω–∞:** –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤, –Ω–µ –æ–±—â–∏–µ market data
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å

3. **`self.initial_balance`** –≤ orchestrator
   - **–ü—Ä–∏—á–∏–Ω–∞:** –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è drawdown
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å (–º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∏–∑ DataRegistry –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

4. **`self._emergency_stop_balance`** –≤ orchestrator
   - **–ü—Ä–∏—á–∏–Ω–∞:** –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–π –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å

### ‚ö†Ô∏è –†–ê–°–°–ú–û–¢–†–ï–¢–¨ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã):

1. **`self.total_margin_used`** –≤ orchestrator
   - **–¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∏–∑ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –º–∞—Ä–∂–∏
   - **–í DataRegistry:** –ú–∞—Ä–∂–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è —á–µ—Ä–µ–∑ `update_margin()`
   - **–î–µ–π—Å—Ç–≤–∏–µ:** –ú–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry, –Ω–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üìä –í–´–í–û–î–´

**–û—Å–Ω–æ–≤–Ω—ã–µ –¥—É–±–ª–∏–∫–∞—Ç—ã:**
- `self.total_margin_used` - –¥—É–±–ª–∏—Ä—É–µ—Ç –º–∞—Ä–∂—É –∏–∑ DataRegistry

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
1. –ó–∞–º–µ–Ω–∏—Ç—å `self.total_margin_used` –Ω–∞ —á—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry
2. –û–±–Ω–æ–≤–∏—Ç—å `initial_balance` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–∑ DataRegistry (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
3. –û—Å—Ç–∞–≤–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫—ç—à–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –æ—Ä–¥–µ—Ä–æ–≤

---

## ‚úÖ –ü–õ–ê–ù –î–ï–ô–°–¢–í–ò–ô

1. –ó–∞–º–µ–Ω–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `self.total_margin_used` –Ω–∞ `data_registry.get_margin()`
2. –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ `initial_balance` –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ DataRegistry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ—Ç –ª–∏ –¥—Ä—É–≥–∏—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤






