# üîç –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ SCORE

## ‚úÖ 1. –ü–†–û–í–ï–†–ö–ê –õ–û–ì–û–í –í–†–£–ß–ù–£–Æ

### –ù–∞–π–¥–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö:

**–°—Ç—Ä–æ–∫–∞ 4840 –≤ `signal_generator.py` - —ç—Ç–æ –ù–ï score!**

```
DEBUG signal_generator:_filter_and_rank_signals:4840 | 
üîç –°–∏–≥–Ω–∞–ª –¥–ª—è BTC-USDT –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω –ø–æ –≤—Ä–µ–º–µ–Ω–∏: –ø—Ä–æ—à–ª–æ 34.6—Å < 60—Å
```

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- `34.6` = –ø—Ä–æ—à–ª–æ 34.6 —Å–µ–∫—É–Ω–¥ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –¥–ª—è —ç—Ç–æ–≥–æ —Å–∏–º–≤–æ–ª–∞
- `60` = –º–∏–Ω–∏–º—É–º 60 —Å–µ–∫—É–Ω–¥ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ (cooldown)
- –°–∏–≥–Ω–∞–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –∏–∑-–∑–∞ **cooldown**, –∞ –Ω–µ –∏–∑-–∑–∞ –Ω–∏–∑–∫–æ–≥–æ score!

**–ö–æ–¥ (—Å—Ç—Ä–æ–∫–∏ 4839-4844):**
```python
if current_time - last_signal_time < 60:  # –ú–∏–Ω–∏–º—É–º 60 —Å–µ–∫
    logger.debug(
        f"üîç –°–∏–≥–Ω–∞–ª –¥–ª—è {symbol} –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω –ø–æ –≤—Ä–µ–º–µ–Ω–∏: "
        f"–ø—Ä–æ—à–ª–æ {current_time - last_signal_time:.1f}—Å < 60—Å"
    )
    continue
```

**–í—ã–≤–æ–¥:** –õ–æ–≥ "BTC-USDT 2.1 60" –∏–ª–∏ "34.6 60" - —ç—Ç–æ **–≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏**, –∞ –Ω–µ score!

---

## ‚úÖ 2. –ü–†–û–í–ï–†–ö–ê –°–ò–°–¢–ï–ú–´ SCORE

### 2.1. –ì–¥–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è score?

**‚ùå –ù–ï –ù–ê–ô–î–ï–ù–û –ø—Ä—è–º–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è `score = ...`**

**‚úÖ –ù–ê–ô–î–ï–ù–û:** Score –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é! –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **`strength`** (0-1).

**–ì–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è strength:**

1. **RSI —Å–∏–≥–Ω–∞–ª—ã** (`rsi_signal_generator.py`, —Å—Ç—Ä–æ–∫–∏ 186, 298):
   ```python
   # –î–ª—è RSI oversold (LONG)
   strength = min(1.0, (rsi_oversold - rsi) / rsi_oversold)
   
   # –î–ª—è RSI overbought (SHORT)
   strength = min(1.0, (rsi - rsi_overbought) / (100 - rsi_overbought))
   ```

2. **MACD —Å–∏–≥–Ω–∞–ª—ã** (`macd_signal_generator.py`, —Å—Ç—Ä–æ–∫–∏ 146, 160):
   ```python
   # –ë–∞–∑–æ–≤—ã–π strength –∏–∑ MACD histogram
   base_strength = min(abs(histogram) / 200.0, 1.0)
   ```

3. **MA —Å–∏–≥–Ω–∞–ª—ã** (`signal_generator.py`, —Å—Ç—Ä–æ–∫–∏ 2484, 2560):
   ```python
   base_strength = min(abs(histogram) / 200.0, 1.0)
   ```

**–í—ã–≤–æ–¥:** Score –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è**. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Å—Ä–∞–∑—É —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è `strength` (0-1).

---

### 2.2. –ö–∞–∫ –±–æ–Ω—É—Å—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è?

**‚úÖ –ù–ê–ô–î–ï–ù–û:** –ë–æ–Ω—É—Å—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ **–ù–ï –ù–ê–ô–î–ï–ù–û** –≥–¥–µ –æ–Ω–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ score/strength.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ–Ω—É—Å–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥–µ:**

1. **MTF –±–æ–Ω—É—Å** (`signal_generator.py`, —Å—Ç—Ä–æ–∫–∞ 511):
   ```python
   mtf_score_bonus=mtf_dict.get("score_bonus", 2)
   ```

2. **Pivot Points –±–æ–Ω—É—Å** (`signal_generator.py`, —Å—Ç—Ä–æ–∫–∞ 529):
   ```python
   pivot_score_bonus_near_level=pivot_dict.get("score_bonus_near_level", 1)
   ```

3. **Volume Profile –±–æ–Ω—É—Å** (`signal_generator.py`, —Å—Ç—Ä–æ–∫–∏ 533-537):
   ```python
   vp_score_bonus_in_value_area=vp_dict.get("score_bonus_in_value_area", 1)
   vp_score_bonus_near_poc=vp_dict.get("score_bonus_near_poc", 1)
   ```

4. **–ú–Ω–æ–∂–∏—Ç–µ–ª–∏ –±–æ–Ω—É—Å–æ–≤** (`signal_generator.py`, —Å—Ç—Ä–æ–∫–∏ 565-569):
   ```python
   pivot_bonus_multiplier=params_dict.get("pivot_bonus_multiplier", 1.0)
   volume_profile_bonus_multiplier=params_dict.get("volume_profile_bonus_multiplier", 1.0)
   ```

**‚ùå –ü–†–û–ë–õ–ï–ú–ê:** –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≥–¥–µ —ç—Ç–∏ –±–æ–Ω—É—Å—ã **–¥–æ–±–∞–≤–ª—è—é—Ç—Å—è** –∫ strength —Å–∏–≥–Ω–∞–ª–∞!

**–ì–∏–ø–æ—Ç–µ–∑–∞:** –ë–æ–Ω—É—Å—ã –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö (FilterManager), –Ω–æ –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω.

---

### 2.3. –ì–¥–µ score –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ strength?

**‚úÖ –ù–ê–ô–î–ï–ù–û:** –í `regime_manager.py`, —Å—Ç—Ä–æ–∫–∞ 741:

```python
base_min_strength = regime_params.min_score_threshold / 12.0
```

**–ß—Ç–æ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:**
- `min_score_threshold` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1.4) –¥–µ–ª–∏—Ç—Å—è –Ω–∞ **12.0**
- –†–µ–∑—É–ª—å—Ç–∞—Ç = `min_strength` (0-1 –¥–∏–∞–ø–∞–∑–æ–Ω)
- –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–º–∞–∫—Å–∏–º—É–º score = 12**, –∞ –Ω–µ 60!

**–ü—Ä–∏–º–µ—Ä:**
- `min_score_threshold: 1.4` ‚Üí `min_strength = 1.4 / 12.0 = 0.117` (11.7%)
- `min_score_threshold: 3.0` ‚Üí `min_strength = 3.0 / 12.0 = 0.250` (25.0%)

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** (`regime_manager.py`, —Å—Ç—Ä–æ–∫–∞ 935):
```python
logger.info(f"   Score threshold: {params.min_score_threshold}/12")
```

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ score –∏–º–µ–µ—Ç **–º–∞–∫—Å–∏–º—É–º 12**, –∞ –Ω–µ 60!

---

## üìä 3. –ü–û–õ–ù–ê–Ø –°–•–ï–ú–ê –†–ê–ë–û–¢–´

### 3.1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:

1. **RSI/MACD/MA –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã** —Å–æ–∑–¥–∞—é—Ç —Å–∏–≥–Ω–∞–ª—ã —Å `strength` (0-1)
2. **Strength —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è** –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (RSI, MACD histogram, –∏ —Ç.–¥.)
3. **–ë–æ–Ω—É—Å—ã –ù–ï –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è** (–∏–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ö, –Ω–æ –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω)

### 3.2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:

1. **Cooldown —Ñ–∏–ª—å—Ç—Ä** (`_filter_and_rank_signals`, —Å—Ç—Ä–æ–∫–∞ 4839):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ (–º–∏–Ω–∏–º—É–º 60 —Å–µ–∫—É–Ω–¥)
   - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –µ—Å–ª–∏ –ø—Ä–æ—à–ª–æ < 60 —Å–µ–∫—É–Ω–¥

2. **Strength —Ñ–∏–ª—å—Ç—Ä** (`_filter_and_rank_signals`, —Å—Ç—Ä–æ–∫–∞ 4903):
   ```python
   filtered_signals = [
       s for s in signals if s.get("strength", 0) >= min_strength
   ]
   ```
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `strength >= min_strength`
   - `min_strength` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ `min_score_threshold / 12.0`

3. **ARM —Ñ–∏–ª—å—Ç—Ä** (`regime_manager.py`, —Å—Ç—Ä–æ–∫–∞ 741):
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `signal_strength >= min_strength`
   - `min_strength = min_score_threshold / 12.0`

---

## ‚ö†Ô∏è 4. –ü–†–û–ë–õ–ï–ú–´ –ò –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø

### 4.1. Score –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é:

- ‚ùå –ù–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `score` –≤ —Å–∏–≥–Ω–∞–ª–∞—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `strength` (0-1)
- ‚ùì –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫ –±–æ–Ω—É—Å—ã –≤–ª–∏—è—é—Ç –Ω–∞ strength

### 4.2. –ú–∞–∫—Å–∏–º—É–º score = 12, –∞ –Ω–µ 60:

- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: `min_score_threshold / 12.0`
- ‚ùå Sonnet –æ—à–∏–±—Å—è, –≥–æ–≤–æ—Ä—è –ø—Ä–æ –º–∞–∫—Å–∏–º—É–º 60

### 4.3. –õ–æ–≥ "2.1 60" - —ç—Ç–æ –ù–ï score:

- ‚úÖ –≠—Ç–æ –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ (cooldown)
- ‚úÖ `2.1` = –ø—Ä–æ—à–ª–æ 2.1 —Å–µ–∫—É–Ω–¥—ã
- ‚úÖ `60` = –º–∏–Ω–∏–º—É–º 60 —Å–µ–∫—É–Ω–¥ —Ç—Ä–µ–±—É–µ—Ç—Å—è

### 4.4. –ë–æ–Ω—É—Å—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è:

- ‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω–æ –≥–¥–µ –±–æ–Ω—É—Å—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∫ strength
- ‚ùå –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ–Ω—É—Å–æ–≤ –µ—Å—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

---

## üîß 5. –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 5.1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å min_score_threshold –≤ –∫–æ–Ω—Ñ–∏–≥–µ:

**–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** `min_score_threshold: 1.4` –¥–ª—è ranging

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- **25% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞:** `min_score_threshold: 3.0` (3.0/12 = 25%)
- **30% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞:** `min_score_threshold: 3.6` (3.6/12 = 30%)
- **35% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞:** `min_score_threshold: 4.2` (4.2/12 = 35%)

### 5.2. –£–º–µ–Ω—å—à–∏—Ç—å cooldown (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤):

**–¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:** 60 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ:** 30-45 —Å–µ–∫—É–Ω–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Å–∏–≥–Ω–∞–ª–æ–≤)

### 5.3. –ù–∞–π—Ç–∏ –≥–¥–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –±–æ–Ω—É—Å—ã:

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `FilterManager.apply_all_filters()`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–¥–µ `volume_profile_bonus` –∏ `pivot_bonus` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–Ω—É—Å–æ–≤ –∫ strength

### 5.4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å RSI –ø–æ—Ä–æ–≥–∏:

- `overbought: 85` (–≤–º–µ—Å—Ç–æ 70)
- `oversold: 25` (–≤–º–µ—Å—Ç–æ 30)

---

## üìã 6. –¢–ê–ë–õ–ò–¶–ê –°–û–û–¢–í–ï–¢–°–¢–í–ò–Ø min_score_threshold

| min_score_threshold | min_strength | % –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------------------|--------------|----------------|--------------|
| 1.4                 | 0.117        | 11.7%          | ‚ùå –°–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ |
| 2.0                 | 0.167        | 16.7%          | ‚ö†Ô∏è –ù–∏–∑–∫–æ |
| 3.0                 | 0.250        | 25.0%          | ‚úÖ –•–æ—Ä–æ—à–æ |
| 3.6                 | 0.300        | 30.0%          | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| 4.2                 | 0.350        | 35.0%          | ‚úÖ –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ |
| 4.8                 | 0.400        | 40.0%          | ‚ö†Ô∏è –í—ã—Å–æ–∫–æ |
| 6.0                 | 0.500        | 50.0%          | ‚ùå –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–æ |

---

## ‚úÖ 7. –ò–¢–û–ì–û–í–´–ï –í–´–í–û–î–´

1. **–õ–æ–≥ "BTC-USDT 2.1 60"** - —ç—Ç–æ **–ù–ï score**, –∞ –≤—Ä–µ–º—è –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏ (cooldown)
2. **–°–∏—Å—Ç–µ–º–∞ score** –∏–º–µ–µ—Ç –º–∞–∫—Å–∏–º—É–º **12**, –∞ –Ω–µ 60
3. **Score –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é** - –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `strength` (0-1)
4. **–ë–æ–Ω—É—Å—ã –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è** –∫ strength (–∏–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≥–¥–µ-—Ç–æ, –Ω–æ –∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω)
5. **min_score_threshold** –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ `min_strength` —á–µ—Ä–µ–∑ –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ 12.0
6. **–°–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è** –∏–∑-–∑–∞:
   - Cooldown (60 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏)
   - –ù–∏–∑–∫–∏–π strength (< min_strength)
   - –í—ã—Å–æ–∫–∏–π RSI (> 70 –¥–ª—è LONG)

---

**–î–∞—Ç–∞:** 23 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù**

