# ‚úÖ –£–°–ü–ï–®–ù–ê–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø –ê–î–ê–ü–¢–ò–í–ù–´–• –°–ò–°–¢–ï–ú –í FUTURES

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. ‚úÖ Adaptive Regime Manager (ARM)
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: `src/strategies/scalping/futures/signal_generator.py`

```python
# ARM –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å Futures-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
self.regime_manager = AdaptiveRegimeManager(regime_config)

# –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞:
- TRENDING: tp=0.8x, sl=0.6x, score_threshold=4
- RANGING: tp=0.6x, sl=0.5x, score_threshold=3
- CHOPPY: tp=0.5x, sl=0.4x, score_threshold=5
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Futures:**
- –ë–æ–ª–µ–µ –Ω–∏–∑–∫–∏–µ –ø–æ—Ä–æ–≥–∏ ADX (20.0/15.0 –≤–º–µ—Å—Ç–æ 25.0/20.0)
- –ú–µ–Ω—å—à–∏–µ TP/SL –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞
- –ë—ã—Å—Ç—Ä–µ–µ –¥–µ—Ç–µ–∫—Ü–∏—è —Ä–µ–∂–∏–º–∞ (ADX-9 –≤–º–µ—Å—Ç–æ ADX-14)
- –ú–µ–Ω—å—à–µ —Å–¥–µ–ª–æ–∫ –≤ —á–∞—Å (15/10/6 –≤–º–µ—Å—Ç–æ 20/15/12)

---

### 2. ‚úÖ Balance Profiles
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: `src/strategies/scalping/futures/orchestrator.py`

```python
def _get_balance_profile(self, balance: float):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å:
    if balance <= 1500:
        return "small"  # $50 base position
    elif balance <= 3000:
        return "medium"  # $200 base position
    else:
        return "large"  # $500 base position
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ—Ñ–∏–ª–µ–π:**
| –ü—Ä–æ—Ñ–∏–ª—å | –ë–∞–ª–∞–Ω—Å | Base USD | Min USD | Max USD | Max Positions |
|---------|--------|----------|---------|---------|---------------|
| Small | ‚â§ $1500 | $50 | $10 | $100 | 2 |
| Medium | ‚â§ $3000 | $200 | $30 | $250 | 3 |
| Large | $3000+ | $500 | $50 | $500 | 4 |

---

### 3. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: `src/strategies/scalping/futures/orchestrator.py::_calculate_position_size()`

```python
def _calculate_position_size(self, balance, price, signal):
    # 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –±–∞–ª–∞–Ω—Å–∞
    balance_profile = self._get_balance_profile(balance)
    base_usd = balance_profile["base_position_usd"]
    
    # 2. –ê–¥–∞–ø—Ç–∏—Ä—É–µ–º –ø–æ–¥ —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞
    if self.signal_generator.regime_manager:
        regime = self.regime_manager.get_current_regime()
        multiplier = regime_params["position_size_multiplier"]
        base_usd *= multiplier
    
    # 3. –ü—Ä–∏–º–µ–Ω—è–µ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
    usd_size = max(min_usd, min(base_usd, max_usd))
    
    # 4. –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤ –º–æ–Ω–µ—Ç—ã
    return usd_size / price
```

**–ê–¥–∞–ø—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- **–ú–∞–ª—ã–π –±–∞–ª–∞–Ω—Å** ($500) ‚Üí –º–∏–Ω–∏–º—É–º $10, –º–∞–∫—Å–∏–º—É–º $100
- **–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å** ($2000) ‚Üí –º–∏–Ω–∏–º—É–º $30, –º–∞–∫—Å–∏–º—É–º $250
- **–ë–æ–ª—å—à–æ–π –±–∞–ª–∞–Ω—Å** ($5000) ‚Üí –º–∏–Ω–∏–º—É–º $50, –º–∞–∫—Å–∏–º—É–º $500
- **Trending —Ä–µ–∂–∏–º** ‚Üí 1.2x multiplier
- **Ranging —Ä–µ–∂–∏–º** ‚Üí 1.0x multiplier
- **Choppy —Ä–µ–∂–∏–º** ‚Üí 0.7x multiplier

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª: `config/config_futures.yaml`

–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ–∫—Ü–∏–∏:
1. ‚úÖ `balance_profiles` - 3 –ø—Ä–æ—Ñ–∏–ª—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
2. ‚úÖ `adaptive_regime` - –ø–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ARM
   - Detection –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Trending
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Ranging
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è Choppy
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
   - –ú–æ–¥—É–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: Spot vs Futures

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Spot | Futures | –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å |
|-----------|------|---------|--------------|
| ARM –ø–æ—Ä–æ–≥ —Ç—Ä–µ–Ω–¥–∞ | 25.0 | **20.0** ‚ö° | –ë—ã—Å—Ç—Ä–µ–µ –¥–µ—Ç–µ–∫—Ü–∏—è |
| ARM –ø–æ—Ä–æ–≥ —Ñ–ª—ç—Ç–∞ | 20.0 | **15.0** ‚ö° | –ë—ã—Å—Ç—Ä–µ–µ –¥–µ—Ç–µ–∫—Ü–∏—è |
| ARM ADX –ø–µ—Ä–∏–æ–¥ | 14 | **9** ‚ö° | –ë—ã—Å—Ç—Ä—ã–π ADX |
| Trending TP | 1.2x | **0.8x** ‚ö° | –ú–µ–Ω—å—à–µ –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞ |
| Trending SL | 0.9x | **0.6x** ‚ö° | –¢–∞–π—Ç-—Å—Ç–æ–ø |
| Max trades (T) | 20 | **15** ‚ö° | –ú–µ–Ω—å—à–µ —Å–¥–µ–ª–æ–∫ |
| Balance base (S) | $55 | **$50** ‚ö° | –ù–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ |
| PH threshold (T) | $0.35 | **$0.20** ‚ö° | –ë—ã—Å—Ç—Ä–µ–µ —Ñ–∏–∫—Å–∞—Ü–∏—è |

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ë–æ—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞
```python
# ARM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–≤–µ—á–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
regime = self.regime_manager.detect_regime(candles)

# –†–µ–∂–∏–º—ã:
- TRENDING: —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥, –±–æ–ª—å—à–µ TP, –º–µ–Ω—å—à–µ SL
- RANGING: –±–æ–∫–æ–≤–∏–∫, –º–µ–Ω—å—à–µ TP, –±–æ–ª—å—à–µ SL
- CHOPPY: —Ö–∞–æ—Å, –º–∏–Ω–∏–º—É–º —Å–¥–µ–ª–æ–∫, –±—ã—Å—Ç—Ä—ã–π –≤—ã—Ö–æ–¥
```

### 2. –ë–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä –ø–æ–¥ –±–∞–ª–∞–Ω—Å
```python
# –î–ª—è –±–∞–ª–∞–Ω—Å–∞ $500:
balance_profile = "small" ‚Üí $50 base position
# –° –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º —Ä–µ–∂–∏–º–∞:
regime = "trending" ‚Üí 1.2x ‚Üí $60 position
```

### 3. –ë–æ—Ç –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```python
# –ü—Ä–∏–º–µ—Ä –¥–ª—è ETH –ø—Ä–∏ trending:
if regime == "trending":
    tp_multiplier = 0.8  # 0.8x ATR
    sl_multiplier = 0.6  # 0.6x ATR
    min_score = 4  # –ù–∏–∂–µ –ø–æ—Ä–æ–≥
```

---

## ‚úÖ –ß—Ç–æ –ø–æ–ª—É—á–∏–ª–∏

### 1. –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –±–æ—Ç–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (—Ç—Ä–µ–Ω–¥/–±–æ–∫–æ–≤–∏–∫/—Ö–∞–æ—Å)
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä –±–∞–ª–∞–Ω—Å–∞ (–º–∞–ª—ã–π/—Å—Ä–µ–¥–Ω–∏–π/–±–æ–ª—å—à–æ–π)
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è Futures
- ‚úÖ –ë–æ–ª–µ–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–±—ã—Å—Ç—Ä–µ–µ, –º–µ–Ω—å—à–µ TP/SL)
- ‚úÖ –ú–µ–Ω—å—à–µ —Å–¥–µ–ª–æ–∫ –≤ —á–∞—Å (–∫–æ–Ω—Ç—Ä–æ–ª—å —Ä–∏—Å–∫–∞)
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ (–º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∏–±—ã–ª–∏)
- ‚úÖ –£—á–µ—Ç –ª–µ–≤–µ—Ä–∏–¥–∂–∞ –∏ –º–∞—Ä–∂–∏

### 3. –ó–∞—â–∏—Ç–∞ –∫–∞–ø–∏—Ç–∞–ª–∞
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –º–∏–Ω–∏–º—É–º—ã –¥–ª—è –º–∞–ª–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø–æ –ø—Ä–æ—Ñ–∏–ª—é
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å Futures –±–æ—Ç–∞ —Å –Ω–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É ARM (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É Balance Profiles (—Ä–∞–∑–º–µ—Ä—ã)
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ
1. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
2. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
3. ‚è≥ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
4. ‚è≥ –°—Ä–∞–≤–Ω–∏—Ç—å —Å Spot –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

## üìå –ò—Ç–æ–≥

**Futures –±–æ—Ç —Ç–µ–ø–µ—Ä—å –£–ù–ò–ö–ê–õ–ï–ù:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ –£–º–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Å–∫–∞–ª—å–ø–∏–Ω–≥–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –∫–∞–ø–∏—Ç–∞–ª–∞

**–ë–æ—Ç —Ç–µ–ø–µ—Ä—å –ù–ï "–≥–ª—É–ø–∞—è" –º–∞—à–∏–Ω–∞, –∞ –ò–ù–¢–ï–õ–õ–ï–ö–¢–£–ê–õ–¨–ù–ê–Ø —Å–∏—Å—Ç–µ–º–∞ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏!** üß†‚ú®


