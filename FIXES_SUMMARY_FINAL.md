# ‚úÖ –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢ –û–ë –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø–•

**–î–∞—Ç–∞:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ WebSocket** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** BTC-USDT –∏ –¥—Ä—É–≥–∏–µ –ø–æ–∑–∏—Ü–∏–∏, –∑–∞–∫—Ä—ã—Ç—ã–µ —á–µ—Ä–µ–∑ WebSocket, –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ CSV.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `performance_tracker` –≤ `WebSocketCoordinator`
- –í `handle_position_closed_via_ws` –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ `TradeResult` –∏ –∑–∞–ø–∏—Å—å –≤ CSV
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –±–∏—Ä–∂–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ PnL, –∫–æ–º–∏—Å—Å–∏–π –∏ funding fees
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è —á–µ—Ä–µ–∑ WebSocket

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`
- `src/strategies/scalping/futures/orchestrator.py`

---

### 2. **–£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fills –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤—Å–µ fills –ª–æ–≥–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ CSV.

**–†–µ—à–µ–Ω–∏–µ:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fills —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `order_executor.py`
- –ö–∞–∂–¥—ã–π fill –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `orders_*.csv` —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

### 3. **–£–ª—É—á—à–µ–Ω —É—á–µ—Ç funding fees** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** Funding fees –Ω–µ –≤—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞–ª–∏—Å—å –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**
- –í `_close_position_by_reason` funding fees —É–∂–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
- –í `handle_position_closed_via_ws` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ funding fees —Å –±–∏—Ä–∂–∏
- Funding fees –≤—ã—á–∏—Ç–∞—é—Ç—Å—è –∏–∑ net_pnl

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —É–ª—É—á—à–µ–Ω–æ –¥–ª—è WebSocket –∑–∞–∫—Ä—ã—Ç–∏–π

---

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –¥–æ –∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ, –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –±—ã–ª –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –î–û –∑–∞–∫—Ä—ã—Ç–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/position_manager.py`

---

### 5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∞—Å—Ç–∏—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è** ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–æ—Å—å.

**–†–µ—à–µ–Ω–∏–µ:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –¥–æ –∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —á–µ—Ä–µ–∑ WebSocket –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–ª—É—á—à–µ–Ω–æ

---

## üìä –ò–¢–û–ì–û–í–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. ‚úÖ –í—Å–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ CSV (–≤–∫–ª—é—á–∞—è WebSocket)
2. ‚úÖ –í—Å–µ fills –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ CSV
3. ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –¥–æ –∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
4. ‚úÖ Funding fees —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

### –¢–æ—á–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö:
1. ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è —Å –±–∏—Ä–∂–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
2. ‚úÖ PnL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –∫–æ–º–∏—Å—Å–∏–π –∏ funding fees
3. ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã ‚Üí –º–æ–Ω–µ—Ç—ã)

---

## üéØ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –ó–ê–ü–£–°–ö–£

### ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
1. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è —á–µ—Ä–µ–∑ WebSocket
2. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fills
3. ‚úÖ –£—á–µ—Ç funding fees
4. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
5. ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

### ‚úÖ –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –Ω–∞ —Å—É—Ç–∫–∏:
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ CSV
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –±–∏—Ä–∂–µ–π
- –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã —Ç–æ—á–Ω—ã–µ

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –ú–û–ù–ò–¢–û–†–ò–ù–ì–ê

1. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å CSV —Ñ–∞–π–ª—ã:**
   - `trades_*.csv` - –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏
   - `orders_*.csv` - –≤—Å–µ –æ—Ä–¥–µ—Ä–∞ –∏ fills
   - `positions_open_*.csv` - –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏

2. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏:**
   - –ò—Å–∫–∞—Ç—å "–ü–û–ó–ò–¶–ò–Ø –ó–ê–ö–†–´–¢–ê" –¥–ª—è –≤—Å–µ—Ö –∑–∞–∫—Ä—ã—Ç–∏–π
   - –ò—Å–∫–∞—Ç—å "FILL" –¥–ª—è –≤—Å–µ—Ö –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–π
   - –ò—Å–∫–∞—Ç—å "Funding Fee" –¥–ª—è —É—á–µ—Ç–∞ funding fees

3. **–°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å –±–∏—Ä–∂–µ–π:**
   - –†–µ–≥—É–ª—è—Ä–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–µ–π
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ PnL
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –ø–æ–∑–∏—Ü–∏–π

---

## ‚úÖ –°–¢–ê–¢–£–°

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã! –ë–æ—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É –Ω–∞ —Å—É—Ç–∫–∏.** üöÄ

