# üí∞ –ê–ù–ê–õ–ò–ó FUNDING FEE: –†–ï–ê–õ–¨–ù–û–ï –í–†–ï–ú–Ø VS –ê–ù–ê–õ–ò–ó

**–î–∞—Ç–∞:** 2025-12-07  
**–í–æ–ø—Ä–æ—Å:** –ù—É–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∞—Ç—å funding fee —Å –±–∏—Ä–∂–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ –∏–ª–∏ –º–æ–∂–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞?

---

## üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç funding fee –≤ OKX:
1. **–í—ã–ø–ª–∞—Ç–∞:** –ö–∞–∂–¥—ã–µ 8 —á–∞—Å–æ–≤ (00:00, 08:00, 16:00 UTC)
2. **–ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ:** Funding fee –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É –≤—ã–ø–ª–∞—Ç–∞–º–∏
3. **API:** OKX –º–æ–∂–µ—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding fee –≤ –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é

### –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- ‚úÖ –ü–æ–ª—É—á–∞–µ–º `fundingFee` –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
- ‚ö†Ô∏è –ï—Å–ª–∏ `fundingFee = 0`, —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ (–µ—â–µ –Ω–µ –≤—ã–ø–ª–∞—á–µ–Ω)
- ‚ö†Ô∏è –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding fee –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–æ –≤—ã–ø–ª–∞—Ç—ã

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### 1. **–î–õ–Ø –†–ï–ê–õ–¨–ù–û–ì–û –í–†–ï–ú–ï–ù–ò (–≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞):**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ–ª—É—á–∞—Ç—å –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥) ‚úÖ
**–ü–ª—é—Å—ã:**
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç funding fee

**–ú–∏–Ω—É—Å—ã:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å `0` –¥–æ –≤—ã–ø–ª–∞—Ç—ã (–∫–∞–∂–¥—ã–µ 8 —á–∞—Å–æ–≤)
- –ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding fee –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ï—Å–ª–∏ OKX API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `fundingFee` –≤ –ø–æ–∑–∏—Ü–∏–∏
- –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π (< 8 —á–∞—Å–æ–≤)
- –ï—Å–ª–∏ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ó–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ funding payments –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è ‚ö†Ô∏è
**–ü–ª—é—Å—ã:**
- –¢–æ—á–Ω—ã–π —É—á–µ—Ç –≤—Å–µ—Ö funding payments
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –≤—ã–ø–ª–∞—Ç—ã –∑–∞ –ø–µ—Ä–∏–æ–¥ —É–¥–µ—Ä–∂–∞–Ω–∏—è

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å
- –ú–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- –ù—É–∂–µ–Ω endpoint –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ funding payments

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (> 8 —á–∞—Å–æ–≤)
- –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
- –ï—Å–ª–∏ OKX API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç endpoint –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

#### –í–∞—Ä–∏–∞–Ω—Ç C: –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ funding rate (–≥–∏–±—Ä–∏–¥–Ω—ã–π) üí°
**–ü–ª—é—Å—ã:**
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ú–æ–∂–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding fee

**–ú–∏–Ω—É—Å—ã:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º (funding rate –º–µ–Ω—è–µ—Ç—Å—è)
- –ù—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è funding rate

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ï—Å–ª–∏ funding rate —Å—Ç–∞–±–∏–ª–µ–Ω
- –î–ª—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏

---

### 2. **–î–õ–Ø –ê–ù–ê–õ–ò–ó–ê (–ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏):**

#### ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø: –ó–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ funding payments
**–ü–ª—é—Å—ã:**
- –¢–æ—á–Ω—ã–π —É—á–µ—Ç –≤—Å–µ—Ö funding payments
- –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–æ–≤
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å
- –ù—É–∂–µ–Ω endpoint –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
funding_history = await client.get_funding_payment_history(
    symbol=symbol,
    start_time=entry_time,
    end_time=exit_time
)
total_funding_fee = sum(payment['amount'] for payment in funding_history)
```

---

## üîç –ü–†–û–í–ï–†–ö–ê OKX API

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. **–ü–æ–∑–∏—Ü–∏—è API:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ª–∏ `fundingFee` –≤ –ø–æ–∑–∏—Ü–∏–∏?
2. **–ò—Å—Ç–æ—Ä–∏—è funding:** –ï—Å—Ç—å –ª–∏ endpoint `/api/v5/account/bills` –∏–ª–∏ `/api/v5/account/funding-rate-history`?
3. **–ù–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding:** –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π funding fee –¥–æ –≤—ã–ø–ª–∞—Ç—ã?

### OKX API Endpoints (–≤–æ–∑–º–æ–∂–Ω—ã–µ):
- `/api/v5/account/bills` - –ò—Å—Ç–æ—Ä–∏—è —Å—á–µ—Ç–æ–≤ (–º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å funding)
- `/api/v5/public/funding-rate` - –¢–µ–∫—É—â–∏–π funding rate
- `/api/v5/public/funding-rate-history` - –ò—Å—Ç–æ—Ä–∏—è funding rates

---

## üí° –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–û–ï –†–ï–®–ï–ù–ò–ï

### –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:
1. **–ü–æ–ø—ã—Ç–∫–∞ 1:** –ü–æ–ª—É—á–∏—Ç—å `fundingFee` –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥) ‚úÖ
2. **–ü–æ–ø—ã—Ç–∫–∞ 2:** –ï—Å–ª–∏ `fundingFee = 0` –∏ –ø–æ–∑–∏—Ü–∏—è > 4 —á–∞—Å–æ–≤, –∑–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é funding payments
3. **Fallback:** –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fundingFee = 0` (–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ)

### –î–ª—è –∞–Ω–∞–ª–∏–∑–∞:
1. **–ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏:** –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é funding payments –∑–∞ –ø–µ—Ä–∏–æ–¥ —É–¥–µ—Ä–∂–∞–Ω–∏—è
2. **–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å PnL:** –° —É—á–µ—Ç–æ–º –≤—Å–µ—Ö funding payments
3. **–°—Ä–∞–≤–Ω–∏—Ç—å:** –° –¥–∞–Ω–Ω—ã–º–∏ –±–∏—Ä–∂–∏ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üìù –ü–õ–ê–ù –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ API (—Å–µ–π—á–∞—Å)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç OKX API –≤ –ø–æ–∑–∏—Ü–∏–∏
- [ ] –ù–∞–π—Ç–∏ endpoint –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ funding payments
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ funding fee

### –≠—Ç–∞–ø 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- [ ] –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `get_funding_payment_history()`
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
- [ ] –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å PnL —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö funding payments
- [ ] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ CSV –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É: –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è > 4 —á–∞—Å–æ–≤ –∏ `fundingFee = 0`
- [ ] –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é funding payments
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `net_pnl` —Å —É—á–µ—Ç–æ–º funding fee

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

1. **Funding fee –≤—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 8 —á–∞—Å–æ–≤:**
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –¥–æ –≤—ã–ø–ª–∞—Ç—ã, `fundingFee = 0` - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
   - –î–ª—è —Ç–æ—á–Ω–æ–≥–æ —É—á–µ—Ç–∞ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è funding payments

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ó–∞–ø—Ä–æ—Å –∏—Å—Ç–æ—Ä–∏–∏ funding payments –º–æ–∂–µ—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –∏–ª–∏ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è

3. **–¢–æ—á–Ω–æ—Å—Ç—å:**
   - –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–∑–∏—Ü–∏–π (< 4 —á–∞—Å–æ–≤) `fundingFee = 0` –æ–±—ã—á–Ω–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
   - –î–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (> 8 —á–∞—Å–æ–≤) –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è funding payments

---

## üéØ –í–´–í–û–î

**–î–ª—è –∞–Ω–∞–ª–∏–∑–∞:** ‚úÖ **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û** - –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é funding payments –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

**–î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:** ‚ö†Ô∏è **–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û** - –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ) –∏–ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –∑–∞—Ç–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### –ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ funding payments:
```python
# –í src/clients/futures_client.py –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥:
async def get_funding_payment_history(
    self,
    symbol: Optional[str] = None,
    start_time: Optional[datetime] = None,
    end_time: Optional[datetime] = None,
    limit: int = 100,
) -> list:
    """
    –ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ funding payments —á–µ—Ä–µ–∑ OKX API endpoint:
    /api/v5/account/bills?type=funding
    """
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
```python
# –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
funding_history = await client.get_funding_payment_history(
    symbol=symbol,
    start_time=entry_time,
    end_time=exit_time
)

# –°—É–º–º–∏—Ä—É–µ–º –≤—Å–µ funding payments
total_funding_fee = sum(
    float(payment.get('bal', 0)) for payment in funding_history
    if payment.get('type') == 'funding'
)

# –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º net_pnl
net_pnl_corrected = gross_pnl - commission - total_funding_fee
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-12-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ú–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

