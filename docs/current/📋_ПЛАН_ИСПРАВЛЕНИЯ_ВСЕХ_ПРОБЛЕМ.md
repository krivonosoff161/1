# üìã –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –í–°–ï–• –ü–†–û–ë–õ–ï–ú

**–î–∞—Ç–∞:** 23.11.2025, 21:25  
**–í—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º:** 8 –∞–∫—Ç–∏–≤–Ω—ã—Ö (6 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö, 2 —Å—Ä–µ–¥–Ω–µ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏) + 2 –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö

---

## üéØ –≠–¢–ê–ü 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ)

### 1.1. –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ BTC-USDT - –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ó–ê–ö–†–´–¢–ò–ï ‚ö†Ô∏è **–ü–†–ò–û–†–ò–¢–ï–¢ #1**

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã—Ç—ã LONG –∏ SHORT –ø–æ–∑–∏—Ü–∏–∏, –±–ª–æ–∫–∏—Ä—É—é—Ç —Ç–æ—Ä–≥–æ–≤–ª—é

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ ~713-720)
- `src/strategies/scalping/futures/orchestrator.py` (–º–µ—Ç–æ–¥ `close_position_manually`)

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –í `signal_coordinator.py`, –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π:
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —É–±—ã—Ç–æ—á–Ω—É—é –ø–æ–∑–∏—Ü–∏—é (–∏–ª–∏ –º–µ–Ω—å—à—É—é –ø—Ä–∏–±—ã–ª—å)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã—Ç—å –æ–¥–Ω—É –∏–∑ –ø–æ–∑–∏—Ü–∏–π
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ

2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_close_opposite_position` –≤ `signal_coordinator.py`:
   ```python
   async def _close_opposite_position(self, symbol: str, positions: List[Dict]) -> None:
       """–ó–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–¥–Ω—É –∏–∑ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π"""
       # –õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è —É–±—ã—Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
   ```

**–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø**

---

### 1.2. ~~–î–æ–ª–≥–æ–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Å–µ - –†–ê–ù–ù–ò–ô –í–´–•–û–î~~ ‚è∏Ô∏è **–û–¢–õ–û–ñ–ï–ù–û**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏–∏ –¥–æ–ª–≥–æ –≤–∏—Å—è—Ç –≤ –º–∏–Ω—É—Å–µ (XRP-USDT 59.9 –º–∏–Ω—É—Ç)

**–†–µ—à–µ–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –∏ –Ω–µ—Ç–æ—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å –ø–æ–∑–∏—Ü–∏—è–º–∏. –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä –ø–æ–∑–∂–µ.

**–°—Ç–∞—Ç—É—Å:** ‚è∏Ô∏è **–û–¢–õ–û–ñ–ï–ù–û** (–±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)

---

### 1.2. –ù–µ–ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π - –£–õ–£–ß–®–ò–¢–¨ –ü–†–û–í–ï–†–ö–ò ‚ö†Ô∏è **–ü–†–ò–û–†–ò–¢–ï–¢ #2**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –∏–∑-–∑–∞ race condition

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py`
- `src/strategies/scalping/futures/orchestrator.py`

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–∑–∏—Ü–∏–∏ **–ü–ï–†–ï–î** –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–∞
2. –£–ª—É—á—à–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å –±–∏—Ä–∂–µ–π:
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å `active_positions_ref` –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `asyncio.Lock` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è race condition

3. –î–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ —Å–∏–º–≤–æ–ª–∞–º:
   ```python
   # –í signal_coordinator.py, –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Å–∏–≥–Ω–∞–ª–∞:
   if symbol not in self.signal_locks:
       self.signal_locks[symbol] = asyncio.Lock()
   
   async with self.signal_locks[symbol]:
       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π
       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
       # –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
   ```

**–í—Ä–µ–º—è:** ~40 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**

---

### 1.3. FastADX.calculate() –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - –ò–°–ü–†–ê–í–ò–¢–¨ –ú–ï–¢–û–î

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ `calculate()`

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/position_manager.py` (—Å—Ç—Ä–æ–∫–∞ ~1894)

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ó–∞–º–µ–Ω–∏—Ç—å `fast_adx.calculate(market_data.ohlcv_data)` –Ω–∞:
   ```python
   # –û–±–Ω–æ–≤–ª—è–µ–º FastADX —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–≤–µ—á–µ–π
   for candle in market_data.ohlcv_data:
       fast_adx.update(high=candle.high, low=candle.low, close=candle.close)
   # –ü–æ–ª—É—á–∞–µ–º ADX –∑–Ω–∞—á–µ–Ω–∏–µ
   adx_value = fast_adx.get_current_adx()
   ```

**–í—Ä–µ–º—è:** ~10 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**

---

### 1.4. Partial TP –æ—à–∏–±–∫–∏ - –ü–†–û–í–ï–†–ö–ê –ú–ò–ù–ò–ú–ê–õ–¨–ù–û–ì–û –†–ê–ó–ú–ï–†–ê

**–ü—Ä–æ–±–ª–µ–º–∞:** 193 –æ—à–∏–±–∫–∏ –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–∫—Ä—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫—É—é —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/position_manager.py` (—Å—Ç—Ä–æ–∫–∞ ~1858)
- `src/clients/futures_client.py` (–º–µ—Ç–æ–¥ `get_min_order_size`)

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–µ—Ä–µ–¥ Partial TP:
   ```python
   # –í _check_tp_only, –ø–µ—Ä–µ–¥ Partial TP:
   min_size = await self.client.get_min_order_size(symbol)
   if partial_size < min_size:
       logger.debug(f"‚ö†Ô∏è Partial TP –ø—Ä–æ–ø—É—â–µ–Ω: —Ä–∞–∑–º–µ—Ä {partial_size} < –º–∏–Ω–∏–º—É–º–∞ {min_size}")
       return False
   ```

2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `get_min_order_size` –≤ `futures_client.py` (–µ—Å–ª–∏ –Ω–µ—Ç)

**–í—Ä–µ–º—è:** ~20 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**

---

### 1.5. –û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ - –£–õ–£–ß–®–ò–¢–¨ –†–ê–°–ß–ï–¢

**–ü—Ä–æ–±–ª–µ–º–∞:** 386 –æ—à–∏–±–æ–∫ –∏–∑-–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –º–µ–Ω—å—à–µ –º–∏–Ω–∏–º—É–º–∞ –±–∏—Ä–∂–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/clients/futures_client.py` (—Å—Ç—Ä–æ–∫–∞ ~778)
- `src/strategies/scalping/futures/risk_manager.py`

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –≤ `risk_manager.py`:
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥ —Ä–∞—Å—á–µ—Ç–æ–º
   - –£–≤–µ–ª–∏—á–∏—Ç—å –±–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è BTC-USDT

2. –£–ª—É—á—à–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `futures_client.py`:
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –æ—Ä–¥–µ—Ä–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –¥–æ –º–∏–Ω–∏–º—É–º–∞ (–∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å)

**–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** üî¥ **–í–´–°–û–ö–ê–Ø**

---

### 1.6. –û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ TrailingSLCoordinator

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å f-string

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/coordinators/trailing_sl_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ ~562)

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π f-string:
   ```python
   # –í–ú–ï–°–¢–û:
   f"ADX={trend_analysis['adx']:.2f if trend_analysis['adx'] else 'N/A'}, "
   
   # –î–û–õ–ñ–ù–û –ë–´–¢–¨:
   adx_val = trend_analysis.get('adx')
   adx_str = f"{adx_val:.2f}" if adx_val is not None else 'N/A'
   f"ADX={adx_str}, "
   ```

**–í—Ä–µ–º—è:** ~5 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è **–°–†–ï–î–ù–Ø–Ø** (–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)

---

## üéØ –≠–¢–ê–ü 2: –ü–†–û–ë–õ–ï–ú–´ –°–†–ï–î–ù–ï–ô –ö–†–ò–¢–ò–ß–ù–û–°–¢–ò (–ü–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö)

### 2.1. –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–±–∏–≤–∞—é—Ç –æ—á–µ—Ä–µ–¥—å - –õ–û–ì–ò–ö–ê –ó–ê–ú–ï–ù–´/–£–í–ï–õ–ò–ß–ï–ù–ò–Ø

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–º–µ–Ω—ã –ø–æ–∑–∏—Ü–∏–∏:
   - –ï—Å–ª–∏ —Å–∏–≥–Ω–∞–ª –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ‚Üí —É–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é (–∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
   - –ï—Å–ª–∏ —Å–∏–≥–Ω–∞–ª –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ‚Üí –∑–∞–∫—Ä—ã—Ç—å —Å—Ç–∞—Ä—É—é, –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—É—é

2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_should_replace_position`:
   ```python
   def _should_replace_position(self, current_pos_side: str, signal_side: str) -> bool:
       """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é"""
       return current_pos_side != signal_side
   ```

**–í—Ä–µ–º—è:** ~30 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è **–°–†–ï–î–ù–Ø–Ø**

---

### 2.2. ~~–ì–ª—É–±–æ–∫–∏–π –º–∏–Ω—É—Å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º - –ö–û–ú–ë–ò–ù–ò–†–û–í–ê–ù–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê~~ ‚è∏Ô∏è **–û–¢–õ–û–ñ–ï–ù–û**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏–∏ —É—Ö–æ–¥—è—Ç —Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫–æ –≤ –º–∏–Ω—É—Å –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–±–ª–µ–º–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫ –∏ –Ω–µ—Ç–æ—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å –ø–æ–∑–∏—Ü–∏—è–º–∏. –†–∞–∑–≤–æ—Ä–æ—Ç –ø–æ–∑–∏—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –Ω–µ–≤—ã–≥–æ–¥–µ–Ω, –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å. –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä –ø–æ–∑–∂–µ.

**–°—Ç–∞—Ç—É—Å:** ‚è∏Ô∏è **–û–¢–õ–û–ñ–ï–ù–û** (–±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)

---

### 2.3. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∞—Ä–∂–∏ - –£–õ–£–ß–®–ò–¢–¨ –†–ê–°–ß–ï–¢–´

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –º–∞—Ä–∂–∏

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/modules/liquidation_guard.py` (—Å—Ç—Ä–æ–∫–∞ ~310)
- `src/strategies/scalping/futures/position_manager.py` (—Å—Ç—Ä–æ–∫–∞ ~600)

**–ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
1. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –ø–µ—Ä–µ–¥ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –º–∞—Ä–∂–∏ (5-10 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è)
2. –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã –º–∞—Ä–∂–∏ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
3. –£–º–µ–Ω—å—à–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π (–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ)

**–í—Ä–µ–º—è:** ~20 –º–∏–Ω—É—Ç  
**–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è **–ù–ò–ó–ö–ê–Ø**

---

## üìä –û–ë–©–ò–ô –ü–õ–ê–ù –í–´–ü–û–õ–ù–ï–ù–ò–Ø (–û–ë–ù–û–í–õ–ï–ù–û)

### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (2-2.5 —á–∞—Å–∞)

1. ‚úÖ **–ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏** (30 –º–∏–Ω) - –ü–†–ò–û–†–ò–¢–ï–¢ #1
2. ‚úÖ **–ù–µ–ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è** (40 –º–∏–Ω) - –ü–†–ò–û–†–ò–¢–ï–¢ #2
3. ‚úÖ **FastADX.calculate()** (10 –º–∏–Ω)
4. ‚úÖ **Partial TP –æ—à–∏–±–∫–∏** (20 –º–∏–Ω)
5. ‚úÖ **–û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏** (30 –º–∏–Ω)
6. ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TrailingSLCoordinator** (5 –º–∏–Ω)

**–ò—Ç–æ–≥–æ –§–∞–∑–∞ 1:** ~2.2 —á–∞—Å–∞

### –§–∞–∑–∞ 2: –°—Ä–µ–¥–Ω–µ–π –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏ (0.8 —á–∞—Å–∞)

7. ‚ö†Ô∏è **–ü–æ–∑–∏—Ü–∏–∏ –∑–∞–±–∏–≤–∞—é—Ç –æ—á–µ—Ä–µ–¥—å** (30 –º–∏–Ω)
8. ‚ö†Ô∏è **–ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∞—Ä–∂–∏** (20 –º–∏–Ω)

**–ò—Ç–æ–≥–æ –§–∞–∑–∞ 2:** ~0.8 —á–∞—Å–∞

### –§–∞–∑–∞ 3: –û—Ç–ª–æ–∂–µ–Ω–æ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)

‚è∏Ô∏è **–î–æ–ª–≥–æ–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –º–∏–Ω—É—Å–µ** - –æ—Ç–ª–æ–∂–µ–Ω–æ (–ø—Ä–æ–±–ª–µ–º–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫)  
‚è∏Ô∏è **–ì–ª—É–±–æ–∫–∏–π –º–∏–Ω—É—Å** - –æ—Ç–ª–æ–∂–µ–Ω–æ (–ø—Ä–æ–±–ª–µ–º–∞ –∏–∑-–∑–∞ –æ—à–∏–±–æ–∫)  
üìã **–ù–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä** - –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫

### –§–∞–∑–∞ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 —á–∞—Å–∞)

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ò—Ç–æ–≥–æ –§–∞–∑–∞ 3:** ~1.5 —á–∞—Å–∞

---

## üéØ –û–ë–©–ï–ï –í–†–ï–ú–Ø

- **–§–∞–∑–∞ 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ):** ~2.2 —á–∞—Å–∞
- **–§–∞–∑–∞ 2 (–°—Ä–µ–¥–Ω–∏–µ):** ~0.8 —á–∞—Å–∞
- **–§–∞–∑–∞ 3 (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ):** ~1.5 —á–∞—Å–∞

**–í–°–ï–ì–û (–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏):** ~4.5 —á–∞—Å–∞

**–û—Ç–ª–æ–∂–µ–Ω–æ:** 
- ‚è∏Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –≥–ª—É–±–æ–∫–∏–º –º–∏–Ω—É—Å–æ–º (–ø—Ä–∏—á–∏–Ω–∞ - –æ—à–∏–±–∫–∏ –∏ –Ω–µ—Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- üìã –ù–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)

---

## ‚úÖ –ü–û–†–Ø–î–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å 2 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (1.2 —á–∞—Å–∞)
1. –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (30 –º–∏–Ω) - –ü–†–ò–û–†–ò–¢–ï–¢ #1
2. –ù–µ–ø–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è (40 –º–∏–Ω) - –ü–†–ò–û–†–ò–¢–ï–¢ #2

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ (1 —á–∞—Å)
3. FastADX.calculate() (10 –º–∏–Ω)
4. Partial TP –æ—à–∏–±–∫–∏ (20 –º–∏–Ω)
5. –û—à–∏–±–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (30 –º–∏–Ω)
6. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TrailingSLCoordinator (5 –º–∏–Ω)

### –®–∞–≥ 3: –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É (0.8 —á–∞—Å–∞)
7. –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–±–∏–≤–∞—é—Ç –æ—á–µ—Ä–µ–¥—å (30 –º–∏–Ω)
8. –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∞—Ä–∂–∏ (20 –º–∏–Ω)

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1.5 —á–∞—Å–∞)
- –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
- –ó–∞–ø—É—Å–∫ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –±–∞–ª–∞–Ω—Å–µ

### –®–∞–≥ 5: –û—Ç–ª–æ–∂–µ–Ω–æ (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)
‚è∏Ô∏è –ü—Ä–æ–±–ª–µ–º—ã —Å –≥–ª—É–±–æ–∫–∏–º –º–∏–Ω—É—Å–æ–º (–æ—Ç–ª–æ–∂–µ–Ω—ã, –ø—Ä–∏—á–∏–Ω–∞ - –æ—à–∏–±–∫–∏ –∏ –Ω–µ—Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)  
üìã –ù–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä (–±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫)

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –°–£–¢–û–ß–ù–û–ú–£ –ó–ê–ü–£–°–ö–£

**–ü–æ—Å–ª–µ –§–∞–∑—ã 1:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–æ–≤–æ–º—É –∑–∞–ø—É—Å–∫—É  
**–ü–æ—Å–ª–µ –§–∞–∑—ã 2:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∫–æ—Ä–æ—Ç–∫–æ–º—É –∑–∞–ø—É—Å–∫—É (4-6 —á–∞—Å–æ–≤)  
**–ü–æ—Å–ª–µ –§–∞–∑—ã 3:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ —Å—É—Ç–æ—á–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É

---

## üìù –í–ê–ñ–ù–û–ï –ó–ê–ú–ï–ß–ê–ù–ò–ï

**–ü—Ä–æ–±–ª–µ–º—ã —Å –≥–ª—É–±–æ–∫–∏–º –º–∏–Ω—É—Å–æ–º:**
- –ü—Ä–æ–±–ª–µ–º–∞ –∏–∑-–∑–∞ **–æ—à–∏–±–æ–∫ –∏ –Ω–µ—Ç–æ—á–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
- –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ —Å–∞–º–∏ —Ä–∞–∑–±–µ—Ä—É—Ç—Å—è
- **–†–∞–∑–≤–æ—Ä–æ—Ç –ø–æ–∑–∏—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é –Ω–µ–≤—ã–≥–æ–¥–µ–Ω** (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- –í–æ–∑–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏–º –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å/—Ñ–∏–ª—å—Ç—Ä –ø–æ–∑–∂–µ

**–§–æ–∫—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∞ –Ω–µ —Ä–∞–±–æ—Ç–∞ —Å –≥–ª—É–±–æ–∫–∏–º –º–∏–Ω—É—Å–æ–º –Ω–∞–ø—Ä—è–º—É—é

---

**–î–∞—Ç–∞:** 23.11.2025, 21:30  
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** –£–±—Ä–∞–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –≥–ª—É–±–æ–∫–∏–º –º–∏–Ω—É—Å–æ–º (–æ—Ç–ª–æ–∂–µ–Ω—ã, –ø—Ä–∏—á–∏–Ω–∞ - –æ—à–∏–±–∫–∏ –∏ –Ω–µ—Ç–æ—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

