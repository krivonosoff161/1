# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π (30.11.2025)

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –∑–∞–∫—Ä—ã–≤–∞–ª —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ **—Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ** (—á–µ—Ä–µ–∑ 10-30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è) –ø–æ `profit_drawdown`, –¥–∞–∂–µ –µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è –≤—Å–µ–≥–æ –Ω–∞ **$0.01-0.05**.

### –ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:

1. **ETH-USDT SHORT** (07:27:04 ‚Üí 07:27:19, 15 —Å–µ–∫—É–Ω–¥):
   - –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.2374` –¥–æ `$-0.2979` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.06)
   - –ó–∞–∫—Ä—ã—Ç–æ –ø–æ `profit_drawdown`

2. **XRP-USDT SHORT** (07:25:53 ‚Üí 07:26:30, 37 —Å–µ–∫—É–Ω–¥):
   - –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.2944` –¥–æ `$-0.3664` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.07)
   - –ó–∞–∫—Ä—ã—Ç–æ –ø–æ `profit_drawdown`

3. **ETH-USDT SHORT** (07:27:41 ‚Üí 07:28:12, 31 —Å–µ–∫—É–Ω–¥):
   - –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.2374` –¥–æ `$-0.2979` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.06)
   - –ó–∞–∫—Ä—ã—Ç–æ –ø–æ `profit_drawdown`

---

## üîç –ü—Ä–∏—á–∏–Ω–∞

### –õ–æ–≥–∏–∫–∞ Profit Drawdown –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π:

**–ë–´–õ–û:**
```python
if peak_profit < 0:
    if net_pnl < peak_profit:
        # –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ù–ï–ú–ï–î–õ–ï–ù–ù–û
        return True
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚ùå –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
2. ‚ùå –ù–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É–±—ã—Ç–∫–∞
3. ‚ùå –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —É–±—ã—Ç–∫–∞ –Ω–∞ $0.01

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ –∑–∞—â–∏—Ç—ã:

#### 1. **–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞–∫—Ä—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π**

```python
min_holding_for_loss_drawdown = 60.0  # 60 —Å–µ–∫—É–Ω–¥
if time_since_open < min_holding_for_loss_drawdown:
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º profit_drawdown –¥–ª—è –ø–æ–∑–∏—Ü–∏–π, –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–µ–Ω–µ–µ 60 —Å–µ–∫—É–Ω–¥
    return False
```

**–ó–∞—á–µ–º:**
- –ü–æ–∑–∏—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è
- –ü–µ—Ä–≤—ã–µ 60 —Å–µ–∫—É–Ω–¥ - —ç—Ç–æ –≤—Ä–µ–º—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π —Ü–µ–Ω—ã (—Å–ø—Ä–µ–¥, –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ)
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π –∏–∑-–∑–∞ —à—É–º–∞ —Ä—ã–Ω–∫–∞

---

#### 2. **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É–±—ã—Ç–∫–∞**

```python
loss_increase = abs(net_pnl - peak_profit)  # –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —É–±—ã—Ç–∫–∞
min_loss_increase_usd = max(0.10, position_value * 0.005)  # 0.5% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ $0.10

if loss_increase < min_loss_increase_usd:
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–∫—Ä—ã—Ç–∏–µ, –µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è –º–µ–Ω–µ–µ —á–µ–º –Ω–∞ –ø–æ—Ä–æ–≥
    return False
```

**–ó–∞—á–µ–º:**
- –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —É–±—ã—Ç–∫–∞ –Ω–∞ –∫–æ–ø–µ–π–∫–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥: **0.5% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏** –∏–ª–∏ **$0.10** (—á—Ç–æ –±–æ–ª—å—à–µ)
- –î–ª—è –ø–æ–∑–∏—Ü–∏–∏ $165 ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ = $0.83 (0.5% –æ—Ç $165)
- –î–ª—è –ø–æ–∑–∏—Ü–∏–∏ $30 ‚Üí –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ = $0.10 (–º–∏–Ω–∏–º—É–º)

---

## üìä –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

### –î–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π Profit Drawdown —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –¢–û–õ–¨–ö–û –µ—Å–ª–∏:

1. ‚úÖ –ü–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ **–±–æ–ª–µ–µ 60 —Å–µ–∫—É–Ω–¥**
2. ‚úÖ –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è **–±–æ–ª–µ–µ —á–µ–º –Ω–∞ 0.5% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏** (–∏–ª–∏ $0.10)
3. ‚úÖ –¢–µ–∫—É—â–∏–π —É–±—ã—Ç–æ–∫ –±–æ–ª—å—à–µ (–ø–æ –º–æ–¥—É–ª—é) —á–µ–º `peak_profit_usd`

### –ü—Ä–∏–º–µ—Ä—ã:

**–ü—Ä–∏–º–µ—Ä 1: –ü–æ–∑–∏—Ü–∏—è $165, –æ—Ç–∫—Ä—ã—Ç–∞ 30 —Å–µ–∫—É–Ω–¥**
- –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.20` –¥–æ `$-0.30` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.10)
- ‚ùå **–ù–ï –ó–ê–ö–†–û–ï–¢** - –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –º–µ–Ω–µ–µ 60 —Å–µ–∫—É–Ω–¥

**–ü—Ä–∏–º–µ—Ä 2: –ü–æ–∑–∏—Ü–∏—è $165, –æ—Ç–∫—Ä—ã—Ç–∞ 90 —Å–µ–∫—É–Ω–¥**
- –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.20` –¥–æ `$-0.25` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.05)
- ‚ùå **–ù–ï –ó–ê–ö–†–û–ï–¢** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —É–±—ã—Ç–∫–∞ ($0.05) < –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ ($0.83)

**–ü—Ä–∏–º–µ—Ä 3: –ü–æ–∑–∏—Ü–∏—è $165, –æ—Ç–∫—Ä—ã—Ç–∞ 90 —Å–µ–∫—É–Ω–¥**
- –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.20` –¥–æ `$-1.00` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.80)
- ‚ùå **–ù–ï –ó–ê–ö–†–û–ï–¢** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —É–±—ã—Ç–∫–∞ ($0.80) < –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä–æ–≥–∞ ($0.83)

**–ü—Ä–∏–º–µ—Ä 4: –ü–æ–∑–∏—Ü–∏—è $165, –æ—Ç–∫—Ä—ã—Ç–∞ 90 —Å–µ–∫—É–Ω–¥**
- –£–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è —Å `$-0.20` –¥–æ `$-1.10` (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ = $0.90)
- ‚úÖ **–ó–ê–ö–†–û–ï–¢** - –≤—Å–µ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (–≤—Ä–µ–º—è > 60—Å, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ > $0.83)

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –≤ –ø–µ—Ä–≤—ã–µ 60 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è
2. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —É–±—ã—Ç–∫–∞ –Ω–∞ –∫–æ–ø–µ–π–∫–∏
3. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è –∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
4. ‚úÖ Profit Drawdown –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ **—Ä–µ–∞–ª—å–Ω–æ–º** —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —É–±—ã—Ç–∫–∞

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ú–µ—Ç–æ–¥:** `_check_profit_drawdown`

**–°—Ç—Ä–æ–∫–∏:** 3872-3920

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø–æ–∑–∏—Ü–∏–∏ (–º–∏–Ω–∏–º—É–º 60 —Å–µ–∫—É–Ω–¥)
- –î–æ–±–∞–≤–ª–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É–±—ã—Ç–∫–∞ (0.5% –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏–ª–∏ $0.10)
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## ‚úÖ –ò—Ç–æ–≥

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** Profit Drawdown –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª–µ–µ —Ä–∞–∑—É–º–Ω–æ:

- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É–±—ã—Ç–∫–∞
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –∏–º–µ—é—Ç –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è
- ‚úÖ –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

**–ü–æ–∑–∏—Ü–∏–∏ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ 10-30 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è!** üéâ





