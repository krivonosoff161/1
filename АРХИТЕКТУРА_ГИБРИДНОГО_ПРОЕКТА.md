# ๐๏ธ ะะะะะะฏ ะะะฅะะขะะะขะฃะะ ะะะะะะะะะะ ะะะะะะขะ

## ๐ ะกะขะะฃะะขะฃะะ ะะะะะะขะ (ะะพัะฝะตะฒะฐั ะฟะฐะฟะบะฐ)

```
simple-trading-bot-okx/          # ะะพัะฝะตะฒะฐั ะฟะฐะฟะบะฐ
โ
โโโ ๐ src/                      # ะััะพะดะฝัะน ะบะพะด (ะณะปะฐะฒะฝะฐั ะฟะฐะฟะบะฐ)
โ   โโโ ๐ __init__.py
โ   โโโ ๐ main.py              # ๐ฏ ะขะพัะบะฐ ะฒัะพะดะฐ (ะทะฐะฟััะบ ะฑะพัะฐ)
โ   โโโ ๐ config.py            # โ๏ธ ะะฐััะธะฝะณ YAML ะบะพะฝัะธะณััะฐัะธะธ
โ   โโโ ๐ models.py            # ๐ฆ ะะพะดะตะปะธ ะดะฐะฝะฝัั (Position, Signal, Tick)
โ   โโโ ๐ okx_client.py        # ๐ OKX REST API ะบะปะธะตะฝั
โ   โ
โ   โโโ ๐ strategies/          # ๐ฏ ะขะะะะะะซะ ะกะขะะะขะะะะ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ base_strategy.py        # ๐๏ธ ะะฐะทะพะฒัะน ะบะปะฐัั ะดะปั ะฒัะตั ัััะฐัะตะณะธะน
โ   โ   โโโ ๐ scalping_engine.py      # ๐ ะะฒะธะถะพะบ ัะบะฐะปัะฟะธะฝะณะฐ (ะธะท ัะตะบััะตะณะพ scalping.py)
โ   โ   โโโ ๐ grid_engine.py          # ๐ ะะฒะธะถะพะบ Grid Trading (ะฝะพะฒัะน)
โ   โ   โโโ ๐ hybrid_orchestrator.py  # ๐ฎ ะัะบะตัััะฐัะพั (ะฟะตัะตะบะปััะฐะตั ัะตะถะธะผั)
โ   โ   โ
โ   โ   โโโ ๐ modules/                # โจ ะะะะฃะะ ะฃะะฃะงะจะะะะ (Phase 1-2)
โ   โ       โโโ ๐ __init__.py
โ   โ       โโโ ๐ multi_timeframe.py      # โฑ๏ธ Multi-timeframe ะฟะพะดัะฒะตัะถะดะตะฝะธะต
โ   โ       โโโ ๐ correlation_filter.py   # ๐ ะคะธะปััั ะบะพััะตะปััะธะธ ะฐะบัะธะฒะพะฒ
โ   โ       โโโ ๐ time_filter.py          # ๐ Time-based ัะธะปััั (ััะฐัะธััะธะบะฐ ะฟะพ ัะฐัะฐะผ)
โ   โ       โโโ ๐ pivot_points.py         # ๐ Pivot Points ัะฐััะตั ะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต
โ   โ       โโโ ๐ order_book_analyzer.py  # ๐ ะะฝะฐะปะธะท ะพัะดะตั ะฑัะบะฐ (imbalance)
โ   โ       โโโ ๐ liquidity_zones.py      # ๐ง ะะพะธัะบ ะทะพะฝ ะปะธะบะฒะธะดะฝะพััะธ
โ   โ
โ   โโโ ๐ indicators/          # ๐ ะขะะฅะะะงะะกะะะ ะะะะะะะขะะะซ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ base.py                 # ๐๏ธ ะะฐะทะพะฒัะต ะธะฝะดะธะบะฐัะพัั (ัะตะบััะธะต: RSI, SMA, EMA, BB, ATR, MACD, Volume)
โ   โ   โ
โ   โ   โโโ ๐ advanced/               # โจ ะะะะะะะะฃะขะซะ ะะะะะะะขะะะซ
โ   โ       โโโ ๐ __init__.py
โ   โ       โโโ ๐ volume_profile.py       # ๐ Volume Profile ะฐะฝะฐะปะธะท (VPOC, Value Area)
โ   โ       โโโ ๐ pivot_calculator.py     # ๐ ะะฐััะตั Pivot Points (Standard/Fibonacci/Camarilla)
โ   โ       โโโ ๐ adaptive_indicators.py  # ๐ ะะดะฐะฟัะธะฒะฝัะต ะฒะตััะธะธ RSI/MACD (ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ   โ
โ   โโโ ๐ filters/              # ๐ก๏ธ ะคะะะฌะขะะซ ะ ะะะขะะะขะะะซ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ regime_detector.py         # ๐ ะฃะปัััะตะฝะฝัะน ะดะตัะตะบัะพั ัะตะถะธะผะพะฒ (5 ัะตะถะธะผะพะฒ)
โ   โ   โโโ ๐ correlation_manager.py     # ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพััะตะปััะธะตะน ะผะตะถะดั ะฐะบัะธะฒะฐะผะธ
โ   โ   โโโ ๐ time_session_manager.py    # ๐ ะฃะฟัะฐะฒะปะตะฝะธะต ัะพัะณะพะฒัะผะธ ัะตััะธัะผะธ + ััะฐัะธััะธะบะฐ
โ   โ   โโโ ๐ spread_filter.py           # ๐ธ ะคะธะปััั ัะฟัะตะดะฐ (ัะถะต ะตััั ะฒ ะบะพะดะต, ะฒัะดะตะปัะตะผ)
โ   โ
โ   โโโ ๐ risk/                 # ๐ก๏ธ ะฃะะะะะะะะะ ะะะกะะะะ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ position_sizer.py          # ๐ฐ ะะฐััะตั ัะฐะทะผะตัะฐ ะฟะพะทะธัะธะธ (Fixed + Kelly)
โ   โ   โโโ ๐ risk_calculator.py         # ๐ ะะฐััะตั ัะธัะบะพะฒ (ัะตะบััะธะน + ะฝะพะฒัะน)
โ   โ   โโโ ๐ portfolio_monitor.py       # ๐๏ธ ะะพะฝะธัะพัะธะฝะณ ะฟะพัััะตะปั (correlation, exposure)
โ   โ
โ   โโโ ๐ ml/                   # ๐ค ะะะจะะะะะ ะะะฃะงะะะะ (Phase 3, ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ rl_environment.py          # ๐ฎ ะกัะตะดะฐ ะดะปั RL ะฐะณะตะฝัะฐ
โ   โ   โโโ ๐ rl_agent.py                # ๐ง Reinforcement Learning ะฐะณะตะฝั
โ   โ   โโโ ๐ model_trainer.py           # ๐ ะะฑััะตะฝะธะต ะผะพะดะตะปะตะน
โ   โ
โ   โโโ ๐ utils/                # ๐ง ะฃะขะะะะขะซ
โ   โ   โโโ ๐ __init__.py
โ   โ   โโโ ๐ feature_flags.py           # ๐๏ธ Feature Flags (ะฒะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะผะพะดัะปะตะน)
โ   โ   โโโ ๐ helpers.py                 # ๐๏ธ ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ
โ   โ   โโโ ๐ validators.py              # โ ะะฐะปะธะดะฐัะพัั ะดะฐะฝะฝัั
โ   โ
โ   โโโ ๐ web/                  # ๐ WEB ะะะขะะะคะะะก (ะพะฟัะธะพะฝะฐะปัะฝะพ, Phase 4+)
โ       โโโ ๐ __init__.py
โ       โโโ ๐ app.py                     # ๐ FastAPI ะฟัะธะปะพะถะตะฝะธะต
โ       โโโ ๐ routes/
โ       โ   โโโ ๐ health.py              # ๐ /health endpoint
โ       โ   โโโ ๐ status.py              # ๐ /status endpoint
โ       โ   โโโ ๐ control.py             # ๐ฎ /start, /stop, /emergency
โ       โโโ ๐ static/
โ           โโโ ๐ dashboard.html         # ๐บ ะัะพััะพะน HTML dashboard
โ
โโโ ๐ config/                   # โ๏ธ ะะะะคะะะฃะะะฆะะฏ
โ   โโโ ๐ config.yaml                    # ๐๏ธ ะัะฝะพะฒะฝะฐั ะบะพะฝัะธะณััะฐัะธั
โ   โโโ ๐ config.demo.yaml               # ๐งช ะะฐัััะพะนะบะธ ะดะปั demo
โ   โโโ ๐ config.prod.yaml               # ๐ ะะฐัััะพะนะบะธ ะดะปั production
โ   โโโ ๐ features.yaml                  # ๐๏ธ Feature Flags (ะบะฐะบะธะต ะผะพะดัะปะธ ะฒะบะปััะตะฝั)
โ
โโโ ๐ data/                     # ๐พ ะะะะะซะ
โ   โโโ ๐ historical/                    # ๐ ะััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต ะดะปั ะฑัะบัะตััะฐ
โ   โโโ ๐ cache/                         # ๐๏ธ ะัั (ัะฒะตัะธ, ะธะฝะดะธะบะฐัะพัั)
โ   โโโ ๐ trading_bot.db                 # ๐๏ธ SQLite ะฑะฐะทะฐ (ัะดะตะปะบะธ, ััะฐัะธััะธะบะฐ)
โ
โโโ ๐ logs/                     # ๐ ะะะะ
โ   โโโ ๐ trading_bot_YYYY-MM-DD.log     # ๐ ะัะฝะพะฒะฝะพะน ะปะพะณ
โ   โโโ ๐ errors_YYYY-MM-DD.log          # โ ะัะธะฑะบะธ
โ   โโโ ๐ trades_YYYY-MM-DD.log          # ๐ฐ ะััะพัะธั ัะดะตะปะพะบ
โ
โโโ ๐ backups/                  # ๐พ ะะะะะะะะซะ ะะะะะ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ   โโโ ๐ state_YYYYMMDD_HHMMSS.json     # ๐ธ ะกะฝะธะผะบะธ ัะพััะพัะฝะธั
โ   โโโ ๐ db_backup_YYYYMMDD.db          # ๐๏ธ Backup ะฑะฐะทั ะดะฐะฝะฝัั
โ
โโโ ๐ tests/                    # ๐งช ะขะะกะขะซ (ะดะพะฑะฐะฒะธะผ ะฟะพะทะถะต)
โ   โโโ ๐ __init__.py
โ   โโโ ๐ unit/                          # ๐ฌ Unit ัะตััั
โ   โ   โโโ ๐ test_scalping_engine.py
โ   โ   โโโ ๐ test_grid_engine.py
โ   โ   โโโ ๐ test_multi_timeframe.py
โ   โ   โโโ ๐ test_indicators.py
โ   โโโ ๐ integration/                   # ๐ Integration ัะตััั
โ   โ   โโโ ๐ test_okx_connection.py
โ   โ   โโโ ๐ test_hybrid_orchestrator.py
โ   โโโ ๐ backtest/                      # ๐ ะัะบัะตััะธะฝะณ
โ       โโโ ๐ test_historical_strategy.py
โ
โโโ ๐ scripts/                  # ๐ง ะกะะะะะขะซ ะฃะขะะะะข
โ   โโโ ๐ collect_statistics.py          # ๐ ะกะฑะพั ััะฐัะธััะธะบะธ ะดะปั Time Filter
โ   โโโ ๐ optimize_parameters.py         # ๐ฏ ะะฟัะธะผะธะทะฐัะธั ะฟะฐัะฐะผะตััะพะฒ
โ   โโโ ๐ backtest_runner.py             # ๐ ะะฐะฟััะบ ะฑัะบัะตััะฐ
โ   โโโ ๐ generate_report.py             # ๐ ะะตะฝะตัะฐัะธั ะพััะตัะพะฒ
โ
โโโ ๐ docs/                     # ๐ ะะะะฃะะะะขะะฆะะฏ
โ   โโโ ๐ ะะะฃะะะะะ_ะะะะะะ_ะกะขะะะขะะะะ.md
โ   โโโ ๐ ะะะะฆะะะฆะะฏ_ะะะะะะะะะะ_ะะะขะ.md
โ   โโโ ๐ ะะะขะะะฌะะะ_ะะะะกะะะะ_ะะะะฃะะะ.md
โ   โโโ ๐ ะะะะ_ะะะะะะะะะะฆะะ_ะกะขะะะขะะะะ.md
โ   โโโ ๐ ะกะะะะะะะะ_ะะะฃะฅ_ะะะะะะขะะ.md
โ   โโโ ๐ ะะะฅะะขะะะขะฃะะ_ะะะะะะะะะะ_ะะะะะะขะ.md  # โ ะญัะพั ัะฐะนะป!
โ
โโโ ๐ .env                      # ๐ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะะ ะฒ Git!)
โโโ ๐ .env.example              # ๐ ะัะธะผะตั .env
โโโ ๐ .gitignore                # ๐ซ ะัะบะปััะตะฝะธั Git
โโโ ๐ requirements.txt          # ๐ฆ Python ะทะฐะฒะธัะธะผะพััะธ
โโโ ๐ config.yaml               # โ๏ธ ะัะฝะพะฒะฝะฐั ะบะพะฝัะธะณััะฐัะธั (ัะธะผะปะธะฝะบ ะฝะฐ config/config.yaml)
โโโ ๐ README.md                 # ๐ ะัะฝะพะฒะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั
โโโ ๐ run_bot.py                # โถ๏ธ ะะฐะฟััะบ ะฑะพัะฐ (ะฟัะพััะพะน)
โโโ ๐ start_bot.bat             # ๐ช ะะฐะฟััะบ ะดะปั Windows
โโโ ๐ stop_bot.bat              # โ ะััะฐะฝะพะฒะบะฐ ะดะปั Windows
```

---

## ๐ ะะะขะะะฌะะะ ะะะะกะะะะ ะะะะะะ ะะะะะ

### ๐ `src/` - ะััะพะดะฝัะน ะบะพะด

ะะปะฐะฒะฝะฐั ะฟะฐะฟะบะฐ ั ะบะพะดะพะผ ะฑะพัะฐ.

---

### ๐ `src/strategies/` - ะขะะะะะะซะ ะกะขะะะขะะะะ

**ะะฐะทะฝะฐัะตะฝะธะต**: ะะพะณะธะบะฐ ะฟัะธะฝััะธั ัะพัะณะพะฒัั ัะตัะตะฝะธะน

#### ๐ `base_strategy.py`
**ะงัะพ**: ะะฑัััะฐะบัะฝัะน ะฑะฐะทะพะฒัะน ะบะปะฐัั ะดะปั ะฒัะตั ัััะฐัะตะณะธะน  
**ะะฐัะตะผ**: ะะดะธะฝัะน ะธะฝัะตััะตะนั, ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐะฝะธะต ะบะพะดะฐ  
**ะะฐะทะผะตั**: ~200 ัััะพะบ

```python
from abc import ABC, abstractmethod

class BaseStrategy(ABC):
    """ะะฐะทะพะฒัะน ะบะปะฐัั ะดะปั ะฒัะตั ัััะฐัะตะณะธะน"""
    
    @abstractmethod
    async def process_tick(self, tick):
        """ะะฑัะฐะฑะพัะฐัั ะฝะพะฒัะน tick"""
        pass
    
    @abstractmethod
    def can_trade(self, symbol) -> bool:
        """ะัะพะฒะตัะบะฐ ะฒะพะทะผะพะถะฝะพััะธ ัะพัะณะพะฒะปะธ"""
        pass
    
    @abstractmethod
    def get_positions(self):
        """ะะพะปััะธัั ะพัะบััััะต ะฟะพะทะธัะธะธ"""
        pass
```

---

#### ๐ `scalping_engine.py`
**ะงัะพ**: ะะฒะธะถะพะบ ัะบะฐะปัะฟะธะฝะณะฐ (ะธะท ัะตะบััะตะณะพ `scalping.py`)  
**ะะฐัะตะผ**: ะขะพัะณะพะฒะปั ะฒ TRENDING ัะตะถะธะผะต  
**ะะฐะทะผะตั**: ~1500 ัััะพะบ  
**ะคัะฝะบัะธะธ**:
- ะะตะฝะตัะฐัะธั ัะธะณะฝะฐะปะพะฒ (Scoring ัะธััะตะผะฐ 0-12)
- ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะทะธัะธัะผะธ
- Break-even, Trailing Stop
- Partial Take Profits
- ะัะต ัะตะบััะธะต ะทะฐัะธัั

```python
class ScalpingEngine(BaseStrategy):
    """ะะฒะธะถะพะบ ัะบะฐะปัะฟะธะฝะณะฐ ะดะปั TRENDING ััะฝะบะพะฒ"""
    
    def __init__(self, client, config, shared_modules):
        self.client = client
        self.config = config
        
        # ะะพะดะบะปััะฐะตะผ ะผะพะดัะปะธ
        self.mtf_filter = shared_modules.mtf
        self.correlation = shared_modules.correlation
        # ...
    
    async def process_tick(self, tick):
        """ะัะฝะพะฒะฝะพะน ัะธะบะป ัะบะฐะปัะฟะธะฝะณะฐ"""
        # ะกััะตััะฒัััะฐั ะปะพะณะธะบะฐ!
```

---

#### ๐ `grid_engine.py`
**ะงัะพ**: ะะฒะธะถะพะบ Grid Trading (ะะะะซะ)  
**ะะฐัะตะผ**: ะขะพัะณะพะฒะปั ะฒ RANGING ัะตะถะธะผะต  
**ะะฐะทะผะตั**: ~800 ัััะพะบ  
**ะคัะฝะบัะธะธ**:
- ะะฐััะตั Grid ััะพะฒะฝะตะน
- ะะฐะทะผะตัะตะฝะธะต ัะตัะบะธ ะพัะดะตัะพะฒ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะพัะบัััะธะต
- Stop Loss ะดะปั Grid
- Time Stop

```python
class GridTradingEngine(BaseStrategy):
    """Grid Trading ะดะปั RANGING ััะฝะบะพะฒ"""
    
    def __init__(self, client, config, shared_modules):
        self.grid_levels = []
        self.active_grid_orders = {}
        
        # ะัะฟะพะปัะทัะตะผ ะพะฑัะธะต ะผะพะดัะปะธ
        self.correlation = shared_modules.correlation
        self.pivots = shared_modules.pivots
        self.vp_analyzer = shared_modules.volume_profile
    
    async def calculate_grid(self, symbol):
        """ะะฐััะตั ััะพะฒะฝะตะน ัะตัะบะธ"""
        # ะัะฟะพะปัะทัะตะผ Pivot Points ะดะปั ะณัะฐะฝะธั
        pivots = self.pivots.get_pivots(symbol)
        grid_low = pivots['S2']
        grid_high = pivots['R2']
        
        # ะัะฟะพะปัะทัะตะผ VPOC ะดะปั ัะตะฝััะฐ
        vpoc = self.vp_analyzer.get_vpoc(symbol)
        # ...
```

---

#### ๐ `hybrid_orchestrator.py`
**ะงัะพ**: ะะปะฐะฒะฝัะน ะพัะบะตัััะฐัะพั (ะฟะตัะตะบะปััะฐัะตะปั ัะตะถะธะผะพะฒ)  
**ะะฐัะตะผ**: ะฃะฟัะฐะฒะปัะตั Scalping + Grid, ะฟะตัะตะบะปััะฐะตั ัะตะถะธะผั  
**ะะฐะทะผะตั**: ~500 ัััะพะบ  
**ะคัะฝะบัะธะธ**:
- ะะตัะตะบัะธั ัะตะถะธะผะฐ ััะฝะบะฐ
- ะะตัะตะบะปััะตะฝะธะต ะผะตะถะดั ะดะฒะธะถะบะฐะผะธ
- ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐะฟะธัะฐะปะพะผ
- ะะพะพัะดะธะฝะฐัะธั ะฟะพะทะธัะธะน

```python
class HybridOrchestrator:
    """ะฃะฟัะฐะฒะปะตะฝะธะต ะณะธะฑัะธะดะฝะพะน ัััะฐัะตะณะธะตะน"""
    
    def __init__(self, client, config):
        # ะกะพะทะดะฐะตะผ ะพะฑัะธะต ะผะพะดัะปะธ
        self.shared_modules = self._init_shared_modules()
        
        # ะะฝะธัะธะฐะปะธะทะธััะตะผ ะดะฒะธะถะบะธ
        self.scalping = ScalpingEngine(client, config, self.shared_modules)
        self.grid = GridTradingEngine(client, config, self.shared_modules)
        
        # ะขะตะบััะธะน ัะตะถะธะผ
        self.current_mode = "RANGING"
        self.mode_confirmations = {}
    
    async def run(self):
        """ะะปะฐะฒะฝัะน ัะธะบะป"""
        while self.active:
            # 1. ะะฟัะตะดะตะปัะตะผ ัะตะถะธะผ
            regime = await self._detect_regime()
            
            # 2. ะะตัะตะบะปััะฐะตะผ ะตัะปะธ ะฝัะถะฝะพ
            if await self._should_switch(regime):
                await self._switch_mode(regime)
            
            # 3. ะะฐะฟััะบะฐะตะผ ะฐะบัะธะฒะฝัะน ะดะฒะธะถะพะบ
            if self.current_mode == "RANGING":
                await self.grid.process_tick(tick)
            elif self.current_mode == "TRENDING":
                await self.scalping.process_tick(tick)
```

---

### ๐ `src/strategies/modules/` - ะะะะฃะะ ะฃะะฃะงะจะะะะ

**ะะฐะทะฝะฐัะตะฝะธะต**: ะัะดะตะปัะฝัะต ะผะพะดัะปะธ ะดะปั ะบะฐะถะดะพะน ัะธัะธ (Phase 1-2)

#### ๐ `multi_timeframe.py`
**ะงัะพ**: ะัะพะฒะตัะบะฐ ััะฐััะตะณะพ ัะฐะนะผััะตะนะผะฐ (5m)  
**ะะฐัะตะผ**: ะคะธะปััั ะฟัะพัะธะฒ ััะตะฝะดะฐ, +2 ะฑะฐะปะปะฐ ะฒ scoring  
**ะะฐะทะผะตั**: ~300 ัััะพะบ  
**ะัะฟะพะปัะทัะตั**: OKX Client ะดะปั ะฟะพะปััะตะฝะธั 5m ัะฒะตัะตะน

```python
class MultiTimeframeFilter:
    """Multi-timeframe confirmation"""
    
    def __init__(self, client, config):
        self.client = client
        self.timeframe = config.confirmation_timeframe  # "5m"
        self.score_bonus = config.score_bonus  # 2
    
    async def check_confirmation(self, symbol, direction):
        """ะัะพะฒะตัะธัั ะฟะพะดัะฒะตัะถะดะตะฝะธะต ะฝะฐ ััะฐััะตะผ TF"""
        # ะะพะปััะธัั 5m ัะฒะตัะธ
        candles_5m = await self.client.get_candles(symbol, "5m", 100)
        
        # ะะฐัััะธัะฐัั EMA8/21 ะฝะฐ 5m
        ema8 = calculate_ema(candles_5m, 8)
        ema21 = calculate_ema(candles_5m, 21)
        
        # ะัะพะฒะตัะบะฐ
        if direction == "LONG":
            confirmed = ema8 > ema21  # ะััะธะน ััะตะฝะด ะฝะฐ 5m
        else:
            confirmed = ema8 < ema21  # ะะตะดะฒะตะถะธะน ััะตะฝะด ะฝะฐ 5m
        
        return MTFResult(
            confirmed=confirmed,
            blocked=not confirmed if self.block_against else False,
            bonus=self.score_bonus if confirmed else 0
        )
```

---

#### ๐ `correlation_filter.py`
**ะงัะพ**: ะัะพะฒะตัะบะฐ ะบะพััะตะปััะธะธ BTC-ETH-SOL  
**ะะฐัะตะผ**: ะะต ะพัะบััะฒะฐัั 3 ะพะดะธะฝะฐะบะพะฒัั ะฟะพะทะธัะธะธ  
**ะะฐะทะผะตั**: ~250 ัััะพะบ

```python
class CorrelationFilter:
    """ะคะธะปััั ะบะพััะตะปััะธะธ ะฐะบัะธะฒะพะฒ"""
    
    def __init__(self, config):
        self.threshold = config.correlation_threshold  # 0.75
        self.max_correlated = config.max_correlated_positions  # 2
        self.correlation_matrix = {}
    
    async def update_correlations(self, price_data):
        """ะะฑะฝะพะฒะธัั ะบะพััะตะปััะธะพะฝะฝัั ะผะฐััะธัั (ะบะฐะถะดัะน ัะฐั)"""
        # Pearson correlation ะฝะฐ ะดะพัะพะดะฝะพัััั
        for pair in combinations(symbols, 2):
            corr = np.corrcoef(returns_A, returns_B)[0,1]
            self.correlation_matrix[pair] = corr
    
    def can_open_position(self, symbol, direction, existing_positions):
        """ะัะพะฒะตัะธัั ะผะพะถะฝะพ ะปะธ ะพัะบัััั ะฟะพะทะธัะธั"""
        correlated_count = 0
        
        for pos_symbol, position in existing_positions.items():
            corr = self._get_correlation(symbol, pos_symbol)
            
            if corr > self.threshold and position.direction == direction:
                correlated_count += 1
        
        return correlated_count < self.max_correlated
```

---

#### ๐ `time_filter.py`
**ะงัะพ**: ะกัะฐัะธััะธะบะฐ ะฟะพ ัะฐัะฐะผ, ะฑะปะพะบะธัะพะฒะบะฐ ัะฑััะพัะฝัั  
**ะะฐัะตะผ**: ะะต ัะพัะณะพะฒะฐัั ะฒ ะฟะปะพัะธะต ัะฐัั, ััะธะปะธะฒะฐัั ะฒ ัะพัะพัะธะต  
**ะะฐะทะผะตั**: ~400 ัััะพะบ  
**ะัะฟะพะปัะทัะตั**: SQLite ะดะปั ััะฐัะธััะธะบะธ

```python
class TimeSessionManager:
    """ะฃะฟัะฐะฒะปะตะฝะธะต ะฒัะตะผะตะฝะฝัะผะธ ัะธะปัััะฐะผะธ"""
    
    def __init__(self, config, db):
        self.db = db  # SQLite ะดะปั ััะฐัะธััะธะบะธ
        self.blacklist_threshold = config.blacklist_threshold  # 35%
        self.whitelist_threshold = config.whitelist_threshold  # 65%
        self.hour_stats = {}
    
    async def update_statistics(self):
        """ะะฑะฝะพะฒะธัั ััะฐัะธััะธะบั ะฟะพ ัะฐัะฐะผ (ะบะฐะถะดัะน ะดะตะฝั)"""
        # SQL ะทะฐะฟัะพั
        query = """
        SELECT hour_utc, 
               COUNT(*) as total,
               SUM(CASE WHEN win=1 THEN 1 ELSE 0 END)*100.0/COUNT(*) as win_rate
        FROM trades
        WHERE timestamp > datetime('now', '-30 days')
        GROUP BY hour_utc
        """
        results = await self.db.execute(query)
        
        for row in results:
            self.hour_stats[row['hour_utc']] = {
                'win_rate': row['win_rate'],
                'status': self._classify_hour(row['win_rate'])
            }
    
    def get_hour_status(self, hour):
        """ะะพะปััะธัั ััะฐััั ัะฐัะฐ (blacklist/whitelist/neutral)"""
        stats = self.hour_stats.get(hour, {})
        return stats.get('status', 'neutral')
```

---

#### ๐ `pivot_points.py`
**ะงัะพ**: ะะฐััะตั Pivot Points (3 ะผะตัะพะดะฐ)  
**ะะฐัะตะผ**: ะฃัะพะฒะฝะธ ะดะปั TP/SL, +2 ะฑะฐะปะปะฐ ะฟัะธ ะบะฐัะฐะฝะธะธ  
**ะะฐะทะผะตั**: ~350 ัััะพะบ

```python
class PivotCalculator:
    """ะะฐััะตั Pivot Points"""
    
    def __init__(self, method="standard"):
        self.method = method  # standard, fibonacci, camarilla
        self.daily_pivots = {}
    
    async def calculate_pivots(self, symbol, candle_data):
        """ะะฐัััะธัะฐัั ะฟะธะฒะพัั ะฝะฐ ะพัะฝะพะฒะต ะฒัะตัะฐัะฝะตะณะพ ะดะฝั"""
        yesterday = candle_data[-1]  # ะะพัะปะตะดะฝัั ะดะฝะตะฒะฝะฐั ัะฒะตัะฐ
        
        H, L, C = yesterday.high, yesterday.low, yesterday.close
        
        if self.method == "standard":
            PP = (H + L + C) / 3
            R1 = (2 * PP) - L
            S1 = (2 * PP) - H
            # ...
            
        elif self.method == "fibonacci":
            PP = (H + L + C) / 3
            R1 = PP + 0.382 * (H - L)
            # ...
            
        elif self.method == "camarilla":
            PP = C
            R1 = C + (H - L) * 1.1 / 12
            # ...
        
        self.daily_pivots[symbol] = {
            'PP': PP, 'R1': R1, 'R2': R2, 'S1': S1, 'S2': S2
        }
        
        return self.daily_pivots[symbol]
```

---

#### ๐ `order_book_analyzer.py`
**ะงัะพ**: ะะฝะฐะปะธะท ะพัะดะตั ะฑัะบะฐ (bid/ask imbalance)  
**ะะฐัะตะผ**: +1 ะฑะฐะปะป ะฟัะธ ะธะผะฑะฐะปะฐะฝัะต, ัะธะปััั ัะฟัะตะดะฐ  
**ะะฐะทะผะตั**: ~300 ัััะพะบ  
**ะัะฟะพะปัะทัะตั**: OKX API ะดะปั Order Book

```python
class OrderBookAnalyzer:
    """ะะฝะฐะปะธะท Order Book"""
    
    def __init__(self, client, config):
        self.client = client
        self.depth_levels = config.depth_levels  # 10
        self.imbalance_threshold = config.imbalance_threshold  # 0.2
    
    async def analyze_order_book(self, symbol):
        """ะะฝะฐะปะธะทะธัะพะฒะฐัั ะพัะดะตั ะฑัะบ"""
        # ะะพะปััะธัั Order Book
        order_book = await self.client.get_order_book(symbol, depth=self.depth_levels)
        
        # ะะฐััะตั imbalance
        total_bids = sum([level['size'] for level in order_book['bids'][:10]])
        total_asks = sum([level['size'] for level in order_book['asks'][:10]])
        
        imbalance = (total_bids - total_asks) / (total_bids + total_asks)
        
        # ะะฐััะตั ัะฟัะตะดะฐ
        best_bid = order_book['bids'][0]['price']
        best_ask = order_book['asks'][0]['price']
        spread_percent = (best_ask - best_bid) / best_bid * 100
        
        return {
            'imbalance': imbalance,
            'spread': spread_percent,
            'depth_ratio': total_bids / total_asks
        }
```

---

#### ๐ `liquidity_zones.py`
**ะงัะพ**: ะะพะธัะบ ะบะปะฐััะตัะพะฒ ะปะธะบะฒะธะดะฝะพััะธ  
**ะะฐัะตะผ**: +2 ะฑะฐะปะปะฐ ะพะบะพะปะพ ะบะปะฐััะตัะฐ, TP ะฟะตัะตะด ะบะปะฐััะตัะพะผ  
**ะะฐะทะผะตั**: ~400 ัััะพะบ

```python
class LiquidityZoneDetector:
    """ะะตัะตะบัะพั ะทะพะฝ ะปะธะบะฒะธะดะฝะพััะธ"""
    
    def find_clusters(self, order_book):
        """ะะฐะนัะธ ะบะปะฐััะตัั ะพัะดะตัะพะฒ"""
        clusters = []
        
        # ะััะฟะฟะธััะตะผ ะฑะปะธะทะบะธะต ััะพะฒะฝะธ (ะฒ ะฟัะตะดะตะปะฐั 0.5%)
        for level in order_book['bids'] + order_book['asks']:
            # ะะพะณะธะบะฐ ะบะปะฐััะตัะธะทะฐัะธะธ
            # ...
        
        # ะะฐัะพะดะธะผ ะทะฝะฐัะธะผัะต (>3x ััะตะดะฝะตะณะพ)
        significant = [c for c in clusters if c.size > avg_size * 3]
        
        return significant
```

---

### ๐ `src/indicators/` - ะะะะะะะขะะะซ

#### ๐ `base.py`
**ะงัะพ**: ะัะต ัะตะบััะธะต ะธะฝะดะธะบะฐัะพัั (RSI, SMA, EMA, BB, ATR, MACD, Volume)  
**ะะฐัะตะผ**: ะะฐะทะพะฒัะต ัะฐััะตัั  
**ะะฐะทะผะตั**: ~400 ัััะพะบ (ัะตะบััะธะน `indicators.py`)

---

### ๐ `src/indicators/advanced/` - ะะะะะะะะฃะขะซะ

#### ๐ `volume_profile.py`
**ะงัะพ**: Volume Profile ะฐะฝะฐะปะธะท  
**ะะฐัะตะผ**: ะะฐะนัะธ VPOC, Value Area, HVA/LVA  
**ะะฐะทะผะตั**: ~500 ัััะพะบ

```python
class VolumeProfileAnalyzer:
    """ะะฝะฐะปะธะท Volume Profile"""
    
    def calculate_profile(self, candles, num_bins=50):
        """ะะพัััะพะธัั ะฟัะพัะธะปั ะพะฑัะตะผะฐ"""
        # ะะตะปะธะผ ะดะธะฐะฟะฐะทะพะฝ ะฝะฐ bins
        # ะกัะผะผะธััะตะผ ะพะฑัะตะผั
        # ะะฐัะพะดะธะผ VPOC
        # ะะฐัะพะดะธะผ Value Area (70%)
        # ...
        
        return {
            'vpoc': vpoc_price,
            'value_area_high': va_high,
            'value_area_low': va_low,
            'profile': bins
        }
```

---

#### ๐ `pivot_calculator.py`
**ะงัะพ**: ะะฐััะตั Pivot Points  
**ะะฐัะตะผ**: ะฃัะพะฒะฝะธ ะดะปั ัะพัะณะพะฒะปะธ  
**ะะฐะทะผะตั**: ~300 ัััะพะบ (ะพะฟะธัะฐะฝ ะฒััะต)

---

### ๐ `src/filters/` - ะคะะะฌะขะะซ

#### ๐ `regime_detector.py`
**ะงัะพ**: ะฃะปัััะตะฝะฝัะน ะดะตัะตะบัะพั ัะตะถะธะผะพะฒ (5 ัะตะถะธะผะพะฒ)  
**ะะฐัะตะผ**: RANGING/TRENDING/HIGH_VOL/LOW_VOL/EXTREME_VOL  
**ะะฐะทะผะตั**: ~300 ัััะพะบ

```python
class EnhancedRegimeDetector:
    """ะะตัะตะบัะพั ัะตะถะธะผะพะฒ ััะฝะบะฐ (5 ัะธะฟะพะฒ)"""
    
    def detect_regime(self, symbol):
        """ะะฟัะตะดะตะปะธัั ัะตะถะธะผ"""
        volatility = self._calc_volatility()
        trend_strength = self._calc_trend()
        
        if volatility > 0.04:
            return "EXTREME_VOL"  # ะะต ัะพัะณัะตะผ!
        elif volatility > 0.02:
            return "HIGH_VOL"
        elif trend_strength > 0.05:
            return "TRENDING"
        elif volatility < 0.01:
            return "LOW_VOL"
        else:
            return "RANGING"
    
    def get_regime_params(self, regime):
        """ะะพะปััะธัั ะฟะฐัะฐะผะตััั ะดะปั ัะตะถะธะผะฐ"""
        return self.config.volatility_modes.modes[regime]
```

---

#### ๐ `correlation_manager.py`
**ะงัะพ**: ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพััะตะปััะธะตะน  
**ะะฐัะตะผ**: ะัะพะฒะตัะบะฐ ะฟะตัะตะด ะฒัะพะดะพะผ  
**ะะฐะทะผะตั**: ~250 ัััะพะบ (ะพะฟะธัะฐะฝ ะฒััะต)

---

#### ๐ `time_session_manager.py`
**ะงัะพ**: Time-based ัะธะปััั  
**ะะฐัะตะผ**: ะกัะฐัะธััะธะบะฐ ะฟะพ ัะฐัะฐะผ  
**ะะฐะทะผะตั**: ~400 ัััะพะบ (ะพะฟะธัะฐะฝ ะฒััะต)

---

### ๐ `src/risk/` - ะฃะะะะะะะะะ ะะะกะะะะ

#### ๐ `position_sizer.py`
**ะงัะพ**: ะะฐััะตั ัะฐะทะผะตัะฐ ะฟะพะทะธัะธะธ  
**ะะฐัะตะผ**: Fixed Risk ะธะปะธ Kelly Criterion  
**ะะฐะทะผะตั**: ~300 ัััะพะบ

```python
class PositionSizer:
    """ะะฐััะตั ะพะฟัะธะผะฐะปัะฝะพะณะพ ัะฐะทะผะตัะฐ ะฟะพะทะธัะธะธ"""
    
    def __init__(self, method="fixed"):
        self.method = method  # "fixed" ะธะปะธ "kelly"
        self.kelly_calc = KellyCalculator() if method == "kelly" else None
    
    def calculate(self, balance, sl_distance, symbol):
        """ะะฐัััะธัะฐัั ัะฐะทะผะตั"""
        if self.method == "fixed":
            risk_amount = balance * 0.01  # 1%
            
        elif self.method == "kelly":
            kelly = self.kelly_calc.calculate(symbol)
            safe_kelly = kelly * 0.25  # ะะพะฝัะตัะฒะฐัะธะฒะฝะพ
            risk_amount = balance * safe_kelly
        
        return risk_amount / sl_distance
```

---

#### ๐ `risk_calculator.py`
**ะงัะพ**: ะะฐััะตั ัะธัะบะพะฒ (ะฒัะดะตะปะตะฝะพ ะธะท `scalping.py`)  
**ะะฐัะตะผ**: ะฆะตะฝััะฐะปะธะทะพะฒะฐะฝะฝัะน ัะฐััะตั  
**ะะฐะทะผะตั**: ~200 ัััะพะบ

---

#### ๐ `portfolio_monitor.py`
**ะงัะพ**: ะะพะฝะธัะพัะธะฝะณ ะฟะพัััะตะปั  
**ะะฐัะตะผ**: Exposure, correlation ัะธัะบ  
**ะะฐะทะผะตั**: ~250 ัััะพะบ

```python
class PortfolioMonitor:
    """ะะพะฝะธัะพัะธะฝะณ ัะพััะพัะฝะธั ะฟะพัััะตะปั"""
    
    def calculate_exposure(self, positions):
        """ะะฐัััะธัะฐัั exposure ะฟะพ ะฐะบัะธะฒะฐะผ"""
        total_exposure = {}
        
        for symbol, position in positions.items():
            base_asset = symbol.split('-')[0]  # BTC, ETH, SOL
            exposure = position.quantity * position.current_price
            total_exposure[base_asset] = exposure
        
        return total_exposure
    
    def check_risk_limits(self):
        """ะัะพะฒะตัะธัั ะฒัะต ะปะธะผะธัั ัะธัะบะฐ"""
        # Max positions
        # Max correlation
        # Max exposure per asset
        # Daily loss
        # ...
```

---

### ๐ `src/ml/` - ะะะจะะะะะ ะะะฃะงะะะะ (Phase 3)

**ะะฐะทะฝะฐัะตะฝะธะต**: RL Agent (ะพะฟัะธะพะฝะฐะปัะฝะพ, ะฒ ะฑัะดััะตะผ)

#### ๐ `rl_agent.py`
**ะะฐะทะผะตั**: ~600 ัััะพะบ  
**ะคัะฝะบัะธะธ**: PPO ะฐะณะตะฝั ะดะปั ัะพัะณะพะฒะปะธ

---

### ๐ `src/utils/` - ะฃะขะะะะขะซ

#### ๐ `feature_flags.py`
**ะงัะพ**: ะฃะฟัะฐะฒะปะตะฝะธะต Feature Flags  
**ะะฐัะตะผ**: ะะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต ะผะพะดัะปะตะน  
**ะะฐะทะผะตั**: ~150 ัััะพะบ

```python
class FeatureFlags:
    """ะฃะฟัะฐะฒะปะตะฝะธะต ะฒะบะปััะตะฝะธะตะผ/ะฒัะบะปััะตะฝะธะตะผ ะผะพะดัะปะตะน"""
    
    def __init__(self, config):
        self.flags = config.features
    
    def is_enabled(self, feature_name):
        """ะัะพะฒะตัะธัั ะฒะบะปััะตะฝ ะปะธ ะผะพะดัะปั"""
        return self.flags.get(f"{feature_name}_enabled", False)
    
    # ะัะฟะพะปัะทะพะฒะฐะฝะธะต:
    if feature_flags.is_enabled("multi_timeframe"):
        mtf_result = await self.mtf_filter.check(...)
```

---

### ๐ `config/` - ะะะะคะะะฃะะะฆะะฏ

#### ๐ `config.yaml`
**ะงัะพ**: ะะปะฐะฒะฝะฐั ะบะพะฝัะธะณััะฐัะธั  
**ะะฐะทะผะตั**: ~300 ัััะพะบ (ัะฐััะธัะตะฝะฝะฐั)

```yaml
# ะะฐะทะพะฒัะต ะฝะฐัััะพะนะบะธ (ะบะฐะบ ัะตะนัะฐั)
api:
  okx: ...

trading:
  symbols: ...

risk:
  max_position_size_percent: ...

# โจ ะะะะซะ ะกะะะฆะะ

# Feature Flags (ัะฟัะฐะฒะปะตะฝะธะต ะผะพะดัะปัะผะธ)
features:
  multi_timeframe_enabled: true
  correlation_filter_enabled: true
  time_based_filter_enabled: true
  volatility_modes_enabled: true
  pivot_points_enabled: true
  volume_profile_enabled: true
  order_book_enabled: false       # ะะพะบะฐ ะฒัะบะปััะตะฝ
  liquidity_zones_enabled: false  # ะะพะบะฐ ะฒัะบะปััะตะฝ
  kelly_criterion_enabled: false  # ะะพะบะฐ ะฒัะบะปััะตะฝ
  hybrid_mode_enabled: false      # ะะพะณะดะฐ Grid ะณะพัะพะฒ
  rl_agent_enabled: false         # ะ ะฑัะดััะตะผ

# Multi-timeframe
multi_timeframe:
  confirmation_timeframe: "5m"
  score_bonus: 2
  block_against_trend: true

# Correlation
correlation_filter:
  threshold: 0.75
  max_correlated_positions: 2

# Time-based
time_based_filter:
  learning_period_days: 30
  blacklist_threshold: 35
  whitelist_threshold: 65

# Volatility Modes
volatility_modes:
  thresholds:
    extreme_vol: 0.04
    high_vol: 0.02
    low_vol: 0.01
  modes:
    high_vol:
      tp_multiplier: 2.0
      sl_multiplier: 3.5
      # ...

# Pivot Points
pivot_points:
  calculation_method: "standard"  # ะธะปะธ "fibonacci", "camarilla"
  score_bonus: 2

# Volume Profile
volume_profile:
  lookback_period: 24
  price_bins: 50
  score_bonus: 2

# Grid Trading (ะบะพะณะดะฐ ะดะพะฑะฐะฒะธะผ)
grid_trading:
  enabled: false
  num_levels: 5
  step_percent: 0.7
  # ...
```

---

### ๐ `logs/` - ะะะะ

**ะกัััะบัััะฐ**:
```
logs/
โโโ trading_bot_2025-10-12.log    # ะัะฝะพะฒะฝะพะน ะปะพะณ (ะฒัั)
โโโ errors_2025-10-12.log         # ะขะพะปัะบะพ ะพัะธะฑะบะธ
โโโ trades_2025-10-12.log         # ะขะพะปัะบะพ ัะดะตะปะบะธ
โโโ modules_2025-10-12.log        # ะะฐะฑะพัะฐ ะผะพะดัะปะตะน (debug)
```

**ะะพัะฐัะธั**: ะะฐะถะดัะน ะดะตะฝั ะฝะพะฒัะน ัะฐะนะป  
**Retention**: 30 ะดะฝะตะน

---

### ๐ `data/` - ะะะะะซะ

```
data/
โโโ historical/                   # ะััะพัะธัะตัะบะธะต ัะฒะตัะธ (ะดะปั ะฑัะบัะตััะฐ)
โ   โโโ BTC-USDT_1m_2024.csv
โ   โโโ ETH-USDT_1m_2024.csv
โ   โโโ SOL-USDT_1m_2024.csv
โ
โโโ cache/                        # ะัั ะธะฝะดะธะบะฐัะพัะพะฒ
โ   โโโ indicators_cache.pkl
โ   โโโ correlations_cache.pkl
โ
โโโ trading_bot.db                # SQLite ะฑะฐะทะฐ
    Tables:
    - trades                      # ะััะพัะธั ัะดะตะปะพะบ
    - positions                   # ะะพะทะธัะธะธ
    - hour_statistics             # ะกัะฐัะธััะธะบะฐ ะฟะพ ัะฐัะฐะผ
    - regime_history              # ะััะพัะธั ัะตะถะธะผะพะฒ
    - performance_metrics         # ะะตััะธะบะธ
```

---

### ๐ `scripts/` - ะกะะะะะขะซ

#### ๐ `collect_statistics.py`
**ะงัะพ**: ะกะฑะพั ััะฐัะธััะธะบะธ ะดะปั Time Filter  
**ะัะฟะพะปัะทะพะฒะฐะฝะธะต**: ะะฐะฟััะบะฐัั ัะฐะท ะฒ ะดะตะฝั

```python
# ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
python scripts/collect_statistics.py --days 30
```

#### ๐ `backtest_runner.py`
**ะงัะพ**: ะัะบัะตัั ัััะฐัะตะณะธะธ ะฝะฐ ะธััะพัะธะธ  
**ะัะฟะพะปัะทะพะฒะฐะฝะธะต**: ะะตัะตะด ะธะทะผะตะฝะตะฝะธัะผะธ ะฟะฐัะฐะผะตััะพะฒ

```python
python scripts/backtest_runner.py --symbol SOL-USDT --days 90
```

---

## ๐ ะะะ ะะกะ ะะะะะขะะะข ะะะะกะขะ

### ะะพัะปะตะดะพะฒะฐัะตะปัะฝะพััั ัะฐะฑะพัั:

```
1. ะะะะฃะกะ (main.py)
   โ
2. ะะฐะณััะทะบะฐ config.yaml
   โ
3. ะัะพะฒะตัะบะฐ Feature Flags
   โ
4. ะะฝะธัะธะฐะปะธะทะฐัะธั ะผะพะดัะปะตะน (ะตัะปะธ enabled):
   - Multi-timeframe Filter
   - Correlation Manager
   - Time Session Manager
   - Regime Detector
   - Pivot Calculator
   - Volume Profile Analyzer
   - Order Book Analyzer (ะตัะปะธ enabled)
   - Liquidity Zones (ะตัะปะธ enabled)
   โ
5. ะะฝะธัะธะฐะปะธะทะฐัะธั ัััะฐัะตะณะธะน:
   - Scalping Engine (ะฟะตัะตะดะฐะตะผ ะผะพะดัะปะธ)
   - Grid Engine (ะฟะตัะตะดะฐะตะผ ะผะพะดัะปะธ)
   - Hybrid Orchestrator (ัะฟัะฐะฒะปัะตั ะพะฑะพะธะผะธ)
   โ
6. ะะะะะะซะ ะฆะะะ (ะบะฐะถะดัั ะผะธะฝััั):
   
   Hybrid Orchestrator:
     โโ> ะะตัะตะบัะธััะตั ัะตะถะธะผ (Regime Detector)
     โโ> ะะตัะฐะตั ะฟะตัะตะบะปััะฐัั ะปะธ (ะณะธััะตัะตะทะธั 5 ะผะธะฝ)
     โโ> ะัะปะธ RANGING โ Grid Engine
     โโ> ะัะปะธ TRENDING โ Scalping Engine
   
   Scalping Engine (ะตัะปะธ ะฐะบัะธะฒะตะฝ):
     โโ> ะะพะปััะฐะตั tick
     โโ> ะะฐัััะธััะฒะฐะตั ะธะฝะดะธะบะฐัะพัั (base.py + advanced/)
     โโ> ะัะพะฒะตััะตั ัะธะปัััั:
     โ   โโ> Can trade? (ัะตะบััะฐั ะปะพะณะธะบะฐ)
     โ   โโ> Multi-timeframe OK?
     โ   โโ> Correlation OK?
     โ   โโ> Time Filter OK?
     โ   โโ> Order Book OK?
     โโ> ะะตะฝะตัะธััะตั ัะธะณะฝะฐะป (Scoring 0-12):
     โ   โโ> ะะฐะทะพะฒัะน score (9 ะธะฝะดะธะบะฐัะพัะพะฒ)
     โ   โโ> + MTF bonus (+2 ะตัะปะธ ะฟะพะดัะฒะตัะดะธะป)
     โ   โโ> + Pivot bonus (+2 ะพะบะพะปะพ ััะพะฒะฝั)
     โ   โโ> + Volume Profile bonus (+2 ะพะบะพะปะพ VPOC)
     โ   โโ> + Order Book bonus (+1 ะฟัะธ imbalance)
     โ   โโ> ะัะพะณะพ: ะดะพ 18 ะฑะฐะปะปะพะฒ ะฒะพะทะผะพะถะฝะพ!
     โโ> ะัะปะธ score >= threshold โ ะพัะบััะฒะฐะตะผ
     โโ> ะะฐัััะธััะฒะฐะตะผ ัะฐะทะผะตั (Position Sizer: Fixed ะธะปะธ Kelly)
     โโ> ะะพััะตะบัะธััะตะผ TP/SL (Pivots, Volume Profile)
     โโ> ะะฐะทะผะตัะฐะตะผ ะพัะดะตั
   
   Grid Engine (ะตัะปะธ ะฐะบัะธะฒะตะฝ):
     โโ> ะะฟัะตะดะตะปัะตั ะดะธะฐะฟะฐะทะพะฝ (Pivots: S2-R2)
     โโ> ะะฐัััะธััะฒะฐะตั ััะพะฒะฝะธ (5-7 ัั, VPOC ะฒ ัะตะฝััะต)
     โโ> ะัะพะฒะตััะตั ัะธะปัััั:
     โ   โโ> Correlation OK?
     โ   โโ> Time Filter OK?
     โโ> ะะฐะทะผะตัะฐะตั ัะตัะบั ะพัะดะตัะพะฒ
     โโ> ะะพะฝะธัะพัะธั ะธัะฟะพะปะฝะตะฝะธั
     โโ> ะะตัะตะพัะบััะฒะฐะตั ััะพะฒะฝะธ
   
7. ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะทะธัะธัะผะธ:
   - Break-even (1 ATR)
   - Trailing Stop (1.5 ATR)
   - Partial TPs (3 ััะพะฒะฝั)
   - Time Stop (15 ะผะธะฝ)
   โ
8. ะะพะณะธัะพะฒะฐะฝะธะต ะธ ััะฐัะธััะธะบะฐ
   โ
9. ะะพะฒัะพััะตะผ ั ัะฐะณะฐ 6
```

---

## ๐ ะะะะะะะซ ะคะะะะะ (ะัะตะฝะบะฐ)

| ะคะฐะนะป | ะกััะพะบ | ะกะปะพะถะฝะพััั | ะะฟะธัะฐะฝะธะต |
|------|-------|-----------|----------|
| **STRATEGIES** | | | |
| base_strategy.py | 200 | ะะธะทะบะฐั | ะะฑัััะฐะบัะธั |
| scalping_engine.py | 1500 | ะััะพะบะฐั | ะขะตะบััะฐั ะปะพะณะธะบะฐ |
| grid_engine.py | 800 | ะกัะตะดะฝัั | Grid ะปะพะณะธะบะฐ |
| hybrid_orchestrator.py | 500 | ะกัะตะดะฝัั | ะัะบะตัััะฐัะพั |
| **MODULES** | | | |
| multi_timeframe.py | 300 | ะกัะตะดะฝัั | MTF ะฟัะพะฒะตัะบะฐ |
| correlation_filter.py | 250 | ะะธะทะบะฐั | ะะพััะตะปััะธั |
| time_filter.py | 400 | ะกัะตะดะฝัั | Time ััะฐัะธััะธะบะฐ |
| pivot_points.py | 350 | ะะธะทะบะฐั | Pivots ัะฐััะตั |
| order_book_analyzer.py | 300 | ะกัะตะดะฝัั | Order Book |
| liquidity_zones.py | 400 | ะััะพะบะฐั | ะะปะฐััะตัั |
| **INDICATORS** | | | |
| base.py | 400 | ะกัะตะดะฝัั | ะขะตะบััะธะต |
| volume_profile.py | 500 | ะััะพะบะฐั | VP ะฐะฝะฐะปะธะท |
| pivot_calculator.py | 300 | ะกัะตะดะฝัั | Pivots |
| **FILTERS** | | | |
| regime_detector.py | 300 | ะกัะตะดะฝัั | 5 ัะตะถะธะผะพะฒ |
| correlation_manager.py | 250 | ะะธะทะบะฐั | ะะพััะตะปััะธะธ |
| time_session_manager.py | 400 | ะกัะตะดะฝัั | ะัะตะผั |
| **RISK** | | | |
| position_sizer.py | 300 | ะกัะตะดะฝัั | Kelly + Fixed |
| risk_calculator.py | 200 | ะะธะทะบะฐั | ะะธัะบะธ |
| portfolio_monitor.py | 250 | ะกัะตะดะฝัั | ะะพัััะตะปั |
| **CORE** | | | |
| main.py | 200 | ะะธะทะบะฐั | ะะฐะฟััะบ |
| config.py | 150 | ะะธะทะบะฐั | ะะพะฝัะธะณ |
| models.py | 300 | ะะธะทะบะฐั | ะะพะดะตะปะธ |
| okx_client.py | 600 | ะกัะตะดะฝัั | OKX API |
| **ะะขะะะ** | **~8,700** | | **ะะตัั ะฟัะพะตะบั** |

**ะกัะฐะฒะฝะตะฝะธะต**:
- ะขะตะบััะธะน ะฟัะพะตะบั: ~3,000 ัััะพะบ
- ะะธะฑัะธะดะฝัะน ะฟัะพะตะบั: ~8,700 ัััะพะบ
- ะัะพะตะบั A (Enhanced): ~15,000+ ัััะพะบ (ะพัะตะฝะบะฐ)

**ะัะฒะพะด**: ะะธะฑัะธะด - **ััะตะดะฝัั ัะปะพะถะฝะพััั**, ัะฟัะฐะฒะปัะตะผะพ!

---

## ๐ฏ DEPENDENCIES (ะคะฐะนะปั ะบะพะฝัะธะณััะฐัะธะธ)

### ๐ `requirements.txt` (ัะฐััะธัะตะฝะฝัะน)

```python
# ะขะตะบััะธะต ะทะฐะฒะธัะธะผะพััะธ
aiohttp==3.9.1
loguru==0.7.2
pydantic==2.5.0
pyyaml==6.0.1
python-dotenv==1.0.0
numpy==1.26.0

# โจ ะะะะซะ ะดะปั Phase 1-2
pandas==2.1.0              # ะะปั ะบะพััะตะปััะธะน, ััะฐัะธััะธะบะธ
scipy==1.11.0              # ะะปั ััะฐัะธััะธัะตัะบะธั ัะฐััะตัะพะฒ
scikit-learn==1.3.0        # ะะปั Volume Profile ะบะปะฐััะตัะธะทะฐัะธะธ

# โจ ะะะะซะ ะดะปั Phase 3 (ML, ะพะฟัะธะพะฝะฐะปัะฝะพ)
torch==2.1.0               # ะะปั RL Agent
stable-baselines3==2.1.0   # RL algorithms

# โจ ะะะะซะ ะดะปั Web (ะพะฟัะธะพะฝะฐะปัะฝะพ)
fastapi==0.104.0           # Web framework
uvicorn==0.24.0            # ASGI server

# ะขะตััะธัะพะฒะฐะฝะธะต
pytest==7.4.0
pytest-asyncio==0.21.0
```

---

## ๐๏ธ FEATURE FLAGS (config/features.yaml)

```yaml
# ะฃะฟัะฐะฒะปะตะฝะธะต ะผะพะดัะปัะผะธ (ะฒะบะปััะตะฝะธะต/ะฒัะบะปััะตะฝะธะต)

# Phase 1: ะะฐะทะพะฒัะต ัะปัััะตะฝะธั
multi_timeframe_enabled: false          # โ ะะบะปััะฐะตะผ ะฟะพ ะพะดะฝะพะผั!
correlation_filter_enabled: false
time_based_filter_enabled: false
volatility_modes_enabled: false
pivot_points_enabled: false
volume_profile_enabled: false

# Phase 2: ะัะพะดะฒะธะฝัััะต
order_book_enabled: false
liquidity_zones_enabled: false

# Phase 3: ML (ะฒ ะฑัะดััะตะผ)
kelly_criterion_enabled: false
rl_agent_enabled: false

# Phase 4: ะะธะฑัะธะด
hybrid_mode_enabled: false             # ะะพะณะดะฐ Grid ะณะพัะพะฒ
grid_trading_enabled: false

# ะะฟัะธะพะฝะฐะปัะฝะพ
web_dashboard_enabled: false
auto_backups_enabled: false
```

**ะะฐะบ ะธัะฟะพะปัะทัะตััั**:
```python
# ะ scalping_engine.py

if self.config.features.multi_timeframe_enabled:
    from .modules.multi_timeframe import MultiTimeframeFilter
    self.mtf = MultiTimeframeFilter(...)
else:
    self.mtf = None  # ะะพะดัะปั ะฒัะบะปััะตะฝ

# ะัะธ ะณะตะฝะตัะฐัะธะธ ัะธะณะฝะฐะปะฐ
if self.mtf:
    result = await self.mtf.check(...)  # ะัะฟะพะปัะทัะตะผ ะตัะปะธ ะฒะบะปััะตะฝ
```

---

## ๐ ะะะฉะะฏ ะะะะขะะะ (Visual)

```
๐ฆ simple-trading-bot-okx/
โ
โโโ ๐ฏ CORE (ะฏะดัะพ, 4 ัะฐะนะปะฐ)
โ   main.py, config.py, models.py, okx_client.py
โ   โโ> ะะฐะฟััะบะฐะตั ะฒัั, ะพะฑัะฐั ะปะพะณะธะบะฐ
โ
โโโ ๐ฎ STRATEGIES (ะกััะฐัะตะณะธะธ, 4 ัะฐะนะปะฐ)
โ   โโโ base_strategy.py (ะฐะฑัััะฐะบัะธั)
โ   โโโ scalping_engine.py (TRENDING ัะตะถะธะผ)
โ   โโโ grid_engine.py (RANGING ัะตะถะธะผ)
โ   โโโ hybrid_orchestrator.py (ะฟะตัะตะบะปััะฐัะตะปั)
โ
โโโ โจ MODULES (ะะพะดัะปะธ ัะปัััะตะฝะธะน, 6 ัะฐะนะปะพะฒ, Phase 1)
โ   โโโ multi_timeframe.py
โ   โโโ correlation_filter.py
โ   โโโ time_filter.py
โ   โโโ pivot_points.py
โ   โโโ order_book_analyzer.py
โ   โโโ liquidity_zones.py
โ
โโโ ๐ INDICATORS (ะะฝะดะธะบะฐัะพัั)
โ   โโโ base.py (ัะตะบััะธะต 9 ะธะฝะดะธะบะฐัะพัะพะฒ)
โ   โโโ advanced/ (Volume Profile, Pivot Calc, Adaptive)
โ
โโโ ๐ก๏ธ FILTERS (ะคะธะปัััั)
โ   โโโ regime_detector.py (5 ัะตะถะธะผะพะฒ)
โ   โโโ correlation_manager.py
โ   โโโ time_session_manager.py
โ
โโโ ๐ฐ RISK (ะะธัะบ-ะผะตะฝะตะดะถะผะตะฝั)
โ   โโโ position_sizer.py (Kelly + Fixed)
โ   โโโ risk_calculator.py
โ   โโโ portfolio_monitor.py
โ
โโโ ๐ค ML (ะะฐัะธะฝะฝะพะต ะพะฑััะตะฝะธะต, ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ   โโโ rl_agent.py
โ
โโโ ๐ง UTILS (ะฃัะธะปะธัั)
โ   โโโ feature_flags.py
โ
โโโ ๐ WEB (ะะตะฑ ะธะฝัะตััะตะนั, ะพะฟัะธะพะฝะฐะปัะฝะพ)
โ   โโโ app.py
โ
โโโ โ๏ธ CONFIG (ะะพะฝัะธะณััะฐัะธั)
โ   โโโ config.yaml
โ   โโโ config.demo.yaml
โ   โโโ features.yaml
โ
โโโ ๐ง SCRIPTS (ะกะบัะธะฟัั ััะธะปะธั)
    โโโ collect_statistics.py
    โโโ backtest_runner.py
    โโโ optimize_parameters.py
```

**ะัะพะณะพ**:
- **ะคะฐะนะปะพะฒ Python**: ~30
- **ะะพะฝัะธะณััะฐัะธะน**: ~4
- **ะกะบัะธะฟัะพะฒ**: ~5
- **ะัะตะณะพ**: ~40 ัะฐะนะปะพะฒ

**VS ัะตะบััะธะน ะฟัะพะตะบั**: ~15 ัะฐะนะปะพะฒ

**ะฃะฟัะฐะฒะปัะตะผะพ?** โ **ะะ!** (ะดะปั solo-ัะฐะทัะฐะฑะพัะบะธ)

---

## ๐ฏ ะะะะะะฆะะฏ (ะะฐะบ ะฟะตัะตัะพะดะธะผ)

### ะขะตะบััะฐั ััััะบัััะฐ โ ะะธะฑัะธะดะฝะฐั:

```
ะจะะ 1: ะกะพะทะดะฐะตะผ ะฝะพะฒัะต ะฟะฐะฟะบะธ
  src/strategies/modules/
  src/indicators/advanced/
  src/filters/
  src/risk/
  config/

ะจะะ 2: ะะตัะฐะบัะพัะธะฝะณ (ะฟะตัะตะฝะพัะธะผ ะบะพะด)
  scalping.py โ scalping_engine.py
  ะัะดะตะปัะตะผ base_strategy.py
  
ะจะะ 3: ะะพะฑะฐะฒะปัะตะผ ะผะพะดัะปะธ (ะฟะพ ะพะดะฝะพะผั!)
  Week 1: multi_timeframe.py
  Week 2: correlation_filter.py
  Week 3: time_filter.py
  # ...

ะจะะ 4: Grid Engine
  ะกะพะทะดะฐะตะผ grid_engine.py
  ะขะตััะธััะตะผ ะพัะดะตะปัะฝะพ

ะจะะ 5: Hybrid
  ะกะพะทะดะฐะตะผ hybrid_orchestrator.py
  ะะฝัะตะณัะฐัะธั
```

**ะัะบะฐั ะฒะพะทะผะพะถะตะฝ** ะฝะฐ ะะฎะะะ ัะฐะณะต!

---

๐ **ะกะพััะฐะฝะตะฝะพ ะฒ**: `ะะะฅะะขะะะขะฃะะ_ะะะะะะะะะะ_ะะะะะะขะ.md`

**ะะพัะพะฒ ะฝะฐัะธะฝะฐัั ะผะธะณัะฐัะธั ะบะพะณะดะฐ ะดะฐะดะธัะต ะบะพะผะฐะฝะดั!** ๐

