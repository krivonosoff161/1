# üîÑ –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô –í–´–ë–û–† –°–ï–°–°–ò–ô –î–õ–Ø –°–†–ê–í–ù–ï–ù–ò–Ø

**–î–∞—Ç–∞:** 2025-11-16  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üìã –û–ü–ò–°–ê–ù–ò–ï

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Å–µ—Å—Å–∏–π** –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è. –°–µ—Å—Å–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –ø–æ –ø–∞–ø–∫–∞–º –≤ –∞—Ä—Ö–∏–≤–µ (—Å–æ–∑–¥–∞–Ω–Ω—ã–º `clean_logs.bat`) –∏–ª–∏ –ø–æ –¥–∞—Ç–∞–º.

---

## üéØ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢

### **1. –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –ª–æ–≥–æ–≤ (`clean_logs.bat`)**

–ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ `clean_logs.bat`, –æ–Ω:
- –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `logs/futures/archived/logs_YYYY-MM-DD_HH-MM-SS/`
- –ü–µ—Ä–µ–º–µ—â–∞–µ—Ç —Ç—É–¥–∞ –≤—Å–µ –ª–æ–≥–∏ –∏ CSV —Ñ–∞–π–ª—ã —Å–µ—Å—Å–∏–∏
- –ö–∞–∂–¥–∞—è –ø–∞–ø–∫–∞ = –æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è

**–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```
logs/futures/archived/
  ‚îú‚îÄ‚îÄ logs_2025-11-16_20-58-08/
  ‚îÇ   ‚îú‚îÄ‚îÄ futures_main_2025-11-16.log
  ‚îÇ   ‚îú‚îÄ‚îÄ futures_main_2025-11-16.log.zip
  ‚îÇ   ‚îî‚îÄ‚îÄ trades_2025-11-16.csv
  ‚îú‚îÄ‚îÄ logs_2025-11-15_14-30-22/
  ‚îÇ   ‚îú‚îÄ‚îÄ futures_main_2025-11-15.log
  ‚îÇ   ‚îî‚îÄ‚îÄ trades_2025-11-15.csv
  ‚îî‚îÄ‚îÄ ...
```

---

### **2. –ü–æ–∏—Å–∫ —Å–µ—Å—Å–∏–π (`find_sessions`)**

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ò—â–µ—Ç –≤—Å–µ –ø–∞–ø–∫–∏ –≤ `logs/futures/archived/`
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ª–æ–≥–∏ –ø–æ –ø–∞–ø–∫–∞–º (–∫–∞–∂–¥–∞—è –ø–∞–ø–∫–∞ = –æ–¥–Ω–∞ —Å–µ—Å—Å–∏—è)
- –¢–∞–∫–∂–µ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –ª–æ–≥–∏ –ø–æ –¥–∞—Ç–∞–º (–¥–ª—è –ª–æ–≥–æ–≤ –Ω–µ –≤ –ø–∞–ø–∫–∞—Ö)

**–§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```python
{
    "logs_2025-11-16_20-58-08": [log_file1, log_file2, ...],
    "logs_2025-11-15_14-30-22": [log_file1, ...],
    "–°–µ—Å—Å–∏—è 2025-11-14": [log_file1, ...],  # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
}
```

---

### **3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä (`compare_sessions_menu`)**

–ü—Ä–∏ –≤—ã–±–æ—Ä–µ "11. üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π" –≤ –º–µ–Ω—é:

1. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π:**
   ```
   üìÅ –ù–∞–π–¥–µ–Ω–æ —Å–µ—Å—Å–∏–π: 3
   
   –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Å—Å–∏–∏:
     1. logs_2025-11-16_20-58-08 (2025-11-16 20:58:08) (12 —Ñ–∞–π–ª(–æ–≤))
     2. logs_2025-11-15_14-30-22 (2025-11-15 14:30:22) (8 —Ñ–∞–π–ª(–æ–≤))
     3. –°–µ—Å—Å–∏—è 2025-11-14 (2025-11-14) (5 —Ñ–∞–π–ª(–æ–≤))
   ```

2. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏:**
   ```
   –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–µ—Å—Å–∏—é (1-3): 
   ```

3. **–ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –≤—ã–±–æ—Ä –≤—Ç–æ—Ä–æ–π —Å–µ—Å—Å–∏–∏:**
   ```
   –í—ã–±–µ—Ä–∏—Ç–µ –≤—Ç–æ—Ä—É—é —Å–µ—Å—Å–∏—é (1-3): 
   ```

4. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ–±–µ —Å–µ—Å—Å–∏–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ:**
   ```
   üìä –°–†–ê–í–ù–ï–ù–ò–ï –°–ï–°–°–ò–ô
   ============================================================
   
   –°–µ—Å—Å–∏—è 1: logs_2025-11-16_20-58-08
     –ë–∞–ª–∞–Ω—Å: $902.95 ‚Üí $906.17
     –ü—Ä–∏–±—ã–ª—å: $3.22 (+0.36%)
     –ü–æ–∑–∏—Ü–∏–π: 54 (–ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö: 28)
   
   –°–µ—Å—Å–∏—è 2: logs_2025-11-15_14-30-22
     –ë–∞–ª–∞–Ω—Å: $900.00 ‚Üí $905.50
     –ü—Ä–∏–±—ã–ª—å: $5.50 (+0.61%)
     –ü–æ–∑–∏—Ü–∏–π: 42 (–ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö: 25)
   
   ============================================================
   üìà –ò–ó–ú–ï–ù–ï–ù–ò–Ø
   ============================================================
   –ü—Ä–∏–±—ã–ª—å: -2.28 USDT (-0.25%)
   –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤: +2.3%
   –ü–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã—Ç–æ: +12
   –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π: +3
   
   ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è:
     + –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤: +2.3%
     + –ü–æ–∑–∏—Ü–∏–π –∑–∞–∫—Ä—ã—Ç–æ: +12
   
   ‚ùå –£—Ö—É–¥—à–µ–Ω–∏—è:
     - –ü—Ä–∏–±—ã–ª—å: -2.28 USDT
   ```

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞** - –Ω–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—ã
2. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä** - –ø—Ä–æ—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –Ω–æ–º–µ—Ä —Å–µ—Å—Å–∏–∏
3. **–ü–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è** - –≤–∏–¥–Ω–æ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏
4. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞–ø–∫–∞–º–∏ –∏–∑ `clean_logs.bat` –∏ —Å –ª–æ–≥–∞–º–∏ –ø–æ –¥–∞—Ç–∞–º
5. **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ** - —á–∏—Ç–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã —Å–µ—Å—Å–∏–∏ (–ª–æ–≥–∏ + ZIP + CSV)

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### **–ú–µ—Ç–æ–¥ `find_sessions()`**

```python
def find_sessions(self) -> Dict[str, List[Path]]:
    """–ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —Å–µ—Å—Å–∏–∏ –≤ –∞—Ä—Ö–∏–≤–µ –∏ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∏—Ö –ø–æ –ø–∞–ø–∫–∞–º/–¥–∞—Ç–∞–º"""
    sessions = {}
    
    # 1. –ò—â–µ–º —Å–µ—Å—Å–∏–∏ –≤ –ø–æ–¥–ø–∞–ø–∫–∞—Ö archived (–∏–∑ clean_logs.bat)
    for subdir in archived_dir.iterdir():
        if subdir.is_dir():
            session_name = subdir.name  # logs_YYYY-MM-DD_HH-MM-SS
            session_files = []
            
            # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –ª–æ–≥–∏ –∏ ZIP –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ
            for log_file in subdir.glob("*.log"):
                session_files.append(log_file)
            for zip_file in subdir.glob("*.zip"):
                session_files.append(zip_file)
            
            if session_files:
                sessions[session_name] = sorted(session_files, ...)
    
    # 2. –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ª–æ–≥–∏ –ø–æ –¥–∞—Ç–∞–º (–¥–ª—è –ª–æ–≥–æ–≤ –Ω–µ –≤ –ø–∞–ø–∫–∞—Ö)
    # ...
    
    return sessions
```

### **–ú–µ—Ç–æ–¥ `compare_sessions_menu()`**

```python
def compare_sessions_menu(analyzer: LogAnalyzer):
    """–ú–µ–Ω—é —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–π —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º"""
    # 1. –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Å–µ—Å—Å–∏–∏
    sessions = analyzer.find_sessions()
    
    # 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫
    for i, (session_name, files) in enumerate(sessions.items(), 1):
        print(f"  {i}. {session_name} ({len(files)} —Ñ–∞–π–ª(–æ–≤))")
    
    # 3. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤—ã–±–æ—Ä
    choice1 = input("–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–≤—É—é —Å–µ—Å—Å–∏—é: ")
    choice2 = input("–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ç–æ—Ä—É—é —Å–µ—Å—Å–∏—é: ")
    
    # 4. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º
    stats1, _ = analyzer.analyze_session(files1)
    stats2, _ = analyzer.analyze_session(files2)
    comparison = analyzer.compare_sessions(stats1, stats2)
    
    # 5. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    # ...
```

---

## üìù –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï

### **–®–∞–≥ 1: –ê—Ä—Ö–∏–≤–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏**

```batch
clean_logs.bat
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É `logs/futures/archived/logs_YYYY-MM-DD_HH-MM-SS/` —Å –ª–æ–≥–∞–º–∏ —Å–µ—Å—Å–∏–∏.

### **–®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä**

```batch
analyze.bat
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:
```bash
python logs/analyze_logs.py
```

### **–®–∞–≥ 3: –í—ã–±–µ—Ä–∏—Ç–µ "11. üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π"**

–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–∫–∞–∂–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç –≤—ã–±—Ä–∞—Ç—å –¥–≤–µ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
- ‚úÖ `find_sessions()` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ `compare_sessions_menu()` - –æ–±–Ω–æ–≤–ª–µ–Ω–æ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –≤—ã–±–æ—Ä–æ–º
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–ø–æ–∫ –∏–∑ `clean_logs.bat` - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–∞–º - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ß—Ç–µ–Ω–∏–µ ZIP –∏ LOG —Ñ–∞–π–ª–æ–≤ - —Ä–∞–±–æ—Ç–∞–µ—Ç

**–¢–µ—Å—Ç:**
```python
from logs.analyze_logs import LogAnalyzer
a = LogAnalyzer()
sessions = a.find_sessions()
print(f"–ù–∞–π–¥–µ–Ω–æ —Å–µ—Å—Å–∏–π: {len(sessions)}")
# –ù–∞–π–¥–µ–Ω–æ —Å–µ—Å—Å–∏–π: 1
```

---

**–î–∞—Ç–∞:** 2025-11-16  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

