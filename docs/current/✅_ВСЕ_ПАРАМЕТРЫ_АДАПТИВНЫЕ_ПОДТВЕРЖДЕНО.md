# ‚úÖ –í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ê–î–ê–ü–¢–ò–í–ù–´–ï - –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–û

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025, 02:25  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ê–î–ê–ü–¢–ò–í–ù–´–ï –ò –†–ê–ë–û–¢–ê–Æ–¢ –ü–†–ê–í–ò–õ–¨–ù–û**

---

## üîç –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò

### ‚úÖ TP (Take Profit) - –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ú–µ—Ç–æ–¥ `_get_adaptive_tp_percent(symbol, regime)` –≤ `PositionManager`
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Per-regime TP ‚Üí Per-symbol TP ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π TP
- –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ `regime_managers`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- `symbol_profiles[symbol][regime].tp_percent` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `symbol_profiles[symbol].tp_percent` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- `scalping_config.tp_percent` (fallback)

**–ü—Ä–∏–º–µ—Ä—ã:**
- BTC-USDT –≤ RANGING: TP = 5.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- ETH-USDT –≤ TRENDING: TP = 5.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- DOGE-USDT –≤ CHOPPY: TP = 4.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –°—Ç—Ä–æ–∫–∞ 776: Fallback —Ä–∞—Å—á–µ—Ç - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP
- ‚úÖ –°—Ç—Ä–æ–∫–∞ 887: Fallback —Ä–∞—Å—á–µ—Ç - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP
- ‚úÖ –°—Ç—Ä–æ–∫–∞ 985: –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP

---

### ‚úÖ TSL (Trailing Stop Loss) - –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ú–µ—Ç–æ–¥ `get_trailing_sl_params(regime)` –≤ `ConfigManager`
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Per-regime TSL ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π TSL
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ `symbol_profiles[symbol][regime].trailing_sl`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- `trailing_sl.by_regime[regime].*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `trailing_sl.*` (fallback)
- `symbol_profiles[symbol][regime].trailing_sl.*` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)

**–ü—Ä–∏–º–µ—Ä—ã:**
- RANGING: `loss_cut=4.0%`, `min_holding=60 –º–∏–Ω`, `timeout=120 –º–∏–Ω`
- CHOPPY: `loss_cut=1.2%`, `min_holding=0.5 –º–∏–Ω`, `timeout=3 –º–∏–Ω`
- TRENDING: `loss_cut=2.0%`, `min_holding=2 –º–∏–Ω`, `timeout=7 –º–∏–Ω`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `initialize_trailing_stop()` —á–µ—Ä–µ–∑ `signal`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–æ

---

### ‚úÖ –§–∏–ª—å—Ç—Ä—ã - –†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç:**
1. `SignalGenerator` –ø–æ–ª—É—á–∞–µ—Ç `regime_profile` –∏–∑ `symbol_profiles[symbol][regime]`
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç `filters_profile` –∏–∑ `regime_profile.get("filters", {})`
3. –ü–µ—Ä–µ–¥–∞–µ—Ç `liquidity_override`, `order_flow_override`, `funding_override`, `volatility_override` –≤ —Ñ–∏–ª—å—Ç—Ä—ã
4. –§–∏–ª—å—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `thresholds_override` –∫–∞–∫ highest priority

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- `symbol_profiles[symbol][regime].filters.*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `adaptive_regime.regimes[regime].filters.*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback)

**–ü—Ä–∏–º–µ—Ä—ã:**
- LiquidityFilter: `min_best_bid_volume_usd`, `min_best_ask_volume_usd` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É
- OrderFlowFilter: `long_threshold`, `short_threshold` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É
- FundingFilter: `max_positive_rate`, `max_negative_rate` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É
- VolatilityFilter: `min_range_percent`, `max_range_percent` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É

**–ö–æ–¥:**
- `SignalGenerator` (—Å—Ç—Ä–æ–∫–∏ 2819-2845): –ü–æ–ª—É—á–∞–µ—Ç `filters_profile` –∏–∑ `regime_profile`
- `SignalGenerator` (—Å—Ç—Ä–æ–∫–∞ 3060): –ü–µ—Ä–µ–¥–∞–µ—Ç `thresholds_override=liquidity_override` –≤ `liquidity_filter.evaluate()`
- `LiquidityFilter` (—Å—Ç—Ä–æ–∫–∞ 77): –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `_get_thresholds(symbol, regime)` –∏ `thresholds_override`

---

### ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ú–µ—Ç–æ–¥ `calculate_position_size()` –≤ `RiskManager`
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Balance Profile ‚Üí Regime Multiplier ‚Üí Symbol Multiplier ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- `balance_profiles[profile].base_position_usd` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `adaptive_regime.regimes[regime].position_size_multiplier` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- `symbol_profiles[symbol].position_multiplier` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (fallback)

---

### ‚úÖ ARM (Adaptive Regime Manager) - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (TRENDING, RANGING, CHOPPY)
- –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–æ—Ä–æ–≥–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –ø–æ —Ä–µ–∂–∏–º—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç per-symbol ARM –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ –æ—Ç–¥–µ–ª—å–Ω–æ

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- `adaptive_regime.regimes[regime].min_score_threshold` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `symbol_profiles[symbol][regime].arm.min_score_threshold` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback)

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ:
- ‚úÖ **TP**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Å–∏–º–≤–æ–ª—É –∏ —Ä–µ–∂–∏–º—É (–ò–°–ü–†–ê–í–õ–ï–ù–û)
- ‚úÖ **TSL**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É (—Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø–æ —Å–∏–º–≤–æ–ª—É)
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É –∏ —Å–∏–º–≤–æ–ª—É
- ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ –±–∞–ª–∞–Ω—Å—É, —Ä–µ–∂–∏–º—É –∏ —Å–∏–º–≤–æ–ª—É
- ‚úÖ **ARM**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É –∏ —Å–∏–º–≤–æ–ª—É

### üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–æ—Ç –Ω–∏–∑–∫–æ–≥–æ –∫ –≤—ã—Å–æ–∫–æ–º—É):
1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (fallback)
2. **Balance Profile** (–¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π)
3. **Regime –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
4. **Symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
5. **Symbol + Regime –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (highest priority)

---

## ‚úÖ –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï

### –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:
- ‚úÖ **TP**: –ò–∑ `symbol_profiles[symbol][regime].tp_percent`
- ‚úÖ **TSL**: –ò–∑ `trailing_sl.by_regime[regime].*`
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã**: –ò–∑ `symbol_profiles[symbol][regime].filters.*`
- ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π**: –ò–∑ `balance_profiles[profile].base_position_usd` + multipliers
- ‚úÖ **ARM**: –ò–∑ `adaptive_regime.regimes[regime].*`

### –ù–µ—Ç hardcoded –∑–Ω–∞—á–µ–Ω–∏–π:
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
- ‚úÖ Fallback –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. ‚úÖ **TP –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP –≤–µ–∑–¥–µ
2. ‚úÖ **TSL —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. ‚úÖ **–§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –ø–æ–ª—É—á–∞—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
4. ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
5. ‚úÖ **ARM —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ê–î–ê–ü–¢–ò–í–ù–´–ï –ò –†–ê–ë–û–¢–ê–Æ–¢ –ü–†–ê–í–ò–õ–¨–ù–û!**

**–í—ã–≤–æ–¥:** –ë–æ—Ç **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –≤–º–µ—Å—Ç–æ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö. –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ —Å —É—á–µ—Ç–æ–º —Ä–µ–∂–∏–º–∞ –∏ —Å–∏–º–≤–æ–ª–∞.


