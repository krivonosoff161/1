# ‚úÖ –ü–û–õ–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –í–´–ó–û–í–û–í –ò –ü–†–û–ë–õ–ï–ú

**–î–∞—Ç–∞:** 25.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. **update_regime** - —Ç–µ–ø–µ—Ä—å async ‚úÖ
- **–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`
- **–°—Ç—Ä–æ–∫–∞ 474:** `async def update_regime(...)`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## üîç –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –í–´–ó–û–í–û–í

### 1. **update_regime** - –ù–ï –í–´–ó–´–í–ê–ï–¢–°–Ø –Ω–∞–ø—Ä—è–º—É—é ‚úÖ
- ‚úÖ –í futures –∫–æ–¥–µ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `update_regime()` –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ –ú–µ—Ç–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ `regime_manager` (—á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã)
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã `await self.data_registry.update_regime()` –≤–Ω—É—Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

### 2. **is_signal_valid** - async, –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ
- **–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`
- **–°—Ç—Ä–æ–∫–∞ 657:** `async def is_signal_valid(...)`
- **–í—ã–∑–æ–≤—ã –≤ signal_generator.py:**
  - –°—Ç—Ä–æ–∫–∞ 3288: `await regime_manager.is_signal_valid(...)` ‚úÖ
  - –°—Ç—Ä–æ–∫–∞ 3855: `await regime_manager.is_signal_valid(...)` ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 3. **detect_regime** - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ
- **–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`
- **–°—Ç—Ä–æ–∫–∞ 238:** `def detect_regime(...)` (–Ω–µ async)
- **–í—ã–∑–æ–≤ –≤ signal_generator.py:**
  - –°—Ç—Ä–æ–∫–∞ 1247: `detection_result = regime_manager.detect_regime(...)` ‚úÖ (–±–µ–∑ await)
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 4. **get_current_regime** - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ
- **–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`
- **–°—Ç—Ä–æ–∫–∞ 580:** `def get_current_regime(...)` (–Ω–µ async)
- **–í—ã–∑–æ–≤—ã:** –í—Å–µ –±–µ–∑ await ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### 5. **initialize** - async, –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ ‚úÖ
- **–í—ã–∑–æ–≤—ã –≤ signal_generator.py:**
  - –°—Ç—Ä–æ–∫–∞ 528: `await self.regime_manager.initialize(ohlcv_data)` ‚úÖ
  - –°—Ç—Ä–æ–∫–∞ 583: `await self.regime_managers[symbol].initialize(...)` ‚úÖ
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê DATA_REGISTRY –í–´–ó–û–í–û–í

### –í—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:
- ‚úÖ `await self.data_registry.update_regime(...)` - –≤ async –º–µ—Ç–æ–¥–µ
- ‚úÖ `await self.data_registry.update_balance(...)` - –≤ async –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ `await self.data_registry.get_balance()` - –≤ async –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ `await self.data_registry.update_margin(...)` - –≤ async –º–µ—Ç–æ–¥–∞—Ö
- ‚úÖ `await self.data_registry.update_indicators(...)` - –≤ async –º–µ—Ç–æ–¥–∞—Ö

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–ò–ù–¢–ê–ö–°–ò–°–ê

### –ú–µ—Ç–æ–¥—ã –≤ regime_manager.py:

1. ‚úÖ `def detect_regime(...)` - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
2. ‚úÖ `async def update_regime(...)` - async (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ) ‚úÖ
3. ‚úÖ `def get_current_regime(...)` - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
4. ‚úÖ `async def is_signal_valid(...)` - async (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## ‚úÖ –í–´–í–û–î–´

### –í—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ:
- ‚úÖ `update_regime` —Ç–µ–ø–µ—Ä—å async
- ‚úÖ –í—Å–µ `await` –≤—ã–∑–æ–≤—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
- ‚úÖ –í—Å–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç await
- ‚úÖ –í—Å–µ async –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç await –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º:
- ‚úÖ –ù–µ—Ç `await` –≤–Ω–µ async —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ù–µ—Ç async –º–µ—Ç–æ–¥–æ–≤ –±–µ–∑ await (–≥–¥–µ –Ω—É–∂–Ω–æ)
- ‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –í–ï–†–î–ò–ö–¢

**‚úÖ –í—Å–µ –≤—ã–∑–æ–≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ!**

**‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è!**

**‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å async/await!**

**‚úÖ –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫!**

---

**‚úÖ –í–°–ï –ü–†–û–í–ï–†–ï–ù–û - –û–®–ò–ë–û–ö –ù–ï–¢! üéâ**






