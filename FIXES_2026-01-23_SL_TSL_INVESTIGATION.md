# üîç –£–ì–õ–£–ë–õ–ï–ù–ù–û–ï –†–ê–°–°–õ–ï–î–û–í–ê–ù–ò–ï SL/TSL –ò –ó–ê–©–ò–¢–´ –û–¢ –ü–†–û–°–ö–ê–õ–¨–ó–´–í–ê–ù–ò–Ø
## –î–∞—Ç–∞: 23 —è–Ω–≤–∞—Ä—è 2026

---

## ‚úÖ –ü–†–ò–ú–ï–ù–ï–ù–û 4 –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1: max_position_usd ‚Üí 900 (–ö–û–ù–§–ò–ì)** ‚ö†Ô∏è –ù–ï –°–†–ê–ë–û–¢–ê–õ–û

**–§–∞–π–ª:** `config/config_futures.yaml`
**–ò–∑–º–µ–Ω–µ–Ω–∏–π:** 11 –≤—Ö–æ–∂–¥–µ–Ω–∏–π

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
```yaml
max_position_usd: 250.0 ‚Üí 900.0  # –î–ª—è –≤—Å–µ—Ö –ø–∞—Ä –∏ —Ä–µ–∂–∏–º–æ–≤
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–û–∂–∏–¥–∞–ª–æ—Å—å:** –ú–∞—Ä–∂–∞ $90 –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
- **–†–ï–ê–õ–¨–ù–û:** –ú–∞—Ä–∂–∞ $22-33 –Ω–∞ –ø–æ–∑–∏—Ü–∏—é ‚ùå
- **–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä `max_position_usd` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ `progressive: true`

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ù–ï –°–†–ê–ë–û–¢–ê–õ–û - —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1B

---

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1B: –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö –ü–†–û–ë–õ–ï–ú–´ - size_at_min/max (–ö–û–ù–§–ò–ì)** ‚úÖ

**–§–∞–π–ª:** `config/config_futures.yaml`
**–°—Ç—Ä–æ–∫–∏:** 340-342 (small), 351-353 (medium)

**üî¥ –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**

–í balance_profiles –ø—Ä–∏ `progressive: true` —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ª–∏–Ω–µ–π–Ω—É—é –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é** –º–µ–∂–¥—É `size_at_min` –∏ `size_at_max`, **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É—è** `max_position_usd`!

**–ò—Å—Ö–æ–¥–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–∫–æ–¥):**
```python
# src/strategies/scalping/futures/risk_manager.py:696-720
if is_progressive:
    # –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è: size = size_at_min + (size_at_max - size_at_min) * (balance - min_balance) / (max_balance - min_balance)
    interpolated_size = size_at_min + (size_range * (clamped_balance - min_balance) / balance_range)
    base_usd_size = interpolated_size  # ‚ùå max_position_usd –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è!
```

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ $913:**
```
–ü—Ä–æ—Ñ–∏–ª—å "small": min_balance=$500, max_balance=$1500
size_at_min=100, size_at_max=200

Notional = 100 + (200-100) √ó (913-500)/(1500-500)
         = 100 + 100 √ó 413/1000
         = 100 + 41.3 = 141.3 USD

Margin = 141.3 / 10 = $14.13 ‚ùå (–≤–º–µ—Å—Ç–æ $90)
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```yaml
small:  # $500 - $1500
  size_at_min: 100.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
  size_at_max: 200.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
  base_position_usd: 100.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

medium:  # $1500 - $3000
  size_at_min: 150.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
  size_at_max: 200.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
  base_position_usd: 175.0 ‚Üí 900.0  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ë—ã–ª–æ:** Notional $141 ‚Üí Margin $14 ‚ùå
- **–ë—É–¥–µ—Ç:** Notional $900 ‚Üí Margin $90 ‚úÖ
- **–§–æ—Ä–º—É–ª–∞:** Notional $900 / Leverage 10x = **$90 margin** ‚úÖ

**–¶–µ–ø–æ—á–∫–∞ –≤—ã–∑–æ–≤–æ–≤:**
```
ConfigManager.get_balance_profile(balance=$913)
  ‚Üí –í—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å "small" (threshold=$1500)
  ‚Üí RiskManager.calculate_position_size()
    ‚Üí if is_progressive: –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è size_at_min/max
    ‚Üí base_usd_size = 141.3 USD (–ë–´–õ–û)
    ‚Üí base_usd_size = 900.0 USD (–°–¢–ê–õ–û)
```

---

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #2: min_holding_minutes ‚Üí 2.0 –º–∏–Ω (–ö–û–ù–§–ò–ì)** ‚úÖ

**–§–∞–π–ª:** `config/config_futures.yaml`
**–°—Ç—Ä–æ–∫–∏:** 39, 48

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
```yaml
exit_params:
  trending:
    min_holding_minutes: 0.5 ‚Üí 2.0  # –£–≤–µ–ª–∏—á–µ–Ω–æ –≤ 4 —Ä–∞–∑–∞
  ranging:
    min_holding_minutes: 0.5 ‚Üí 2.0  # –£–≤–µ–ª–∏—á–µ–Ω–æ –≤ 4 —Ä–∞–∑–∞
  choppy:
    min_holding_minutes: 3.0  # –û—Å—Ç–∞–≤–ª–µ–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
```

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- TSL –≤—ã–∫–ª—é—á–µ–Ω (trailing_sl.enabled=false)
- TSL –∏–º–µ–ª min_holding=3.0 –º–∏–Ω –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è
- ExitAnalyzer –¥–æ–ª–∂–µ–Ω –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞—â–∏—Ç—É
- 2 –º–∏–Ω—É—Ç—ã = –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –∑–∞—â–∏—Ç–æ–π –∏ –≥–∏–±–∫–æ—Å—Ç—å—é

**–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç:**
- ‚ùå DOGE –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 19-30 —Å–µ–∫ —Å —É–±—ã—Ç–∫–æ–º -4.5% –¥–æ -7.3%
- ‚ùå ETH –∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 42 —Å–µ–∫ —Å —É–±—ã—Ç–∫–æ–º -4.5%

---

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #3: –ó–∞—â–∏—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ loss_cut —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 90 —Å–µ–∫ (–ö–û–î)** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`
**–°—Ç—Ä–æ–∫–∏:** ~3230, ~4220 (trending –∏ ranging —Ä–µ–∂–∏–º—ã)

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
```python
# –ó–∞—â–∏—Ç–∞: –º–∏–Ω–∏–º—É–º 90 —Å–µ–∫—É–Ω–¥ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ SL
seconds_in_position = minutes_in_position * 60.0
min_sl_hold_seconds = 90.0

if seconds_in_position < min_sl_hold_seconds:
    logger.info(f"‚è±Ô∏è SL –ó–ê–©–ò–¢–ê: –ë–õ–û–ö–ò–†–£–ï–ú –∑–∞–∫—Ä—ã—Ç–∏–µ...")
    return {"action": "hold", "reason": "sl_grace_period"}
```

**–õ–æ–≥–∏–∫–∞ –≤–∑—è—Ç–∞ –∏–∑ TrailingStopLoss:**
- TrailingStopLoss –∏–º–µ–µ—Ç loss_cut —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π 90 —Å–µ–∫
- ExitAnalyzer –ù–ï –∏–º–µ–ª —Ç–∞–∫–æ–π –∑–∞—â–∏—Ç—ã
- –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –æ–±–∞ —Ä–µ–∂–∏–º–∞ (trending –∏ ranging)

**–ó–∞—â–∏—â–∞–µ—Ç –æ—Ç:**
- –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –∏–∑-–∑–∞ —Å–ø—Ä–µ–¥–∞
- –ü—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–∏
- –õ–æ–∂–Ω—ã—Ö SL –Ω–∞ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Å–∞–¥–∫–∞—Ö

---

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #4: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ SL (–ö–û–î)** ‚úÖ

**–§–∞–π–ª—ã:**
1. `src/strategies/scalping/futures/positions/exit_analyzer.py` (—Å—Ç—Ä–æ–∫–∏ ~1310-1350, ~1545-1575)
2. `src/strategies/scalping/futures/config/parameter_provider.py` (—Å—Ç—Ä–æ–∫–∏ ~218-228)

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**

#### –í ExitAnalyzer._get_sl_percent():
```python
# –ù–ê–ß–ê–õ–û —Ñ—É–Ω–∫—Ü–∏–∏
logger.debug(f"üîç [SL_SOURCE_TRACE] {symbol} ({regime}): –ù–∞—á–∞–ª–æ –ø–æ–∏—Å–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ SL")
logger.debug(f"üîç [SL_SOURCE_TRACE] RAW –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ exit_params | sl_atr={...}")

# –ü–û–°–õ–ï –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
logger.debug(f"üîç [SL_SOURCE_TRACE] –ü–û–°–õ–ï _to_float | sl_atr={...}")

# –í ATR-based —Ä–∞—Å—á–µ—Ç–µ
logger.debug(f"üîç [SL_SOURCE_TRACE] ATR-based —Ä–∞—Å—á–µ—Ç –ù–ê–ß–ê–õ–û | sl_atr_multiplier={...}")
logger.debug(f"üîç [SL_SOURCE_TRACE] ATR-based —Ä–∞—Å—á–µ—Ç –§–ò–ù–ê–õ | final SL={...}")
```

#### –í ParameterProvider.get_exit_params():
```python
# –ü–û–°–õ–ï –±–∞–∑–æ–≤—ã—Ö _to_float
logger.debug(f"üîç [PARAM_PROVIDER_TRACE] –ü–û–°–õ–ï –±–∞–∑–æ–≤—ã—Ö _to_float | sl_atr={...}")
```

**–¶–µ–ª—å:**
- –û—Ç—Å–ª–µ–¥–∏—Ç—å –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è `sl_atr_multiplier=2.0` –≤–º–µ—Å—Ç–æ `2.5`
- –û—Ç—Å–ª–µ–¥–∏—Ç—å –æ—Ç–∫—É–¥–∞ –±–µ—Ä—É—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è `sl_min_percent=0.9%` –≤–º–µ—Å—Ç–æ `1.8%`
- –ù–∞–π—Ç–∏ –ø–µ—Ä–≤–æ–∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º—ã

---

### **–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #5: –ó–∞—â–∏—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ fallback'–∞–º–∏ (–ö–û–î)** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`
**–°—Ç—Ä–æ–∫–∏:** 1381-1497

**üî¥ –û–ë–ù–ê–†–£–ñ–ï–ù–ù–ê–Ø –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê:**

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ ParameterProvider –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `sl_min_percent` –∏ `sl_atr_multiplier` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞, fallback –ø—É—Ç–∏ **–ü–ï–†–ï–ó–ê–ü–ò–°–´–í–ê–Æ–¢** –∏—Ö –Ω–∞ hardcoded –∑–Ω–∞—á–µ–Ω–∏—è!

**–¶–µ–ø–æ—á–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã:**
```python
# 1. ParameterProvider –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑ exit_params:
sl_min_percent = 1.4  # ‚úÖ –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞ choppy.sl_min_percent
sl_atr_multiplier = 2.5  # ‚úÖ –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞ choppy.sl_atr_multiplier

# 2. –ù–û! –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç sl_percent == 2.0 (fallback –∑–Ω–∞—á–µ–Ω–∏–µ)
if self.config_manager and sl_percent == 2.0:  # ‚ùå TRUE, –ø–æ—Ç–æ–º—É —á—Ç–æ ParameterProvider –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç sl_percent

# 3. –ò –ü–ï–†–ï–ó–ê–ü–ò–°–´–í–ê–ï–¢ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ fallback!
sl_min_percent = float(regime_config.get("sl_min_percent", 0.9))  # ‚ùå 1.4 ‚Üí 0.9
sl_atr_multiplier = float(regime_config.get("sl_atr_multiplier", 2.0))  # ‚ùå 2.5 ‚Üí 2.0
```

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (23.01.2026): –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ ParameterProvider
param_provider_sl_min = sl_min_percent  # –°–æ—Ö—Ä–∞–Ω—è–µ–º –î–û fallback –ø—É—Ç–µ–π
param_provider_sl_atr_mult = sl_atr_multiplier

# –í –∫–∞–∂–¥–æ–º fallback –ø—É—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º:
if param_provider_sl_atr_mult == 2.0:  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—ã–ª–æ fallback –∑–Ω–∞—á–µ–Ω–∏–µ
    sl_atr_multiplier = float(regime_config.get("sl_atr_multiplier", 2.0))

if param_provider_sl_min == 0.9:  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—ã–ª–æ fallback –∑–Ω–∞—á–µ–Ω–∏–µ
    sl_min_percent = float(regime_config.get("sl_min_percent", 0.9))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ë—ã–ª–æ:** sl_min_percent –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è, –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 0.9%
- **–°—Ç–∞–ª–æ:** sl_min_percent –±–µ—Ä–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (1.3% –¥–ª—è ranging, 1.4% –¥–ª—è choppy, 1.2% –¥–ª—è trending)
- **–ë—ã–ª–æ:** sl_atr_multiplier –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- **–°—Ç–∞–ª–æ:** sl_atr_multiplier –±–µ—Ä–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (2.0 –¥–ª—è ranging, 2.5 –¥–ª—è choppy, 3.5 –¥–ª—è trending)

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤ 3 –º–µ—Å—Ç–∞—Ö:**
- –°—Ç—Ä–æ–∫–∏ 1394-1409: symbol_profiles fallback
- –°—Ç—Ä–æ–∫–∏ 1434-1449: adaptive_regime fallback
- –°—Ç—Ä–æ–∫–∏ 1475-1490: by_regime fallback

---

## üö® –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### **–ü–†–û–ë–õ–ï–ú–ê #1: TSL –í–´–ö–õ–Æ–ß–ï–ù**

**–§–∞–π–ª:** `config/config_futures.yaml:1661`
**–°—Ç–∞—Ç—É—Å:** enabled=false

**–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è:**
> "TSL –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫—É SL, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —É–±—ã—Ç–∫–∞–º -11.14% –≤–º–µ—Å—Ç–æ -1.0%"

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:**
- TSL –∏–º–µ–µ—Ç min_holding=3 –º–∏–Ω ‚Üí –ù–ï –†–ê–ë–û–¢–ê–ï–¢
- ExitAnalyzer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç min_holding=0.5 –º–∏–Ω ‚Üí –°–õ–ò–®–ö–û–ú –ú–ê–õ

**–†–µ—à–µ–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–ª–∏ min_holding –≤ ExitAnalyzer –¥–æ 2.0 –º–∏–Ω ‚úÖ

---

### **–ü–†–û–ë–õ–ï–ú–ê #2: ExitAnalyzer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –£–°–¢–ê–†–ï–í–®–ò–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL**

**–°–∏–º–ø—Ç–æ–º—ã (–∏–∑ –ª–æ–≥–æ–≤):**
```
ATR_1m=2.988299, ATR%=0.1006%, multiplier=2.00, min=0.90%, FINAL SL=1.41%
```

**–û–∂–∏–¥–∞–ª–æ—Å—å (–∏–∑ exit_params.trending):**
```
sl_atr_multiplier: 2.5
sl_min_percent: 1.8%
```

**–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ö–æ–Ω—Ñ–∏–≥ | –†–µ–∞–ª—å–Ω–æ | –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ |
|----------|--------|---------|------------|
| sl_atr_multiplier | 2.5 | 2.0 | -20% ‚ùå |
| sl_min_percent | 1.8% | 0.9% | -50% ‚ùå |

**–ì–∏–ø–æ—Ç–µ–∑–∞:**
- ParameterProvider –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ü–†–ê–í–ò–õ–¨–ù–´–ï –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ exit_params
- –ù–û ExitAnalyzer –∏—Å–ø–æ–ª—å–∑—É–µ—Ç fallback –∑–Ω–∞—á–µ–Ω–∏—è
- –í–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã
- ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤

---

### **–ü–†–û–ë–õ–ï–ú–ê #3: min_holding_minutes —Å–ª–∏—à–∫–æ–º –º–∞–ª**

**–ë—ã–ª–æ:** 0.5 –º–∏–Ω (30 —Å–µ–∫—É–Ω–¥)
**–°—Ç–∞–ª–æ:** 2.0 –º–∏–Ω (120 —Å–µ–∫—É–Ω–¥) ‚úÖ

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ç–∞—Ä–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è:**
- DOGE #1: –∑–∞–∫—Ä—ã–ª–∞—Å—å —á–µ—Ä–µ–∑ **19 —Å–µ–∫—É–Ω–¥** ‚ùå
- DOGE #2: –∑–∞–∫—Ä—ã–ª–∞—Å—å —á–µ—Ä–µ–∑ **30 —Å–µ–∫—É–Ω–¥** ‚ùå
- ETH #2: –∑–∞–∫—Ä—ã–ª–∞—Å—å —á–µ—Ä–µ–∑ **42 —Å–µ–∫—É–Ω–¥** ‚ùå

**–° –Ω–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º 2.0 –º–∏–Ω:**
- –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –±—É–¥—É—Ç –¥–µ—Ä–∂–∞—Ç—å—Å—è –º–∏–Ω–∏–º—É–º 120 —Å–µ–∫—É–Ω–¥ ‚úÖ
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ loss_cut: 90 —Å–µ–∫—É–Ω–¥ ‚úÖ

---

### **–ü–†–û–ë–õ–ï–ú–ê #4: –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –ù–ï –¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∞**

**–ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã –≤ –∫–æ–¥–µ:**

#### TrailingStopLoss (–í–´–ö–õ–Æ–ß–ï–ù):
```python
# trailing_stop_loss.py:767-787
min_loss_cut_hold_seconds = 90.0  # –ú–∏–Ω–∏–º—É–º 90 —Å–µ–∫ –ø–µ—Ä–µ–¥ loss_cut
```

#### SlippageGuard (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –û–†–î–ï–†–û–í):
```python
# slippage_guard.py
# –ó–∞—â–∏—â–∞–µ—Ç –æ—Ä–¥–µ—Ä–∞ –æ—Ç –ø–ª–æ—Ö–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
# –ù–ï –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
```

#### ExitAnalyzer (–¢–ï–ü–ï–†–¨ –î–û–ë–ê–í–õ–ï–ù–û):
```python
# exit_analyzer.py:3230+
min_sl_hold_seconds = 90.0  # –ù–æ–≤–∞—è –∑–∞—â–∏—Ç–∞! ‚úÖ
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞—â–∏—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ ExitAnalyzer

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

| –ê—Å–ø–µ–∫—Ç | –ë—ã–ª–æ | –°—Ç–∞–Ω–µ—Ç | –£–ª—É—á—à–µ–Ω–∏–µ |
|--------|------|--------|-----------|
| **–ú–∞—Ä–∂–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é** | $24-35 | $90 | +157% –¥–æ +275% ‚úÖ |
| **Min holding (trending)** | 30 —Å–µ–∫ | 120 —Å–µ–∫ | +300% ‚úÖ |
| **–ó–∞—â–∏—Ç–∞ –æ—Ç SL** | 30 —Å–µ–∫ | 90 —Å–µ–∫ | +200% ‚úÖ |
| **–ë—ã—Å—Ç—Ä—ã–µ —É–±—ã—Ç–∫–∏ DOGE/ETH** | –ß–µ—Ä–µ–∑ 19-42 —Å–µ–∫ | –ú–∏–Ω–∏–º—É–º 120 —Å–µ–∫ | –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–æ ‚úÖ |

---

## üîç –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:

–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥–∏ –¥–ª—è –ø–æ–∏—Å–∫–∞:
```
üîç [SL_SOURCE_TRACE]          # –¢—Ä–µ–π—Å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ SL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
üîç [PARAM_PROVIDER_TRACE]     # –¢—Ä–µ–π—Å ParameterProvider
üìä [PARAMS_SL]                # –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SL
‚è±Ô∏è SL –ó–ê–©–ò–¢–ê                  # –°—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã 90 —Å–µ–∫
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:

**–°—Ü–µ–Ω–∞—Ä–∏–π A: –ë—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –ø–æ–∑–∏—Ü–∏–∏**
- –û—Ç–∫—Ä—ã—Ç—å ETH LONG
- –¶–µ–Ω–∞ —É–ø–∞–¥–µ—Ç -0.5% –∑–∞ 30 —Å–µ–∫—É–Ω–¥
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ü–æ–∑–∏—Ü–∏—è –î–ï–†–ñ–ò–¢–°–Ø (sl_grace_period) ‚úÖ
- –¶–µ–Ω–∞ —É–ø–∞–¥–µ—Ç –µ—â–µ -1.0% –∑–∞ —Å–ª–µ–¥—É—é—â–∏–µ 60 —Å–µ–∫—É–Ω–¥
- **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ü–æ—Å–ª–µ 90 —Å–µ–∫ ‚Üí SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚úÖ

**–°—Ü–µ–Ω–∞—Ä–∏–π B: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –º–∞—Ä–∂–∏**
```
–ë–∞–ª–∞–Ω—Å: $913
max_position_usd: 900
Leverage: 10x
–û–∂–∏–¥–∞–µ–º–∞—è –º–∞—Ä–∂–∞: $900 / 10 = $90 ‚úÖ
```

### 3. –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ SL:

–ï—Å–ª–∏ –≤ –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏–º:
```
üîç [SL_SOURCE_TRACE] RAW –∏–∑ exit_params | sl_atr=2.0
```

–í–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º–æ–≥–æ:
```
üîç [SL_SOURCE_TRACE] RAW –∏–∑ exit_params | sl_atr=2.5
```

**–ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤:**
- ConfigManager –Ω–µ –æ–±–Ω–æ–≤–∏–ª –∫—ç—à –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
- –ò–ª–∏ ParameterProvider –∫—ç—à–∏—Ä—É–µ—Ç —Å—Ç–∞—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- –ò–ª–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ (–æ—á–∏—Å—Ç–∏—Ç—å –∫—ç—à)
- –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –≤ –∫–æ–¥–µ
- –ò–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å force_reload –≤ ParameterProvider

---

## üìÅ –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

1. ‚úÖ `config/config_futures.yaml`
   - min_holding_minutes: 0.5 ‚Üí 2.0 (trending, ranging)
   - max_position_usd: 250 ‚Üí 900 (11 –º–µ—Å—Ç) ‚ö†Ô∏è –ù–ï –°–†–ê–ë–û–¢–ê–õ–û
   - **balance_profiles.small: size_at_min/max: 100-200 ‚Üí 900** ‚úÖ –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö
   - **balance_profiles.small: base_position_usd: 100 ‚Üí 900** ‚úÖ –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö
   - **balance_profiles.medium: size_at_min/max: 150-200 ‚Üí 900** ‚úÖ –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö
   - **balance_profiles.medium: base_position_usd: 175 ‚Üí 900** ‚úÖ –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö

2. ‚úÖ `src/strategies/scalping/futures/positions/exit_analyzer.py`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (4 –º–µ—Å—Ç–∞)
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ loss_cut 90 —Å–µ–∫ (2 –º–µ—Å—Ç–∞: trending, ranging)
   - **–ó–∞—â–∏—Ç–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ sl_min/sl_atr –æ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ (—Å—Ç—Ä–æ–∫–∏ 1381-1497)** ‚úÖ –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö SL –ü–†–û–ë–õ–ï–ú–´

3. ‚úÖ `src/strategies/scalping/futures/config/parameter_provider.py`
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ _to_float

---

## üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö—Ä–∏—Ç–∏—á–Ω–æ:
1. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥–∞
2. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ `üîç [SL_SOURCE_TRACE]` –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º–∞—Ä–∂–∞ —Å—Ç–∞–ª–∞ $90 –Ω–∞ –ø–æ–∑–∏—Ü–∏—é

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∫–ª—é—á–µ–Ω–∏–µ TSL –æ–±—Ä–∞—Ç–Ω–æ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã "–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ SL"
5. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å per-symbol min_holding –¥–ª—è DOGE (–≤–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ 3 –º–∏–Ω –≤–º–µ—Å—Ç–æ 2)

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚úÖ –ú–∞—Ä–∂–∞ –º–∞–ª–∞ ($24-35 –≤–º–µ—Å—Ç–æ $90) ‚Üí **–ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö –ù–ê–ô–î–ï–ù –ò –ò–°–ü–†–ê–í–õ–ï–ù** (size_at_min/max: 100-200 ‚Üí 900)
  - ‚ùå –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1 (max_position_usd=900) –ù–ï —Å—Ä–∞–±–æ—Ç–∞–ª–æ –∏–∑-–∑–∞ `progressive: true`
  - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1B (size_at_min/max=900) - –ò–°–¢–ò–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï
- ‚úÖ DOGE/ETH –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 30-60 —Å–µ–∫ —Å —É–±—ã—Ç–∫–æ–º ‚Üí –ò–°–ü–†–ê–í–õ–ï–ù–û (min_holding=2.0, loss_cut protection=90s)
- ‚è≥ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã SL –±–µ—Ä—É—Ç—Å—è –Ω–µ –∏–∑ exit_params ‚Üí –û–ë–õ–û–ñ–ï–ù–û –õ–û–ì–ê–ú–ò –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ ‚Üí –î–û–ë–ê–í–õ–ï–ù–ê (90 —Å–µ–∫ grace period)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–ú–∞—Ä–∂–∞ —É–≤–µ–ª–∏—á–∏—Ç—Å—è —Å $14-33 –¥–æ $90** (—Ä–æ—Å—Ç –≤ 2.7-6.4 —Ä–∞–∑–∞!) ‚úÖ
- –ë—ã—Å—Ç—Ä—ã–µ —É–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã—Ö–æ–¥—ã –ø—Ä–µ–∫—Ä–∞—Ç—è—Ç—Å—è ‚úÖ
- –õ–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ SL ‚úÖ

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ:**
üî¥ **progressive: true** –≤ balance_profiles –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç `max_position_usd` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—é `size_at_min` ‚Üí `size_at_max`. –≠—Ç–æ –±—ã–ª –ü–ï–†–í–û–ò–°–¢–û–ß–ù–ò–ö –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞—Ä–∂–æ–π!

---

**–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** üöÄ

**–í–ê–ñ–ù–û:** –ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π margin –≤—ã—Ä–∞—Å—Ç–µ—Ç —Å ~$25 –¥–æ ~$90, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –±–∞–ª–∞–Ω—Å-–ø—Ä–æ—Ñ–∏–ª–µ–π.
