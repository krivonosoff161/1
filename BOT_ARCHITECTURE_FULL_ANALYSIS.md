# üèóÔ∏è –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ê–†–•–ò–¢–ï–ö–¢–£–†–´ –¢–û–†–ì–û–í–û–ì–û –ë–û–¢–ê OKX

> **–ü–æ–ª–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –¥–ª—è Futures –∏ Spot —Ç–æ—Ä–≥–æ–≤–ª–∏ –Ω–∞ –±–∏—Ä–∂–µ OKX**

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 05 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è](#1-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞-–∏-–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è)
2. [–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏–∑](#2-–∏—Å—Ç–æ—á–Ω–∏–∫–∏-–¥–∞–Ω–Ω—ã—Ö-–∏-–∞–Ω–∞–ª–∏–∑)
3. [–ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π](#3-–ø—Ä–æ—Ü–µ—Å—Å-–ø—Ä–∏–Ω—è—Ç–∏—è-—Ä–µ—à–µ–Ω–∏–π)
4. [–†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏](#4-—Ä–∞–∑–º–µ—â–µ–Ω–∏–µ-–æ—Ä–¥–µ—Ä–æ–≤-–∏-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ-–ø–æ–∑–∏—Ü–∏—è–º–∏)
5. [–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –∏—Ö —Ä–æ–ª–∏](#5-–∫–ª—é—á–µ–≤—ã–µ-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-–∏-–∏—Ö-—Ä–æ–ª–∏)
6. [–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#6-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã-–∏-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
7. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è](#7-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–∏-–≤–∞–ª–∏–¥–∞—Ü–∏—è)
8. [–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞](#8-–ø–æ–ª–Ω—ã–π-—Å–ø–∏—Å–æ–∫-—Ñ–∞–π–ª–æ–≤-–ø—Ä–æ–µ–∫—Ç–∞)

---

## 1. –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê –ò –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø

### 1.1 –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: `run.py`

**–§–∞–π–ª:** `run.py` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞. –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–µ–∂–∏–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (Spot –∏–ª–∏ Futures).

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—Å–∫–∞:**

```python
# 1. –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
parser = argparse.ArgumentParser()
parser.add_argument('--mode', choices=['spot', 'futures'])
parser.add_argument('--interactive', action='store_true')

# 2. –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏
if args.mode == 'spot':
    await run_spot_bot()
elif args.mode == 'futures':
    await run_futures_bot()
else:
    # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä
    mode = input("–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º (spot/futures): ")
```

**–ò–º–ø–æ—Ä—Ç—ã:**
- `src.main_spot` - –¥–ª—è Spot —Ç–æ—Ä–≥–æ–≤–ª–∏
- `src.main_futures` - –¥–ª—è Futures —Ç–æ—Ä–≥–æ–≤–ª–∏

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
- `asyncio` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- `loguru` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

---

### 1.2 –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Futures –±–æ—Ç–∞: `src/main_futures.py`

**–§–∞–π–ª:** `src/main_futures.py`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ Futures —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞.

**–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**

```python
async def main():
    # 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    config = load_config('config/config_futures.yaml')
    
    # 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ OKX
    client = OKXFuturesClient(
        api_key=os.getenv('OKX_API_KEY'),
        api_secret=os.getenv('OKX_API_SECRET'),
        passphrase=os.getenv('OKX_PASSPHRASE'),
        sandbox=config.get('sandbox', False)
    )
    
    # 3. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    orchestrator = FuturesScalpingOrchestrator(
        client=client,
        config=config
    )
    
    # 4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    await orchestrator.start()
    await orchestrator.run()
```

**–ö–ª—é—á–µ–≤—ã–µ —à–∞–≥–∏:**

1. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   - –ß—Ç–µ–Ω–∏–µ `config/config_futures.yaml`
   - –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Pydantic –º–æ–¥–µ–ª–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞:**
   - –°–æ–∑–¥–∞–Ω–∏–µ `OKXFuturesClient`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–µ–π
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ sandbox/production —Ä–µ–∂–∏–º–∞

3. **–°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:**
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket

---

### 1.3 –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä: `src/strategies/scalping/futures/orchestrator.py`

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`

**–ö–ª–∞—Å—Å:** `FuturesScalpingOrchestrator`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –≤—Å–µ –º–æ–¥—É–ª–∏ –±–æ—Ç–∞, —É–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Ç–æ—Ä–≥–æ–≤–ª–∏.

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π (–º–µ—Ç–æ–¥ `__init__`):**

```python
def __init__(self, client, config):
    # 1. –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
    self.client = client
    self.config = config
    self.is_running = False
    
    # 2. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    self.config_manager = ConfigManager(config)
    self.parameter_provider = ParameterProvider(config_manager)
    
    # 3. –†–µ–µ—Å—Ç—Ä—ã –¥–∞–Ω–Ω—ã—Ö
    self.data_registry = DataRegistry()
    self.position_registry = PositionRegistry()
    
    # 4. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤
    self.signal_generator = FuturesSignalGenerator(
        client=client,
        config_manager=config_manager,
        data_registry=data_registry,
        regime_manager=regime_manager
    )
    
    # 5. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã
    self.signal_coordinator = SignalCoordinator(...)
    self.order_coordinator = OrderCoordinator(...)
    self.exit_decision_coordinator = ExitDecisionCoordinator(...)
    
    # 6. –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–π
    self.position_manager = FuturesPositionManager(...)
    self.entry_manager = EntryManager(...)
    
    # 7. –°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏
    self.risk_manager = RiskManager(...)
    self.margin_calculator = MarginCalculator(...)
    self.liquidation_guard = LiquidationGuard(...)
    
    # 8. Trading Control Center
    self.trading_control_center = TradingControlCenter(...)
```

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**

1. **–ë–∞–∑–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

2. **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
   - `ConfigManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
   - `ParameterProvider` - –µ–¥–∏–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º

3. **–†–µ–µ—Å—Ç—Ä—ã:**
   - `DataRegistry` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
   - `PositionRegistry` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–∑–∏—Ü–∏—è—Ö

4. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:**
   - `FuturesSignalGenerator` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
   - `AdaptiveRegimeManager` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞

5. **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã:**
   - `SignalCoordinator` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
   - `OrderCoordinator` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞–º–∏
   - `ExitDecisionCoordinator` - —Ä–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏

6. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏:**
   - `EntryManager` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
   - `ExitAnalyzer` - –∞–Ω–∞–ª–∏–∑ –∑–∞–∫—Ä—ã—Ç–∏—è
   - `PositionManager` - –æ–±—â–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

7. **–°–∏—Å—Ç–µ–º—ã –∑–∞—â–∏—Ç—ã:**
   - `RiskManager` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏
   - `LiquidationGuard` - –∑–∞—â–∏—Ç–∞ –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏
   - `SlippageGuard` - –∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è

8. **Trading Control Center:**
   - –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞

---

### 1.4 –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `src/config.py`

**–§–∞–π–ª:** `src/config.py`

**–§—É–Ω–∫—Ü–∏–∏:**

```python
def load_config(config_path: str) -> Dict:
    """–ó–∞–≥—Ä—É–∑–∫–∞ YAML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    with open(config_path, 'r', encoding='utf-8') as f:
        config = yaml.safe_load(f)
    return config

def validate_config(config: Dict) -> bool:
    """–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"""
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
    # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –∑–Ω–∞—á–µ–Ω–∏–π
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

1. **`config/config_futures.yaml`** - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Futures
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∏—Å–∫–æ–≤
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–æ–≤ (trending/ranging/choppy)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤

2. **`config/config_spot.yaml`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spot
   - Manual Pool Strategy
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã OCO –æ—Ä–¥–µ—Ä–æ–≤
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–ª–∞–Ω—Å–∞

3. **`config/features.yaml`** - —Ñ–ª–∞–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π
   - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π
   - –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

4. **`config/manual_pools.yaml`** - —Ä—É—á–Ω—ã–µ –ø—É–ª—ã –¥–ª—è Spot
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ –ø—É–ª–∞–º
   - –õ–∏–º–∏—Ç—ã –Ω–∞ –ø—É–ª—ã

---

### 1.5 ConfigManager: `src/strategies/scalping/futures/config/config_manager.py`

**–ö–ª–∞—Å—Å:** `ConfigManager`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π, –∑–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —Å–∏–º–≤–æ–ª–æ–≤ –∏ —Ä–µ–∂–∏–º–æ–≤.

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**

```python
class ConfigManager:
    def get_symbol_profile(self, symbol: str) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å —Å–∏–º–≤–æ–ª–∞"""
        
    def get_regime_params(self, symbol: str, regime: str) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–∞ –¥–ª—è —Å–∏–º–≤–æ–ª–∞"""
        
    def get_adaptive_risk_params(self, balance: float) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞ –ø–æ –±–∞–ª–∞–Ω—Å—É"""
        
    def get_tp_sl_params(self, symbol: str, regime: str) -> Dict:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã TP/SL"""
```

**–ò–µ—Ä–∞—Ä—Ö–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–∏–∑ `config_futures.yaml`)
2. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–∞** (trending/ranging/choppy)
3. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º–≤–æ–ª–∞** (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤ `symbol_profiles`)
4. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** (–Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–ª–∞–Ω—Å–∞)

---

### 1.6 ParameterProvider: `src/strategies/scalping/futures/config/parameter_provider.py`

**–ö–ª–∞—Å—Å:** `ParameterProvider`

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏–∏ (–≥–ª–æ–±–∞–ª—å–Ω—ã–µ ‚Üí —Ä–µ–∂–∏–º ‚Üí —Å–∏–º–≤–æ–ª)

**–ú–µ—Ç–æ–¥—ã:**

```python
class ParameterProvider:
    async def get_entry_params(self, symbol: str, regime: str) -> Dict:
        """–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ö–æ–¥–∞"""
        
    async def get_exit_params(self, symbol: str, regime: str) -> Dict:
        """–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Ö–æ–¥–∞"""
        
    async def get_risk_params(self, symbol: str, balance: float) -> Dict:
        """–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞"""
```

---

## 2. –ò–°–¢–û–ß–ù–ò–ö–ò –î–ê–ù–ù–´–• –ò –ê–ù–ê–õ–ò–ó

### 2.1 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**1. REST API OKX:**
- –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Å–≤–µ—á–∏ (5m, 15m, 1h)
- –¢–µ–∫—É—â–∏–µ —Ü–µ–Ω—ã
- Order book
- Funding rate
- –ë–∞–ª–∞–Ω—Å –∏ –ø–æ–∑–∏—Ü–∏–∏

**2. WebSocket OKX:**
- –†–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: —Ç–∏–∫–∏, —Å–≤–µ—á–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤

**3. DataRegistry:**
- –ö—ç—à –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ö—ç—à —Ä–µ–∂–∏–º–æ–≤ —Ä—ã–Ω–∫–∞
- –ö—ç—à —Å–≤–µ—á–µ–π

**4. –õ–æ–≥–∏:**
- –ò—Å—Ç–æ—Ä–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Ä–µ—à–µ–Ω–∏–π
- –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

---

### 2.2 –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏ —Å–≤–µ—á–µ–π:**

```python
# 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–µ—á–µ–π —á–µ—Ä–µ–∑ REST API
candles = await client.get_candles(
    symbol='BTC-USDT',
    timeframe='5m',
    limit=100
)

# 2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DataRegistry
await data_registry.update_candles('BTC-USDT', candles)

# 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ WebSocket
websocket.on('candle', lambda data: 
    data_registry.update_candles(data.symbol, [data.candle])
)
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**

1. **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:**
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç OHLCV
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
   - –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–æ–≤

2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `DataRegistry`
   - TTL –¥–ª—è –∫—ç—à–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ REST

---

### 2.3 –ö–æ–Ω–≤–µ–π–µ—Ä –∞–Ω–∞–ª–∏–∑–∞

**–†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:**

```python
# 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–µ—á–µ–π
candles = await data_registry.get_candles('BTC-USDT', limit=100)

# 2. –†–∞—Å—á–µ—Ç –±–∞–∑–æ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
indicators = {
    'rsi': calculate_rsi(candles, period=14),
    'macd': calculate_macd(candles, fast=12, slow=26, signal=9),
    'atr': calculate_atr(candles, period=14),
    'sma_20': calculate_sma(candles, period=20),
    'ema_12': calculate_ema(candles, period=12),
    'ema_26': calculate_ema(candles, period=26),
    'bb_upper': calculate_bb_upper(candles, period=20, std=2),
    'bb_lower': calculate_bb_lower(candles, period=20, std=2),
}

# 3. –†–∞—Å—á–µ—Ç ADX (–¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—Ä–µ–Ω–¥–∞)
adx = calculate_adx(candles, period=14)
di_plus = get_di_plus()
di_minus = get_di_minus()

# 4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DataRegistry
await data_registry.update_indicators('BTC-USDT', indicators)
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**

1. **RSI (Relative Strength Index):**
   - –ü–µ—Ä–∏–æ–¥: 14 (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
   - –ü–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å: > 70
   - –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å: < 30

2. **MACD (Moving Average Convergence Divergence):**
   - Fast: 12, Slow: 26, Signal: 9
   - –°–∏–≥–Ω–∞–ª: –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –ª–∏–Ω–∏–π

3. **ATR (Average True Range):**
   - –ü–µ—Ä–∏–æ–¥: 14
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

4. **SMA/EMA:**
   - SMA 20, EMA 12, EMA 26
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞

5. **Bollinger Bands:**
   - –ü–µ—Ä–∏–æ–¥: 20, Std: 2.0
   - –£—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏/—Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è

6. **ADX (Average Directional Index):**
   - –ü–µ—Ä–∏–æ–¥: 14
   - –°–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞ –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (+DI/-DI)

---

### 2.4 –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

**–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ–∂–∏–º–æ–≤:** `src/strategies/scalping/futures/adaptivity/regime_manager.py`

**–ö–ª–∞—Å—Å:** `AdaptiveRegimeManager`

**–†–µ–∂–∏–º—ã —Ä—ã–Ω–∫–∞:**

1. **TRENDING (–¢—Ä–µ–Ω–¥–æ–≤—ã–π):**
   - ADX > 30
   - –°–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
   - –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

2. **RANGING (–ë–æ–∫–æ–≤–æ–π):**
   - ADX < 25
   - –ë–æ–∫–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ
   - –ù–∏–∑–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å

3. **CHOPPY (–•–∞–æ—Ç–∏—á–Ω—ã–π):**
   - –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (> 5%)
   - –ú–Ω–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
   - –ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ü—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞:**

```python
def detect_regime(self, candles: List[OHLCV], current_price: float) -> RegimeDetectionResult:
    # 1. –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
    indicators = self._calculate_regime_indicators(candles, current_price)
    
    # 2. –†–∞—Å—á–µ—Ç scores –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
    choppy_score = calculate_choppy_score(indicators)
    trending_score = calculate_trending_score(indicators)
    ranging_score = calculate_ranging_score(indicators)
    
    # 3. –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º score
    best_regime = max([CHOPPY, TRENDING, RANGING], key=lambda r: scores[r])
    
    # 4. –†–∞—Å—á–µ—Ç confidence
    confidence = scores[best_regime]
    
    return RegimeDetectionResult(
        regime=best_regime,
        confidence=confidence,
        indicators=indicators,
        reason=reason
    )
```

**–§–∞–∫—Ç–æ—Ä—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞:**

1. **ADX –∑–Ω–∞—á–µ–Ω–∏–µ:**
   - –í—ã—Å–æ–∫–∏–π ADX (> 30) ‚Üí TRENDING
   - –ù–∏–∑–∫–∏–π ADX (< 25) ‚Üí RANGING

2. **–í–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å:**
   - –í—ã—Å–æ–∫–∞—è (> 5%) ‚Üí CHOPPY
   - –ù–∏–∑–∫–∞—è (< 2%) ‚Üí RANGING

3. **–†–∞–∑–≤–æ—Ä–æ—Ç—ã:**
   - –ú–Ω–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤ (> 5) ‚Üí CHOPPY
   - –ú–∞–ª–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤ ‚Üí TRENDING/RANGING

4. **–û–±—ä–µ–º:**
   - –í—ã—Å–æ–∫–∏–π –æ–±—ä–µ–º ‚Üí TRENDING
   - –ù–∏–∑–∫–∏–π –æ–±—ä–µ–º ‚Üí RANGING

---

## 3. –ü–†–û–¶–ï–°–° –ü–†–ò–ù–Ø–¢–ò–Ø –†–ï–®–ï–ù–ò–ô

### 3.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤

**–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤:** `src/strategies/scalping/futures/signal_generator.py`

**–ö–ª–∞—Å—Å:** `FuturesSignalGenerator`

**–ü—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**

```python
async def generate_signals(self) -> List[Dict]:
    signals = []
    
    for symbol in self.symbols:
        # 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        market_data = await self._get_market_data(symbol)
        
        # 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
        regime = await self.regime_manager.update_regime(
            market_data.ohlcv_data,
            market_data.current_price
        )
        
        # 3. –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
        indicators = await self._calculate_indicators(symbol, market_data)
        
        # 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
        base_signals = await self._generate_base_signals(
            symbol, market_data, indicators, regime
        )
        
        # 5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        filtered_signals = await self._apply_filters(base_signals)
        
        signals.extend(filtered_signals)
    
    return signals
```

**–¢–∏–ø—ã —Å–∏–≥–Ω–∞–ª–æ–≤:**

1. **RSI —Å–∏–≥–Ω–∞–ª—ã:**
   - LONG: RSI < 30 (–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
   - SHORT: RSI > 70 (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å)

2. **MACD —Å–∏–≥–Ω–∞–ª—ã:**
   - LONG: MACD > Signal AND Histogram > 0
   - SHORT: MACD < Signal AND Histogram < 0

3. **–ò–º–ø—É–ª—å—Å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã:**
   - LONG: –ó–µ–ª–µ–Ω–∞—è —Å–≤–µ—á–∞ + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
   - SHORT: –ö—Ä–∞—Å–Ω–∞—è —Å–≤–µ—á–∞ + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞

4. **MA —Å–∏–≥–Ω–∞–ª—ã:**
   - LONG: EMA12 > EMA26 AND –¶–µ–Ω–∞ > EMA12
   - SHORT: EMA12 < EMA26 AND –¶–µ–Ω–∞ < EMA12

**–°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ (Scoring):**

```python
# –ë–∞–∑–æ–≤—ã–µ –±–∞–ª–ª—ã (0-12):
long_score = 0
short_score = 0

# SMA Trend: +1
if sma_20 < current_price:
    long_score += 1
else:
    short_score += 1

# EMA Trend: +2
if ema_12 > ema_26:
    long_score += 2
else:
    short_score += 2

# RSI: +2
if rsi < 30:
    long_score += 2
elif rsi > 70:
    short_score += 2

# Bollinger Bands: +2
if price <= bb_lower:
    long_score += 2
elif price >= bb_upper:
    short_score += 2

# Volume: +2
if volume > volume_ma * 1.2:
    if long_score > short_score:
        long_score += 2
    else:
        short_score += 2

# MACD: +2
if macd_line > signal_line and histogram > 0:
    long_score += 2
elif macd_line < signal_line and histogram < 0:
    short_score += 2

# –ë–æ–Ω—É—Å—ã –æ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤:
# - Multi-Timeframe: +1-3
# - Pivot Points: +1-3
# - Volume Profile: +1-3

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π):
threshold = get_regime_threshold(regime)  # TRENDING: 6, RANGING: 4, CHOPPY: 7

if long_score >= threshold and long_score > short_score:
    signal = {
        'symbol': symbol,
        'side': 'LONG',
        'strength': long_score / 12.0,
        'confidence': calculate_confidence(long_score, indicators),
        'regime': regime
    }
```

---

### 3.2 –ü–∞—Ä–∞–º–µ—Ç—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —Ä–µ—à–µ–Ω–∏—è

**1. TP/SL —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è:**

```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É:
trending_params = {
    'tp_atr_multiplier': 2.5,  # TP = 2.5 √ó ATR
    'sl_atr_multiplier': 1.2    # SL = 1.2 √ó ATR
}

ranging_params = {
    'tp_atr_multiplier': 2.0,
    'sl_atr_multiplier': 1.5
}

choppy_params = {
    'tp_atr_multiplier': 1.5,
    'sl_atr_multiplier': 1.0
}
```

**2. Leverage (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ):**

```python
# –ù–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞:
if strength < 0.3:
    leverage = 3x  # very_weak
elif strength < 0.5:
    leverage = 5x  # weak
elif strength < 0.7:
    leverage = 10x  # medium
elif strength < 0.9:
    leverage = 20x  # strong
else:
    leverage = 30x  # very_strong
```

**3. –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏:**

```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ –±–∞–ª–∞–Ω—Å—É:
if balance < 1500:
    profile = 'small'
    base_size = 50
    max_size = 120
elif balance < 3500:
    profile = 'medium'
    base_size = 100
    max_size = 200
else:
    profile = 'large'
    base_size = 200
    max_size = 400

# –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å:
atr_percent = atr / current_price
volatility_multiplier = calculate_multiplier(atr_percent, regime)
position_size = base_size * volatility_multiplier * regime_multiplier
```

---

### 3.3 –ü—Ä–∞–≤–∏–ª–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏

**1. –ú–∞–∫—Å–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π:**

```python
# –ü–æ –ø—Ä–æ—Ñ–∏–ª—é –±–∞–ª–∞–Ω—Å–∞:
max_positions = {
    'small': 2,
    'medium': 3,
    'large': 3
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º:
if len(active_positions) >= max_positions[balance_profile]:
    block_signal(reason='max_positions_reached')
```

**2. –°—Ç–æ–ø-–ª–æ—Å—Å:**

```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É:
sl_distance = atr * sl_atr_multiplier[regime]

# –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏:
liquidation_price = calculate_liquidation_price(
    entry_price, leverage, margin
)
min_sl_distance = abs(entry_price - liquidation_price) * 1.1

if sl_distance < min_sl_distance:
    sl_distance = min_sl_distance
```

**3. –¢–µ–π–∫-–ø—Ä–æ—Ñ–∏—Ç:**

```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É:
tp_distance = atr * tp_atr_multiplier[regime]

# Partial TP:
if profit > tp_distance * 0.5:
    close_partial(50%)  # –ó–∞–∫—Ä—ã—Ç—å 50% –ø–æ–∑–∏—Ü–∏–∏
```

**4. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞:**

```python
# –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç:
max_daily_loss = balance * 0.10  # 10%

if daily_loss >= max_daily_loss:
    stop_trading(reason='max_daily_loss_reached')
```

---

### 3.4 ParameterProvider

**–ï–¥–∏–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º:**

```python
class ParameterProvider:
    async def get_entry_params(self, symbol: str, regime: str) -> Dict:
        """–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ö–æ–¥–∞"""
        return {
            'min_score_threshold': self._get_threshold(symbol, regime),
            'position_size_multiplier': self._get_size_multiplier(symbol, regime),
            'leverage': self._get_leverage(symbol, regime),
        }
    
    async def get_exit_params(self, symbol: str, regime: str) -> Dict:
        """–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Ö–æ–¥–∞"""
        return {
            'tp_atr_multiplier': self._get_tp_multiplier(symbol, regime),
            'sl_atr_multiplier': self._get_sl_multiplier(symbol, regime),
            'max_holding_minutes': self._get_max_holding(symbol, regime),
        }
```

**–ò–µ—Ä–∞—Ä—Ö–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**

1. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ (config_futures.yaml)
2. –†–µ–∂–∏–º (trending/ranging/choppy)
3. –°–∏–º–≤–æ–ª (symbol_profiles)
4. –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ (–Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–ª–∞–Ω—Å–∞/—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)

---

## 4. –†–ê–ó–ú–ï–©–ï–ù–ò–ï –û–†–î–ï–†–û–í –ò –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–ó–ò–¶–ò–Ø–ú–ò

### 4.1 –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤

**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ—Ä–¥–µ—Ä–æ–≤:** `src/strategies/scalping/futures/order_executor.py`

**–ö–ª–∞—Å—Å:** `FuturesOrderExecutor`

**–¢–∏–ø—ã –æ—Ä–¥–µ—Ä–æ–≤:**

1. **MARKET (–†—ã–Ω–æ—á–Ω—ã–π):**
   - –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
   - –ö–æ–º–∏—Å—Å–∏—è: 0.05% (taker)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å—Ä–æ—á–Ω–æ–≥–æ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞

2. **LIMIT (–õ–∏–º–∏—Ç–Ω—ã–π):**
   - –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–π —Ü–µ–Ω–µ
   - –ö–æ–º–∏—Å—Å–∏—è: 0.02% (maker)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–∞ –∫–æ–º–∏—Å—Å–∏—è—Ö

3. **POST-ONLY:**
   - –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç maker –∫–æ–º–∏—Å—Å–∏—é
   - –ù–µ –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ taker
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∏—Å—Å–∏–π

**–ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:**

```python
async def place_order(self, signal: Dict) -> Dict:
    # 1. –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ—Ä–¥–µ—Ä–∞
    symbol = signal['symbol']
    side = signal['side']  # 'buy' –∏–ª–∏ 'sell'
    size = calculate_position_size(signal)
    leverage = calculate_leverage(signal)
    
    # 2. –í—ã–±–æ—Ä —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞
    order_type = self._select_order_type(signal)
    
    # 3. –†–∞—Å—á–µ—Ç —Ü–µ–Ω—ã
    if order_type == 'LIMIT':
        price = self._calculate_limit_price(signal)
    else:
        price = None  # MARKET
    
    # 4. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ –±–∏—Ä–∂–µ
    order = await self.client.place_order(
        symbol=symbol,
        side=side,
        order_type=order_type,
        size=size,
        price=price,
        leverage=leverage
    )
    
    # 5. –û–∂–∏–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
    if order_type == 'LIMIT':
        await self._wait_for_fill(order, timeout=30)
    
    return order
```

**–†–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã:**

```python
def _calculate_limit_price(self, signal: Dict) -> float:
    current_price = signal['current_price']
    side = signal['side']
    offset_percent = 0.001  # 0.1% –æ—Ç —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
    
    if side == 'buy':
        # –ü–æ–∫—É–ø–∞–µ–º –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
        limit_price = current_price * (1 - offset_percent)
    else:
        # –ü—Ä–æ–¥–∞–µ–º –≤—ã—à–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã
        limit_price = current_price * (1 + offset_percent)
    
    # –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –¥–æ —à–∞–≥–∞ —Ü–µ–Ω—ã
    limit_price = round_to_tick_size(limit_price, tick_size)
    
    return limit_price
```

---

### 4.2 –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç –æ—Ä–¥–µ—Ä–∞ –∫ –ø–æ–∑–∏—Ü–∏–∏

**–ü—Ä–æ—Ü–µ—Å—Å:**

```python
# 1. –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
order = await order_executor.place_order(signal)

# 2. –û–∂–∏–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
if order['status'] == 'filled':
    # 3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ –≤ PositionRegistry
    position = await position_registry.register_position(
        symbol=signal['symbol'],
        side=signal['side'],
        entry_price=order['fill_price'],
        size=order['filled_size'],
        leverage=order['leverage'],
        regime=signal['regime'],
        entry_time=datetime.now()
    )
    
    # 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Trailing Stop Loss
    await trailing_sl_coordinator.initialize(
        symbol=signal['symbol'],
        entry_price=order['fill_price'],
        side=signal['side'],
        initial_sl=calculate_initial_sl(signal)
    )
    
    # 5. –ó–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫
    await conversion_metrics.record_signal_executed(
        symbol=signal['symbol'],
        signal_type=signal.get('type'),
        regime=signal['regime']
    )
```

---

### 4.3 –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–∏

**–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∑–∏—Ü–∏–π:** `src/strategies/scalping/futures/position_manager.py`

**–ö–ª–∞—Å—Å:** `FuturesPositionManager`

**–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ PnL:**

```python
async def calculate_pnl(self, position: Dict) -> float:
    current_price = await self._get_current_price(position['symbol'])
    entry_price = position['entry_price']
    size = position['size']
    side = position['side']
    leverage = position['leverage']
    
    if side == 'long':
        pnl_percent = ((current_price - entry_price) / entry_price) * leverage * 100
    else:
        pnl_percent = ((entry_price - current_price) / entry_price) * leverage * 100
    
    return pnl_percent
```

**–†–∞—Å—á–µ—Ç –ø—Ä–æ—Å–∞–¥–∫–∏:**

```python
async def calculate_drawdown(self, position: Dict) -> float:
    current_pnl = await self.calculate_pnl(position)
    peak_profit = position.get('peak_profit', 0)
    
    if current_pnl < peak_profit:
        drawdown = peak_profit - current_pnl
    else:
        drawdown = 0
        position['peak_profit'] = current_pnl
    
    return drawdown
```

---

### 4.4 –õ–æ–≥–∏–∫–∞ —Ä–µ—à–µ–Ω–∏–π –æ –≤—ã—Ö–æ–¥–µ

**Exit Analyzer:** `src/strategies/scalping/futures/positions/exit_analyzer.py`

**–ö–ª–∞—Å—Å:** `ExitAnalyzer`

**–£—Å–ª–æ–≤–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è:**

1. **Take Profit:**
```python
if current_pnl >= tp_percent:
    close_position(reason='tp_reached')
```

2. **Stop Loss:**
```python
if current_pnl <= -sl_percent:
    close_position(reason='sl_reached')
```

3. **Trailing Stop Loss:**
```python
if current_price <= trailing_sl_price:
    close_position(reason='trailing_sl_hit')
```

4. **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è:**
```python
holding_time = datetime.now() - position['entry_time']
if holding_time >= max_holding_time:
    close_position(reason='max_holding_time')
```

5. **–£–º–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ (Exit Analyzer):**
```python
exit_decision = await exit_analyzer.analyze_position(symbol)

if exit_decision['should_close']:
    close_position(
        reason=exit_decision['reason'],
        urgency=exit_decision['urgency']
    )
```

**–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è:**

```python
# TRENDING —Ä–µ–∂–∏–º:
# - –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
# - –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏ —á–µ—Ä–µ–∑ trailing stop
# - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: 45 –º–∏–Ω—É—Ç

# RANGING —Ä–µ–∂–∏–º:
# - –ë—ã—Å—Ç—Ä—ã–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP
# - –°—Ç—Ä–æ–≥–∏–π SL
# - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: 15 –º–∏–Ω—É—Ç

# CHOPPY —Ä–µ–∂–∏–º:
# - –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π –≤—ã—Ö–æ–¥
# - –£–∑–∫–∏–π SL
# - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è: 10 –º–∏–Ω—É—Ç
```

---

## 5. –ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò –ò–• –†–û–õ–ò

### 5.1 Orchestrator

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`

**–ö–ª–∞—Å—Å:** `FuturesScalpingOrchestrator`

**–†–æ–ª—å:** –ì–ª–∞–≤–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –±–æ—Ç–∞.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Graceful shutdown

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `start()` - –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
- `run()` - –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
- `stop()` - –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
- `_sync_positions_with_exchange()` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π

---

### 5.2 Trading Control Center

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/trading_control_center.py`

**–ö–ª–∞—Å—Å:** `TradingControlCenter`

**–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Ç–æ—Ä–≥–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ì–ª–∞–≤–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ä–¥–µ—Ä–æ–≤

**–ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª:**

```python
async def run_main_loop(self):
    while self.is_running:
        # 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        await self.update_state()
        
        # 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
        signals = await self.signal_generator.generate_signals()
        
        # 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
        await self.signal_coordinator.process_signals(signals)
        
        # 4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
        await self._manage_positions()
        
        # 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ä–¥–µ—Ä–æ–≤
        await self._monitor_orders()
        
        # 6. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π
        await self._sync_positions_with_exchange()
        
        # 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        await self._update_statistics()
        
        await asyncio.sleep(6)  # –¶–∏–∫–ª –∫–∞–∂–¥—ã–µ 6 —Å–µ–∫—É–Ω–¥
```

---

### 5.3 Signal Generator

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`

**–ö–ª–∞—Å—Å:** `FuturesSignalGenerator`

**–†–æ–ª—å:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ (LONG/SHORT)
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã:**
- `generate_signals()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- `_generate_base_signals()` - –±–∞–∑–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- `_generate_rsi_signals()` - RSI —Å–∏–≥–Ω–∞–ª—ã
- `_generate_macd_signals()` - MACD —Å–∏–≥–Ω–∞–ª—ã
- `_calculate_indicators()` - —Ä–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

---

### 5.4 Signal Coordinator

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ö–ª–∞—Å—Å:** `SignalCoordinator`

**–†–æ–ª—å:** –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
- –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ EntryManager

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

```python
async def process_signals(self, signals: List[Dict]):
    for signal in signals:
        # 1. –í–∞–ª–∏–¥–∞—Ü–∏—è
        if not self._validate_signal(signal):
            continue
        
        # 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
        if not await self._check_risks(signal):
            continue
        
        # 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
        if not await self._apply_filters(signal):
            continue
        
        # 4. –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ EntryManager
        await self.entry_manager.open_position(signal)
```

---

### 5.5 Entry Manager

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/entry_manager.py`

**–ö–ª–∞—Å—Å:** `EntryManager`

**–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
- –†–∞—Å—á–µ—Ç leverage
- –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏

---

### 5.6 Exit Analyzer

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`

**–ö–ª–∞—Å—Å:** `ExitAnalyzer`

**–†–æ–ª—å:** –£–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π –æ –∑–∞–∫—Ä—ã—Ç–∏–∏.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
- –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏

---

### 5.7 Position Registry

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/position_registry.py`

**–ö–ª–∞—Å—Å:** `PositionRegistry`

**–†–æ–ª—å:** –ï–¥–∏–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ peak_profit
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–ª–∞–≥–∞–º–∏ (partial_tp_executed)
- Thread-safe –¥–æ—Å—Ç—É–ø

---

### 5.8 Data Registry

**–§–∞–π–ª:** `src/strategies/scalping/futures/core/data_registry.py`

**–ö–ª–∞—Å—Å:** `DataRegistry`

**–†–æ–ª—å:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–≤–µ—á–µ–π
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ —Ä—ã–Ω–∫–∞
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

### 5.9 –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Orchestrator  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ TradingControlCenter
         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ SignalGenerator
         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ DataRegistry
         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ SignalCoordinator
         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ EntryManager
         ‚îÇ         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ OrderExecutor
         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ FilterManager
         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ PositionManager
         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îú‚îÄ‚îÄ‚îÄ‚ñ∫ ExitAnalyzer
         ‚îÇ         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ TrailingSLCoordinator
         ‚îÇ         ‚îÇ
         ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ OrderCoordinator
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ PositionRegistry
                   ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚ñ∫ PositionSync
```

---

## 6. –ü–ê–†–ê–ú–ï–¢–†–´ –ò –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### 6.1 –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

**–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (config_futures.yaml):**

```yaml
# –¢–æ—Ä–≥–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã
symbols:
  - BTC-USDT
  - ETH-USDT
  - SOL-USDT

# –õ–µ–≤–µ—Ä–∏–¥–∂ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
leverage: 5

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–æ–≤
adaptive_regime:
  trending:
    min_score_threshold: 6
    max_trades_per_hour: 15
    tp_atr_multiplier: 2.5
    sl_atr_multiplier: 1.2
  ranging:
    min_score_threshold: 4
    max_trades_per_hour: 10
    tp_atr_multiplier: 2.0
    sl_atr_multiplier: 1.5
  choppy:
    min_score_threshold: 7
    max_trades_per_hour: 5
    tp_atr_multiplier: 1.5
    sl_atr_multiplier: 1.0
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏–º–≤–æ–ª–æ–≤:**

```yaml
symbol_profiles:
  BTC-USDT:
    position_multiplier: 1.2
    tp_percent: 5.0
    sl_percent: 1.0
  ETH-USDT:
    position_multiplier: 1.0
    tp_percent: 4.0
    sl_percent: 0.8
```

**–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∏—Å–∫–∞:**

```yaml
adaptive_risk:
  small:  # balance < $1,500
    max_position_size: 120
    max_open_positions: 2
    max_loss_percent: 8.0
  medium:  # $1,500 <= balance < $3,500
    max_position_size: 200
    max_open_positions: 3
    max_loss_percent: 6.0
  large:  # balance >= $3,500
    max_position_size: 400
    max_open_positions: 3
    max_loss_percent: 5.0
```

---

### 6.2 –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ –±–∞–ª–∞–Ω—Å—É:**

```python
def get_balance_profile(balance: float) -> str:
    if balance < 1500:
        return 'small'
    elif balance < 3500:
        return 'medium'
    else:
        return 'large'

def get_adaptive_params(balance: float, regime: str) -> Dict:
    profile = get_balance_profile(balance)
    base_params = config['adaptive_risk'][profile]
    regime_params = config['adaptive_regime'][regime]
    
    return {
        **base_params,
        **regime_params
    }
```

**–ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ:**

```python
def get_dynamic_threshold(symbol: str, regime: str) -> float:
    win_rate = trading_statistics.get_win_rate(symbol, regime)
    base_threshold = config['adaptive_regime'][regime]['min_score_threshold']
    
    # –°–Ω–∏–∂–∞–µ–º –ø–æ—Ä–æ–≥ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π win rate
    if win_rate > 0.6:
        threshold = base_threshold * 0.9
    elif win_rate < 0.4:
        threshold = base_threshold * 1.1
    else:
        threshold = base_threshold
    
    return threshold
```

---

## 7. –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò –í–ê–õ–ò–î–ê–¶–ò–Ø

### 7.1 –§—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `scripts/parameter_tester.py` (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

**–ü—Ä–æ—Ü–µ—Å—Å:**

1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. –°–∏–º—É–ª—è—Ü–∏—è —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
3. –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ (win rate, Sharpe ratio, max drawdown)
4. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
5. –í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### 7.2 –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**1. –ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥:**
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

**2. Paper Trading:**
- –¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ä–¥–µ—Ä–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤

**3. Sandbox —Ä–µ–∂–∏–º:**
- –¢–æ—Ä–≥–æ–≤–ª—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ OKX
- –†–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã
- –ë–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥

---

## 8. –ü–û–õ–ù–´–ô –ü–û–¢–û–ö –û–¢ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò –î–û –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ò

### 8.1 –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞

```
1. run.py
   ‚îî‚îÄ> –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ (spot/futures)
       ‚îî‚îÄ> src/main_futures.py
           ‚îî‚îÄ> –ó–∞–≥—Ä—É–∑–∫–∞ config/config_futures.yaml
           ‚îî‚îÄ> –°–æ–∑–¥–∞–Ω–∏–µ FuturesScalpingOrchestrator
           ‚îî‚îÄ> orchestrator.start()
               ‚îú‚îÄ> _verify_initialization() - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª–µ–π
               ‚îú‚îÄ> _initialize_client() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OKX –∫–ª–∏–µ–Ω—Ç–∞
               ‚îú‚îÄ> _start_trading_modules() - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
               ‚îÇ   ‚îú‚îÄ> signal_generator.initialize()
               ‚îÇ   ‚îÇ   ‚îú‚îÄ> AdaptiveRegimeManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
               ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
               ‚îÇ   ‚îÇ   ‚îî‚îÄ> –†–∞—Å—á–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
               ‚îÇ   ‚îú‚îÄ> order_executor.initialize()
               ‚îÇ   ‚îî‚îÄ> position_manager.initialize()
               ‚îú‚îÄ> websocket_coordinator.initialize_websocket()
               ‚îÇ   ‚îî‚îÄ> –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket OKX
               ‚îÇ   ‚îî‚îÄ> –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–∏–∫–µ—Ä—ã, —Å–≤–µ—á–∏, –ø–æ–∑–∏—Ü–∏–∏
               ‚îú‚îÄ> _start_safety_modules() - –º–æ–¥—É–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
               ‚îú‚îÄ> _reset_all_states() - –æ—á–∏—Å—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
               ‚îî‚îÄ> –ó–∞–≥—Ä—É–∑–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏
           ‚îî‚îÄ> orchestrator.run()
               ‚îî‚îÄ> trading_control_center.run_main_loop()
```

### 8.2 –ì–ª–∞–≤–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª (–¥–µ—Ç–∞–ª—å–Ω–æ)

**–¶–∏–∫–ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ ~6 —Å–µ–∫—É–Ω–¥:**

```python
while is_running:
    # 1. –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–û–°–¢–û–Ø–ù–ò–Ø
    await update_state()
    ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Å –±–∏—Ä–∂–∏
    ‚îú‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ WebSocket
    ‚îî‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤
    
    # 2. –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ò–ì–ù–ê–õ–û–í
    signals = await signal_generator.generate_signals()
    ‚îú‚îÄ> –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ (BTC-USDT, ETH-USDT...):
    ‚îÇ   ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–µ—á–µ–π –∏–∑ DataRegistry
    ‚îÇ   ‚îú‚îÄ> –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ (AdaptiveRegimeManager)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç ADX, DI+, DI-
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ê–Ω–∞–ª–∏–∑ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞: TRENDING/RANGING/CHOPPY
    ‚îÇ   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> RSI, MACD, ATR
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> SMA 20, EMA 12, EMA 26
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Bollinger Bands
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DataRegistry
    ‚îÇ   ‚îú‚îÄ> –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∞–∑–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> RSI —Å–∏–≥–Ω–∞–ª—ã (–ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> MACD —Å–∏–≥–Ω–∞–ª—ã (–ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –ª–∏–Ω–∏–π)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ò–º–ø—É–ª—å—Å–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> MA —Å–∏–≥–Ω–∞–ª—ã (—Ç—Ä–µ–Ω–¥)
    ‚îÇ   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç score (0-12 –±–∞–ª–ª–æ–≤)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> SMA Trend: +1
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> EMA Trend: +2
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> RSI: +2
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Bollinger Bands: +2
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Volume: +2
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> MACD: +2
    ‚îÇ   ‚îú‚îÄ> –ë–æ–Ω—É—Å—ã –æ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤: +1-3
    ‚îÇ   ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä–æ–≥–∞ (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É)
    
    # 3. –û–ë–†–ê–ë–û–¢–ö–ê –°–ò–ì–ù–ê–õ–û–í
    await signal_coordinator.process_signals(signals)
    ‚îú‚îÄ> –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞:
    ‚îÇ   ‚îú‚îÄ> –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ score
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ (circuit breaker)
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –ú–∞–∫—Å–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ä–∂–∏
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> ADX Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Multi-Timeframe Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Pivot Points Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Volume Profile Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Liquidity Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Momentum Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Volatility Regime Filter
    ‚îÇ   ‚îÇ   ‚îú‚îÄ> Order Flow Filter
    ‚îÇ   ‚îÇ   ‚îî‚îÄ> Funding Rate Filter
    ‚îÇ   ‚îî‚îÄ> –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ EntryManager
    ‚îÇ       ‚îú‚îÄ> –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
    ‚îÇ       ‚îú‚îÄ> –†–∞—Å—á–µ—Ç leverage (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
    ‚îÇ       ‚îú‚îÄ> –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ (LIMIT/MARKET)
    ‚îÇ       ‚îî‚îÄ> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏ –≤ PositionRegistry
    
    # 4. –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–ó–ò–¶–ò–Ø–ú–ò
    await manage_positions()
    ‚îú‚îÄ> –î–ª—è –∫–∞–∂–¥–æ–π –æ—Ç–∫—Ä—ã—Ç–æ–π –ø–æ–∑–∏—Ü–∏–∏:
    ‚îÇ   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ PnL
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Take Profit
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Stop Loss
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Trailing Stop Loss
    ‚îÇ   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è
    ‚îÇ   ‚îî‚îÄ> –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ ExitAnalyzer
    ‚îÇ       ‚îú‚îÄ> –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    ‚îÇ       ‚îú‚îÄ> –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
    ‚îÇ       ‚îî‚îÄ> –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
    
    # 5. –ú–û–ù–ò–¢–û–†–ò–ù–ì –û–†–î–ï–†–û–í
    await order_coordinator.monitor_limit_orders()
    ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ –ª–∏–º–∏—Ç–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
    ‚îî‚îÄ> –ó–∞–º–µ–Ω–∞ –Ω–∞ —Ä—ã–Ω–æ—á–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
    
    # 6. –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–Ø –° –ë–ò–†–ñ–ï–ô
    await _sync_positions_with_exchange()
    ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏
    ‚îú‚îÄ> –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ drift –ø–æ–∑–∏—Ü–∏–π
    ‚îî‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PositionRegistry
    
    # 7. –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–¢–ê–¢–ò–°–¢–ò–ö–ò
    await update_performance()
    ‚îú‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏
    ‚îú‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è
    ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
    
    # 8. –ü–†–û–í–ï–†–ö–ê TRAILING STOP LOSS
    await trailing_sl_coordinator.update_all()
    ‚îî‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ TSL –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
    
    await asyncio.sleep(6)  # –¶–∏–∫–ª –∫–∞–∂–¥—ã–µ 6 —Å–µ–∫—É–Ω–¥
```

### 8.3 –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

```
1. –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ò–ì–ù–ê–õ–ê
   signal_generator.generate_signals()
   ‚îî‚îÄ> –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞:
       {
           'symbol': 'BTC-USDT',
           'side': 'LONG',
           'strength': 0.75,
           'confidence': 0.85,
           'regime': 'TRENDING',
           'current_price': 45000.0,
           'indicators': {...}
       }

2. –û–ë–†–ê–ë–û–¢–ö–ê –°–ò–ì–ù–ê–õ–ê
   signal_coordinator.process_signals([signal])
   ‚îú‚îÄ> –í–∞–ª–∏–¥–∞—Ü–∏—è: ‚úì
   ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤: ‚úì
   ‚îú‚îÄ> –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤: ‚úì
   ‚îî‚îÄ> entry_manager.open_position(signal)

3. –û–¢–ö–†–´–¢–ò–ï –ü–û–ó–ò–¶–ò–ò
   entry_manager.open_position(signal)
   ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ ParameterProvider
   ‚îÇ   ‚îú‚îÄ> position_size_multiplier
   ‚îÇ   ‚îú‚îÄ> leverage
   ‚îÇ   ‚îî‚îÄ> tp_atr_multiplier, sl_atr_multiplier
   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
   ‚îÇ   ‚îú‚îÄ> base_size = 100 (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
   ‚îÇ   ‚îú‚îÄ> multiplier = 1.2 (–¥–ª—è BTC-USDT)
   ‚îÇ   ‚îú‚îÄ> volatility_multiplier = 1.1 (–≤—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å)
   ‚îÇ   ‚îî‚îÄ> position_size = 100 * 1.2 * 1.1 = 132
   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç leverage (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π)
   ‚îÇ   ‚îú‚îÄ> strength = 0.75
   ‚îÇ   ‚îî‚îÄ> leverage = 20x (strong signal)
   ‚îú‚îÄ> –†–∞—Å—á–µ—Ç TP/SL
   ‚îÇ   ‚îú‚îÄ> ATR = 500
   ‚îÇ   ‚îú‚îÄ> tp_distance = 500 * 2.5 = 1250 (TRENDING —Ä–µ–∂–∏–º)
   ‚îÇ   ‚îú‚îÄ> sl_distance = 500 * 1.2 = 600
   ‚îÇ   ‚îú‚îÄ> tp_price = 45000 + 1250 = 46250
   ‚îÇ   ‚îî‚îÄ> sl_price = 45000 - 600 = 44400
   ‚îú‚îÄ> –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞
   ‚îÇ   ‚îú‚îÄ> order_type = 'LIMIT' (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∫–æ–º–∏—Å—Å–∏–π)
   ‚îÇ   ‚îú‚îÄ> limit_price = 45000 * 0.999 = 44955 (0.1% –Ω–∏–∂–µ)
   ‚îÇ   ‚îî‚îÄ> order = await client.place_order(...)
   ‚îî‚îÄ> –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–∏
       ‚îú‚îÄ> position_registry.register_position(...)
       ‚îú‚îÄ> –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Trailing Stop Loss
       ‚îî‚îÄ> –ó–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫ (conversion_metrics.record_signal_executed)
```

### 8.4 –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏

```
1. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–û–ó–ò–¶–ò–ò
   manage_positions()
   ‚îî‚îÄ> –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏:
       ‚îú‚îÄ> –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ PnL
       ‚îÇ   ‚îú‚îÄ> current_price = 46000
       ‚îÇ   ‚îú‚îÄ> entry_price = 45000
       ‚îÇ   ‚îú‚îÄ> leverage = 20x
       ‚îÇ   ‚îî‚îÄ> pnl_percent = ((46000-45000)/45000) * 20 * 100 = 4.44%
       ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Take Profit
       ‚îÇ   ‚îî‚îÄ> pnl >= tp_percent? (4.44% >= 2.5%?) ‚Üí –î–ê
       ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Stop Loss
       ‚îÇ   ‚îî‚îÄ> pnl <= -sl_percent? ‚Üí –ù–ï–¢
       ‚îú‚îÄ> –ü—Ä–æ–≤–µ—Ä–∫–∞ Trailing Stop Loss
       ‚îÇ   ‚îî‚îÄ> current_price <= trailing_sl_price? ‚Üí –ù–ï–¢
       ‚îî‚îÄ> –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ ExitAnalyzer
           ‚îî‚îÄ> exit_analyzer.analyze_position(symbol)

2. –ê–ù–ê–õ–ò–ó –ü–û–ó–ò–¶–ò–ò
   exit_analyzer.analyze_position(symbol)
   ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏
   ‚îú‚îÄ> –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   ‚îÇ   ‚îú‚îÄ> –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞: TRENDING
   ‚îÇ   ‚îú‚îÄ> –¢—Ä–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è: –î–ê
   ‚îÇ   ‚îî‚îÄ> –°–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞: –í–´–°–û–ö–ê–Ø
   ‚îú‚îÄ> –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
   ‚îÇ   ‚îú‚îÄ> TRENDING —Ä–µ–∂–∏–º: –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP
   ‚îÇ   ‚îú‚îÄ> –¢–µ–∫—É—â–∏–π TP: 2.5%
   ‚îÇ   ‚îî‚îÄ> –ù–æ–≤—ã–π TP: 3.5% (–ø—Ä–æ–¥–ª–µ–Ω–∏–µ)
   ‚îî‚îÄ> –†–µ—à–µ–Ω–∏–µ: –ù–ï –ó–ê–ö–†–´–í–ê–¢–¨ (–ø—Ä–æ–¥–ª–∏—Ç—å TP)

3. –ó–ê–ö–†–´–¢–ò–ï –ü–û–ó–ò–¶–ò–ò (–∫–æ–≥–¥–∞ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
   position_manager.close_position(symbol, reason='tp_reached')
   ‚îú‚îÄ> –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ PositionRegistry
   ‚îú‚îÄ> –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ
   ‚îÇ   ‚îú‚îÄ> side = 'sell' (–¥–ª—è LONG –ø–æ–∑–∏—Ü–∏–∏)
   ‚îÇ   ‚îú‚îÄ> size = position.size
   ‚îÇ   ‚îî‚îÄ> order_type = 'MARKET' (–±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ)
   ‚îú‚îÄ> –û–∂–∏–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è
   ‚îú‚îÄ> –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PositionRegistry
   ‚îÇ   ‚îî‚îÄ> –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
   ‚îú‚îÄ> –ó–∞–ø–∏—Å—å –º–µ—Ç—Ä–∏–∫
   ‚îÇ   ‚îú‚îÄ> conversion_metrics.record_position_closed(...)
   ‚îÇ   ‚îú‚îÄ> holding_time_metrics.record_close(...)
   ‚îÇ   ‚îî‚îÄ> trading_statistics.record_trade(...)
   ‚îî‚îÄ> –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
```

---

## 9. –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –§–ê–ô–õ–û–í –ü–†–û–ï–ö–¢–ê

### 9.1 –ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `run.py` | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ | –í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏ (Spot/Futures) |
| `config.yaml` | Legacy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–Ω—Ñ–∏–≥ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è) |
| `requirements.txt` | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python | –°–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ |
| `README.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ |
| `–ü–û–õ–ù–û–ï_–û–ü–ò–°–ê–ù–ò–ï_–¢–û–†–ì–û–í–û–ì–û_–ë–û–¢–ê.md` | –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è AI |
| `BOT_ARCHITECTURE_FULL_ANALYSIS.md` | –≠—Ç–æ—Ç —Ñ–∞–π–ª | –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã |

### 9.2 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `config/config_futures.yaml` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Futures | –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Futures —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `config/config_spot.yaml` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Spot | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Spot —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `config/features.yaml` | –§–ª–∞–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π | –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥—É–ª–µ–π |
| `config/manual_pools.yaml` | –†—É—á–Ω—ã–µ –ø—É–ª—ã | –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è Spot |

### 9.3 –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏ (src/)

#### 9.3.1 –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/main_futures.py` | –ó–∞–ø—É—Å–∫ Futures –±–æ—Ç–∞ | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ Futures —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `src/main_spot.py` | –ó–∞–ø—É—Å–∫ Spot –±–æ—Ç–∞ | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ Spot —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `src/config.py` | –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –ü–∞—Ä—Å–∏–Ω–≥ YAML –∫–æ–Ω—Ñ–∏–≥–æ–≤ |

#### 9.3.2 –ö–ª–∏–µ–Ω—Ç—ã –±–∏—Ä–∂–∏

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/clients/futures_client.py` | OKX Futures –∫–ª–∏–µ–Ω—Ç | REST API –¥–ª—è Futures |
| `src/clients/spot_client.py` | OKX Spot –∫–ª–∏–µ–Ω—Ç | REST API –¥–ª—è Spot |

#### 9.3.3 Futures —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (src/strategies/scalping/futures/)

**–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `orchestrator.py` | –ì–ª–∞–≤–Ω—ã–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π Futures –±–æ—Ç–∞ |

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `signal_generator.py` | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¢–ê |
| `signals/rsi_signal_generator.py` | RSI —Å–∏–≥–Ω–∞–ª—ã | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è RSI —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `signals/macd_signal_generator.py` | MACD —Å–∏–≥–Ω–∞–ª—ã | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è MACD —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `signals/filter_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä —Ñ–∏–ª—å—Ç—Ä–æ–≤ | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∫ —Å–∏–≥–Ω–∞–ª–∞–º |

**–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `coordinators/signal_coordinator.py` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤ | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `coordinators/order_coordinator.py` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –æ—Ä–¥–µ—Ä–æ–≤ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞–º–∏ |
| `coordinators/exit_decision_coordinator.py` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—ã—Ö–æ–¥–æ–≤ | –†–µ—à–µ–Ω–∏—è –æ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π |
| `coordinators/trailing_sl_coordinator.py` | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä TSL | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Trailing Stop Loss |
| `coordinators/smart_exit_coordinator.py` | –£–º–Ω—ã–π –≤—ã—Ö–æ–¥ | –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è |
| `coordinators/websocket_coordinator.py` | WebSocket –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ |

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `position_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∑–∏—Ü–∏–π | –û–±—â–µ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ |
| `positions/entry_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –≤—Ö–æ–¥–∞ | –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π |
| `positions/exit_analyzer.py` | –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –≤—ã—Ö–æ–¥–∞ | –ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è |
| `positions/position_scaling_manager.py` | –õ–µ—Å—Ç–Ω–∏—á–Ω—ã–π –≤—Ö–æ–¥ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫ –ø–æ–∑–∏—Ü–∏–∏ |
| `positions/stop_loss_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä SL | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Stop Loss |
| `positions/take_profit_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä TP | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Take Profit |
| `positions/position_monitor.py` | –ú–æ–Ω–∏—Ç–æ—Ä –ø–æ–∑–∏—Ü–∏–π | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π |
| `positions/peak_profit_tracker.py` | –¢—Ä–µ–∫–µ—Ä –ø—Ä–∏–±—ã–ª–∏ | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏ |

**–Ø–¥—Ä–æ:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `core/trading_control_center.py` | –¶–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ì–ª–∞–≤–Ω—ã–π —Ç–æ—Ä–≥–æ–≤—ã–π —Ü–∏–∫–ª |
| `core/data_registry.py` | –†–µ–µ—Å—Ç—Ä –¥–∞–Ω–Ω—ã—Ö | –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ |
| `core/position_registry.py` | –†–µ–µ—Å—Ç—Ä –ø–æ–∑–∏—Ü–∏–π | –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π |
| `core/position_sync.py` | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π |
| `core/candle_buffer.py` | –ë—É—Ñ–µ—Ä —Å–≤–µ—á–µ–π | –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–µ—á–µ–π |

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `config/config_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ |
| `config/parameter_provider.py` | –ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | –ï–¥–∏–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º |

**–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `adaptivity/regime_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ–∂–∏–º–æ–≤ | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞ |
| `adaptivity/parameter_adapter.py` | –ê–¥–∞–ø—Ç–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ |
| `adaptivity/filter_parameters.py` | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ |
| `adaptivity/balance_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞–ª–∞–Ω—Å–∞ | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ –±–∞–ª–∞–Ω—Å—É |

**–†–∏—Å–∫–∏:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `risk_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∏—Å–∫–æ–≤ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ |
| `risk/adaptive_leverage.py` | –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –ø–ª–µ—á–æ | –†–∞—Å—á–µ—Ç leverage –ø–æ —Å–∏–ª–µ —Å–∏–≥–Ω–∞–ª–∞ |
| `risk/liquidation_protector.py` | –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ | –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ |
| `risk/margin_monitor.py` | –ú–æ–Ω–∏—Ç–æ—Ä –º–∞—Ä–∂–∏ | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∞—Ä–∂–∏ |
| `risk/max_size_limiter.py` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å —Ä–∞–∑–º–µ—Ä–∞ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π |

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `indicators/indicator_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ | –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ |
| `indicators/atr_provider.py` | –ü—Ä–æ–≤–∞–π–¥–µ—Ä ATR | –†–∞—Å—á–µ—Ç ATR |
| `indicators/fast_adx.py` | –ë—ã—Å—Ç—Ä—ã–π ADX | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç ADX |
| `indicators/futures_volume_profile.py` | Volume Profile | –†–∞—Å—á–µ—Ç Volume Profile |
| `indicators/micro_pivot_calculator.py` | –ú–∏–∫—Ä–æ –ø–∏–≤–æ—Ç—ã | –†–∞—Å—á–µ—Ç –ø–∏–≤–æ—Ç–æ–≤ |
| `indicators/liquidity_levels.py` | –£—Ä–æ–≤–Ω–∏ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω–µ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ |
| `indicators/order_flow_indicator.py` | Order Flow | –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ |
| `indicators/trailing_stop_loss.py` | Trailing Stop Loss | –†–∞—Å—á–µ—Ç TSL |
| `indicators/funding_rate_monitor.py` | –ú–æ–Ω–∏—Ç–æ—Ä funding rate | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ funding rate |

**–§–∏–ª—å—Ç—Ä—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `filters/volatility_regime_filter.py` | –§–∏–ª—å—Ç—Ä –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ |
| `filters/momentum_filter.py` | –§–∏–ª—å—Ç—Ä –∏–º–ø—É–ª—å—Å–∞ | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∏–º–ø—É–ª—å—Å—É |
| `filters/liquidity_filter.py` | –§–∏–ª—å—Ç—Ä –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏ |
| `filters/order_flow_filter.py` | –§–∏–ª—å—Ç—Ä –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤ | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Ç–æ–∫—É –æ—Ä–¥–µ—Ä–æ–≤ |
| `filters/funding_rate_filter.py` | –§–∏–ª—å—Ç—Ä funding rate | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ funding rate |

**–ú–µ—Ç—Ä–∏–∫–∏:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `metrics/conversion_metrics.py` | –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ | –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `metrics/holding_time_metrics.py` | –ú–µ—Ç—Ä–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è |
| `metrics/alert_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –∞–ª–µ—Ä—Ç–æ–≤ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–µ—Ä—Ç–∞–º–∏ |

**–†–∞—Å—á–µ—Ç—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `calculations/position_sizer.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ | –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ |
| `calculations/margin_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–∞—Ä–∂–∏ | –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ |
| `calculations/pnl_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä PnL | –†–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞ |
| `calculations/balance_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–∞–ª–∞–Ω—Å–∞ | –†–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ |
| `calculations/regime_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–µ–∂–∏–º–∞ | –†–∞—Å—á–µ—Ç —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞ |

**–ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `order_executor.py` | –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ—Ä–¥–µ—Ä–æ–≤ | –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ –Ω–∞ –±–∏—Ä–∂–µ |

**WebSocket:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `websocket_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä WebSocket | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ |
| `private_websocket_manager.py` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π WebSocket | WebSocket –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `logging/debug_logger.py` | Debug –ª–æ–≥–≥–µ—Ä | –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `logging/structured_logger.py` | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `logging/logger_factory.py` | –§–∞–±—Ä–∏–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤ | –°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–≥–≥–µ—Ä–æ–≤ |

#### 9.3.4 Spot —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (src/strategies/scalping/spot/)

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `orchestrator.py` | Spot –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è Spot —Ç–æ—Ä–≥–æ–≤–ª–∏ |
| `signal_generator.py` | –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–æ–≤ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Spot —Å–∏–≥–Ω–∞–ª–æ–≤ |
| `order_executor.py` | –ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –æ—Ä–¥–µ—Ä–æ–≤ | –†–∞–∑–º–µ—â–µ–Ω–∏–µ Spot –æ—Ä–¥–µ—Ä–æ–≤ |
| `position_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –ø–æ–∑–∏—Ü–∏–π | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Spot –ø–æ–∑–∏—Ü–∏—è–º–∏ |
| `risk_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä —Ä–∏—Å–∫–æ–≤ | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ Spot |
| `batch_order_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –±–∞—Ç—á–µ–π | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞—Ç—á-–æ—Ä–¥–µ—Ä–∞–º–∏ |
| `websocket_orchestrator.py` | WebSocket –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket –¥–ª—è Spot |

#### 9.3.5 –û–±—â–∏–µ –º–æ–¥—É–ª–∏

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/indicators/base.py` | –ë–∞–∑–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã | –ë–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ |
| `src/indicators/talib_wrapper.py` | TA-Lib –æ–±–µ—Ä—Ç–∫–∞ | –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è TA-Lib |
| `src/indicators/advanced/candle_patterns.py` | –ü–∞—Ç—Ç–µ—Ä–Ω—ã —Å–≤–µ—á–µ–π | –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ |
| `src/indicators/advanced/pivot_calculator.py` | –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–∏–≤–æ—Ç–æ–≤ | –†–∞—Å—á–µ—Ç –ø–∏–≤–æ—Ç–æ–≤ |
| `src/indicators/advanced/volume_profile.py` | Volume Profile | –†–∞—Å—á–µ—Ç Volume Profile |

**–§–∏–ª—å—Ç—Ä—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/filters/correlation_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ | –ê–Ω–∞–ª–∏–∑ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ |
| `src/filters/time_session_manager.py` | –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏ |

**–†–∏—Å–∫–∏:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/risk/risk_controller.py` | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Ä–∏—Å–∫–æ–≤ | –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∏—Å–∫–æ–≤ |
| `src/risk/risk_controller_config.py` | –ö–æ–Ω—Ñ–∏–≥ —Ä–∏—Å–∫–æ–≤ | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤ |

**–£—Ç–∏–ª–∏—Ç—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/utils/logging_setup.py` | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ loguru |
| `src/utils/telegram_notifier.py` | Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |

**WebSocket:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/websocket_manager.py` | –û–±—â–∏–π WebSocket –º–µ–Ω–µ–¥–∂–µ—Ä | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ WebSocket |
| `src/market_data_websocket.py` | WebSocket —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| `src/websocket_order_executor.py` | WebSocket –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å | –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ WebSocket |

**–ë–∞–ª–∞–Ω—Å:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `src/balance/adaptive_balance_manager.py` | –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –±–∞–ª–∞–Ω—Å | –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ –±–∞–ª–∞–Ω—Å—É |

### 9.4 –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

**–°–∫—Ä–∏–ø—Ç—ã –∞–Ω–∞–ª–∏–∑–∞:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `analyze_logs.py` | –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ | –ê–Ω–∞–ª–∏–∑ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ª–æ–≥–æ–≤ |
| `analyze_sol_trade.py` | –ê–Ω–∞–ª–∏–∑ SOL —Å–¥–µ–ª–∫–∏ | –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–¥–µ–ª–∫–∏ |

**Batch —Ñ–∞–π–ª—ã:**
| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ | –†–æ–ª—å |
|------|----------|------|
| `analyze_logs.bat` | –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ | Windows batch –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ |
| `analyze_exit_decisions.bat` | –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π –æ –≤—ã—Ö–æ–¥–µ | –ê–Ω–∞–ª–∏–∑ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ–∑–∏—Ü–∏–π |
| `clean_logs.bat` | –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ | –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ |
| `clear_cache.bat` | –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ | –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ |
| `debug_console.bat` | Debug –∫–æ–Ω—Å–æ–ª—å | –ó–∞–ø—É—Å–∫ debug —Ä–µ–∂–∏–º–∞ |

### 9.5 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `docs/` - –æ—Å–Ω–æ–≤–Ω–∞—è –ø–∞–ø–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `docs/analysis/` - –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
- `docs/architecture/` - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/current/` - —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö 15181 —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ —Å–ª–∏—à–∫–æ–º –æ–±—ä–µ–º–µ–Ω –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ —ç—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç. –í—ã—à–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã, —É—á–∞—Å—Ç–≤—É—é—â–∏–µ –≤ —Ç–æ—Ä–≥–æ–≤–æ–π –ª–æ–≥–∏–∫–µ.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 05 —è–Ω–≤–∞—Ä—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω
