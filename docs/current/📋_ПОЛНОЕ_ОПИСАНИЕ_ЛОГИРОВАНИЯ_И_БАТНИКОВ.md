# üìã –ü–û–õ–ù–û–ï –û–ü–ò–°–ê–ù–ò–ï –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø –ò –ë–ê–¢–ù–ò–ö–û–í

**–î–∞—Ç–∞:** 22 –Ω–æ—è–±—Ä—è 2024  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–ö–¢–£–ê–õ–¨–ù–û –ü–û–°–õ–ï –ú–û–î–£–õ–Ø–†–ò–ó–ê–¶–ò–ò

---

## üöÄ START.BAT - –ó–ê–ü–£–°–ö –ë–û–¢–ê

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ Python
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (venv)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (loguru, aiohttp, pydantic)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (config_spot.yaml, config_futures.yaml)

2. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –¥–ª—è –ª–æ–≥–æ–≤:**
   ```batch
   if not exist "logs\spot" mkdir "logs\spot"
   if not exist "logs\futures" mkdir "logs\futures"
   ```
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç `logs/spot/` –¥–ª—è Spot —Ç–æ—Ä–≥–æ–≤–ª–∏
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç `logs/futures/` –¥–ª—è Futures —Ç–æ—Ä–≥–æ–≤–ª–∏
   - ‚ö†Ô∏è **–ù–ï —Å–æ–∑–¥–∞–µ—Ç** `logs/futures/debug/` - —ç—Ç–æ –¥–µ–ª–∞–µ—Ç DebugLogger –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

3. **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:**
   - **Spot:** `python src\main_spot.py`
   - **Futures:** `python src\main_futures.py`

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Futures:

1. **Orchestrator –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** (`orchestrator.py:73-76`):
   ```python
   from src.strategies.modules.debug_logger import DebugLogger
   
   self.debug_logger = DebugLogger(
       enabled=True,
       csv_export=True,
       csv_dir="logs/futures/debug",  # ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è
       verbose=True,
   )
   ```

2. **DebugLogger –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç:**
   - ‚úÖ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `logs/futures/debug/` (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
   - ‚úÖ CSV —Ñ–∞–π–ª `debug_YYYYMMDD_HHMMSS.csv` —Å –≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ—Ç–∫–æ–π –∑–∞–ø—É—Å–∫–∞
   - ‚úÖ –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ CSV (timestamp, event_type, symbol, data)

3. **DebugLogger –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã:**
   - ‚úÖ `TrailingSLCoordinator` –ø–æ–ª—É—á–∞–µ—Ç `debug_logger`
   - ‚úÖ `WebSocketCoordinator` –ø–æ–ª—É—á–∞–µ—Ç `debug_logger`
   - ‚úÖ `OrderCoordinator` –ø–æ–ª—É—á–∞–µ—Ç `debug_logger`
   - ‚úÖ `SignalCoordinator` –ø–æ–ª—É—á–∞–µ—Ç `debug_logger`

### ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **start.bat –ù–ï –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
- **DebugLogger —Å–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–∞–º** - –Ω–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
- **CSV —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ** - –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏

---

## üßπ CLEAN_LOGS.BAT - –û–ß–ò–°–¢–ö–ê –õ–û–ì–û–í

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏:**
   ```batch
   if exist "logs\futures\*.log" set filefound=1
   if exist "logs\futures\*.zip" set filefound=1
   if exist "logs\futures\debug\*.csv" set filefound=1  # ‚úÖ DEBUG CSV
   if exist "logs\trades_*.csv" set filefound=1
   if exist "logs\trades_*.json" set filefound=1
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞:**
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫—É `logs/futures/archived/`
   - ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–æ–¥–ø–∞–ø–∫—É —Å –¥–∞—Ç–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º: `logs_YYYY-MM-DD_HH-MM-SS/`

3. **–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:**
   - ‚úÖ **LOG —Ñ–∞–π–ª—ã** (`logs/futures/*.log`) ‚Üí –∞—Ä—Ö–∏–≤
   - ‚úÖ **ZIP –∞—Ä—Ö–∏–≤—ã** (`logs/futures/*.zip`) ‚Üí –∞—Ä—Ö–∏–≤
   - ‚úÖ **DEBUG CSV** (`logs/futures/debug/*.csv`) ‚Üí –∞—Ä—Ö–∏–≤ ‚úÖ **–ù–û–í–û–ï!**
   - ‚úÖ **TRADE CSV** (`logs/trades_*.csv`) ‚Üí –∞—Ä—Ö–∏–≤
   - ‚úÖ **JSON —Ñ–∞–π–ª—ã** (`logs/trades_*.json`) ‚Üí –∞—Ä—Ö–∏–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ö–∏–≤–∞:

```
logs/futures/archived/
‚îî‚îÄ‚îÄ logs_2025-11-22_14-03-36/
    ‚îú‚îÄ‚îÄ futures_main_2025-11-22.log.zip
    ‚îú‚îÄ‚îÄ debug_20251122_140337.csv  ‚úÖ DEBUG CSV
    ‚îú‚îÄ‚îÄ trades_2025-11-22.csv
    ‚îî‚îÄ‚îÄ trades_2025-11-22.json
```

### ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **clean_logs.bat —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç debug CSV ‚úÖ
- **–í—Å–µ debug –ª–æ–≥–∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã** –≤ `logs/futures/debug/`
- **–ê—Ä—Ö–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é

---

## üìä DEBUG LOGGER - –ó–ê–ü–ò–°–¨ DEBUG –õ–û–ì–û–í

### –ì–¥–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã:

**–ü—É—Ç—å:** `logs/futures/debug/debug_YYYYMMDD_HHMMSS.csv`

**–ü—Ä–∏–º–µ—Ä:** `logs/futures/debug/debug_20251122_140337.csv`

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** (`debug_logger.py:54-97`):
   ```python
   self.csv_dir = Path("logs/futures/debug")
   self.csv_dir.mkdir(parents=True, exist_ok=True)  # ‚úÖ –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   csv_filename = self.csv_dir / f"debug_{datetime.now().strftime('%Y%m%d_%H%M%S')}.csv"
   ```

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ CSV:**
   ```csv
   timestamp,event_type,symbol,data
   2025-11-22 14:03:37.123,tick,BTC-USDT,"{...}"
   2025-11-22 14:03:37.456,tsl_check,BTC-USDT,"{...}"
   2025-11-22 14:03:38.789,position_open,BTC-USDT,"{...}"
   ```

3. **–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
   - `tick` - –∫–∞–∂–¥—ã–π —Ç–∏–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏
   - `config` - –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - `tsl_create` - —Å–æ–∑–¥–∞–Ω–∏–µ TSL –¥–ª—è –ø–æ–∑–∏—Ü–∏–∏
   - `tsl_check` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π TSL (min_holding, loss_cut, timeout, trail_hit)
   - `position_open` - –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
   - `position_close` - –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ (—Å –ø—Ä–∏—á–∏–Ω–æ–π!)

### –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

1. **Orchestrator** (`orchestrator.py:75-76`):
   ```python
   self.debug_logger = DebugLogger(enabled=True, csv_export=True)
   ```

2. **TrailingSLCoordinator** (`trailing_sl_coordinator.py`):
   ```python
   self.debug_logger.log_tsl_created(...)
   self.debug_logger.log_tsl_check(...)
   ```

3. **WebSocketCoordinator** (`websocket_coordinator.py`):
   ```python
   self.debug_logger.log_position_close(...)
   ```

4. **SignalCoordinator** (`signal_coordinator.py`):
   ```python
   self.debug_logger.log_position_open(...)
   ```

5. **OrderCoordinator** (`order_coordinator.py`):
   ```python
   self.debug_logger.log_tick(...)
   ```

### ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **DebugLogger —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –Ω–µ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å –≤—Ä—É—á–Ω—É—é
- **CSV —Ñ–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ** - –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
- **–§–∞–π–ª –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞ (`__del__`)
- **–í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω DebugLogger** - –µ–¥–∏–Ω—ã–π CSV —Ñ–∞–π–ª –¥–ª—è –≤—Å–µ–π —Å–µ—Å—Å–∏–∏

---

## üìà –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í - ANALYZE_LOGS.PY

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç LOG —Ñ–∞–π–ª—ã:**
   - ‚úÖ –ß–∏—Ç–∞–µ—Ç `logs/futures/*.log` –∏ `logs/futures/*.zip`
   - ‚úÖ –ü–∞—Ä—Å–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (loguru —Ñ–æ—Ä–º–∞—Ç)
   - ‚úÖ –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–¥–µ–ª–∫–∞—Ö, –ø–æ–∑–∏—Ü–∏—è—Ö, –æ—à–∏–±–∫–∞—Ö

2. **–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç DEBUG CSV:**
   - ‚ö†Ô∏è **–¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°:** `analyze_logs.py` –ø–æ–∫–∞ –ù–ï –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç debug CSV –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - ‚úÖ **–ù–û:** CSV —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `logs/futures/debug/` –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
   - ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ Excel –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é

3. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç—ã:**
   - ‚úÖ HTML –æ—Ç—á–µ—Ç—ã —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
   - ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–¥–µ–ª–∫–∞–º
   - ‚úÖ –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–æ–≤
   - ‚úÖ Win rate –∏ ROI

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```bash
# –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –ª–æ–≥–æ–≤
python logs/analyze_logs.py

# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å–µ—Å—Å–∏–∏
python logs/analyze_logs.py --session 2025-11-22

# –ê–Ω–∞–ª–∏–∑ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
python logs/analyze_logs.py --plot
```

### ‚ö†Ô∏è –í–ê–ñ–ù–û:

- **analyze_logs.py –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç LOG —Ñ–∞–π–ª—ã** (loguru —Ñ–æ—Ä–º–∞—Ç)
- **DEBUG CSV –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ** - –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ Excel
- **–û–±–∞ —Ç–∏–ø–∞ –ª–æ–≥–æ–≤ –¥–æ–ø–æ–ª–Ω—è—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞:**
  - LOG —Ñ–∞–π–ª—ã ‚Üí –æ–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
  - DEBUG CSV ‚Üí –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —Ç–∏–∫–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ TSL

---

## üîÑ –ü–û–õ–ù–´–ô –¶–ò–ö–õ –†–ê–ë–û–¢–´

### 1. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (`start.bat`):

```
start.bat
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ logs/futures/
  ‚Üì
–ó–∞–ø—É—Å–∫ main_futures.py
  ‚Üì
Orchestrator –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
  ‚Üì
DebugLogger —Å–æ–∑–¥–∞–µ—Ç logs/futures/debug/
  ‚Üì
DebugLogger —Å–æ–∑–¥–∞–µ—Ç debug_YYYYMMDD_HHMMSS.csv
  ‚Üì
–ë–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É
```

### 2. –†–∞–±–æ—Ç–∞ –±–æ—Ç–∞:

```
–ö–∞–∂–¥—ã–π —Ç–∏–∫ —Ç–æ—Ä–≥–æ–≤–ª–∏
  ‚Üì
DebugLogger.log_tick() ‚Üí CSV
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ TSL
  ‚Üì
DebugLogger.log_tsl_check() ‚Üí CSV
  ‚Üì
–û—Ç–∫—Ä—ã—Ç–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
  ‚Üì
DebugLogger.log_position_open/close() ‚Üí CSV
  ‚Üì
loguru –ª–æ–≥–∏ ‚Üí logs/futures/*.log
```

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞:

```
–ë–æ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
  ‚Üì
DebugLogger.__del__() –∑–∞–∫—Ä—ã–≤–∞–µ—Ç CSV —Ñ–∞–π–ª
  ‚Üì
loguru —Ä–æ—Ç–∏—Ä—É–µ—Ç logs/futures/*.log ‚Üí *.zip
  ‚Üì
–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
```

### 4. –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (`clean_logs.bat`):

```
clean_logs.bat
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
  ‚Üì
–°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–∞ logs/futures/archived/logs_YYYY-MM-DD_HH-MM-SS/
  ‚Üì
–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ:
  - *.log ‚Üí –∞—Ä—Ö–∏–≤
  - *.zip ‚Üí –∞—Ä—Ö–∏–≤
  - debug/*.csv ‚Üí –∞—Ä—Ö–∏–≤ ‚úÖ
  - trades_*.csv ‚Üí –∞—Ä—Ö–∏–≤
  - trades_*.json ‚Üí –∞—Ä—Ö–∏–≤
  ‚Üì
–ê—Ä—Ö–∏–≤ –≥–æ—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
```

### 5. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ (`analyze_logs.py`):

```
analyze_logs.py
  ‚Üì
–ß—Ç–µ–Ω–∏–µ logs/futures/*.log –∏ *.zip
  ‚Üì
–ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
  ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è HTML –æ—Ç—á–µ—Ç–∞
  ‚Üì
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–¥–µ–ª–∫–∞–º
```

**–ò–õ–ò:**

```
–û—Ç–∫—Ä—ã—Ç—å logs/futures/debug/debug_YYYYMMDD_HHMMSS.csv –≤ Excel
  ‚Üì
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ event_type (tsl_check, position_close)
  ‚Üì
–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ min_holding –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
```

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –î–ò–†–ï–ö–¢–û–†–ò–ô –õ–û–ì–û–í

```
logs/
‚îú‚îÄ‚îÄ futures/
‚îÇ   ‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log          ‚Üê loguru –ª–æ–≥–∏ (—Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log.zip      ‚Üê —Ä–æ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ debug/                               ‚Üê ‚úÖ DEBUG CSV (–ù–û–í–û–ï!)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ debug_20251122_140337.csv        ‚Üê CSV —Å debug –ª–æ–≥–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ debug_20251122_150000.csv        ‚Üê –¥—Ä—É–≥–æ–π –∑–∞–ø—É—Å–∫
‚îÇ   ‚îî‚îÄ‚îÄ archived/                           ‚Üê –ê—Ä—Ö–∏–≤—ã
‚îÇ       ‚îî‚îÄ‚îÄ logs_2025-11-22_14-03-36/
‚îÇ           ‚îú‚îÄ‚îÄ futures_main_*.log.zip
‚îÇ           ‚îú‚îÄ‚îÄ debug_*.csv                  ‚Üê ‚úÖ DEBUG CSV –≤ –∞—Ä—Ö–∏–≤–µ
‚îÇ           ‚îú‚îÄ‚îÄ trades_*.csv
‚îÇ           ‚îî‚îÄ‚îÄ trades_*.json
‚îú‚îÄ‚îÄ spot/
‚îÇ   ‚îî‚îÄ‚îÄ ...                                  ‚Üê Spot –ª–æ–≥–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
‚îî‚îÄ‚îÄ trades_*.csv                             ‚Üê –û–±—â–∏–µ CSV —Å–¥–µ–ª–æ–∫
```

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. ‚úÖ **start.bat** - –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞, —Å–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
2. ‚úÖ **DebugLogger** - —Å–æ–∑–¥–∞–µ—Ç `logs/futures/debug/` –∏ CSV —Ñ–∞–π–ª
3. ‚úÖ **–í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç DebugLogger –¥–ª—è –∑–∞–ø–∏—Å–∏
4. ‚úÖ **clean_logs.bat** - –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç –≤—Å–µ –ª–æ–≥–∏, –≤–∫–ª—é—á–∞—è debug CSV
5. ‚úÖ **loguru** - –ø–∏—à–µ—Ç –æ–±—ã—á–Ω—ã–µ –ª–æ–≥–∏ –≤ `logs/futures/*.log`

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é:

1. ‚ö†Ô∏è **–ê–Ω–∞–ª–∏–∑ debug CSV** - –æ—Ç–∫—Ä—ã—Ç—å –≤ Excel –∏–ª–∏ –Ω–∞–ø–∏—Å–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
2. ‚ö†Ô∏è **–ó–∞–ø—É—Å–∫ clean_logs.bat** - –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
3. ‚ö†Ô∏è **–ó–∞–ø—É—Å–∫ analyze_logs.py** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ–±—ã—á–Ω—ã—Ö –ª–æ–≥–æ–≤

### –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –ø–æ—Å–ª–µ –º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏:

1. ‚úÖ **DebugLogger –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã** - –µ–¥–∏–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
2. ‚úÖ **–í—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã –ø–∏—à—É—Ç –≤ –æ–¥–∏–Ω CSV** - –µ–¥–∏–Ω–∞—è —Å–µ—Å—Å–∏—è
3. ‚úÖ **clean_logs.bat —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω** - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç debug CSV
4. ‚úÖ **start.bat –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è** - –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –î–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

1. **–ó–∞–ø—É—Å–∫:** `start.bat` ‚Üí –≤—ã–±—Ä–∞—Ç—å Futures ‚Üí –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –°–º–æ—Ç—Ä–µ—Ç—å `logs/futures/futures_main_*.log` –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. **–ê–Ω–∞–ª–∏–∑:** –ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ—Ç–∫—Ä—ã—Ç—å `logs/futures/debug/debug_*.csv` –≤ Excel

### –î–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

1. **–û–±—ã—á–Ω—ã–µ –ª–æ–≥–∏:** `python logs/analyze_logs.py` ‚Üí HTML –æ—Ç—á–µ—Ç
2. **Debug CSV:** –û—Ç–∫—Ä—ã—Ç—å –≤ Excel ‚Üí —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ `event_type` ‚Üí –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
3. **–û—á–∏—Å—Ç–∫–∞:** `clean_logs.bat` ‚Üí –≤—Å–µ –ª–æ–≥–∏ –≤ –∞—Ä—Ö–∏–≤

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å debug CSV:**
   - –§–∏–ª—å—Ç—Ä `event_type == "tsl_check"` ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ TSL
   - –§–∏–ª—å—Ç—Ä `event_type == "position_close"` ‚Üí –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏—á–∏–Ω—ã –∑–∞–∫—Ä—ã—Ç–∏—è
   - –§–∏–ª—å—Ç—Ä `data —Å–æ–¥–µ—Ä–∂–∏—Ç "min_holding_BLOCKED"` ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞—â–∏—Ç—É

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—ã—á–Ω—ã–µ –ª–æ–≥–∏:**
   - –ü–æ–∏—Å–∫ –ø–æ —Å–∏–º–≤–æ–ª—É ‚Üí –Ω–∞–π—Ç–∏ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
   - –ü–æ–∏—Å–∫ –ø–æ –æ—à–∏–±–∫–∞–º ‚Üí –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –†–ê–ë–û–¢–ê–ï–¢ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò, –ù–ò–ß–ï–ì–û –ú–ï–ù–Ø–¢–¨ –ù–ï –ù–£–ñ–ù–û!**


