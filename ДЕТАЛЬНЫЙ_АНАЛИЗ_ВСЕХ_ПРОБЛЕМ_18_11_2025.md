# –î–ï–¢–ê–õ–¨–ù–´–ô –ê–ù–ê–õ–ò–ó –í–°–ï–• –ü–†–û–ë–õ–ï–ú - 18.11.2025

## üìä –ò–°–•–û–î–ù–´–ï –î–ê–ù–ù–´–ï –° –ë–ò–†–ñ–ò

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥ 18.11.2025 (21:00-22:06):
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ**: 52 –ø–æ–∑–∏—Ü–∏–∏
- **–ü–∞—Ä—ã**: BTC-USDT, ETH-USDT, SOL-USDT, XRP-USDT, DOGE-USDT
- **–†–µ–∂–∏–º**: –í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å –ø–ª–µ—á–æ–º 5x
- **–ü–µ—Ä–∏–æ–¥ –∞–Ω–∞–ª–∏–∑–∞**: ~1 —á–∞—Å –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

---

## 1. ‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–û–ó–ò–¶–ò–ô –í –õ–û–ì–ê–•

### 1.1. –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –ù–∞–π–¥–µ–Ω—ã –≤—Å–µ 10 zip-–∞—Ä—Ö–∏–≤–æ–≤ –≤ `logs/futures/`
- ‚úÖ –ü—Ä–æ—á–∏—Ç–∞–Ω —Ç–µ–∫—É—â–∏–π –ª–æ–≥-—Ñ–∞–π–ª `futures_main_2025-11-18.log`
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–ø–∏—Å–∏ –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ–∑–∏—Ü–∏–π –≤ `position_manager.py`

### 1.2. –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #1: –ù–µ–ø–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π
**–ú–µ—Å—Ç–æ**: `src/strategies/scalping/futures/position_manager.py:1554-1556`

```python
logger.info(
    f"‚úÖ –ü–æ–∑–∏—Ü–∏—è {symbol} –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ {reason}, PnL = {final_pnl:+.2f} USDT"
)
```

**–ß—Ç–æ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è:**
- –í—Ä–µ–º—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
- –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ (entry_price)
- –¶–µ–Ω–∞ –≤—ã—Ö–æ–¥–∞ (exit_price)
- –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ (size)
- Gross PnL vs Net PnL
- –ö–æ–º–∏—Å—Å–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–¥–µ—Ä–∂–∞–Ω–∏—è

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –±–∏—Ä–∂–µ–π:**
- –ë–∏—Ä–∂–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç: `18.11.2025, 21:54:33 | Entry: 141.55 | Exit: 141.20 | PnL: -0.69 USDT`
- –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞: —Ç–æ–ª—å–∫–æ `PnL = -0.69 USDT` (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –∏ —Ü–µ–Ω)

#### ‚ùå –ü–†–û–ë–õ–ï–ú–ê #2: –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ä–∞—Å—á–µ—Ç–µ PnL
**–ú–µ—Å—Ç–æ**: `src/strategies/scalping/futures/position_manager.py:1515-1522`

```python
# –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º gross PnL
if side.lower() == "long":
    gross_pnl = (exit_price - entry_price) * size_in_coins
else:  # short
    gross_pnl = (entry_price - exit_price) * size_in_coins

# Net PnL = Gross PnL - Commission
net_pnl = gross_pnl - commission
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í –ª–æ–≥–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `final_pnl` –∏–∑ API (`upl`), –Ω–æ —Ä–∞—Å—á–µ—Ç `net_pnl` –¥–µ–ª–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ
- –ë–∏—Ä–∂–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ PnL" –∏ "–ó–∞–∫—Ä—ã—Ç—ã–µ PnL" –æ—Ç–¥–µ–ª—å–Ω–æ
- –í –∫–æ–¥–µ —ç—Ç–∏ –¥–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è:**
- –ë–∏—Ä–∂–∞: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ PnL = -0.54 USDT, –ö–æ–º–∏—Å—Å–∏—è = -0.15 USDT, –ó–∞–∫—Ä—ã—Ç—ã–µ PnL = -0.69 USDT
- –ë–æ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç: `net_pnl = gross_pnl - commission`
- –ù–æ `final_pnl` –±–µ—Ä–µ—Ç—Å—è –∏–∑ API –∏ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å —Ä–∞—Å—á–µ—Ç–æ–º

#### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:
1. –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–≤—Å–µ 52 –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞–π–¥–µ–Ω—ã –≤ –ª–æ–≥–∞—Ö)
2. –ü—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (`reason`: tp, sl, manual, etc.)
3. PnL –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ CSV —á–µ—Ä–µ–∑ `TradeResult`

---

## 2. üí∞ –ü–†–û–ë–õ–ï–ú–ê –° –ü–ê–†–ê–ú–ï–¢–†–ê–ú–ò - –ù–ò–ó–ö–ò–ô –î–û–•–û–î

### 2.1. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ—Ä—ã —Å–¥–µ–ª–æ–∫:**

| –ü–∞—Ä–∞ | Entry | Exit | –†–∞–∑–º–µ—Ä | Gross PnL | Net PnL | % –æ—Ç –º–∞—Ä–∂–∏ | –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è |
|------|-------|------|--------|-----------|---------|------------|-----------------|
| SOL | 141.55 | 141.20 | 1.52 SOL | -0.54 | -0.69 | -1.59% | 12 –º–∏–Ω |
| ETH | 3167.53 | 3164.49 | 0.026 ETH | -0.08 | -0.17 | -0.98% | 13 —Å–µ–∫ |
| XRP | 2.2276 | 2.2265 | 138 XRP | +0.16 | -0.09 | -0.14% | 35 –º–∏–Ω |
| BTC | 93172.5 | 92999.5 | 0.0032 BTC | -0.56 | -0.86 | -1.43% | 2 –º–∏–Ω 23 —Å–µ–∫ |

### 2.2. –†–∞—Å—á–µ—Ç —Ç–µ–∫—É—â–∏—Ö TP –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:**
```yaml
# –ì–ª–æ–±–∞–ª—å–Ω—ã–π TP
tp_percent: 2.0%  # –û—Ç –º–∞—Ä–∂–∏

# Per-symbol TP (ranging —Ä–µ–∂–∏–º)
BTC-USDT: tp_percent: 2.0%
ETH-USDT: tp_percent: 1.95%
SOL-USDT: tp_percent: 1.9%
DOGE-USDT: tp_percent: 3.25%
XRP-USDT: tp_percent: 3.25%
```

### 2.3. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞–∑–º–µ—Ä–æ–º –ø–æ–∑–∏—Ü–∏–π

**–†–∞—Å—á–µ—Ç –¥–ª—è SOL:**
- Entry: 141.55
- –†–∞–∑–º–µ—Ä: 1.52 SOL
- Position Value: 1.52 √ó 141.55 = **$215.16**
- Margin (5x): 215.16 / 5 = **$43.03**
- Net PnL: -0.69 USDT = **-1.60% –æ—Ç –º–∞—Ä–∂–∏**

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ TP = 1.9%, –ø–æ–∑–∏—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç—å—Å—è –ø—Ä–∏ +0.82 USDT, –Ω–æ –∑–∞–∫—Ä—ã–ª–∞—Å—å —Å —É–±—ã—Ç–∫–æ–º -0.69 USDT

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ –ö–æ–º–∏—Å—Å–∏—è —Å—ä–µ–¥–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å: –ø—Ä–∏ $215 –ø–æ–∑–∏—Ü–∏–∏ –∫–æ–º–∏—Å—Å–∏—è = $0.43 (0.2% –Ω–∞ –∫—Ä—É–≥)
2. ‚úÖ TP —Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–∏–π –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π: –Ω—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 0.5% —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏ –ø–æ—Å–ª–µ –∫–æ–º–∏—Å—Å–∏–π
3. ‚úÖ –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ: 12 –º–∏–Ω—É—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞ 1.9%

### 2.4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—é TP

**–î–ª—è ranging —Ä–µ–∂–∏–º–∞ (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–¥–µ–ª–æ–∫):**

| –ü–∞—Ä–∞ | –¢–µ–∫—É—â–∏–π TP | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π TP | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|------|------------|------------------|------------|-------------|
| BTC | 2.0% | **3.5%** | +75% | –ö–æ–º–∏—Å—Å–∏—è 0.15%, –Ω—É–∂–µ–Ω –∑–∞–ø–∞—Å |
| ETH | 1.95% | **3.5%** | +79% | –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–¥–µ–ª–∫–∏ |
| SOL | 1.9% | **3.5%** | +84% | –ë—ã—Å—Ç—Ä—ã–π –æ–±–æ—Ä–æ—Ç —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ–≥–æ TP |
| DOGE | 3.25% | **4.0%** | +23% | –£–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –Ω–æ –º–æ–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–∏—Ç—å |
| XRP | 3.25% | **4.0%** | +23% | –î–æ–ª–≥–∏–µ —Å–¥–µ–ª–∫–∏ (35 –º–∏–Ω) —Ç—Ä–µ–±—É—é—Ç –±–æ–ª—å—à–µ–≥–æ TP |

**–î–ª—è trending —Ä–µ–∂–∏–º–∞:**

| –ü–∞—Ä–∞ | –¢–µ–∫—É—â–∏–π TP | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π TP | –£–≤–µ–ª–∏—á–µ–Ω–∏–µ |
|------|------------|------------------|------------|
| BTC | 3.3% | **5.0%** | +52% |
| ETH | 3.3% | **5.0%** | +52% |
| SOL | 3.3% | **5.0%** | +52% |
| DOGE | 3.3% | **4.5%** | +36% |
| XRP | 3.3% | **4.5%** | +36% |

### 2.5. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

**–¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
```yaml
ranging:
  max_holding_minutes: 3  # 3 –º–∏–Ω—É—Ç—ã
  
trending:
  max_holding_minutes: 5  # 5 –º–∏–Ω—É—Ç
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫ = **8-12 –º–∏–Ω—É—Ç**, –Ω–æ –∫–æ–Ω—Ñ–∏–≥ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ 3-5 –º–∏–Ω—É—Ç!

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

| –†–µ–∂–∏–º | –¢–µ–∫—É—â–µ–µ | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ | –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ |
|-------|---------|---------------|-------------|
| ranging | 3 –º–∏–Ω | **10-15 –º–∏–Ω—É—Ç** | –†–µ–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ —É–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è 8-12 –º–∏–Ω |
| trending | 5 –º–∏–Ω | **15-20 –º–∏–Ω—É—Ç** | –¢—Ä–µ–Ω–¥ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è |
| choppy | 2 –º–∏–Ω | **5-7 –º–∏–Ω—É—Ç** | –•–∞–æ—Å, –Ω–æ –Ω—É–∂–Ω–æ –≤—Ä–µ–º—è –¥–ª—è –æ—Ç—Ä–∞–±–æ—Ç–∫–∏ |

**–í–∞–∂–Ω–æ:** –ü—Ä–∏ `extend_time_if_profitable: true` –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç—Å—è, –Ω–æ –Ω–∞—á–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç —Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–π!

---

## 3. üö® –ü–†–û–ë–õ–ï–ú–ê –ü–†–û–¢–ò–í–û–ü–û–õ–û–ñ–ù–´–• –ü–û–ó–ò–¶–ò–ô

### 3.1. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞

**–ú–µ—Å—Ç–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** `src/strategies/scalping/futures/orchestrator.py:2017-2093`

```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #10: –ï—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –≤ –î–†–£–ì–û–ú –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (LONG –∏ SHORT –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ)
has_long = any(...)
has_short = any(...)

if has_long and has_short and not allow_concurrent:
    # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏, –∑–∞–∫—Ä—ã–≤–∞–µ–º –æ–¥–Ω—É –∏–∑ –Ω–∏—Ö
    logger.warning(f"üö® –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏...")
    
    # –í—ã–±–∏—Ä–∞–µ–º –∫–∞–∫—É—é –∑–∞–∫—Ä—ã–≤–∞—Ç—å (—Å –º–µ–Ω—å—à–∏–º PnL)
    positions_with_pnl.sort(key=lambda x: x["upl"])
    position_to_close = positions_with_pnl[0]  # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é (—Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º PnL)
    
    await self.position_manager.close_position_manually(
        symbol, reason="opposite_position_in_process_signals"
    )
```

### 3.2. –ü—Ä–∏—á–∏–Ω–∞ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–ü—Ä–æ–±–ª–µ–º–∞ #1: Race condition –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏**

1. –°–∏–≥–Ω–∞–ª LONG –¥–ª—è ETH ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π ‚Üí –ø–æ–∑–∏—Ü–∏–π –Ω–µ—Ç ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º LONG
2. **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** —Å–∏–≥–Ω–∞–ª SHORT –¥–ª—è ETH ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π ‚Üí LONG –µ—â–µ –Ω–µ –æ—Ç–∫—Ä—ã—Ç –≤ –±–∞–∑–µ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ–º SHORT
3. –†–µ–∑—É–ª—å—Ç–∞—Ç: –û–±–µ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–∫—Ä—ã—Ç—ã –Ω–∞ –±–∏—Ä–∂–µ

**–ü—Ä–æ–±–ª–µ–º–∞ #2: –ù–µ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∏—Ä–∂–µ–π**

```python
# –í _process_signals (—Å—Ç—Ä–æ–∫–∞ 1927):
all_positions = await self.client.get_positions()
symbol_positions = [p for p in all_positions if ...]

# –ü—Ä–æ–±–ª–µ–º–∞: –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç–∞, –Ω–æ –µ—â–µ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞,
# –∫–æ–¥ –Ω–µ –≤–∏–¥–∏—Ç –µ–µ –∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π
```

**–ü—Ä–æ–±–ª–µ–º–∞ #3: –†–∞–∑–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏**

- `_process_signals` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `client.get_positions()` ‚úÖ
- `_check_for_signals` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `self.active_positions` ‚ùå (–º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º)
- `_execute_signal_from_price` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ `self.active_positions` ‚ùå

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢—Ä–∏ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –º–æ–≥—É—Ç –¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã!

### 3.3. –ü–æ—á–µ–º—É –±–æ—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏—é

**–õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (—Å—Ç—Ä–æ–∫–∞ 2068-2072):**
```python
# –°–æ—Ä—Ç–∏—Ä—É–µ–º: —Å–Ω–∞—á–∞–ª–∞ —Å –º–µ–Ω—å—à–∏–º PnL (–±–æ–ª–µ–µ —É–±—ã—Ç–æ—á–Ω—ã–µ)
positions_with_pnl.sort(key=lambda x: x["upl"])

# –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é (—Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º PnL)
position_to_close = positions_with_pnl[0]
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å **–º–µ–Ω—å—à–∏–º PnL** (–±–æ–ª–µ–µ —É–±—ã—Ç–æ—á–Ω—É—é), –Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç:
1. –ö–æ–º–∏—Å—Å–∏–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ (–µ—â–µ -0.15 USDT)
2. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ)
3. –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è (–∫–æ—Ä–æ—Ç–∫–∞—è –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω–æ–π –ø–æ–∑–∂–µ)

### 3.4. –†–µ—à–µ–Ω–∏–µ

**1. –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –î–û –æ—Ç–∫—Ä—ã—Ç–∏—è:**

```python
# –í _execute_signal_from_price –î–û –æ—Ç–∫—Ä—ã—Ç–∏—è:
all_positions = await self.client.get_positions()  # –í—Å–µ–≥–¥–∞ —Å –±–∏—Ä–∂–∏!
symbol_positions = [p for p in all_positions if ...]

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
has_opposite = any(
    (p.get("posSide", "").lower() == "long" and signal_side == "sell")
    or (p.get("posSide", "").lower() == "short" and signal_side == "buy")
    for p in symbol_positions
)

if has_opposite:
    logger.warning(f"‚õî –ë–õ–û–ö–ò–†–£–ï–ú {signal_side.upper()} –¥–ª—è {symbol}: —É–∂–µ –µ—Å—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è")
    return False  # –ù–ï –æ—Ç–∫—Ä—ã–≤–∞–µ–º!
```

**2. –£–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π:**

- –ù–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –æ–¥–Ω–æ–π –∏–∑ –ø–æ–∑–∏—Ü–∏–π
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `allow_concurrent: true` –¥–ª—è —Ö–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏—è

**3. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∑–∏—Ü–∏–π:**

- –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `_has_position_on_exchange(symbol, side)` –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ API
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## 4. üìâ –ü–†–û–ë–õ–ï–ú–ê –¢–†–ï–ô–õ–ò–ù–ì –°–¢–û–ü–ê

### 4.1. –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏–∫–∏

**–ú–µ—Å—Ç–æ:** `src/strategies/scalping/futures/orchestrator.py:5100-5700`

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
```python
async def _update_trailing_stop_loss(self, symbol: str, price: float):
    # –ü–æ–ª—É—á–∞–µ–º trailing SL –∏–∑ —Å–ª–æ–≤–∞—Ä—è
    trailing_sl = self.trailing_sl_by_symbol.get(symbol)
    
    if not trailing_sl:
        logger.warning(f"‚ö†Ô∏è Entry price = 0 –¥–ª—è {symbol}")  # ‚Üê –≠–¢–û –ü–†–û–ë–õ–ï–ú–ê!
        return
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–Ω–æ –ª–∏ –∑–∞–∫—Ä—ã—Ç—å
    should_close = trailing_sl.should_close_position(price, ...)
    
    if should_close:
        await self.position_manager.close_position_manually(symbol, reason="trailing_sl")
```

### 4.2. –ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–æ–±–ª–µ–º–∞ #1: TrailingSL –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è**

–ò–∑ –ª–æ–≥–æ–≤:
```
‚ö†Ô∏è Entry price = 0 –¥–ª—è SOL-USDT
‚ö†Ô∏è Entry price = 0 –¥–ª—è ETH-USDT
```

**–ü—Ä–∏—á–∏–Ω–∞:** `trailing_sl_by_symbol[symbol]` —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏, –Ω–æ:
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –¥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ ‚Üí –Ω–µ—Ç –≤ `trailing_sl_by_symbol`
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º ‚Üí –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è TSL
- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `active_positions` –±–µ–∑ –≤—ã–∑–æ–≤–∞ `_execute_signal` ‚Üí TSL –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞ #2: –ß–∞—Å—Ç–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π**

- –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é ‚Üí —Å—Ç–∞—Ä—ã–π TSL —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
- –ù–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è ‚Üí –Ω–æ–≤—ã–π TSL —Å entry_price –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
- –†–µ–∑—É–ª—å—Ç–∞—Ç: TSL –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç "–Ω–∞—Ä–∞—Å—Ç–∏—Ç—å" trailing distance

**–ü—Ä–∏–º–µ—Ä:**
1. –û—Ç–∫—Ä—ã–ª–∏ SOL LONG @ 141.50 ‚Üí TSL entry = 141.50
2. –¶–µ–Ω–∞ —Ä–∞—Å—Ç–µ—Ç –¥–æ 141.80 ‚Üí TSL –¥–æ–ª–∂–µ–Ω —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å stop = 141.50 + 0.8% = 142.13
3. **–ù–û:** –ë–æ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é SOL LONG @ 141.70 ‚Üí TSL —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è, entry = 141.70
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –°—Ç–∞—Ä—ã–π TSL –ø–æ—Ç–µ—Ä—è–Ω, –Ω–æ–≤—ã–π TSL –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–Ω–æ–≤–æ

**–ü—Ä–æ–±–ª–µ–º–∞ #3: TSL –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã**

```python
# –í _handle_ticker_data:
await self._update_trailing_stop_loss(symbol, price)

# –ù–æ –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–Ω–µ—Ç –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ä–æ–≤),
# TSL –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è!
```

### 4.3. –†–µ—à–µ–Ω–∏–µ

**1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TSL –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π:**

```python
async def _init_trailing_sl_for_existing_positions(self):
    """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç TSL –¥–ª—è –ø–æ–∑–∏—Ü–∏–π, –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–æ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞"""
    all_positions = await self.client.get_positions()
    
    for pos in all_positions:
        symbol = pos.get("instId", "").replace("-SWAP", "")
        size = float(pos.get("pos", "0"))
        
        if abs(size) > 0.000001 and symbol not in self.trailing_sl_by_symbol:
            entry_price = float(pos.get("avgPx", "0"))
            side = "long" if size > 0 else "short"
            
            # –°–æ–∑–¥–∞–µ–º TSL –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ø–æ–∑–∏—Ü–∏–∏
            trailing_sl = TrailingStopLoss(...)
            self.trailing_sl_by_symbol[symbol] = trailing_sl
```

**2. –ù–µ —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å TSL –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏:**

- –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è —É–∂–µ –µ—Å—Ç—å –∏ –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º entry_price (weighted average)
- –ù–ï —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π TSL, –æ–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

**3. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ TSL:**

```python
# –í _main_trading_loop:
async def _periodic_tsl_check(self):
    """–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ TSL –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π"""
    for symbol in list(self.trailing_sl_by_symbol.keys()):
        current_price = await self._get_current_price(symbol)
        if current_price:
            await self._update_trailing_stop_loss(symbol, current_price)
```

**4. –£–≤–µ–ª–∏—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è:**

- –¢–µ–∫—É—â–µ–µ: `min_holding_minutes: 0.5` (30 —Å–µ–∫)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: `min_holding_minutes: 2.0` (2 –º–∏–Ω)
- –≠—Ç–æ –¥–∞—Å—Ç TSL –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–±–æ—Ç—É

---

## 5. ‚ùå –ü–†–û–ë–õ–ï–ú–ê –û–¢–†–ò–¶–ê–¢–ï–õ–¨–ù–´–• –°–î–ï–õ–û–ö

### 5.1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ò–∑ 52 –∑–∞–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π:
- **–ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö:** 20 (38.5%)
- **–£–±—ã—Ç–æ—á–Ω—ã—Ö:** 32 (61.5%)
- **Win Rate:** 38.5% ‚ùå

**–ü–æ –ø–∞—Ä–∞–º:**

| –ü–∞—Ä–∞ | –í—Å–µ–≥–æ | –ü—Ä–∏–±—ã–ª—å–Ω—ã—Ö | –£–±—ã—Ç–æ—á–Ω—ã—Ö | Win Rate |
|------|-------|------------|-----------|----------|
| BTC | 4 | 2 | 2 | 50% |
| ETH | 26 | 9 | 17 | 34.6% ‚ùå |
| SOL | 11 | 5 | 6 | 45.5% |
| XRP | 9 | 4 | 5 | 44.4% |
| DOGE | 2 | 0 | 2 | 0% ‚ùå |

### 5.2. –ü—Ä–∏—á–∏–Ω—ã –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

**–ü—Ä–∏—á–∏–Ω–∞ #1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è**

**–ú–µ—Å—Ç–æ:** `src/strategies/scalping/futures/signal_generator.py:1995-2247`

```python
def _generate_ma_signals(self, symbol: str, ...):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ EMA
    if ema_fast > ema_slow:
        # BULLISH —Å–∏–≥–Ω–∞–ª
        direction = "up"
    else:
        # BEARISH —Å–∏–≥–Ω–∞–ª
        direction = "down"
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ EMA, –Ω–æ:
- –í ranging —Ä–µ–∂–∏–º–µ EMA –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –ª–æ–∂–Ω—ã–µ —Å–∏–≥–Ω–∞–ª—ã
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ EMA
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ–±—ä–µ–º –∏ momentum

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2025-11-18 21:59:24 | ETH-USDT: EMA_12(3160.05) > EMA_26(3158.62), 
—Ü–µ–Ω–∞(3159.28) < EMA_12, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ=neutral
```

**–ü—Ä–æ–±–ª–µ–º–∞:** EMA –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç BULLISH, –Ω–æ —Ü–µ–Ω–∞ –Ω–∏–∂–µ EMA_12 –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ = neutral. –°–∏–≥–Ω–∞–ª –≤—Å–µ —Ä–∞–≤–Ω–æ BULLISH –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è!

**–ü—Ä–∏—á–∏–Ω–∞ #2: –ö–æ–º–∏—Å—Å–∏–∏ —Å—ä–µ–¥–∞—é—Ç –ø—Ä–∏–±—ã–ª—å**

–ò–∑ –¥–∞–Ω–Ω—ã—Ö –±–∏—Ä–∂–∏:
- XRP: Gross PnL = +0.16 USDT, Net PnL = -0.09 USDT (–∫–æ–º–∏—Å—Å–∏—è = -0.25 USDT)
- ETH: Gross PnL = +0.29 USDT, Net PnL = +0.19 USDT (–∫–æ–º–∏—Å—Å–∏—è = -0.09 USDT)

**–ü—Ä–∏—á–∏–Ω–∞ #3: –°–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–¥–µ–ª–∫–∏**

- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è —É–±—ã—Ç–æ—á–Ω—ã—Ö: **5-8 –º–∏–Ω—É—Ç**
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö: **12-15 –º–∏–Ω—É—Ç**

**–í—ã–≤–æ–¥:** –ö–æ—Ä–æ—Ç–∫–∏–µ —Å–¥–µ–ª–∫–∏ —á–∞—â–µ —É–±—ã—Ç–æ—á–Ω—ã –∏–∑-–∑–∞ –∫–æ–º–∏—Å—Å–∏–π!

**–ü—Ä–∏—á–∏–Ω–∞ #4: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–º–µ—Å—Ç–æ TP**

–ú–Ω–æ–≥–∏–µ —Å–¥–µ–ª–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ `max_holding_minutes`, –∞ –Ω–µ –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é TP:
- –†–µ–∞–ª—å–Ω—ã–π TP: 1.9-3.25%
- –ù–æ —Å–¥–µ–ª–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 3-5 –º–∏–Ω—É—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –Ω–µ –¥–æ—Å—Ç–∏–≥–ª–∏ TP
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£–±—ã—Ç–æ–∫ –∏–ª–∏ –º–∏–∫—Ä–æ–ø—Ä–æ—Ñ–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å—ä–µ–¥–∞–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è–º–∏

### 5.3. –†–µ—à–µ–Ω–∏–µ

**1. –£–ª—É—á—à–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

```python
def _generate_ma_signals(self, symbol: str, ...):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ EMA
    ema_bullish = ema_fast > ema_slow
    price_above_ema = current_price > ema_fast
    
    # –¢—Ä–µ–±—É–µ–º –û–ë–ê —É—Å–ª–æ–≤–∏—è –¥–ª—è BULLISH
    if ema_bullish and price_above_ema:
        direction = "up"
        strength = 1.0
    elif not ema_bullish and current_price < ema_slow:
        direction = "down"
        strength = 1.0
    else:
        # –ö–æ–Ω—Ñ–ª–∏–∫—Ç: EMA –∏ —Ü–µ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç
        direction = "neutral"
        strength = 0.5  # –°–Ω–∏–∂–∞–µ–º —Å–∏–ª—É —Å–∏–≥–Ω–∞–ª–∞
```

**2. –£–≤–µ–ª–∏—á–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏—Ç –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è:**

```yaml
ranging:
  min_profit_to_close: 0.0055  # 0.55% (—Ç–µ–∫—É—â–µ–µ)
  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ:
  min_profit_to_close: 0.008  # 0.8% (–∫–æ–º–∏—Å—Å–∏—è 0.2% + –∑–∞–ø–∞—Å 0.6%)
```

**3. –ù–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏:**

```python
# –í _check_time_limit:
if time_in_position > max_holding_minutes:
    if profit_pct > min_profit_to_close:
        # –ü–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏, –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º –≤—Ä–µ–º—è
        return False  # –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º
    else:
        # –ü–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ –∏–ª–∏ –±–µ–∑ –ø—Ä–∏–±—ã–ª–∏, –∑–∞–∫—Ä—ã–≤–∞–µ–º
        return True  # –ó–∞–∫—Ä—ã–≤–∞–µ–º
```

**4. –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–æ —Å–∏–ª–µ:**

```yaml
ranging:
  min_score_threshold: 0.95  # –¢–µ–∫—É—â–µ–µ
  # –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ:
  min_score_threshold: 1.2  # +26% (–±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
```

---

## 6. üîß –ü–†–û–ë–õ–ï–ú–ê –ó–ê–•–ê–†–î–ö–û–ñ–ï–ù–ù–û–°–¢–ò

### 6.1. –ù–∞–π–¥–µ–Ω–Ω—ã–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è

**–í—Å–µ–≥–æ –Ω–∞–π–¥–µ–Ω–æ:** 560+ –º–µ—Å—Ç —Å fallback/hardcoded –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ fallback (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—Å—Ç–æ):**

#### 1. Margin Calculator (`src/strategies/modules/margin_calculator.py:252`)

```python
if safety_threshold is None:
    safety_threshold = 1.5  # Fallback
    logger.warning(f"‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback safety_threshold={safety_threshold}")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–í–°–ï–ì–î–ê** –¥–ª—è ranging —Ä–µ–∂–∏–º–∞! (–∏–∑ –ª–æ–≥–æ–≤ –≤–∏–¥–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ:**
```yaml
risk:
  by_regime:
    ranging:
      safety_threshold: 1.3  # –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞, –ù–ï fallback!
```

#### 2. Orchestrator (`src/strategies/scalping/futures/orchestrator.py:68-70`)

```python
self.max_loss_per_trade = 0.02  # Fallback: 2%
self.max_margin_percent = 0.80  # Fallback: 80%
self.max_drawdown_percent = 0.05  # Fallback: 5%
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏

#### 3. Position Manager (`src/strategies/scalping/futures/position_manager.py:1502`)

```python
if commission_rate is None:
    commission_rate = 0.0010  # Fallback —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ
```

**‚úÖ –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:** Fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ

#### 4. Leverage (`src/strategies/scalping/futures/orchestrator.py:499`)

```python
if not leverage:
    leverage = 3  # Fallback
    logger.warning(f"‚ö†Ô∏è leverage –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –∏—Å–ø–æ–ª—å–∑—É–µ–º 3 (fallback)")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Leverage –î–û–õ–ñ–ï–ù –±—ã—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ fallback = 3, –∞ –≤ –∫–æ–Ω—Ñ–∏–≥–µ = 5!

#### 5. Trailing SL (`src/strategies/scalping/futures/orchestrator.py:1041-1049`)

```python
"initial_trail": 0.005,  # Fallback
"max_trail": 0.02,  # Fallback
"min_trail": 0.003,  # Fallback
"check_interval_seconds": 1.5,  # Fallback
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ, –Ω–æ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏!

### 6.2. –†–µ—à–µ–Ω–∏–µ

**1. –£–±—Ä–∞—Ç—å –≤—Å–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è:**

- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –î–û–õ–ñ–ù–´ –±—ã—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí **ERROR**, –∞ –Ω–µ fallback
- –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥

**2. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞:**

```python
REQUIRED_CONFIG_KEYS = [
    "scalping.leverage",
    "risk.by_regime.ranging.safety_threshold",
    "futures_modules.trailing_sl.initial_trail",
    # ... –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
]

def validate_config(config):
    missing = []
    for key in REQUIRED_CONFIG_KEYS:
        if not get_nested_value(config, key):
            missing.append(key)
    
    if missing:
        raise ValueError(f"–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: {missing}")
```

**3. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ fallback –Ω–∞ –æ—à–∏–±–∫–∏:**

```python
# –ë–´–õ–û:
if safety_threshold is None:
    safety_threshold = 1.5  # Fallback

# –°–¢–ê–õ–û:
if safety_threshold is None:
    raise ValueError(
        f"‚ö†Ô∏è safety_threshold –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è regime={regime}. "
        f"–î–æ–±–∞–≤—å—Ç–µ –≤ config_futures.yaml: risk.by_regime.{regime}.safety_threshold"
    )
```

---

## 7. üßÆ –ü–†–û–í–ï–†–ö–ê –õ–û–ì–ò–ö–ò –†–ê–°–ß–ï–¢–û–í

### 7.1. –†–∞—Å—á–µ—Ç PnL

**–ú–µ—Å—Ç–æ:** `src/strategies/scalping/futures/position_manager.py:1515-1522`

```python
# –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º gross PnL
if side.lower() == "long":
    gross_pnl = (exit_price - entry_price) * size_in_coins
else:  # short
    gross_pnl = (entry_price - exit_price) * size_in_coins

# Net PnL = Gross PnL - Commission
net_pnl = gross_pnl - commission
```

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –§–æ—Ä–º—É–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã –¥–ª—è LONG –∏ SHORT

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞:** `size_in_coins` —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```python
# –°—Ç—Ä–æ–∫–∞ 1506-1508:
size_in_coins = abs(size)  # size —É–∂–µ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `size` –∏–∑ API –≤ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö**, –Ω–æ `size_in_coins` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ **–º–æ–Ω–µ—Ç–∞—Ö**!

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```python
# –ü–æ–ª—É—á–∞–µ–º ctVal –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
details = await self.client.get_instrument_details(symbol)
ct_val = details.get("ctVal", 1.0)
size_in_coins = abs(size) * ct_val  # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≤ –º–æ–Ω–µ—Ç—ã
```

### 7.2. –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏

**–ú–µ—Å—Ç–æ:** `src/strategies/scalping/futures/position_manager.py:1510-1513`

```python
notional_entry = size_in_coins * entry_price
notional_exit = size_in_coins * exit_price
commission = (notional_entry + notional_exit) * commission_rate
```

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –ö–æ–º–∏—Å—Å–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–≤—Ö–æ–¥ + –≤—ã—Ö–æ–¥)

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞:** `commission_rate = 0.0010` (0.1%), –Ω–æ:
- Maker fee = 0.02% (0.0002)
- Taker fee = 0.05% (0.0005)
- –ù–∞ –∫—Ä—É–≥ = 0.04% (maker) –∏–ª–∏ 0.10% (taker)

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞

### 7.3. –†–∞—Å—á–µ—Ç TP –æ—Ç –º–∞—Ä–∂–∏

**–ú–µ—Å—Ç–æ:** `src/strategies/scalping/futures/position_manager.py:678-773`

```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: PnL% –¥–æ–ª–∂–µ–Ω —Å—á–∏—Ç–∞—Ç—å—Å—è –æ—Ç –ú–ê–†–ñ–ò, –∞ –Ω–µ –æ—Ç —Ü–µ–Ω—ã –≤—Ö–æ–¥–∞!
margin_used = position_value / leverage
pnl_percent = (pnl / margin_used) * 100

if pnl_percent >= tp_percent:
    # TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç
```

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** TP —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏ (–∫–∞–∫ –Ω–∞ –±–∏—Ä–∂–µ)

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback —Ä–∞—Å—á–µ—Ç –æ—Ç —Ü–µ–Ω—ã:

```python
# –°—Ç—Ä–æ–∫–∞ 909-916:
pnl_percent = (current_price - entry_price) / entry_price * 100  # –û—Ç —Ü–µ–Ω—ã!
logger.warning(f"‚ö†Ô∏è Fallback: PnL% –¥–ª—è {symbol} —Å—á–∏—Ç–∞–µ–º –æ—Ç —Ü–µ–Ω—ã")
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Fallback —Ä–∞—Å—á–µ—Ç –¥–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è futures —Å –ø–ª–µ—á–æ–º!

### 7.4. –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏

**–ú–µ—Å—Ç–æ:** `src/strategies/modules/margin_calculator.py:270-271`

```python
margin_used = position_value / leverage
```

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:** –ú–∞—Ä–∂–∞ = position_value / leverage

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞:** `position_value` –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

```python
# –°—Ç—Ä–æ–∫–∞ 260:
position_size = position_value / current_price  # ‚Üê –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# position_size —É–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –∏–∑ size_in_coins
position_value = size_in_coins * current_price
```

### 7.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –∏ —Ä–µ–∂–∏–º–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ –ø–∞—Ä—ã –∏–º–µ—é—Ç —Ä–∞–∑–Ω—ã–µ `ctVal`:

| –ü–∞—Ä–∞ | ctVal | –ü—Ä–∏–º–µ—Ä |
|------|-------|--------|
| BTC | 0.01 | 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 0.01 BTC |
| ETH | 1.0 | 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1.0 ETH |
| SOL | 1.0 | 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 1.0 SOL |
| DOGE | 10.0 | 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 10.0 DOGE |
| XRP | 100.0 | 1 –∫–æ–Ω—Ç—Ä–∞–∫—Ç = 100.0 XRP |

**‚úÖ –ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç ctVal –∏–∑ API**

**‚ùå –ü—Ä–æ–±–ª–µ–º–∞:** –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback `ctVal = 1.0`, —á—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è BTC (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.01)!

---

## üìã –ò–¢–û–ì–û–í–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ):

1. **–£–±—Ä–∞—Ç—å –≤—Å–µ fallback –∑–Ω–∞—á–µ–Ω–∏—è** ‚Üí –û—à–∏–±–∫–∏ –≤–º–µ—Å—Ç–æ fallback
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç size_in_coins** ‚Üí –í—Å–µ–≥–¥–∞ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ctVal
3. **–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ –î–û –æ—Ç–∫—Ä—ã—Ç–∏—è
4. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å TSL –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–∑–∏—Ü–∏–π** ‚Üí –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ):

5. **–£–≤–µ–ª–∏—á–∏—Ç—å TP –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤** ‚Üí +50-100% –æ—Ç —Ç–µ–∫—É—â–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
6. **–£–≤–µ–ª–∏—á–∏—Ç—å –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è** ‚Üí 10-15 –º–∏–Ω—É—Ç –¥–ª—è ranging, 15-20 –¥–ª—è trending
7. **–£–ª—É—á—à–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è** ‚Üí –¢—Ä–µ–±–æ–≤–∞—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è EMA –∏ —Ü–µ–Ω—ã
8. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π** ‚Üí –í—Å–µ –¥–µ—Ç–∞–ª–∏ (–≤—Ä–µ–º—è, —Ü–µ–Ω—ã, —Ä–∞–∑–º–µ—Ä—ã)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ):

9. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É TSL** ‚Üí –ù–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ü–µ–Ω—ã
10. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏** ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é (maker/taker)
11. **–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–æ —Å–∏–ª–µ** ‚Üí –£–≤–µ–ª–∏—á–∏—Ç—å min_score_threshold

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å |
|-----------|-------------------|-------------|
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | 2 | –°—Ä–µ–¥–Ω—è—è |
| –ü–∞—Ä–∞–º–µ—Ç—Ä—ã TP/SL | 5 | –í—ã—Å–æ–∫–∞—è |
| –ü—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ | 3 | –ö—Ä–∏—Ç–∏—á–Ω–∞—è |
| Trailing SL | 4 | –í—ã—Å–æ–∫–∞—è |
| –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ | 4 | –í—ã—Å–æ–∫–∞—è |
| –ó–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ—Å—Ç—å | 560+ | –ö—Ä–∏—Ç–∏—á–Ω–∞—è |
| –†–∞—Å—á–µ—Ç—ã | 6 | –ö—Ä–∏—Ç–∏—á–Ω–∞—è |

**–í—Å–µ–≥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 8  
**–í—Å–µ–≥–æ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º:** 11  
**–í—Å–µ–≥–æ –∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π:** 3

