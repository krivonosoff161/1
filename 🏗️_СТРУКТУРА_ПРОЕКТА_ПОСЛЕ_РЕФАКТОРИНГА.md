# üèóÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê –ü–û–°–õ–ï –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

## üéØ –¶–ï–õ–¨ –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

–°–æ–∑–¥–∞—Ç—å —á–µ—Ç–∫—É—é, –º–æ–¥—É–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –µ–¥–∏–Ω—ã–º —Ü–µ–Ω—Ç—Ä–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –£–º–µ–Ω—å—à–∏—Ç—å orchestrator —Å 3149 –¥–æ ~500 —Å—Ç—Ä–æ–∫
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã (PositionRegistry, DataRegistry)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–µ–º (ExitAnalyzer)
- ‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã (FilterManager)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (LoggerFactory)

---

## üìÅ –ü–û–õ–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

```
simple trading bot okx/
‚îú‚îÄ‚îÄ üìÑ run.py                          # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ üìÑ config.yaml                     # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥
‚îú‚îÄ‚îÄ üìÑ requirements.txt                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ üìÑ README.md                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ üìÅ config/                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ config_futures.yaml            # –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è Futures
‚îÇ   ‚îú‚îÄ‚îÄ config_spot.yaml               # –ö–æ–Ω—Ñ–∏–≥ –¥–ª—è Spot
‚îÇ   ‚îú‚îÄ‚îÄ features.yaml                  # –§–ª–∞–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ manual_pools.yaml              # –†—É—á–Ω—ã–µ –ø—É–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ –ö–û–ù–§–ò–ì_–ê–î–ê–ü–¢–ò–í–ù–´–•_–ü–ê–†–ê–ú–ï–¢–†–û–í_–†–ò–°–ö–ê.yaml
‚îÇ
‚îú‚îÄ‚îÄ üìÅ src/                            # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ clients/                    # API –∫–ª–∏–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ futures_client.py          # OKX Futures API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ spot_client.py             # OKX Spot API
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ config.py                   # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ utils/                      # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logging_setup.py           # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.py                 # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ balance/                    # –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –±–∞–ª–∞–Ω—Å (–ü–ï–†–ï–ú–ï–©–ï–ù)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ adaptive_balance_manager.py
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ strategies/
‚îÇ       ‚îî‚îÄ‚îÄ üìÅ scalping/
‚îÇ           ‚îî‚îÄ‚îÄ üìÅ futures/            # üî• FUTURES –°–¢–†–ê–¢–ï–ì–ò–Ø
‚îÇ               ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ core/           # üî• –ù–û–í–û–ï: –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ trading_control_center.py  # –ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ data_registry.py           # –ï–¥–∏–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –¥–∞–Ω–Ω—ã—Ö
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ position_registry.py       # –ï–¥–∏–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä –ø–æ–∑–∏—Ü–∏–π
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ signals/        # üî• –ù–û–í–û–ï: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ signal_pipeline.py         # Pipeline –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ filter_manager.py          # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ signal_validator.py        # –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ signal_executor.py         # –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ positions/      # üî• –ù–û–í–û–ï: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ entry_manager.py           # –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ exit_analyzer.py           # üî• –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏–µ–º
‚îÇ               ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_collectors.py     # –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (Reversal, Trend, WebSocket, etc.)
‚îÇ               ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decision_engine.py     # –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π (ExitSignalGenerator, etc.)
‚îÇ               ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ action_executor.py     # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π (Close, Extend, Protect)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ position_monitor.py        # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ exit_decision_logger.py    # üî• –ù–û–í–û–ï: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ calculations/   # üî• –ù–û–í–û–ï: –í—Å–µ —Ä–∞—Å—á–µ—Ç—ã
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ regime_calculator.py       # –†–∞—Å—á–µ—Ç—ã –ø–æ —Ä–µ–∂–∏–º–∞–º (TP/SL)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ balance_calculator.py      # –†–∞—Å—á–µ—Ç—ã –ø–æ –±–∞–ª–∞–Ω—Å—É
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ margin_calculator.py       # –†–∞—Å—á–µ—Ç—ã –º–∞—Ä–∂–∏ (–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ position_sizer.py          # –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–π
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ pnl_calculator.py          # –†–∞—Å—á–µ—Ç PnL
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ adaptivity/     # üî• –ù–û–í–û–ï: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ regime_manager.py          # ARM (–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ balance_manager.py         # Adaptive Balance (–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ balance/)
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ parameter_adapter.py       # –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ filters/        # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ adx_filter.py              # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ mtf_filter.py              # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ correlation_filter.py      # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ pivot_points_filter.py     # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ volume_profile_filter.py   # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ liquidity_filter.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ order_flow_filter.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ funding_rate_filter.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ volatility_regime_filter.py
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ momentum_filter.py
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ coordinators/   # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ websocket_coordinator.py   # –¢–æ–ª—å–∫–æ WebSocket –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ order_coordinator.py       # –¢–æ–ª—å–∫–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ä–¥–µ—Ä–æ–≤
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ indicators/     # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ fast_adx.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ trailing_stop_loss.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ order_flow_indicator.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ funding_rate_monitor.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ futures_volume_profile.py
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ micro_pivot_calculator.py
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ risk/           # –ú–æ–¥—É–ª–∏ —Ä–∏—Å–∫–∞ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ liquidation_protector.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ margin_monitor.py
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ max_size_limiter.py
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ config/         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ config_manager.py
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ üìÅ logging/        # üî• –ù–û–í–û–ï: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ logger_factory.py          # –§–∞–±—Ä–∏–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ structured_logger.py       # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ               ‚îÇ   ‚îú‚îÄ‚îÄ exit_decision_logger.py    # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
‚îÇ               ‚îÇ   ‚îî‚îÄ‚îÄ debug_logger.py            # –ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑ modules/
‚îÇ               ‚îÇ
‚îÇ               ‚îú‚îÄ‚îÄ signal_generator.py            # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π (—Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
‚îÇ               ‚îú‚îÄ‚îÄ order_executor.py              # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ               ‚îú‚îÄ‚îÄ risk_manager.py                # –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π (–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ calculations)
‚îÇ               ‚îú‚îÄ‚îÄ websocket_manager.py           # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ               ‚îú‚îÄ‚îÄ private_websocket_manager.py   # –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚îÇ               ‚îú‚îÄ‚îÄ orchestrator.py                # üî• –£–ü–†–û–©–ï–ù: –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è (~500 —Å—Ç—Ä–æ–∫)
‚îÇ               ‚îî‚îÄ‚îÄ (tsl_manager.py - –£–î–ê–õ–ï–ù, –ª–æ–≥–∏–∫–∞ –≤ exit_analyzer)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ scripts/                        # –°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ analyze_all_logs.py            # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ analyze_trades.py              # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Å–¥–µ–ª–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ check_balance.py               # –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ check_bot_status.py            # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ validate_configs.py            # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ üìÅ logs/                           # –õ–æ–≥–∏
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ futures/                    # –õ–æ–≥–∏ Futures
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log            # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log.zip        # –ê—Ä—Ö–∏–≤—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ debug/                  # DEBUG –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exit_decisions/        # üî• –ù–û–í–û–ï: –†–µ—à–µ–Ω–∏—è ExitAnalyzer
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ {symbol}_{timestamp}.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signals/               # –°–∏–≥–Ω–∞–ª—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ positions/             # –ü–æ–∑–∏—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ calculations/          # –†–∞—Å—á–µ—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ structured/             # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trades_YYYY-MM-DD.csv  # –°–¥–µ–ª–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ decisions_YYYY-MM-DD.json  # –†–µ—à–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ archive/                # –ê—Ä—Ö–∏–≤—ã (—Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ spot/                       # –õ–æ–≥–∏ Spot
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ reports/                    # –û—Ç—á–µ—Ç—ã –∞–Ω–∞–ª–∏–∑–∞
‚îÇ
‚îú‚îÄ‚îÄ üìÅ data/                           # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ cache/                      # –ö—ç—à
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bot.lock                   # Lock —Ñ–∞–π–ª
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ historical/                 # –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ
‚îú‚îÄ‚îÄ üìÅ tests/                          # –¢–µ—Å—Ç—ã (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ üìÅ docs/                           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îÇ
‚îú‚îÄ‚îÄ üìÅ backups/                        # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îÇ
‚îî‚îÄ‚îÄ üìÅ scripts_bat/                    # üî• –ù–û–í–û–ï: –ë–∞—Ç–Ω–∏–∫–∏ (–≤—ã–Ω–µ—Å–µ–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ)
    ‚îú‚îÄ‚îÄ start.bat                      # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ stop_bot.bat                   # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
    ‚îú‚îÄ‚îÄ analyze_logs.bat               # –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
    ‚îú‚îÄ‚îÄ clean_logs.bat                 # –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
    ‚îú‚îÄ‚îÄ clear_cache.bat                # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
    ‚îî‚îÄ‚îÄ view_logs.bat                  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```

---

## üìã –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï –ú–û–î–£–õ–ï–ô

### üî• CORE (–Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã)

#### `trading_control_center.py` (~400 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è SignalPipeline, EntryManager, ExitAnalyzer
- –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- async def start()                    # –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã
- async def stop()                     # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- async def generate_signal(symbol)    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
- async def open_position(signal)      # –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- async def analyze_position(symbol)   # –ê–Ω–∞–ª–∏–∑ –ø–æ–∑–∏—Ü–∏–∏
- async def close_position(symbol, reason)  # –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏
```

#### `data_registry.py` (~300 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
- –•—Ä–∞–Ω–µ–Ω–∏–µ market data, indicators, regimes, balance, margin

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- def update_market_data(symbol, data)
- def get_market_data(symbol)
- def update_regime(symbol, regime, params)
- def get_regime(symbol)
- def update_balance(balance, profile)
- def get_balance()
```

#### `position_registry.py` (~350 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (entry_time, regime, etc.)

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- async def register_position(symbol, position, metadata)
- async def get_position(symbol)
- async def get_metadata(symbol)
- async def update_position(symbol, updates)
- async def unregister_position(symbol)
```

---

### üî• SIGNALS (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏)

#### `signal_pipeline.py` (~250 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- Pipeline –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FilterManager –∏ SignalValidator

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- async def generate_signal(symbol, market_data)
- async def _apply_all_filters(signal, regime, balance_profile)
```

#### `filter_manager.py` (~400 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
- Pre-filters: ADX, Volatility, Risk
- Trend filters: MTF, Correlation
- Entry filters: Pivot Points, Volume Profile, Liquidity
- Market filters: Order Flow, Funding Rate
```

#### `signal_validator.py` (~200 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤, –±–∞–ª–∞–Ω—Å–∞, –ª–∏–º–∏—Ç–æ–≤

---

### üî• POSITIONS (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏)

#### `entry_manager.py` (~300 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –±–∏—Ä–∂–µ
- –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (—Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ PositionRegistry

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- async def open_position(signal)
- async def calculate_position_size(signal, regime, balance_profile)
- async def _register_position(symbol, position, metadata)
```

#### `exit_analyzer.py` (~600 —Å—Ç—Ä–æ–∫) üî• **–ö–õ–Æ–ß–ï–í–û–ô –ú–û–î–£–õ–¨**
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–π
- –ê–Ω–∞–ª–∏–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞ (trending/ranging/choppy)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```python
# Data Collectors
- ReversalAnalyzer      # –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
- TrendAnalyzer         # –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–∞ (ADX)
- WebSocketMonitor      # –î–∞–Ω–Ω—ã–µ real-time
- IndicatorAggregator   # –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- RegimeDetector        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

# Decision Engine
- ExitSignalGenerator   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–∫—Ä—ã—Ç–∏—è (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞!)
- ExtensionEvaluator    # –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è TP
- RiskCalculator        # –†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–æ–≤
- PriorityResolver      # –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

# Action Executor
- CloseExecutor         # –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
- ExtensionExecutor     # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP
- ProtectionExecutor    # –ó–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏ (trailing stop)
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- async def analyze_position(symbol)  # –ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞
- async def _generate_exit_for_trending(...)
- async def _generate_exit_for_ranging(...)
- async def _generate_exit_for_choppy(...)
```

#### `position_monitor.py` (~200 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- –í—ã–∑–æ–≤ ExitAnalyzer –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏

#### `exit_decision_logger.py` (~150 —Å—Ç—Ä–æ–∫) üî• **–ù–û–í–û–ï**
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer –≤ JSON
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

**–§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤:**
```json
{
  "symbol": "BTCUSDT",
  "timestamp": "2025-01-24T14:30:00Z",
  "decision": "extend_tp",
  "reason": "Strong trend continues",
  "pnl_pct": 0.8,
  "regime": "trending",
  "trend_strength": 0.85,
  "reversal_confidence": 0.2,
  "metadata": {...}
}
```

---

### üî• CALCULATIONS (–†–∞—Å—á–µ—Ç—ã)

#### `regime_calculator.py` (~300 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç TP/SL –¥–ª—è —Ä–µ–∂–∏–º–∞
- –£—á–µ—Ç per-symbol –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
- –£—á–µ—Ç balance profile boost

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- def calculate_tp_percent(symbol, regime, ...)
- def calculate_sl_percent(symbol, regime, ...)
- def calculate_position_size_multiplier(...)
```

#### `balance_calculator.py` (~200 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –±–∞–ª–∞–Ω—Å–∞
- –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è

#### `margin_calculator.py` (~250 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Per-regime safety_threshold

**–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑:** `src/strategies/modules/margin_calculator.py`

#### `position_sizer.py` (~400 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤

**–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑:** `risk_manager.py`

#### `pnl_calculator.py` (~300 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –†–∞—Å—á–µ—Ç PnL
- –£—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π
- –£—á–µ—Ç ctVal
- –†–∞—Å—á–µ—Ç duration

**–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑:** `position_manager.py`

---

### üî• ADAPTIVITY (–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã)

#### `regime_manager.py` (~600 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞ (trending/ranging/choppy)
- Per-symbol —Ä–µ–∂–∏–º—ã
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–µ–∂–∏–º–∞

**–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑:** `src/strategies/modules/adaptive_regime_manager.py`

#### `balance_manager.py` (~450 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –±–∞–ª–∞–Ω—Å–∞ (small/medium/large)
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- Boost –º–Ω–æ–∂–∏—Ç–µ–ª–∏

**–ü–ï–†–ï–ú–ï–©–ï–ù –∏–∑:** `src/balance/adaptive_balance_manager.py`

#### `parameter_adapter.py` (~250 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:**
1. Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
2. Per-regime –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
3. Balance profile boost
4. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

### üî• LOGGING (–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

#### `logger_factory.py` (~200 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:**
```python
- def create_logger(name, log_level="DEBUG")
- def setup_file_logger(logger, log_dir, filename)
- def setup_console_logger(logger, log_level="INFO")
```

#### `structured_logger.py` (~250 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤
- –†–æ—Ç–∞—Ü–∏—è –∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è

**–§–æ—Ä–º–∞—Ç:**
```json
{
  "timestamp": "2025-01-24T14:30:00.123Z",
  "level": "INFO",
  "module": "ExitAnalyzer",
  "symbol": "BTCUSDT",
  "action": "extend_tp",
  "data": {...}
}
```

#### `exit_decision_logger.py` (~150 —Å—Ç—Ä–æ–∫)
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ JSON —Ñ–∞–π–ª—ã
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

### üî• ORCHESTRATOR (–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π)

#### `orchestrator.py` (~500 —Å—Ç—Ä–æ–∫) üî• **–£–ü–†–û–©–ï–ù**
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å:**
- –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TradingControlCenter
- –ó–∞–ø—É—Å–∫ –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è

**–ë–´–õ–û:** 3149 —Å—Ç—Ä–æ–∫
**–°–¢–ê–õ–û:** ~500 —Å—Ç—Ä–æ–∫

**–£–î–ê–õ–ï–ù–û:**
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ ‚Üí `PositionMonitor`
- ‚ùå –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π ‚Üí `ExitAnalyzer`
- ‚ùå –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ ‚Üí `PositionSizer`
- ‚ùå –†–∞—Å—á–µ—Ç TP/SL ‚Üí `RegimeCalculator`
- ‚ùå –ü—Ä–æ–≤–µ—Ä–∫–∞ holding time ‚Üí `ExitAnalyzer`
- ‚ùå –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ADL ‚Üí `PositionMonitor`
- ‚ùå –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–∑–∏—Ü–∏–π ‚Üí `TradingControlCenter`

**–û–°–¢–ê–í–õ–ï–ù–û:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ó–∞–ø—É—Å–∫ –≥–ª–∞–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º—ã

---

## üìä –°–ò–°–¢–ï–ú–ê –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø

### –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Å–ª–æ–∂–Ω–∞—è):
```
- –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥: logs/futures/futures_main_YYYY-MM-DD.log
- DEBUG –ª–æ–≥–∏: logs/futures/debug/*.log
- CSV —ç–∫—Å–ø–æ—Ä—Ç: logs/futures/debug/trades.csv
- –ê—Ä—Ö–∏–≤—ã: logs/futures/*.zip
```

### –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è):

#### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏:
```
logs/futures/
‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log       # –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (DEBUG+)
‚îú‚îÄ‚îÄ futures_main_YYYY-MM-DD.log.zip   # –ê—Ä—Ö–∏–≤—ã
‚îú‚îÄ‚îÄ info_YYYY-MM-DD.log                # –¢–æ–ª—å–∫–æ INFO (–ª–µ–≥—á–µ —á–∏—Ç–∞—Ç—å)
‚îî‚îÄ‚îÄ errors_YYYY-MM-DD.log              # –¢–æ–ª—å–∫–æ ERROR (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
```

#### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏:
```
logs/futures/structured/
‚îú‚îÄ‚îÄ trades_YYYY-MM-DD.csv              # –°–¥–µ–ª–∫–∏ (CSV)
‚îú‚îÄ‚îÄ decisions_YYYY-MM-DD.json          # –†–µ—à–µ–Ω–∏—è ExitAnalyzer (JSON)
‚îî‚îÄ‚îÄ signals_YYYY-MM-DD.json            # –°–∏–≥–Ω–∞–ª—ã (JSON)
```

#### 3. DEBUG –ª–æ–≥–∏:
```
logs/futures/debug/
‚îú‚îÄ‚îÄ exit_decisions/                    # üî• –ù–û–í–û–ï: –†–µ—à–µ–Ω–∏—è ExitAnalyzer
‚îÇ   ‚îî‚îÄ‚îÄ {symbol}_{timestamp}.json
‚îú‚îÄ‚îÄ signals/                           # –°–∏–≥–Ω–∞–ª—ã
‚îú‚îÄ‚îÄ positions/                         # –ü–æ–∑–∏—Ü–∏–∏
‚îî‚îÄ‚îÄ calculations/                      # –†–∞—Å—á–µ—Ç—ã
```

#### 4. –ê—Ä—Ö–∏–≤—ã:
```
logs/futures/archive/                  # –°—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ (30+ –¥–Ω–µ–π)
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

**`src/strategies/scalping/futures/logging/logger_factory.py`:**
```python
def setup_futures_logging(log_dir: str = "logs/futures"):
    """
    –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Futures
    
    –°–æ–∑–¥–∞–µ—Ç:
    1. –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥ (DEBUG+)
    2. INFO –ª–æ–≥ (INFO+)
    3. ERROR –ª–æ–≥ (ERROR+)
    4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ (JSON/CSV)
    5. DEBUG –ª–æ–≥–∏ (exit_decisions, signals, etc.)
    """
    # 1. –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
    logger.add(
        f"{log_dir}/futures_main_{{time:YYYY-MM-DD}}.log",
        level="DEBUG",
        rotation="5 MB",
        retention="7 days",
        compression="zip",
    )
    
    # 2. INFO –ª–æ–≥ (–ª–µ–≥—á–µ —á–∏—Ç–∞—Ç—å)
    logger.add(
        f"{log_dir}/info_{{time:YYYY-MM-DD}}.log",
        level="INFO",
        rotation="5 MB",
        retention="14 days",
    )
    
    # 3. ERROR –ª–æ–≥
    logger.add(
        f"{log_dir}/errors_{{time:YYYY-MM-DD}}.log",
        level="ERROR",
        rotation="5 MB",
        retention="30 days",
    )
    
    # 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥ (JSON)
    structured_logger = StructuredLogger(f"{log_dir}/structured")
    
    return logger, structured_logger
```

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

**1. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞:**
- `logger_factory.py` —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ –ª–æ–≥–≥–µ—Ä—ã
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–æ—Ç–∞—Ü–∏—é, –∞—Ä—Ö–∏–≤–∞—Ü–∏—é, retention
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**2. –í–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:**
- –í—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π logger
- –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –ø–æ —É—Ä–æ–≤–Ω—è–º
- ExitDecisionLogger —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ—à–µ–Ω–∏—è –≤ JSON

**3. –ü—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞:**
- –õ–æ–≥–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è
- –°—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è –∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º (DEBUG/INFO/ERROR)
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## üîß –ë–ê–¢–ù–ò–ö–ò (–°–∫—Ä–∏–ø—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

### –¢–µ–∫—É—â–∏–µ –±–∞—Ç–Ω–∏–∫–∏:
```
‚îú‚îÄ‚îÄ start.bat              # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ stop_bot.bat           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ stop_all.bat           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
‚îú‚îÄ‚îÄ analyze.bat            # –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ clean_logs.bat         # –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
‚îú‚îÄ‚îÄ clear_cache.bat        # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
‚îú‚îÄ‚îÄ view_logs.bat          # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
‚îî‚îÄ‚îÄ validate_configs.bat   # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤
```

### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞—Ç–Ω–∏–∫–æ–≤:

**–í—Å–µ –±–∞—Ç–Ω–∏–∫–∏ –≤—ã–Ω–æ—Å–∏–º –≤ –ø–∞–ø–∫—É `scripts_bat/`:**

```
scripts_bat/
‚îú‚îÄ‚îÄ start.bat              # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îú‚îÄ‚îÄ stop_bot.bat           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îú‚îÄ‚îÄ stop_all.bat           # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îú‚îÄ‚îÄ analyze_logs.bat       # üî• –û–ë–ù–û–í–õ–ï–ù: –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ (–≤–∫–ª—é—á–∞—è exit_decisions)
‚îú‚îÄ‚îÄ clean_logs.bat         # üî• –û–ë–ù–û–í–õ–ï–ù: –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ (—Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã)
‚îú‚îÄ‚îÄ clear_cache.bat        # –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îú‚îÄ‚îÄ view_logs.bat          # üî• –û–ë–ù–û–í–õ–ï–ù: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ (–≤–∫–ª—é—á–∞—è structured)
‚îú‚îÄ‚îÄ validate_configs.bat   # –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥–æ–≤ (–ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô)
‚îî‚îÄ‚îÄ analyze_exit_decisions.bat  # üî• –ù–û–í–û–ï: –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –±–∞—Ç–Ω–∏–∫–∏:

#### `scripts_bat/analyze_logs.bat`:
```bat
@echo off
REM –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –ª–æ–≥–æ–≤ –≤–∫–ª—é—á–∞—è exit_decisions
python scripts/analyze_all_logs.py ^
    --log-dir "logs/futures" ^
    --include-exit-decisions ^
    --include-structured ^
    --output "logs/reports/analysis_%date%.md"
```

#### `scripts_bat/clean_logs.bat`:
```bat
@echo off
REM –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤ —Å —É—á–µ—Ç–æ–º –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
REM –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π (–æ—Å–Ω–æ–≤–Ω—ã–µ)
REM –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π (errors)
REM –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ —Å—Ç–∞—Ä—à–µ 14 –¥–Ω–µ–π (structured)
```

#### `scripts_bat/view_logs.bat`:
```bat
@echo off
REM –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞
echo Select log type:
echo 1. Main log (DEBUG+)
echo 2. INFO log
echo 3. ERROR log
echo 4. Structured logs (JSON)
echo 5. Exit decisions (JSON)
```

#### `scripts_bat/analyze_exit_decisions.bat` üî• **–ù–û–í–û–ï**:
```bat
@echo off
REM –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
python scripts/analyze_exit_decisions.py ^
    --log-dir "logs/futures/debug/exit_decisions" ^
    --output "logs/reports/exit_decisions_analysis.md"
```

---

## üîÑ –ö–ê–ö –ë–£–î–£–¢ –†–ê–ë–û–¢–ê–¢–¨ –ë–ê–¢–ù–ò–ö–ò

### `scripts_bat/start.bat` - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ–π—á–∞—Å)
- ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç `src/main_futures.py`
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –ø–∞–ø–∫–∏ –¥–ª—è –ª–æ–≥–æ–≤ (–µ—Å–ª–∏ –Ω–µ—Ç)

**–†–∞–±–æ—Ç–∞:**
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ Python –∏ venv
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–æ–≤
3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫ –ª–æ–≥–æ–≤ (–≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–µ: `debug/exit_decisions`, `structured`)
4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

---

### `scripts_bat/stop_bot.bat` - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ–π—á–∞—Å)
- ‚úÖ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã Python
- ‚úÖ –£–¥–∞–ª—è–µ—Ç lock —Ñ–∞–π–ª

**–†–∞–±–æ—Ç–∞:**
1. –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –±–æ—Ç–∞
2. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
3. –£–¥–∞–ª–µ–Ω–∏–µ lock —Ñ–∞–π–ª–∞

---

### `scripts_bat/analyze_logs.bat` - –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- üî• –û–ë–ù–û–í–õ–ï–ù: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ exit_decisions
- üî• –û–ë–ù–û–í–õ–ï–ù: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ structured logs

**–ù–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```bat
analyze_logs.bat --exit-decisions    # –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
analyze_logs.bat --structured        # –ê–Ω–∞–ª–∏–∑ structured logs
analyze_logs.bat --full              # –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (–≤—Å–µ —Ç–∏–ø—ã –ª–æ–≥–æ–≤)
```

**–†–∞–±–æ—Ç–∞:**
1. –ê–Ω–∞–ª–∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ª–æ–≥–∞
2. –ê–Ω–∞–ª–∏–∑ exit_decisions (JSON)
3. –ê–Ω–∞–ª–∏–∑ structured logs (CSV/JSON)
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞

---

### `scripts_bat/clean_logs.bat` - –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- üî• –û–ë–ù–û–í–õ–ï–ù: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–∞–ø–æ–∫

**–û—á–∏—Å—Ç–∫–∞:**
1. –û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏ (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π) ‚Üí –∞—Ä—Ö–∏–≤
2. ERROR –ª–æ–≥–∏ (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π) ‚Üí –∞—Ä—Ö–∏–≤
3. Structured –ª–æ–≥–∏ (—Å—Ç–∞—Ä—à–µ 14 –¥–Ω–µ–π) ‚Üí –∞—Ä—Ö–∏–≤
4. Exit decisions (—Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π) ‚Üí –∞—Ä—Ö–∏–≤

**–†–∞–±–æ—Ç–∞:**
1. –ü–æ–∏—Å–∫ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤
2. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ `logs/futures/archive/`
3. –°–∂–∞—Ç–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ (zip)

---

### `scripts_bat/clear_cache.bat` - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ–π—á–∞—Å)

**–†–∞–±–æ—Ç–∞:**
1. –û—á–∏—Å—Ç–∫–∞ `data/cache/`
2. –£–¥–∞–ª–µ–Ω–∏–µ `__pycache__`
3. –£–¥–∞–ª–µ–Ω–∏–µ `.pyc` —Ñ–∞–π–ª–æ–≤

---

### `scripts_bat/view_logs.bat` - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- üî• –û–ë–ù–û–í–õ–ï–ù: –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –ª–æ–≥–æ–≤

**–ú–µ–Ω—é:**
```
1. Main log (DEBUG+)          - logs/futures/futures_main_*.log
2. INFO log                   - logs/futures/info_*.log
3. ERROR log                  - logs/futures/errors_*.log
4. Structured logs (JSON)     - logs/futures/structured/*.json
5. Exit decisions (JSON)      - logs/futures/debug/exit_decisions/*.json
6. Trades CSV                 - logs/futures/structured/trades_*.csv
```

---

### `scripts_bat/analyze_exit_decisions.bat` üî• **–ù–û–í–û–ï**
**–§—É–Ω–∫—Ü–∏–∏:**
- –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π ExitAnalyzer
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–µ–∂–∏–º–∞–º
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏–π

**–†–∞–±–æ—Ç–∞:**
1. –ß—Ç–µ–Ω–∏–µ JSON —Ñ–∞–π–ª–æ–≤ –∏–∑ `logs/futures/debug/exit_decisions/`
2. –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π
3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –≤ `logs/reports/exit_decisions_analysis.md`

---

## üìù –ü–û–õ–ù–´–ô TODO –ü–õ–ê–ù –†–ê–ë–û–¢–´

### –≠–¢–ê–ü 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1 —á–∞—Å)
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ (core/, signals/, positions/, calculations/, adaptivity/, logging/)
- [ ] –°–æ–∑–¥–∞—Ç—å `__init__.py` —Ñ–∞–π–ª—ã –≤–æ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø–∞–ø–∫–∞—Ö
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö

### –≠–¢–ê–ü 2: –°–æ–∑–¥–∞–Ω–∏–µ —è–¥—Ä–∞ (Core) - 4-5 —á–∞—Å–æ–≤
- [ ] 2.1. –°–æ–∑–¥–∞—Ç—å `position_registry.py` (350 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å PositionRegistry
  - [ ] –ú–µ—Ç–æ–¥—ã register/get/update/unregister
  - [ ] Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] 2.2. –°–æ–∑–¥–∞—Ç—å `data_registry.py` (300 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å DataRegistry
  - [ ] –•—Ä–∞–Ω–µ–Ω–∏–µ market data, indicators, regimes, balance, margin
  - [ ] –ú–µ—Ç–æ–¥—ã update/get –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] 2.3. –°–æ–∑–¥–∞—Ç—å `trading_control_center.py` (400 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å TradingControlCenter
  - [ ] –ú–µ—Ç–æ–¥—ã generate_signal, open_position, close_position
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PositionRegistry –∏ DataRegistry
  - [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –≠–¢–ê–ü 3: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏ (Signals) - 6-8 —á–∞—Å–æ–≤
- [ ] 3.1. –°–æ–∑–¥–∞—Ç—å `filter_manager.py` (400 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å FilterManager
  - [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - [ ] –ú–µ—Ç–æ–¥ apply_all_filters —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- [ ] 3.2. –°–æ–∑–¥–∞—Ç—å `signal_pipeline.py` (250 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å SignalPipeline
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FilterManager
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SignalGenerator
- [ ] 3.3. –°–æ–∑–¥–∞—Ç—å `signal_validator.py` (200 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å SignalValidator
  - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤
  - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∏—Å–∫–æ–≤
- [ ] 3.4. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –∏–∑ modules/ –≤ filters/
  - [ ] adx_filter.py
  - [ ] mtf_filter.py
  - [ ] correlation_filter.py
  - [ ] pivot_points_filter.py
  - [ ] volume_profile_filter.py

### –≠–¢–ê–ü 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏ (Positions) - 8-10 —á–∞—Å–æ–≤
- [ ] 4.1. –°–æ–∑–¥–∞—Ç—å `entry_manager.py` (300 —Å—Ç—Ä–æ–∫)
  - [ ] –ö–ª–∞—Å—Å EntryManager
  - [ ] –ú–µ—Ç–æ–¥ open_position
  - [ ] –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ (–¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –≤ PositionSizer)
  - [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ PositionRegistry
- [ ] 4.2. –°–æ–∑–¥–∞—Ç—å `exit_analyzer.py` (600 —Å—Ç—Ä–æ–∫) üî•
  - [ ] 4.2.1. Data Collectors (data_collectors.py):
    - [ ] ReversalAnalyzer
    - [ ] TrendAnalyzer
    - [ ] WebSocketMonitor
    - [ ] IndicatorAggregator
    - [ ] RegimeDetector
  - [ ] 4.2.2. Decision Engine (decision_engine.py):
    - [ ] ExitSignalGenerator (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞!)
    - [ ] ExtensionEvaluator
    - [ ] RiskCalculator
    - [ ] PriorityResolver
  - [ ] 4.2.3. Action Executor (action_executor.py):
    - [ ] CloseExecutor
    - [ ] ExtensionExecutor
    - [ ] ProtectionExecutor
  - [ ] 4.2.4. –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å ExitAnalyzer
- [ ] 4.3. –°–æ–∑–¥–∞—Ç—å `position_monitor.py` (200 —Å—Ç—Ä–æ–∫)
  - [ ] –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π
  - [ ] –í—ã–∑–æ–≤ ExitAnalyzer
- [ ] 4.4. –°–æ–∑–¥–∞—Ç—å `exit_decision_logger.py` (150 —Å—Ç—Ä–æ–∫) üî•
  - [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –≤ JSON
  - [ ] –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –≠–¢–ê–ü 5: –†–∞—Å—á–µ—Ç—ã (Calculations) - 6-8 —á–∞—Å–æ–≤
- [ ] 5.1. –°–æ–∑–¥–∞—Ç—å `regime_calculator.py` (300 —Å—Ç—Ä–æ–∫)
  - [ ] –†–∞—Å—á–µ—Ç TP/SL –¥–ª—è —Ä–µ–∂–∏–º–∞
  - [ ] –£—á–µ—Ç per-symbol –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π
  - [ ] –£—á–µ—Ç balance profile boost
- [ ] 5.2. –°–æ–∑–¥–∞—Ç—å `balance_calculator.py` (200 —Å—Ç—Ä–æ–∫)
  - [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –±–∞–ª–∞–Ω—Å–∞
  - [ ] –†–∞—Å—á–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- [ ] 5.3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `margin_calculator.py` (250 —Å—Ç—Ä–æ–∫)
  - [ ] –ò–∑ `src/strategies/modules/` –≤ `calculations/`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
- [ ] 5.4. –°–æ–∑–¥–∞—Ç—å `position_sizer.py` (400 —Å—Ç—Ä–æ–∫)
  - [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `risk_manager.py`
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π
- [ ] 5.5. –°–æ–∑–¥–∞—Ç—å `pnl_calculator.py` (300 —Å—Ç—Ä–æ–∫)
  - [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `position_manager.py`
  - [ ] –†–∞—Å—á–µ—Ç PnL, –∫–æ–º–∏—Å—Å–∏–π, duration

### –≠–¢–ê–ü 6: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (Adaptivity) - 4-5 —á–∞—Å–æ–≤
- [ ] 6.1. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `regime_manager.py` (600 —Å—Ç—Ä–æ–∫)
  - [ ] –ò–∑ `src/strategies/modules/` –≤ `adaptivity/`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
- [ ] 6.2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `balance_manager.py` (450 —Å—Ç—Ä–æ–∫)
  - [ ] –ò–∑ `src/balance/` –≤ `adaptivity/`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
- [ ] 6.3. –°–æ–∑–¥–∞—Ç—å `parameter_adapter.py` (250 —Å—Ç—Ä–æ–∫)
  - [ ] –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
  - [ ] –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è
  - [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª–µ–π

### –≠–¢–ê–ü 7: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Logging) - 3-4 —á–∞—Å–∞
- [ ] 7.1. –°–æ–∑–¥–∞—Ç—å `logger_factory.py` (200 —Å—Ç—Ä–æ–∫)
  - [ ] –§–∞–±—Ä–∏–∫–∞ –ª–æ–≥–≥–µ—Ä–æ–≤
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] 7.2. –°–æ–∑–¥–∞—Ç—å `structured_logger.py` (250 —Å—Ç—Ä–æ–∫)
  - [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] JSON —Ñ–æ—Ä–º–∞—Ç
- [ ] 7.3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `debug_logger.py`
  - [ ] –ò–∑ `src/strategies/modules/` –≤ `logging/`
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã
- [ ] 7.4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ –º–æ–¥—É–ª–∏

### –≠–¢–ê–ü 8: –£–ø—Ä–æ—â–µ–Ω–∏–µ Orchestrator - 3-4 —á–∞—Å–∞
- [ ] 8.1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `orchestrator.py`
  - [ ] –£–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏–∫—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏
  - [ ] –£–¥–∞–ª–∏—Ç—å –ª–æ–≥–∏–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
  - [ ] –£–¥–∞–ª–∏—Ç—å —Ä–∞—Å—á–µ—Ç—ã
  - [ ] –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏ –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª
- [ ] 8.2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å TradingControlCenter
  - [ ] –ü–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ TradingControlCenter
  - [ ] –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –≠–¢–ê–ü 9: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞—Ç–Ω–∏–∫–æ–≤ - 1-2 —á–∞—Å–∞
- [ ] 9.1. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É `scripts_bat/`
- [ ] 9.2. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ –±–∞—Ç–Ω–∏–∫–∏ –≤ `scripts_bat/`
- [ ] 9.3. –û–±–Ω–æ–≤–∏—Ç—å `analyze_logs.bat` (–≤–∫–ª—é—á–∏—Ç—å exit_decisions)
- [ ] 9.4. –û–±–Ω–æ–≤–∏—Ç—å `clean_logs.bat` (–Ω–æ–≤—ã–µ –ø—É—Ç–∏)
- [ ] 9.5. –û–±–Ω–æ–≤–∏—Ç—å `view_logs.bat` (structured logs)
- [ ] 9.6. –°–æ–∑–¥–∞—Ç—å `analyze_exit_decisions.bat`

### –≠–¢–ê–ü 10: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - 4-5 —á–∞—Å–æ–≤
- [ ] 10.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
  - [ ] –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] 10.2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
  - [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
  - [ ] Integration —Ç–µ—Å—Ç—ã
  - [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –±–∞–ª–∞–Ω—Å–µ
- [ ] 10.3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫
  - [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
  - [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏–∫–∏
  - [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–∏—Å—Ç–µ–º—ã –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –≠–¢–ê–ü 11: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - 2-3 —á–∞—Å–∞
- [ ] 11.1. –û–±–Ω–æ–≤–∏—Ç—å README.md
- [ ] 11.2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- [ ] 11.3. –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

**–û–ë–©–ï–ï –í–†–ï–ú–Ø:** 43-55 —á–∞—Å–æ–≤

- –≠–¢–ê–ü 1 (–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞): 1 —á–∞—Å
- –≠–¢–ê–ü 2 (Core): 4-5 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 3 (Signals): 6-8 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 4 (Positions): 8-10 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 5 (Calculations): 6-8 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 6 (Adaptivity): 4-5 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 7 (Logging): 3-4 —á–∞—Å–∞
- –≠–¢–ê–ü 8 (Orchestrator): 3-4 —á–∞—Å–∞
- –≠–¢–ê–ü 9 (–ë–∞—Ç–Ω–∏–∫–∏): 1-2 —á–∞—Å–∞
- –≠–¢–ê–ü 10 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è): 4-5 —á–∞—Å–æ–≤
- –≠–¢–ê–ü 11 (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è): 2-3 —á–∞—Å–∞

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤:

1. ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
2. ‚úÖ Orchestrator —É–ø—Ä–æ—â–µ–Ω –¥–æ ~500 —Å—Ç—Ä–æ–∫
3. ‚úÖ –ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (TradingControlCenter)
4. ‚úÖ –ï–¥–∏–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã (PositionRegistry, DataRegistry)
5. ‚úÖ ExitAnalyzer —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
6. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–∞
7. ‚úÖ –í—Å–µ –±–∞—Ç–Ω–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
8. ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
9. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï: –î–û –∏ –ü–û–°–õ–ï –†–ï–§–ê–ö–¢–û–†–ò–ù–ì–ê

### –î–û —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
orchestrator.py: 3149 —Å—Ç—Ä–æ–∫ ‚ùå (God Object)
position_manager.py: —Å–≤–æ–π active_positions ‚ùå
–ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–Ω—Ç—Ä–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚ùå
–§–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ ‚ùå
–ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏–µ–º ‚ùå
–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–æ–µ ‚ùå
```

### –ü–û–°–õ–ï —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
```
orchestrator.py: ~500 —Å—Ç—Ä–æ–∫ ‚úÖ (—Ç–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è)
position_registry.py: –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã ‚úÖ
TradingControlCenter: –µ–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ
FilterManager: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ ‚úÖ
ExitAnalyzer: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–µ–º ‚úÖ
LoggerFactory: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
```

---

## üöÄ –ü–û–†–Ø–î–û–ö –ù–ê–ß–ê–õ–ê –†–ê–ë–û–¢–´

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (30 –º–∏–Ω—É—Ç)
1. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
2. –°–æ–∑–¥–∞—Ç—å `__init__.py` —Ñ–∞–π–ª—ã
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã (–∫–∞–∫ backup)

### –®–∞–≥ 2: –ù–∞—á–∞—Ç—å —Å —è–¥—Ä–∞ (Core) - 4-5 —á–∞—Å–æ–≤
1. –°–æ–∑–¥–∞—Ç—å `PositionRegistry` - —ç—Ç–æ –æ—Å–Ω–æ–≤–∞
2. –°–æ–∑–¥–∞—Ç—å `DataRegistry` - —ç—Ç–æ –æ—Å–Ω–æ–≤–∞
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —è–¥—Ä–æ

### –®–∞–≥ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ)
1. –û–±–Ω–æ–≤–ª—è—Ç—å –∏–º–ø–æ—Ä—Ç—ã –ø–æ –º–µ—Ä–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –º–æ–¥—É–ª—è
3. –ù–µ –ª–æ–º–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–¥

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ù–ê–ß–ê–õ–£ –†–ê–ë–û–¢–´

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-01-24

---

## üìä –í–ò–ó–£–ê–õ–ò–ó–ê–¶–ò–Ø –ü–û–¢–û–ö–û–í –î–ê–ù–ù–´–•

### –ü–æ—Ç–æ–∫ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞

```
WebSocket Price Update
    ‚Üì
TradingControlCenter.update_market_data()
    ‚Üì
DataRegistry.update_market_data()
    ‚Üì
TradingControlCenter.generate_signal()
    ‚Üì
SignalPipeline.generate_signal()
    ‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–∞–µ—Ç regime –∏–∑ DataRegistry
    ‚îú‚îÄ‚îÄ –ü–æ–ª—É—á–∞–µ—Ç balance_profile –∏–∑ DataRegistry
    ‚îú‚îÄ‚îÄ SignalGenerator.generate_base_signal()
    ‚îú‚îÄ‚îÄ FilterManager.apply_all_filters()
    ‚îî‚îÄ‚îÄ SignalValidator.validate()
    ‚Üì
TradingControlCenter.execute_signal()
    ‚Üì
EntryManager.open_position()
    ‚îú‚îÄ‚îÄ PositionSizer.calculate_position_size()
    ‚îú‚îÄ‚îÄ –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–∞ –±–∏—Ä–∂–µ
    ‚îî‚îÄ‚îÄ PositionRegistry.register_position()
        ‚îî‚îÄ‚îÄ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç position + metadata
```

### –ü–æ—Ç–æ–∫ 2: –ê–Ω–∞–ª–∏–∑ –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏

```
PositionMonitor.periodic_check() (–∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫)
    ‚Üì
TradingControlCenter.analyze_position(symbol)
    ‚Üì
ExitAnalyzer.analyze_position(symbol)
    ‚îú‚îÄ‚îÄ Data Collectors (—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö):
    ‚îÇ   ‚îú‚îÄ‚îÄ ReversalAnalyzer
    ‚îÇ   ‚îú‚îÄ‚îÄ TrendAnalyzer
    ‚îÇ   ‚îú‚îÄ‚îÄ WebSocketMonitor
    ‚îÇ   ‚îú‚îÄ‚îÄ IndicatorAggregator
    ‚îÇ   ‚îî‚îÄ‚îÄ RegimeDetector
    ‚îÇ
    ‚îú‚îÄ‚îÄ Decision Engine (—Ä–µ—à–µ–Ω–∏—è):
    ‚îÇ   ‚îú‚îÄ‚îÄ ExitSignalGenerator (–¥–ª—è —Ä–µ–∂–∏–º–∞!)
    ‚îÇ   ‚îú‚îÄ‚îÄ ExtensionEvaluator
    ‚îÇ   ‚îî‚îÄ‚îÄ PriorityResolver
    ‚îÇ
    ‚îî‚îÄ‚îÄ Action Executor (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ):
        ‚îú‚îÄ‚îÄ CloseExecutor
        ‚îú‚îÄ‚îÄ ExtensionExecutor
        ‚îî‚îÄ‚îÄ ProtectionExecutor
    ‚Üì
ExitDecisionLogger.log_decision() ‚Üí JSON
    ‚Üì
PositionRegistry.unregister_position() (–µ—Å–ª–∏ –∑–∞–∫—Ä—ã–ª–∏)
```

---

## üìù –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï –ú–û–î–£–õ–ï–ô

### üî• CORE (–Ø–¥—Ä–æ - –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–≥–æ):

**PositionRegistry** (~350 —Å—Ç—Ä–æ–∫)
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –ø–æ–∑–∏—Ü–∏–π
- –•—Ä–∞–Ω–∏—Ç position + metadata (entry_time, regime, balance_profile, etc.)
- Thread-safe –æ–ø–µ—Ä–∞—Ü–∏–∏

**DataRegistry** (~300 —Å—Ç—Ä–æ–∫)
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- –•—Ä–∞–Ω–∏—Ç: market_data, indicators, regimes, balance, margin
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö

**TradingControlCenter** (~400 —Å—Ç—Ä–æ–∫)
- –ï–¥–∏–Ω—ã–π —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª

### üî• POSITIONS (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏):

**ExitAnalyzer** (~600 —Å—Ç—Ä–æ–∫) üî• **–ö–õ–Æ–ß–ï–í–û–ô**
- –ê–Ω–∞–ª–∏–∑ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
- Data Collectors + Decision Engine + Action Executor
- –õ–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –¥–ª—è trending/ranging/choppy

**EntryManager** (~300 —Å—Ç—Ä–æ–∫)
- –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π
- –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ PositionRegistry

**ExitDecisionLogger** (~150 —Å—Ç—Ä–æ–∫)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π –≤ JSON
- –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### üî• CALCULATIONS (–†–∞—Å—á–µ—Ç—ã):

**RegimeCalculator** (~300 —Å—Ç—Ä–æ–∫)
- TP/SL –¥–ª—è —Ä–µ–∂–∏–º–∞
- –£—á–µ—Ç per-symbol, balance boost

**PositionSizer** (~400 —Å—Ç—Ä–æ–∫)
- –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤
- –í—Å–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

**PnLCalculator** (~300 —Å—Ç—Ä–æ–∫)
- –†–∞—Å—á–µ—Ç PnL, –∫–æ–º–∏—Å—Å–∏–π, duration
- –£—á–µ—Ç ctVal

### üî• SIGNALS (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞–º–∏):

**FilterManager** (~400 —Å—Ç—Ä–æ–∫)
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

**SignalPipeline** (~250 —Å—Ç—Ä–æ–∫)
- Pipeline –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### üî• ADAPTIVITY (–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã):

**ParameterAdapter** (~250 —Å—Ç—Ä–æ–∫)
- –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è: per-symbol ‚Üí per-regime ‚Üí balance ‚Üí global

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å?** üöÄ

