# –ü–†–û–í–ï–†–ö–ê: EXITANALYZER - –ü–ê–†–ê–ú–ï–¢–†–´ –ò –§–ò–õ–¨–¢–†–´

**–î–∞—Ç–∞:** 2025-12-18  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–†–û–í–ï–†–ö–ê –ó–ê–í–ï–†–®–ï–ù–ê

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ü–ê–†–ê–ú–ï–¢–†–û–í –ò–ó –ö–û–ù–§–ò–ì–ê

### –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç fallback –∑–Ω–∞—á–µ–Ω–∏—è:

1. **`_get_tp_percent()`** ‚úÖ
   - Fallback: `2.4%`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: `try/except` —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

2. **`_get_sl_percent()`** ‚úÖ
   - Fallback: `2.0%`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: `try/except` —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

3. **`_get_max_holding_minutes()`** ‚úÖ
   - Fallback: `120.0` –º–∏–Ω—É—Ç
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: `try/except` —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

4. **`_get_partial_tp_params()`** ‚úÖ
   - Fallback: `{enabled: False, fraction: 0.6, trigger_percent: 0.4}`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: `try/except` —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

5. **`_get_big_profit_exit_percent()`** ‚úÖ
   - Fallback: `1.5%` –¥–ª—è majors, `2.0%` –¥–ª—è alts
   - –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–•

### –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è:

1. **`current_price`** ‚úÖ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if current_price is None:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if current_price <= 0:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

2. **`entry_price`** ‚úÖ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if not entry_price or entry_price == 0:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `_get_entry_price_and_side()` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫

3. **`position` / `metadata`** ‚úÖ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if not position:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if not metadata:` ‚Üí fallback –Ω–∞ `position`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

4. **`market_data`** ‚úÖ
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å `None` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤ –º–µ—Ç–æ–¥–∞—Ö –∞–Ω–∞–ª–∏–∑–∞

5. **`time_in_position`** ‚úÖ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if time_since_open < 0:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `if time_since_open > 86400 * 7:` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `None`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## ‚ö†Ô∏è –ü–†–û–í–ï–†–ö–ê –§–ò–õ–¨–¢–†–û–í –ò –ú–û–î–£–õ–ï–ô

### –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤:

1. **MTF Filter** ‚ö†Ô∏è
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `self.mtf_filter = signal_generator.mtf_filter` –∏–ª–∏ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

2. **ADX (FastADX)** ‚ö†Ô∏è
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `self.fast_adx = orchestrator.fast_adx` –∏–ª–∏ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

3. **Order Flow** ‚ö†Ô∏è
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `self.order_flow = orchestrator.order_flow` –∏–ª–∏ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

4. **CandlePatternDetector** ‚úÖ
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `try/except` —Å fallback –Ω–∞ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

5. **VolumeProfileCalculator** ‚úÖ
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `try/except` —Å fallback –Ω–∞ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

6. **LiquidityLevelsDetector** ‚úÖ
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: `try/except` —Å fallback –Ω–∞ `None`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

---

## üìã –†–ï–ó–£–õ–¨–¢–ê–¢ –ü–†–û–í–ï–†–ö–ò

### ‚úÖ –ß–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û:

1. **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞** ‚úÖ
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ—é—Ç fallback –∑–Ω–∞—á–µ–Ω–∏—è
   - –í—Å–µ –º–µ—Ç–æ–¥—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `try/except`
   - –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö** ‚úÖ
   - `current_price` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ `None` –∏ `<= 0`
   - `entry_price` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ `None` –∏ `== 0`
   - `position` / `metadata` –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ `None`
   - `time_in_position` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚úÖ
   - –í—Å–µ –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `try/except`
   - –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å `exc_info=True`
   - –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (`None`) –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

---

## ‚ö†Ô∏è –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–í–ï–†–ò–¢–¨:

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤** ‚ö†Ô∏è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã `_analyze_trend_strength()`, `_check_reversal()`, `_check_mtf()` –∏ —Ç.–¥.
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤** ‚ö†Ô∏è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `candle_pattern_detector`, `volume_profile_calculator`, `liquidity_levels_detector`
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–Ω–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ `None` –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–æ–¥—ã –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –¥–µ—Ç–µ–∫—Ç–æ—Ä–æ–≤.
