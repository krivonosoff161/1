# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (29.11.2025)

## üìä –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `_update_peak_profit` –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–°—Ç—Ä–æ–∫–∞:** 3608-3654

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç `peak_profit_usd` –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ (–¥–∞–∂–µ –µ—Å–ª–∏ PnL –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É–±—ã—Ç–æ–∫ –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç `peak_profit` –µ—Å–ª–∏ PnL —É–ª—É—á—à–∏–ª—Å—è (–¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö: –±–æ–ª—å—à–µ, –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö: –±–ª–∏–∂–µ –∫ 0)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `peak_profit_usd` —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- Profit Drawdown –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —É–±—ã—Ç–æ—á–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏

---

### 2. ‚úÖ –£–±—Ä–∞–Ω `ph_time_limit` –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–±—ã–ª–µ–π (>= 2x threshold)

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–°—Ç—Ä–æ–∫–∞:** 1554-1595

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –î–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–±—ã–ª–µ–π >= 2x –ø–æ—Ä–æ–≥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è `ph_time_limit`
- ‚úÖ –î–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–±—ã–ª–µ–π >= 1.5x –Ω–æ < 2x –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è `min_holding`, –Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `ph_time_limit`
- ‚úÖ –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∏–±—ã–ª–µ–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∏ `min_holding`, –∏ `ph_time_limit`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–±—ã–ª–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- –û–±—ã—á–Ω—ã–µ –ø—Ä–∏–±—ã–ª–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö `ph_time_limit`

---

### 3. ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω `ph_time_limit` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–°—Ç—Ä–æ–∫–∏:** 226, 284

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ `trending.ph_time_limit`: 180 ‚Üí 600 —Å–µ–∫—É–Ω–¥ (3 ‚Üí 10 –º–∏–Ω—É—Ç)
- ‚úÖ `ranging.ph_time_limit`: 300 ‚Üí 1200 —Å–µ–∫—É–Ω–¥ (5 ‚Üí 20 –º–∏–Ω—É—Ç)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π –ø–æ Profit Harvesting
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ä–µ–¥–Ω–µ–º—É –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π –≤ –∫–∞–∂–¥–æ–º —Ä–µ–∂–∏–º–µ

---

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `_check_profit_drawdown` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ `peak_profit_usd`

**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`  
**–°—Ç—Ä–æ–∫–∏:** 3795-3800, 3872-3898

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `peak_profit_time` –≤–º–µ—Å—Ç–æ `peak_profit_usd <= 0`
- ‚úÖ –î–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–∫–∞—Ç –æ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É–±—ã—Ç–∫–∞
- ‚úÖ –ï—Å–ª–∏ —É–±—ã—Ç–æ–∫ —É–≤–µ–ª–∏—á–∏–ª—Å—è (—Å—Ç–∞–ª –±–æ–ª—å—à–µ –ø–æ –º–æ–¥—É–ª—é), –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- Profit Drawdown —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É–±—ã—Ç–æ—á–Ω—ã–º–∏ –ø–æ–∑–∏—Ü–∏—è–º–∏
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —É–±—ã—Ç–∫–∞

---

### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –¥–ª—è XRP-USDT SHORT

**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`  
**–°—Ç—Ä–æ–∫–∞:** 1701-1718

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ:**
- ‚úÖ –ë–ª–æ–∫–∏—Ä—É–µ—Ç SHORT —Å–∏–≥–Ω–∞–ª—ã –¥–ª—è XRP-USDT –µ—Å–ª–∏ ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—å–Ω—ã–π BULLISH —Ç—Ä–µ–Ω–¥
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `adx_trend == "bullish"` –∏ `adx_value >= adx_threshold`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏–µ XRP-USDT SHORT –ø–æ–∑–∏—Ü–∏–π –ø—Ä–æ—Ç–∏–≤ —Å–∏–ª—å–Ω–æ–≥–æ BULLISH —Ç—Ä–µ–Ω–¥–∞
- –°–Ω–∏–∂–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω–æ—Å—Ç—å XRP-USDT SHORT –ø–æ–∑–∏—Ü–∏–π

---

## ‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

- [x] ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `_update_peak_profit` –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- [x] ‚úÖ –£–±—Ä–∞–Ω `ph_time_limit` –¥–ª—è —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–±—ã–ª–µ–π (>= 2x threshold)
- [x] ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω `ph_time_limit` –≤ –∫–æ–Ω—Ñ–∏–≥–µ –¥–ª—è ranging —Ä–µ–∂–∏–º–∞
- [x] ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `_check_profit_drawdown` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º–∏ `peak_profit_usd`
- [x] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä –¥–ª—è XRP-USDT SHORT (ADX —Ñ–∏–ª—å—Ç—Ä)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è "—É–º–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞" –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π —á–µ—Ä–µ–∑ WebSocket –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º.




