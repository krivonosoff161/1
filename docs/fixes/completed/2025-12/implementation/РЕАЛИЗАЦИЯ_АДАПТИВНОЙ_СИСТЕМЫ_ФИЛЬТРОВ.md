# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤ V2

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `AdaptiveFilterParameters`

**–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/filter_parameters.py`

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ `ConfigManager` (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
- ‚úÖ –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ 3 —Ñ–∞–∫—Ç–æ—Ä–∞–º: —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, win rate
- ‚úÖ –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–º–µ—Å—Ç–æ –º—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–∏–≤–Ω—ã—Ö —Ü–µ–ø–æ—á–µ–∫
- ‚úÖ –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (60 —Å–µ–∫—É–Ω–¥)
- ‚úÖ Min/max –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ú–µ—Ç–æ–¥—ã:**
- `get_reversal_threshold()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ—Ä–æ–≥ V-–æ–±—Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞
- `get_adx_threshold()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π ADX threshold
- `get_correlation_threshold()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π correlation threshold
- `get_min_signal_strength()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π min signal strength
- `get_macd_divisor()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π MACD divisor
- `get_strength_multiplier()` - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π strength multiplier

---

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ SignalGenerator

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `self.adaptive_filter_params` –≤ `__init__`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `set_config_manager()` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ConfigManager
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ `initialize()` –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –≤—ã–∑–æ–≤—ã

**–ó–∞–º–µ–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
1. ‚úÖ `reversal_threshold` (—Å—Ç—Ä–æ–∫–∞ 2920) - —Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ `get_reversal_threshold()`
2. ‚úÖ `adx_threshold` (—Å—Ç—Ä–æ–∫–∞ 1721) - —Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ `get_adx_threshold()`
3. ‚úÖ `correlation_threshold` (—Å—Ç—Ä–æ–∫–∏ 507, 879) - —Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ `get_correlation_threshold()`

---

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Orchestrator

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `set_config_manager()` –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è SignalGenerator
- ‚úÖ ConfigManager –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ SignalGenerator –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### 4. –û–±–Ω–æ–≤–ª–µ–Ω __init__.py

**–§–∞–π–ª:** `src/strategies/scalping/futures/adaptivity/__init__.py`

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `AdaptiveFilterParameters` –≤ —ç–∫—Å–ø–æ—Ä—Ç—ã

---

## üìä –§–æ—Ä–º—É–ª—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

### –í–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ:
```python
final_value = base * (1 + 0.5*regime_factor + 0.3*vol_factor + 0.2*winrate_factor)
```

### –ü—Ä–∏–º–µ—Ä—ã:

**V-–æ–±—Ä–∞–∑–Ω—ã–π —Ä–∞–∑–≤–æ—Ä–æ—Ç:**
- –ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 0.15%
- Trending + High Vol + Low Win Rate:
  - `0.15% * (1 + 0.5*0.2 + 0.3*0.3 + 0.2*0.2) = 0.15% * 1.23 = 0.18%` ‚úÖ

**ADX threshold:**
- –ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 20.0
- Trending + High Vol + High Win Rate:
  - `20.0 * (1 + 0.5*0.15 + 0.3*(-0.2) + 0.2*(-0.15)) = 20.0 * 0.985 = 19.7` ‚úÖ

---

## üîÑ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —á—Ç–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

1. **per-symbol per-regime** (symbol_profiles[symbol][regime])
2. **per-regime** (adaptive_regime[regime])
3. **global** (scalping_config)
4. **fallback** (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)

---

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ ConfigManager
2. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–µ–Ω—è—é—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏, win rate
3. **–ü—Ä–æ—Å—Ç–æ—Ç–∞** - –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ (–ª–∏–Ω–µ–π–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å)
4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - min/max –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
6. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** - fallback –Ω–∞ —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É

---

## üöÄ –°—Ç–∞—Ç—É—Å

‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:**
- –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ä—ã–Ω–∫–µ
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ª–æ–≥–∞—Ö
3. **–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞** - –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ—Å–∞ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ** - –¥–æ–±–∞–≤–∏—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏—é –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (MACD divisor, strength multiplier –∏ —Ç.–¥.)

---

**–î–∞—Ç–∞:** 2025-12-23  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞





