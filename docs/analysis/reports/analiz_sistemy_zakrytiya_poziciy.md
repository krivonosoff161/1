# üìä –ê–ù–ê–õ–ò–ó –°–ò–°–¢–ï–ú–´ –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ô

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞:** 2025-11-28  
**–í–µ—Ä—Å–∏—è –±–æ—Ç–∞:** Futures Scalping Bot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–°–ò–°–¢–ï–ú–ê –ò–°–ü–û–õ–¨–ó–£–ï–¢ –í–°–ï –†–ï–°–£–†–°–´ –ë–û–¢–ê**

---

## üéØ –û–ì–õ–ê–í–õ–ï–ù–ò–ï

1. [–ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π](#1-–º–µ—Ö–∞–Ω–∏–∑–º—ã-–∑–∞–∫—Ä—ã—Ç–∏—è-–ø–æ–∑–∏—Ü–∏–π)
2. [–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç–∏—è](#2-–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã-–∑–∞–∫—Ä—ã—Ç–∏—è)
3. [Timeout –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#3-timeout-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
4. [–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã](#4-–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
5. [–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ –±–æ—Ç–∞](#5-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ-–≤—Å–µ—Ö-—Ä–µ—Å—É—Ä—Å–æ–≤-–±–æ—Ç–∞)
6. [–í—ã–≤–æ–¥—ã](#6-–≤—ã–≤–æ–¥—ã)

---

## 1. –ú–ï–•–ê–ù–ò–ó–ú–´ –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ô

### 1.1. ‚úÖ Profit Harvesting (PH) - –ü–†–ò–û–†–ò–¢–ï–¢ #1

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏ –∑–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∂–∏–º–∞–º:**
- **TRENDING:** $0.20 –∑–∞ 180 —Å–µ–∫ (3 –º–∏–Ω)
- **RANGING:** $0.15 –∑–∞ 120 —Å–µ–∫ (2 –º–∏–Ω)
- **CHOPPY:** $0.10 –∑–∞ 60 —Å–µ–∫ (1 –º–∏–Ω)

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–ï–†–ï–î** TP/SL
- –î–æ—Å—Ä–æ—á–Ω—ã–π –≤—ã—Ö–æ–¥ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –ø—Ä–∏–±—ã–ª–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**–ö–æ–¥:** `position_manager.py:_check_profit_harvesting()`

---

### 1.2. ‚úÖ Take Profit (TP) - –ü–†–ò–û–†–ò–¢–ï–¢ #2

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–µ–≤–æ–π –ø—Ä–∏–±—ã–ª–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **MIN_HOLDING:** 35 –º–∏–Ω—É—Ç –¥–ª—è ranging (–∑–∞—â–∏—Ç–∞ –æ—Ç —à—É–º–∞)
- **TP%:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR –∏ —Ä–µ–∂–∏–º–∞
- **Big Profit Exit:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –¥–ª—è –±–æ–ª—å—à–µ–π –ø—Ä–∏–±—ã–ª–∏

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–û–°–õ–ï** MIN_HOLDING
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR
- –†–∞–∑–Ω—ã–µ TP –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

**–ö–æ–¥:** `position_manager.py:_check_tp_only()`

---

### 1.3. ‚úÖ Stop Loss (SL) - –ü–†–ò–û–†–ò–¢–ï–¢ #3

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ —É–±—ã—Ç–∫–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **MIN_HOLDING:** 0.5 –º–∏–Ω—É—Ç—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è)
- **SL%:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∂–∏–º–∞
- **PnL% –æ—Ç –º–∞—Ä–∂–∏:** –¢–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–û–°–õ–ï** MIN_HOLDING
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π SL –ø–æ —Ä–µ–∂–∏–º—É
- –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π —Å—Ç–æ–ø —á–µ–º loss_cut

**–ö–æ–¥:** `position_manager.py:_check_sl()`

---

### 1.4. ‚úÖ Loss Cut - –ü–†–ò–û–†–ò–¢–ï–¢ #4

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **Loss Cut%:** 4.0% –¥–ª—è ranging
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞:** 5 —Å–µ–∫—É–Ω–¥ (–∑–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π)
- **Timeout Loss:** 2.0% (–∑–∞–∫—Ä—ã—Ç–∏–µ —É–±—ã—Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –ø–æ timeout)

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ TSL
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ 5 —Å–µ–∫—É–Ω–¥

**–ö–æ–¥:** `position_manager.py:_check_tp_only()` (—Å—Ç—Ä–æ–∫–∏ 1492-1615)

---

### 1.5. ‚úÖ Timeout - –ü–†–ò–û–†–ò–¢–ï–¢ #5

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∂–∏–º–∞–º:**
- **TRENDING:** 7 –º–∏–Ω—É—Ç
- **RANGING:** 120 –º–∏–Ω—É—Ç (2 —á–∞—Å–∞)
- **CHOPPY:** 3 –º–∏–Ω—É—Ç—ã

**–õ–æ–≥–∏–∫–∞:**
- **–ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–ï–†–ï–î** –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø—Ä–∏–±—ã–ª–∏/—É–±—ã—Ç–∫–∞

**–ö–æ–¥:** `orchestrator.py` (—Å—Ç—Ä–æ–∫–∏ 3267-3281)

---

### 1.6. ‚úÖ Emergency Close - –ü–†–ò–û–†–ò–¢–ï–¢ #6

**–û–ø–∏—Å–∞–Ω–∏–µ:** –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **Margin Ratio:** < 0.5 (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π:** –ü—Ä–æ–≤–µ—Ä–∫–∞ PnL –∏ –≤—Ä–µ–º–µ–Ω–∏

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

**–ö–æ–¥:** `position_manager.py:_check_position_safety()`

---

### 1.7. ‚úÖ Trailing Stop Loss (TSL) - –ü–†–ò–û–†–ò–¢–ï–¢ #7

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ø-–ª–æ—Å—Å, –∑–∞—â–∏—â–∞—é—â–∏–π –ø—Ä–∏–±—ã–ª—å.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **Initial Trail:** 2.0% –¥–ª—è ranging
- **Max Trail:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π
- **Min Trail:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π
- **Aggressive Tightening:** –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏

**–õ–æ–≥–∏–∫–∞:**
- –ü–æ–¥—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–¥ –¥–≤–∏–∂–µ–Ω–∏–µ —Ü–µ–Ω—ã
- –ó–∞—â–∏—â–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å –ø—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞—Ö
- –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∑–∞—Ç—è–≥–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏

**–ö–æ–¥:** `trailing_stop_loss.py:update()`

---

### 1.8. ‚úÖ ExitAnalyzer - –ü–†–ò–û–†–ò–¢–ï–¢ #8

**–û–ø–∏—Å–∞–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–µ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
- **ADX:** –ê–Ω–∞–ª–∏–∑ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
- **Order Flow:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
- **MTF:** –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö
- **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã:** RSI, MACD, BB, MA

**–õ–æ–≥–∏–∫–∞ –ø–æ —Ä–µ–∂–∏–º–∞–º:**

#### TRENDING:
- –ü—Ä–æ–¥–ª–µ–≤–∞–µ—Ç TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–µ
- Partial TP —Å adaptive_min_holding

#### RANGING:
- –ë–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ TP
- –ú–µ–Ω—å—à–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–π

#### CHOPPY:
- –ë—ã—Å—Ç—Ä—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- –ú–µ–Ω—å—à–∏–µ TP
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Ñ–ª—ç—Ç–æ–≤

**–ö–æ–¥:** `exit_analyzer.py:_generate_exit_for_*()`

---

## 2. –ü–†–ò–û–†–ò–¢–ï–¢–´ –ó–ê–ö–†–´–¢–ò–Ø

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–≤–µ—Ä—Ö—É –≤–Ω–∏–∑):

1. **Profit Harvesting (PH)** - –±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏
2. **Take Profit (TP)** - –ø–æ—Å–ª–µ MIN_HOLDING
3. **Stop Loss (SL)** - –ø–æ—Å–ª–µ MIN_HOLDING
4. **Loss Cut** - –ø—Ä–∏ –±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ
5. **Timeout** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
6. **Emergency Close** - –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio
7. **Trailing Stop Loss (TSL)** - –∑–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
8. **ExitAnalyzer** - –∞–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

---

## 3. TIMEOUT –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

### 3.1. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**RANGING —Ä–µ–∂–∏–º:**
- **timeout_minutes:** 120 –º–∏–Ω—É—Ç (2 —á–∞—Å–∞)
- **min_holding:** 35 –º–∏–Ω—É—Ç
- **loss_cut:** 4.0%
- **timeout_loss:** 2.0%

**TRENDING —Ä–µ–∂–∏–º:**
- **timeout_minutes:** 7 –º–∏–Ω—É—Ç
- **min_holding:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π
- **loss_cut:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π

**CHOPPY —Ä–µ–∂–∏–º:**
- **timeout_minutes:** 3 –º–∏–Ω—É—Ç—ã
- **min_holding:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π
- **loss_cut:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π

### 3.2. –õ–æ–≥–∏–∫–∞ Timeout

```python
# orchestrator.py (—Å—Ç—Ä–æ–∫–∏ 3267-3281)
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: TIMEOUT - –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏
# –ü–æ–ª—É—á–∞–µ–º timeout_minutes –∏–∑ TSL (–∂–µ—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏) –ü–ï–†–ï–î –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
timeout_minutes = None
tsl = self.trailing_sl_coordinator.get_tsl(symbol)
if tsl and hasattr(tsl, "timeout_minutes"):
    timeout_minutes = tsl.timeout_minutes

# ‚úÖ –ü–ï–†–í–ê–Ø –ü–†–û–í–ï–†–ö–ê: TIMEOUT - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
if timeout_minutes is not None and time_held >= timeout_minutes:
    logger.info(
        f"‚è∞ TIMEOUT –¥–ª—è {symbol}: {time_held:.1f} –º–∏–Ω—É—Ç >= {timeout_minutes:.1f} –º–∏–Ω—É—Ç, "
        f"–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º (–ø—Ä–∏–±—ã–ª—å: {profit_pct:.2%})"
    )
    await self._close_position(symbol, "timeout")
    return
```

**–í—ã–≤–æ–¥:** ‚úÖ Timeout —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ª–∏–º–∏—Ç –≤—Ä–µ–º–µ–Ω–∏** –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è **–ü–ï–†–ï–î** –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏!

---

## 4. –ê–î–ê–ü–¢–ò–í–ù–´–ï –ü–ê–†–ê–ú–ï–¢–†–´

### 4.1. Adaptive MIN_HOLDING

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π min_holding –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–±—ã–ª–∏.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **profit_threshold_1:** 1.0% ‚Üí —Å–Ω–∏–∂–∞–µ–º min_holding –¥–æ 50%
- **profit_threshold_2:** 0.5% ‚Üí —Å–Ω–∏–∂–∞–µ–º min_holding –¥–æ 75%

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏ —Å–Ω–∏–∂–∞–µ—Ç—Å—è min_holding
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è —É–±—ã—Ç–æ—á–Ω—ã—Ö

**–ö–æ–¥:** `exit_analyzer.py:_check_adaptive_min_holding_for_partial_tp()`

---

### 4.2. Adaptive TP/SL

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ TP/SL –Ω–∞ –æ—Å–Ω–æ–≤–µ ATR –∏ —Ä–µ–∂–∏–º–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- **TP ATR Multiplier:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É
- **SL ATR Multiplier:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É
- **TP%:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Å–∏–º–≤–æ–ª—É –∏ —Ä–µ–∂–∏–º—É

**–õ–æ–≥–∏–∫–∞:**
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (ATR)
- –†–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Å–∏–º–≤–æ–ª

**–ö–æ–¥:** `position_manager.py:_get_adaptive_tp_percent()`

---

## 5. –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –í–°–ï–• –†–ï–°–£–†–°–û–í –ë–û–¢–ê

### 5.1. ‚úÖ ADX (Average Directional Index)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏–∑ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞ –≤ ExitAnalyzer
- –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ø—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞

**–ö–æ–¥:** `exit_analyzer.py:_analyze_trend_strength()`

---

### 5.2. ‚úÖ Order Flow

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ø–æ—Ç–æ–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ö–æ–¥:** `exit_analyzer.py:_check_reversal_signals()`

---

### 5.3. ‚úÖ MTF (Multi-Timeframe)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –Ω–∞ —Å—Ç–∞—Ä—à–∏—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞—Ö
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
- –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä—ã–Ω–∫–∞

**–ö–æ–¥:** `exit_analyzer.py:_check_reversal_signals()`

---

### 5.4. ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (RSI, MACD, BB, MA)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç–∏/–ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–ª—ã —Å–∏–≥–Ω–∞–ª–∞

**–ö–æ–¥:** `exit_analyzer.py` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ signal_generator)

---

### 5.5. ‚úÖ Margin Calculator

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –†–∞—Å—á–µ—Ç margin_ratio
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏
- Emergency Close –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É—Ä–æ–≤–Ω–µ

**–ö–æ–¥:** `position_manager.py:_check_position_safety()`

---

### 5.6. ‚úÖ Data Registry

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–Ω
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏

**–ö–æ–¥:** `exit_analyzer.py:analyze_position()`

---

## 6. –í–´–í–û–î–´

### 6.1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –í–°–ï —Ä–µ—Å—É—Ä—Å—ã –±–æ—Ç–∞

1. **ADX** - –∞–Ω–∞–ª–∏–∑ —Å–∏–ª—ã —Ç—Ä–µ–Ω–¥–∞
2. **Order Flow** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–æ–≤
3. **MTF** - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞
4. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** - RSI, MACD, BB, MA
5. **Margin Calculator** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
6. **Data Registry** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
7. **ExitAnalyzer** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 6.2. ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –ù–ï –±—É–¥—É—Ç –≤–∏—Å–µ—Ç—å –±–æ–ª—å—à–µ —á–∞—Å–∞

**–ú–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞—â–∏—Ç—ã:**

1. **Timeout –¥–ª—è RANGING:** 120 –º–∏–Ω—É—Ç (2 —á–∞—Å–∞) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
2. **Timeout –¥–ª—è TRENDING:** 7 –º–∏–Ω—É—Ç - –±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
3. **Timeout –¥–ª—è CHOPPY:** 3 –º–∏–Ω—É—Ç—ã - –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
4. **Profit Harvesting:** –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –ø—Ä–∏–±—ã–ª–∏ (1-3 –º–∏–Ω—É—Ç—ã)
5. **Loss Cut:** –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ (–ø–æ—Å–ª–µ 5 —Å–µ–∫—É–Ω–¥)
6. **Emergency Close:** –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio

### 6.3. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- **Adaptive MIN_HOLDING:** –°–Ω–∏–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏
- **Adaptive TP/SL:** –ù–∞ –æ—Å–Ω–æ–≤–µ ATR –∏ —Ä–µ–∂–∏–º–∞
- **Adaptive Timeout:** –†–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

### 6.4. ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∑–∞–∫—Ä—ã—Ç–∏—è

1. **Profit Harvesting** - –±—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –ø—Ä–∏–±—ã–ª–∏
2. **Take Profit** - –ø–æ—Å–ª–µ MIN_HOLDING
3. **Stop Loss** - –ø–æ—Å–ª–µ MIN_HOLDING
4. **Loss Cut** - –ø—Ä–∏ –±–æ–ª—å—à–æ–º —É–±—ã—Ç–∫–µ
5. **Timeout** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
6. **Emergency Close** - –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio
7. **Trailing Stop Loss** - –∑–∞—â–∏—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
8. **ExitAnalyzer** - –∞–Ω–∞–ª–∏–∑ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

### 6.5. ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–°–∏—Å—Ç–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–í–°–ï —Ä–µ—Å—É—Ä—Å—ã –±–æ—Ç–∞** (ADX, Order Flow, MTF, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)
- ‚úÖ –ò–º–µ–µ—Ç **–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –∑–∞–∫—Ä—ã—Ç–∏—è** (8 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤)
- ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** –ø–æ–¥ —Ä–µ–∂–∏–º –∏ –ø—Ä–∏–±—ã–ª—å
- ‚úÖ **Timeout –∑–∞—â–∏—Ç–∞** - –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –≤–∏—Å—è—Ç –±–æ–ª—å—à–µ 2 —á–∞—Å–æ–≤ (ranging)
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ** –ø—Ä–∏ –ø—Ä–∏–±—ã–ª–∏ (Profit Harvesting)
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ** –ø—Ä–∏ —É–±—ã—Ç–∫–µ (Loss Cut, SL)
- ‚úÖ **–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º margin_ratio

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-28  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–°–ò–°–¢–ï–ú–ê –ó–ê–ö–†–´–¢–ò–Ø –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û**


