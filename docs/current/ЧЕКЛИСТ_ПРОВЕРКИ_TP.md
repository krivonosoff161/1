# –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ TP –ø–æ—Å–ª–µ —Ä—É—á–Ω–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:

### 1. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ `_check_tp_only`?**
–ò—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:
- `"TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç"`
- `"Take Profit"`
- `"_check_tp_only"`
- `"manage_position"`

**–ï—Å–ª–∏ –ù–ï–¢** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ TP –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è

---

### 2. **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å—á–µ—Ç PnL?**
–ò—Å–∫–∞—Ç—å:
- `"PnL = X.XX USDT"`
- `"pnl_percent"`
- `"profit_pct"`

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ª–∏ PnL –ø—Ä–∞–≤–∏–ª—å–Ω–æ?
- –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `pnl_percent` (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 0.89 –¥–ª—è ETH, 0.47 –¥–ª—è BTC)?

---

### 3. **–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç TrailingSL?**
–ò—Å–∫–∞—Ç—å:
- `"TrailingSL ETH"`
- `"TrailingSL BTC"`
- `"profit=0.XX%"` (net –∏ gross)

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ö–∞–∫–æ–π `profit_pct` –ø–æ–∫–∞–∑—ã–≤–∞–ª TrailingSL?
- –ë—ã–ª –ª–∏ trailing stop –≤—ã—à–µ –∏–ª–∏ –Ω–∏–∂–µ —Ç–µ–∫—É—â–µ–π —Ü–µ–Ω—ã?

---

### 4. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ª–∏ `_manage_positions`?**
–ò—Å–∫–∞—Ç—å:
- `"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏"`
- `"_manage_positions"`

**–ï—Å–ª–∏ –ù–ï–¢** ‚Üí –ü—Ä–æ–≤–µ—Ä–∫–∞ TP –≤–æ–æ–±—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è!

---

### 5. **–ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏?**
–ò—Å–∫–∞—Ç—å:
- `"ERROR"`
- `"Exception"`
- `"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ TP"`

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:

### **ETH:**
- Entry: 3,885.95
- Current: 3,897.62
- PnL%: (3897.62 - 3885.95) / 3885.95 * 100 = **0.30%** (–æ—Ç entry)
- –ù–û –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç +0.89% - –≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ—Ç –º–∞—Ä–∂–∏?

**–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –ö–∞–∫ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è PnL% –≤ `_check_tp_only`?
- –û—Ç entry –∏–ª–∏ –æ—Ç –º–∞—Ä–∂–∏?

### **BTC:**
- Entry: 110,945.9
- Current: 111,123.1
- PnL%: (111123.1 - 110945.9) / 110945.9 * 100 = **0.16%** (–æ—Ç entry)
- –ù–û –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç +0.47% - –≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –æ—Ç –º–∞—Ä–∂–∏?

---

## üéØ –ì–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å:

**–ü–æ—á–µ–º—É PnL% –≤ —Å–∫—Ä–∏–Ω—à–æ—Ç–µ (0.89% –∏ 0.47%) –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ä–∞—Å—á–µ—Ç–æ–º –æ—Ç entry (0.30% –∏ 0.16%)?**

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. PnL% —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç **–º–∞—Ä–∂–∏**, –∞ –Ω–µ –æ—Ç entry
2. –í `_check_tp_only` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥—Ä—É–≥–∞—è —Ñ–æ—Ä–º—É–ª–∞
3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ —Ç–∞ —Ü–µ–Ω–∞ (markPx vs current_price)

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –í–û–ü–†–û–°:

**–ï—Å–ª–∏ PnL% —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏:**
- ETH: Margin = 120.46, PnL = 1.08
- PnL% = 1.08 / 120.46 * 100 = **0.90%** ‚úÖ (—Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–º!)

**–ï—Å–ª–∏ tp_percent = 0.4% —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å PnL% –æ—Ç entry:**
- ETH: 0.30% < 0.4% ‚ùå (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç!)
- BTC: 0.16% < 0.4% ‚ùå (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç!)

**–í–û–¢ –í –ß–ï–ú –ü–†–û–ë–õ–ï–ú–ê!**

