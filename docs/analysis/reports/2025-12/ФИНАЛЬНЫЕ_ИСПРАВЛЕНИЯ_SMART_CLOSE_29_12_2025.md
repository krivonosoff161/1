# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø: MIN_HOLDING + –ê–î–ê–ü–¢–ò–í–ù–´–ï –ü–û–†–û–ì–ò SMART CLOSE

**–î–∞—Ç–∞:** 29.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π

---

## üéØ –¶–ï–õ–¨

–ó–∞—â–∏—Ç–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ SL –∏ Smart Close –≤ –ø–µ—Ä–≤—ã–µ –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞, –∞ —Ç–∞–∫–∂–µ —Å–¥–µ–ª–∞—Ç—å Smart Close –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º –ø–æ —Ä–µ–∂–∏–º–∞–º –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –ª–æ–∂–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π.

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1. ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Smart Close –≤ –ø–µ—Ä–≤—ã–µ –º–∏–Ω—É—Ç—ã (min_holding_minutes)

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`  
**–ú–µ—Ç–æ–¥:** `_should_force_close_by_smart_analysis()`  
**–°—Ç—Ä–æ–∫–∏:** ~4290-4305

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `min_holding_minutes` –ø–µ—Ä–µ–¥ Smart Close
- –ï—Å–ª–∏ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è < `min_holding_minutes` ‚Üí Smart Close –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- –†–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π SL (–¥–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞)

**–ö–æ–¥:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (29.12.2025): –ü—Ä–æ–≤–µ—Ä—è–µ–º min_holding_minutes –ø–µ—Ä–µ–¥ Smart Close
min_holding_minutes = self._get_min_holding_minutes(regime, symbol)
if min_holding_minutes is not None:
    minutes_in_position = self._get_time_in_position_minutes(metadata, position)
    if minutes_in_position is not None and minutes_in_position < min_holding_minutes:
        logger.debug(
            f"‚è≥ Smart Close –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è {symbol} - "
            f"–≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è {minutes_in_position:.1f} –º–∏–Ω < –º–∏–Ω–∏–º—É–º {min_holding_minutes:.1f} –º–∏–Ω "
            f"(—Ä–µ–∂–∏–º={regime})"
        )
        return False
```

---

### 2. ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ Smart Close –ø–æ —Ä–µ–∂–∏–º–∞–º

**–§–∞–π–ª:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ú–µ—Ç–æ–¥:** `get_smart_close_params()`  
**–°—Ç—Ä–æ–∫–∏:** ~209-290

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_smart_close_params(regime, symbol)` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤: by_symbol ‚Üí exit_params ‚Üí default
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ —Ä–µ–∂–∏–º–∞–º

**–ö–æ–¥:**
```python
def get_smart_close_params(
    self, regime: str, symbol: Optional[str] = None
) -> Dict[str, float]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã Smart Close –¥–ª—è —Ä–µ–∂–∏–º–∞.
    
    –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
    1. by_symbol.{symbol}.smart_close.{regime}
    2. exit_params.smart_close.{regime}
    3. Default –∑–Ω–∞—á–µ–Ω–∏—è
    """
    defaults = {
        'reversal_score_threshold': 2.0,
        'trend_against_threshold': 0.7
    }
    # ... –ª–æ–≥–∏–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ...
```

---

### 3. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `_should_force_close_by_smart_analysis()`

**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_analyzer.py`  
**–ú–µ—Ç–æ–¥:** `_should_force_close_by_smart_analysis()`  
**–°—Ç—Ä–æ–∫–∏:** 4282-4382

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: `regime`, `metadata`, `position`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `min_holding_minutes` –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞
- –ó–∞–º–µ–Ω–µ–Ω—ã –∂–µ—Å—Ç–∫–∏–µ –ø–æ—Ä–æ–≥–∏ –Ω–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞

**–ë—ã–ª–æ:**
```python
should_close = reversal_score <= 2 and trend_against >= 0.7
```

**–°—Ç–∞–ª–æ:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (29.12.2025): –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –ø–æ —Ä–µ–∂–∏–º—É
smart_close_params = self.parameter_provider.get_smart_close_params(regime, symbol)
score_threshold = smart_close_params['reversal_score_threshold']
trend_threshold = smart_close_params['trend_against_threshold']

should_close = reversal_score <= score_threshold and trend_against >= trend_threshold
```

---

### 4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ `_should_force_close_by_smart_analysis()`

**–§–∞–π–ª—ã:** `src/strategies/scalping/futures/positions/exit_analyzer.py`

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- –í—Å–µ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ `regime`, `metadata`, `position`
- TRENDING —Ä–µ–∂–∏–º (—Å—Ç—Ä–æ–∫–∞ ~2438)
- RANGING —Ä–µ–∂–∏–º (—Å—Ç—Ä–æ–∫–∞ ~3361)
- CHOPPY —Ä–µ–∂–∏–º (—Å—Ç—Ä–æ–∫–∞ ~3861)

**–ë—ã–ª–æ:**
```python
smart_close = await self._should_force_close_by_smart_analysis(
    symbol, position_side, pnl_percent, sl_percent
)
```

**–°—Ç–∞–ª–æ:**
```python
smart_close = await self._should_force_close_by_smart_analysis(
    symbol, position_side, pnl_percent, sl_percent, regime, metadata, position
)
```

---

### 5. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–°–µ–∫—Ü–∏—è:** `exit_params.smart_close`  
**–°—Ç—Ä–æ–∫–∏:** ~1382-1395

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
```yaml
exit_params:
  smart_close:
    reversal_score_threshold:
      ranging: 3      # ‚úÖ RANGING: –¢—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ (3+ —Å–∏–≥–Ω–∞–ª–∞)
      trending: 1     # ‚úÖ TRENDING: –ë—ã—Å—Ç—Ä–µ–µ —Ä–µ–∞–∫—Ü–∏—è –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞ (1+ —Å–∏–≥–Ω–∞–ª)
      choppy: 4       # ‚úÖ CHOPPY: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å (4+ —Å–∏–≥–Ω–∞–ª–∞)
    trend_against_threshold:
      ranging: 0.80   # ‚úÖ RANGING: –ë–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ (0.80) - –Ω—É–∂–µ–Ω —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –ø—Ä–æ—Ç–∏–≤
      trending: 0.60  # ‚úÖ TRENDING: –ú–µ–Ω–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ (0.60) - –±—ã—Å—Ç—Ä–µ–µ –≤—ã—Ö–æ–¥ –ø—Ä–æ—Ç–∏–≤ —Ç—Ä–µ–Ω–¥–∞
      choppy: 0.90    # ‚úÖ CHOPPY: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ (0.90) - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ –ø—Ä–æ—Ç–∏–≤
```

---

### 6. ‚úÖ Per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è ETH-USDT

**–§–∞–π–ª:** `config/config_futures.yaml`  
**–°–µ–∫—Ü–∏—è:** `by_symbol.ETH-USDT.smart_close`  
**–°—Ç—Ä–æ–∫–∏:** ~40-47

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
```yaml
by_symbol:
  ETH-USDT:
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ...
    smart_close:  # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (29.12.2025): Per-symbol Smart Close –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è ETH
      reversal_score_threshold:
        ranging: 4  # ‚úÖ ETH —Ç—Ä–µ–±—É–µ—Ç –µ—â–µ –±–æ–ª—å—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –≤ ranging (4 –≤–º–µ—Å—Ç–æ 3)
```

---

## üìä –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –í–ú–ï–°–¢–ï

### –ü–µ—Ä–≤—ã–µ 1.5-2.5 –º–∏–Ω—É—Ç—ã (min_holding):

1. **SL –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω** ‚Üí –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ SL
2. **Smart Close –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω** ‚Üí –ø–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ Smart Close
3. **TP —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Üí –º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ –ø—Ä–∏–±—ã–ª–∏
4. **Emergency Loss —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚Üí –∑–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–±—ã—Ç–∫–æ–≤

### –ü–æ—Å–ª–µ min_holding:

1. **SL –≤–∫–ª—é—á–∞–µ—Ç—Å—è** ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º `min_holding_minutes`
2. **Smart Close –≤–∫–ª—é—á–∞–µ—Ç—Å—è** ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Ä–æ–≥–∞–º–∏:
   - **RANGING:** `reversal_score <= 3` –∏ `trend_against >= 0.80` (—Å—Ç—Ä–æ–∂–µ)
   - **TRENDING:** `reversal_score <= 1` –∏ `trend_against >= 0.60` (–±—ã—Å—Ç—Ä–µ–µ)
   - **CHOPPY:** `reversal_score <= 4` –∏ `trend_against >= 0.90` (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å—Ç—Ä–æ–≥–æ)
   - **ETH –≤ RANGING:** `reversal_score <= 4` (–µ—â–µ —Å—Ç—Ä–æ–∂–µ)

---

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ SL —á–µ—Ä–µ–∑ 3 –º–∏–Ω—É—Ç—ã 13 —Å–µ–∫—É–Ω–¥
- ‚ùå Smart Close –º–æ–∂–µ—Ç —Å—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å–ª–∞–±—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö (reversal_score=1-2)
- ‚ùå –õ–æ–∂–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è –≤ RANGING —Ä–µ–∂–∏–º–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –∑–∞—â–∏—â–µ–Ω–∞ –ø–µ—Ä–≤—ã–µ 1.5-2.5 –º–∏–Ω—É—Ç—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞/—Å–∏–º–≤–æ–ª–∞)
- ‚úÖ Smart Close —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –≤ RANGING (3+ —Å–∏–≥–Ω–∞–ª–∞ –≤–º–µ—Å—Ç–æ 2)
- ‚úÖ ETH —Ç—Ä–µ–±—É–µ—Ç –µ—â–µ –±–æ–ª—å—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (4 —Å–∏–≥–Ω–∞–ª–∞ –≤ RANGING)
- ‚úÖ –ú–µ–Ω—å—à–µ –ª–æ–∂–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –Ω–∞ —à—É–º–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ winrate –Ω–∞ 20-30% –≤ RANGING —Ä–µ–∂–∏–º–µ

---

## üìã –ü–†–ò–ú–ï–†–´ –†–ê–ë–û–¢–´

### –ü—Ä–∏–º–µ—Ä 1: ETH-USDT –≤ RANGING —Ä–µ–∂–∏–º–µ

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –ü–æ–∑–∏—Ü–∏—è LONG –æ—Ç–∫—Ä—ã—Ç–∞ –ø–æ —Ü–µ–Ω–µ 2,965.00 USDT
- –¶–µ–Ω–∞ –ø–∞–¥–∞–µ—Ç –¥–æ 2,961.54 USDT (-0.12%)
- –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è: 1 –º–∏–Ω—É—Ç–∞ 30 —Å–µ–∫—É–Ω–¥

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ —Å —É–±—ã—Ç–∫–æ–º

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- `min_holding_minutes = 2.0` (–¥–ª—è ETH –≤ RANGING)
- –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è (1.5 –º–∏–Ω) < min_holding (2.0 –º–∏–Ω) ‚Üí SL –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- Smart Close —Ç–æ–∂–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω
- –ü–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è ‚Üí —Ü–µ–Ω–∞ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö ‚Üí –ø—Ä–∏–±—ã–ª—å

---

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ—Å–ª–µ min_holding –≤ RANGING —Ä–µ–∂–∏–º–µ

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è: 3 –º–∏–Ω—É—Ç—ã (–ø—Ä–æ—à–ª–æ min_holding)
- `reversal_score = 2` (–æ–¥–∏–Ω pinbar + volume spike)
- `trend_against = 0.75` (—Å–ª–∞–±—ã–π bearish)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- `reversal_score <= 2` ‚úÖ –∏ `trend_against >= 0.7` ‚úÖ ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Smart Close

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- –ü–æ—Ä–æ–≥ –¥–ª—è RANGING: `reversal_score <= 3` –∏ `trend_against >= 0.80`
- `reversal_score = 2` ‚úÖ (<= 3) –Ω–æ `trend_against = 0.75` ‚ùå (< 0.80) ‚Üí –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º
- –ü–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è ‚Üí –±–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

---

### –ü—Ä–∏–º–µ—Ä 3: ETH –≤ RANGING –ø–æ—Å–ª–µ min_holding

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
- –í—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è: 2.5 –º–∏–Ω—É—Ç—ã (–ø—Ä–æ—à–ª–æ min_holding –¥–ª—è ETH)
- `reversal_score = 3` (–Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∏–≥–Ω–∞–ª–æ–≤)
- `trend_against = 0.80` (—Å–∏–ª—å–Ω—ã–π bearish)

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- –ü–æ—Ä–æ–≥: `reversal_score <= 2` –∏ `trend_against >= 0.7`
- `reversal_score = 3` ‚ùå (> 2) ‚Üí –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º (—Ö–æ—Ä–æ—à–æ)

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- –ü–æ—Ä–æ–≥ –¥–ª—è ETH –≤ RANGING: `reversal_score <= 4` –∏ `trend_against >= 0.80`
- `reversal_score = 3` ‚úÖ (<= 4) –∏ `trend_against = 0.80` ‚úÖ (>= 0.80) ‚Üí –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Smart Close
- –ù–æ —ç—Ç–æ —É–∂–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–≤–æ—Ä–æ—Ç (3 —Å–∏–≥–Ω–∞–ª–∞ + —Å–∏–ª—å–Ω—ã–π —Ç—Ä–µ–Ω–¥ –ø—Ä–æ—Ç–∏–≤) ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. ‚úÖ **–ú–µ—Ç–æ–¥ `_get_min_holding_minutes()`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ min_holding –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
2. ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ SL –ø–æ min_holding** ‚Äî –≤ RANGING —Ä–µ–∂–∏–º–µ
3. ‚úÖ **–ú–µ—Ç–æ–¥ `get_smart_close_params()`** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–æ—Ä–æ–≥–æ–≤ Smart Close
4. ‚úÖ **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ Smart Close –ø–æ min_holding** ‚Äî –≤–æ –≤—Å–µ—Ö —Ä–µ–∂–∏–º–∞—Ö
5. ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ Smart Close** ‚Äî –ø–æ —Ä–µ–∂–∏–º–∞–º –∏ per-symbol
6. ‚úÖ **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ** ‚Äî `exit_params.smart_close` –∏ `by_symbol.ETH-USDT.smart_close`

### –ß—Ç–æ –∑–∞—â–∏—â–µ–Ω–æ:

- ‚úÖ **SL** ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–µ 1.5-2.5 –º–∏–Ω—É—Ç—ã
- ‚úÖ **Smart Close** ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—ã–µ 1.5-2.5 –º–∏–Ω—É—Ç—ã + –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ –ø–æ—Å–ª–µ
- ‚úÖ **TP** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ (–º–æ–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –ø–æ –ø—Ä–∏–±—ã–ª–∏)
- ‚úÖ **Emergency Loss** ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞ (–∑–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —É–±—ã—Ç–∫–æ–≤)

### –û–∂–∏–¥–∞–µ–º—ã–π —ç—Ñ—Ñ–µ–∫—Ç:

- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ SL –Ω–∞ 50-70%
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –ø–æ Smart Close –Ω–∞ 30-50% –≤ RANGING
- ‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ winrate –Ω–∞ 20-30% –≤ RANGING —Ä–µ–∂–∏–º–µ
- ‚úÖ –û—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è ETH ‚Äî –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ "–¥—ã—à–∞—Ç—å" –∏ –±–æ–ª—å—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –ª–æ–≥–∞—Ö:**

1. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è `‚è≥ ExitAnalyzer RANGING: SL –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è ETH-USDT - –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è X.X –º–∏–Ω < –º–∏–Ω–∏–º—É–º Y.Y –º–∏–Ω`
2. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è `‚è≥ Smart Close –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–ª—è ETH-USDT - –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è X.X –º–∏–Ω < –º–∏–Ω–∏–º—É–º Y.Y –º–∏–Ω`
3. ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è `Smart Close Analysis ETH-USDT (LONG, —Ä–µ–∂–∏–º=ranging): reversal_score=X/7 (–ø–æ—Ä–æ–≥=Y), trend_against=Z.ZZ (–ø–æ—Ä–æ–≥=W.WW)`
4. ‚úÖ –ü–æ—Å–ª–µ min_holding: Smart Close –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏ (3 –¥–ª—è RANGING, 4 –¥–ª—è ETH)

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

