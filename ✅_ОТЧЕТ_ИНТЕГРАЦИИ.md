# ‚úÖ –û–¢–ß–ï–¢ –û–ë –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

**–î–∞—Ç–∞:** 2025-01-XX
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

---

## üéØ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –†–ê–ë–û–¢–´

### ‚úÖ 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ orchestrator.py

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `PositionRegistry`
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `DataRegistry`
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `TradingControlCenter`
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ `LoggerFactory`
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `StructuredLogger`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π:
  - `MarginCalculator` –∏–∑ `calculations.margin_calculator`
  - `DebugLogger` –∏–∑ `logging.debug_logger`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã
from .calculations.margin_calculator import MarginCalculator
from .core.data_registry import DataRegistry
from .core.position_registry import PositionRegistry
from .core.trading_control_center import TradingControlCenter
from .logging.logger_factory import LoggerFactory
from .logging.structured_logger import StructuredLogger
from .logging.debug_logger import DebugLogger

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ __init__
self.position_registry = PositionRegistry()
self.data_registry = DataRegistry()
self.trading_control_center = TradingControlCenter(
    position_registry=self.position_registry,
    data_registry=self.data_registry,
)
LoggerFactory.setup_futures_logging(
    log_dir="logs/futures",
    log_level="DEBUG",
)
self.structured_logger = StructuredLogger(log_dir="logs/futures/structured")
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ò

### 1. –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ñ–∞–π–ª—ã —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

### 2. –ò–º–ø–æ—Ä—Ç—ã
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** Orchestrator –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### 3. Linter
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–µ—Ç –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

---

## ‚è≠Ô∏è –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### üîÑ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã, –Ω–æ —Å—Ç–∞—Ä—ã–π –∫–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–¥—Ö–æ–¥, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏** –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
2. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
3. **–û—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è** –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### üìã –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **PositionRegistry:** –ó–∞–º–µ–Ω–∏—Ç—å `self.active_positions` –Ω–∞ `self.position_registry`
2. **DataRegistry:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è market data, indicators, regimes
3. **TradingControlCenter:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –ª–æ–≥–∏–∫—É –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏
4. **ExitAnalyzer:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
5. **EntryManager:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–ù–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –Ω–æ –ø–æ–∫–∞ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç —Å—Ç–∞—Ä—É—é –ª–æ–≥–∏–∫—É.**

–≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –î–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ
2. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
3. –ü—Ä–æ–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞

---

## üìä –°–¢–ê–¢–£–° –ú–û–î–£–õ–ï–ô

| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
|--------|--------|------------|
| PositionRegistry | ‚úÖ –°–æ–∑–¥–∞–Ω | ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| DataRegistry | ‚úÖ –°–æ–∑–¥–∞–Ω | ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| TradingControlCenter | ‚úÖ –°–æ–∑–¥–∞–Ω | ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| LoggerFactory | ‚úÖ –°–æ–∑–¥–∞–Ω | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| StructuredLogger | ‚úÖ –°–æ–∑–¥–∞–Ω | ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |
| DebugLogger | ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| MarginCalculator | ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω | ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

---

**–î–∞—Ç–∞:** 2025-01-XX
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é



