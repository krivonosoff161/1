# ‚úÖ –û–¢–ß–ï–¢: –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –û–®–ò–ë–û–ö - 26.12.2025

## üîç –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. ‚ö†Ô∏è **exit_params –ù–ï –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ö†Ô∏è exit_params –ù–ï –Ω–∞–π–¥–µ–Ω—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ (–±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –í –∫–æ–Ω—Ñ–∏–≥–µ `exit_params` –∏–º–µ–µ—Ç **–≤–ª–æ–∂–µ–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** –ø–æ —Ä–µ–∂–∏–º–∞–º:
  ```yaml
  exit_params:
    ranging:
      max_holding_minutes: 15
      tp_percent: 2.5
      sl_percent: 0.8
    trending:
      max_holding_minutes: 45
      tp_percent: 8.0
      sl_percent: 2.0
    choppy:
      max_holding_minutes: 10
      tp_percent: 3.0
      sl_percent: 1.5
  ```
- –ö–æ–¥ –∏—Å–∫–∞–ª `exit_params.min_profit_to_close` –∏ `exit_params.max_holding_minutes` –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ (–ø–ª–æ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –ù–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ —ç—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è **–≤–Ω—É—Ç—Ä–∏ —Ä–µ–∂–∏–º–æ–≤** (ranging/trending/choppy)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–ª–µ–Ω –ø–æ–∏—Å–∫ `exit_params` –≤ `_log_config_summary()` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –¢–µ–ø–µ—Ä—å –∫–æ–¥ –∏—â–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞ (ranging, trending, choppy)
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ –∫–∞–∂–¥–æ–º—É —Ä–µ–∂–∏–º—É –æ—Ç–¥–µ–ª—å–Ω–æ

**–§–∞–π–ª:** `src/strategies/scalping/futures/config/config_manager.py`

---

### 2. ‚ö†Ô∏è **'DataRegistry' object has no attribute 'get_adl_rank'**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ERROR | –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞: 'DataRegistry' object has no attribute 'get_adl_rank'
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ú–µ—Ç–æ–¥ `get_adl_rank()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `signal_coordinator.py` (—Å—Ç—Ä–æ–∫–∞ 1918)
- –ù–æ –º–µ—Ç–æ–¥ **–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ `DataRegistry`
- ADL rank –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –∏–∑ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏ —á–µ—Ä–µ–∑ `client.get_positions()`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –£–±—Ä–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å ADL —á–µ—Ä–µ–∑ `data_registry.get_adl_rank()`
- –¢–µ–ø–µ—Ä—å ADL –ø–æ–ª—É—á–∞–µ—Ç—Å—è **–Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏** —á–µ—Ä–µ–∑ `client.get_positions()`
- –ò—â–µ—Ç—Å—è –ø–æ–∑–∏—Ü–∏—è –¥–ª—è —Å–∏–º–≤–æ–ª–∞ –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è `adlRank` –∏–ª–∏ `adl` –∏–∑ –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏
- –ï—Å–ª–∏ ADL rank >= 4, –ø–æ–∑–∏—Ü–∏—è **–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ö–æ–¥:**
```python
# –ü–æ–ª—É—á–∞–µ–º ADL –∏–∑ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏
all_positions = await self.client.get_positions()
if all_positions:
    inst_id = f"{symbol}-SWAP"
    for pos in all_positions:
        if pos.get("instId") == inst_id:
            pos_size = float(pos.get("pos", "0") or 0)
            if abs(pos_size) > 1e-8:  # –ü–æ–∑–∏—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                adl_rank = pos.get("adlRank") or pos.get("adl")
                if adl_rank is not None:
                    current_adl_rank = int(adl_rank)
```

---

### 3. ‚ö†Ô∏è **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ä–∂–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
WARNING | ‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏—é XRP-USDT SHORT (–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ä–∂–∏ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Ä–∂–∏ –±—ã–ª–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ—Ç–∞–ª—å–Ω—ã–º
- –ù–µ –±—ã–ª–æ –≤–∏–¥–Ω–æ, —Å–∫–æ–ª—å–∫–æ –º–∞—Ä–∂–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, —Å–∫–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–Ω–æ, —Å–∫–æ–ª—å–∫–æ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—à–ª–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ **–¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Ä–∂–∏:
  - –¢—Ä–µ–±—É–µ–º–∞—è –º–∞—Ä–∂–∞ –¥–ª—è –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏
  - –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ä–∂–∞
  - –î–æ—Å—Ç—É–ø–Ω–∞—è –º–∞—Ä–∂–∞
- –ü—Ä–∏ –Ω–µ—É–¥–∞—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏—á–∏–Ω–∞—Ö

**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py`

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤:**
```
üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä–∂–∏: —Ç—Ä–µ–±—É–µ—Ç—Å—è=$25.50, –±–∞–ª–∞–Ω—Å=$880.51, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ=$0.00, –¥–æ—Å—Ç—É–ø–Ω–æ=$880.51
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä–∂–∏: –ø—Ä–æ–π–¥–µ–Ω–∞
```

–ò–ª–∏ –ø—Ä–∏ –æ—à–∏–±–∫–µ:
```
üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä–∂–∏: —Ç—Ä–µ–±—É–µ—Ç—Å—è=$25.50, –±–∞–ª–∞–Ω—Å=$880.51, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ=$850.00, –¥–æ—Å—Ç—É–ø–Ω–æ=$30.51
‚ö†Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ä–∂–∏: –ù–ï –ø—Ä–æ–π–¥–µ–Ω–∞ - –ë–õ–û–ö–ò–†–£–ï–ú
   –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∞—Ä–∂–∏: $25.50
   –î–æ—Å—Ç—É–ø–Ω–æ –º–∞—Ä–∂–∏: $30.51
   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –º–∞—Ä–∂–∏: $850.00
   –ë–∞–ª–∞–Ω—Å: $880.51
```

---

## ‚úÖ –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ó–ê–í–ï–†–®–ï–ù–´

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
1. `src/strategies/scalping/futures/config/config_manager.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ–∏—Å–∫ exit_params
2. `src/strategies/scalping/futures/coordinators/signal_coordinator.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ ADL –∏ —É–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ä–∂–∏

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ `exit_params` —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º–∞–º
- ‚úÖ ADL rank –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏ (–º–µ—Ç–æ–¥ –Ω–µ –Ω—É–∂–µ–Ω –≤ DataRegistry)
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∞—Ä–∂–∏ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∏—á–∏–Ω –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

---

## üöÄ –ì–û–¢–û–í–û –ö –ü–ï–†–ï–ó–ê–ü–£–°–ö–£

–í—Å–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫, –∏ –≤ –ª–æ–≥–∞—Ö –±—É–¥–µ—Ç –≤–∏–¥–Ω–æ:
- ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ exit_params –ø–æ —Ä–µ–∂–∏–º–∞–º
- ‚úÖ ADL rank –∏–∑ –ø–æ–∑–∏—Ü–∏–π —Å –±–∏—Ä–∂–∏
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–≤–µ—Ä–∫–µ –º–∞—Ä–∂–∏



