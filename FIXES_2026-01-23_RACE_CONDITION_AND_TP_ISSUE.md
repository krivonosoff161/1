# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç 23 —è–Ω–≤–∞—Ä—è 2026: Race Condition –∏ –ü—Ä–æ–±–ª–µ–º—ã —Å TP

## –†–µ–∑—é–º–µ
–ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ `staging_2026-01-23_21-27-28` –∏ –Ω–∞–π–¥–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**: Race condition –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–π (side=unknown, size=0.0, entry=0.0)
2. ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ margin=0.00 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏
3. ‚ö†Ô∏è **–ù–ê–ô–î–ï–ù–ê**: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ - TP —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

---

## –ü—Ä–æ–±–ª–µ–º–∞ #1: Race Condition - side=unknown, size=0.0, entry=0.0

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–í –ª–æ–≥–∞—Ö –Ω–∞–π–¥–µ–Ω–æ **1,263 instances** –≥–¥–µ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å —Å –ø—É—Å—Ç—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```
üõë –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ XRP-USDT: sl_reached (side=unknown, size=0.0, entry=0.0, time=0.00 –º—ñ–Ω)
üîÑ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ XRP-USDT long —Ä–∞–∑–º–µ—Ä=250 –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, PnL=-1.75 USDT
```

–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ (–∏–∑ orchestrator) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤—Ç–æ—Ä–∞—è (–∏–∑ position_manager) - –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ.

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

**Race condition** –º–µ–∂–¥—É –¥–≤—É–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:

1. **Sync –∫–æ–¥** (orchestrator.py:2750):
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –∏–∑–≤–Ω–µ (TSL, –ª–∏–∫–≤–∏–¥–∞—Ü–∏—è, ADL, manual), —É–¥–∞–ª—è–µ—Ç –∏–∑ `active_positions`

2. **PositionMonitor**:
   - –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç—å —ç—Ç—É –∂–µ –ø–æ–∑–∏—Ü–∏—é –ø–æ TP/SL
   - –í—ã–∑—ã–≤–∞–µ—Ç `_close_position(symbol, reason)` —á–µ—Ä–µ–∑ callback
   - –ù–æ `active_positions[symbol]` —É–∂–µ —É–¥–∞–ª–µ–Ω–æ sync –∫–æ–¥–æ–º!
   - –†–µ–∑—É–ª—å—Ç–∞—Ç: `position = {}` ‚Üí `side="unknown"`, `size=0.0`, `entry=0.0`

### –†–µ—à–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω [orchestrator.py:_close_position:4604-4673](orchestrator.py:4604):

```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (23.01.2026): Fix race condition
# –ü—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ active_positions, –Ω–æ –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç (—É–¥–∞–ª–µ–Ω—ã sync –∫–æ–¥–æ–º),
# —Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å –±–∏—Ä–∂–∏ –∏–ª–∏ –∏–∑ PositionRegistry

position = self.active_positions.get(symbol, {})

# –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –ø—É—Å—Ç–∞ –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ–ª–Ω—ã–µ, –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å —Å –±–∏—Ä–∂–∏
needs_api_fallback = False
if not position or position.get("position_side") == "unknown" or not position.get("size"):
    needs_api_fallback = True

# Fallback: –∑–∞–ø—Ä–æ—Å —Å –±–∏—Ä–∂–∏ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç
if needs_api_fallback:
    positions_from_api = await self.position_manager.client.get_positions(symbol)
    if positions_from_api and isinstance(positions_from_api, list):
        for pos in positions_from_api:
            inst_id = pos.get("instId", "").replace("-SWAP", "")
            if inst_id == symbol:
                api_size = float(pos.get("pos", "0") or 0)
                if api_size == 0:
                    return  # –ü–æ–∑–∏—Ü–∏—è —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞

                # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ API
                api_entry_price = float(pos.get("avgPx", "0") or 0)
                api_side = "long" if api_size > 0 else "short"
                # ... –ø–æ–ª—É—á–∞–µ–º entry_time –∏–∑ PositionRegistry

                position = {
                    "position_side": api_side,
                    "size": abs(api_size),
                    "entry_price": api_entry_price,
                    "entry_time": api_entry_time,
                }
                break
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `_close_position` —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ `active_positions`.

---

## –ü—Ä–æ–±–ª–µ–º–∞ #2: margin=0.00 –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–í—Å–µ –ª–æ–≥–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ `margin=0.00 USD`:

```
üìà Position opened: BTC-USDT SHORT @ 89537.38, size=0.007700, margin=0.00 USD, leverage=10x
üìà Position opened: DOGE-USDT LONG @ 0.13, size=3910.000000, margin=0.00 USD, leverage=10x
üìà Position opened: ETH-USDT LONG @ 3001.88, size=0.229000, margin=0.00 USD, leverage=7x
```

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

OKX API –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–µ `"margin"` —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `"0"`:

[entry_manager.py:370-382](entry_manager.py:370):
```python
position_data = {
    # ...
    "margin_used": float(pos.get("margin", "0"))
                   if pos.get("margin")
                   else 0.0,  # ‚ùå –í—Å–µ–≥–¥–∞ 0!
}
```

### –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω fallback —Ä–∞—Å—á–µ—Ç: `margin = (size * entry_price) / leverage`

[entry_manager.py:370-395](entry_manager.py:370):
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (23.01.2026): Fallback —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏
# OKX API –º–æ–∂–µ—Ç –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å "margin" —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
margin_from_api = float(pos.get("margin", "0")) if pos.get("margin") else 0.0

# –ï—Å–ª–∏ margin=0, —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Ä—É—á–Ω—É—é: margin = (size * price) / leverage
if margin_from_api == 0.0 and entry_price > 0:
    leverage_from_api = float(pos.get("lever", "1") or "1")
    if leverage_from_api > 0:
        calculated_margin = (pos_size * entry_price) / leverage_from_api
        logger.debug(
            f"üìä –†–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –º–∞—Ä–∂–∞ –¥–ª—è {symbol}: "
            f"size={pos_size:.6f} * price={entry_price:.2f} / leverage={leverage_from_api:.0f}x = "
            f"${calculated_margin:.2f}"
        )
        margin_from_api = calculated_margin

position_data = {
    # ...
    "margin_used": margin_from_api,
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å –ª–æ–≥–∏ –±—É–¥—É—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –º–∞—Ä–∂—É –¥–∞–∂–µ –µ—Å–ª–∏ OKX –Ω–µ –≤–µ—Ä–Ω—É–ª –µ—ë —Å—Ä–∞–∑—É.

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ #3: TP —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ —É–±—ã—Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ (–¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø)

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**SOL-USDT** –∑–∞–∫—Ä—ã–ª–∞—Å—å –∑–∞ **5.4 —Å–µ–∫—É–Ω–¥—ã** –ø–æ –ø—Ä–∏—á–∏–Ω–µ `tp_reached`, –Ω–æ **–° –£–ë–´–¢–ö–û–ú**:

```
trades,2026-01-23T17:01:56.253282+00:00,SOL-USDT,long,128.4459,128.4100,6.98000000,-0.2505,0.8964,-1.1469,5.402882,tp_reached,0.00
```

- Entry: 128.4459, Exit: 128.4100 (—Ü–µ–Ω–∞ **—Å–Ω–∏–∑–∏–ª–∞—Å—å**)
- Gross PnL: **-0.25 USDT** (—É–±—ã—Ç–æ–∫)
- Commission: 0.90 USDT
- Net PnL: **-1.15 USDT** (—É–±—ã—Ç–æ–∫)
- Duration: **5.4 seconds** (—Å–ª–∏—à–∫–æ–º –±—ã—Å—Ç—Ä–æ!)
- Reason: **tp_reached** ‚Üê **–≠–¢–û –û–®–ò–ë–ö–ê!**

### –õ–æ–≥ –∏–∑ ExitAnalyzer

```
20:01:54.808 | ExitAnalyzer CHOPPY: TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –¥–ª—è SOL-USDT: 3.07% >= 2.26%
20:01:54.809 | ExitAnalyzer: –†–µ—à–µ–Ω–∏–µ –¥–ª—è SOL-USDT | PnL=3.07% | TP=2.26%
```

ExitAnalyzer –ø–æ—Å—á–∏—Ç–∞–ª PnL = **+3.07%** (–ø—Ä–∏–±—ã–ª—å), –Ω–æ —Ä–µ–∞–ª—å–Ω—ã–π PnL = **-0.9%** (—É–±—ã—Ç–æ–∫)!

### –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç PnL –≤ ExitAnalyzer**:
   - –ü–æ–∑–∏—Ü–∏—è —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã–ª–∞—Å—å (2.4 —Å–µ–∫—É–Ω–¥—ã –Ω–∞–∑–∞–¥)
   - ExitAnalyzer –ø–æ—Å—á–∏—Ç–∞–ª PnL = +3.07%
   - –ù–æ —Ü–µ–Ω–∞ –¥–∞–∂–µ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å (entry_price = current_price = 128.4459)

2. **–ü–µ—Ä–µ–¥–∞—á–∞ `current_pnl` –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏**:
   ```
   [ADAPTIVE] SOL-USDT: –±–∞–ª–∞–Ω—Å $884 ... P&L=3.1%, drawdown=0.0%
   ```
   –≠—Ç–æ—Ç PnL=3.1% —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ –∏–∑ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Å—Å–∏–∏.

3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π PnL**:
   - `parameter_provider.get_exit_params(current_pnl=3.1)`
   - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥—É–º–∞–µ—Ç —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏
   - –°–Ω–∏–∂–∞–µ—Ç TP –¥–æ 2.26%
   - TP —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏ –∫–æ—Ç–æ—Ä–∞—è –≤ —É–±—ã—Ç–∫–µ!

### –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

**‚ùå –ù–ï –ò–°–ü–†–ê–í–õ–ï–ù–û** - —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

1. **ExitAnalyzer –¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å PnL —Ç–µ–∫—É—â–µ–π –ø–æ–∑–∏—Ü–∏–∏**, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `current_pnl` –∏–∑ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. **–ü–∞—Ä–∞–º–µ—Ç—Ä `current_pnl` –≤ `get_exit_params` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å PnL –¢–ï–ö–£–©–ï–ô –ø–æ–∑–∏—Ü–∏–∏**, –∞ –Ω–µ —Å–µ—Å—Å–∏–∏
3. **–î–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É**: TP –Ω–µ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –µ—Å–ª–∏ PnL < 0% (—É–±—ã—Ç–æ–∫)
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ `current_pnl`** –≤ –≤—ã–∑–æ–≤–∞—Ö `parameter_provider.get_exit_params()`

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. –ù–∞–π—Ç–∏ –≥–¥–µ ExitAnalyzer –≤—ã–∑—ã–≤–∞–µ—Ç `parameter_provider.get_exit_params()` –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–∫—É–¥–∞ –±–µ—Ä–µ—Ç—Å—è `current_pnl`
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `current_pnl` —ç—Ç–æ PnL **—Ç–µ–∫—É—â–µ–π** –ø–æ–∑–∏—Ü–∏–∏, –∞ –Ω–µ —Å—Ä–µ–¥–Ω–∏–π PnL —Å–µ—Å—Å–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ ExitAnalyzer:
   ```python
   if decision["reason"] == "tp_reached" and actual_pnl_percent < 0:
       # TP –Ω–µ –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —É–±—ã—Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏!
       return {"action": "hold", "reason": "tp_rejected_negative_pnl"}
   ```

---

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫ –∏–∑ –ª–æ–≥–æ–≤

### –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

```
–ü—Ä–∏–±—ã–ª—å–Ω—ã–µ –ø–æ–ª–Ω—ã–µ: 2 —Å–¥–µ–ª–∫–∏
–ü—Ä–∏–±—ã–ª—å–Ω—ã–µ partial: 2 —Å–¥–µ–ª–∫–∏
–£–±—ã—Ç–æ—á–Ω—ã–µ: 5 —Å–¥–µ–ª–æ–∫
Win rate: 44.4%
```

### –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä —É–±—ã—Ç–æ—á–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

1. **SOL-USDT** (tp_reached ‚Üê –û–®–ò–ë–ö–ê!):
   - Net PnL: **-1.15 USDT**
   - Duration: **5 seconds** ‚ö†Ô∏è
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç PnL –≤ ExitAnalyzer

2. **XRP-USDT** (sl_reached):
   - Net PnL: -3.05 USDT
   - Duration: 23 minutes
   - Loss: -1.19% (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π SL)

3. **BTC-USDT** (sl_reached):
   - Net PnL: -3.53 USDT
   - Duration: 40 minutes
   - Loss: -0.41% –¥–ª—è SHORT (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π SL)

4. **XRP-USDT** (sl_reached):
   - Net PnL: -1.75 USDT
   - Duration: 12 minutes
   - Loss: -0.25% (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π SL)

5. **ETH-USDT** (sl_reached):
   - Net PnL: -5.82 USDT
   - Duration: 2 minutes
   - Loss: -0.74% (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π SL)

### –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫

1-3. **ETH-USDT** (2x partial_tp + 1x tp_reached):
   - Total Net PnL: **+2.72 USDT**
   - Duration: ~33 minutes
   - Win: +0.47% (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π TP)

4. **DOGE-USDT** (tp_reached):
   - Net PnL: **+0.89 USDT**
   - Duration: 57 minutes
   - Win: +0.31% (–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π TP)

---

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã

1. ‚úÖ **orchestrator.py**:
   - –°—Ç—Ä–æ–∫–∏ 4604-4673: –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏ —Å –±–∏—Ä–∂–∏

2. ‚úÖ **entry_manager.py**:
   - –°—Ç—Ä–æ–∫–∏ 370-395: –î–æ–±–∞–≤–ª–µ–Ω fallback —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏
   - –°—Ç—Ä–æ–∫–∏ 446-475: –î–æ–±–∞–≤–ª–µ–Ω fallback —Ä–∞—Å—á–µ—Ç –º–∞—Ä–∂–∏ –≤ retry –ª–æ–≥–∏–∫–µ

3. ‚è≥ **exit_analyzer.py** (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–æ–∫):
   - –ù–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ä–∞—Å—á–µ—Ç–æ–º PnL –∏ –ø–µ—Ä–µ–¥–∞—á–µ–π current_pnl
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∑–∞—â–∏—Ç—É –æ—Ç TP –Ω–∞ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û**: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å TP –Ω–∞ —É–±—ã—Ç–æ—á–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏—è—Ö
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è race condition
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á–µ—Ç–∞ –º–∞—Ä–∂–∏ –≤ –Ω–æ–≤—ã—Ö –ª–æ–≥–∞—Ö
4. –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ `current_pnl` –≤ ExitAnalyzer

---

## –î–∞—Ç–∞ –∏ –∞–≤—Ç–æ—Ä

- **–î–∞—Ç–∞**: 23 —è–Ω–≤–∞—Ä—è 2026
- **–ê–≤—Ç–æ—Ä**: Claude Sonnet 4.5
- **–õ–æ–≥–∏**: staging_2026-01-23_21-27-28
