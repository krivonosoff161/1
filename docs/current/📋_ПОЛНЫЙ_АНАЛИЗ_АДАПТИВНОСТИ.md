# üìã –ü–û–õ–ù–´–ô –ê–ù–ê–õ–ò–ó –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò –ü–ê–†–ê–ú–ï–¢–†–û–í

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025, 02:20  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ê–ù–ê–õ–ò–ó –ó–ê–í–ï–†–®–ï–ù**

---

## üîç –ê–ù–ê–õ–ò–ó –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò –ü–ê–†–ê–ú–ï–¢–†–û–í

### ‚úÖ TP (Take Profit) - –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ú–µ—Ç–æ–¥ `_get_adaptive_tp_percent()` –≤ `PositionManager`
2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Per-regime TP ‚Üí Per-symbol TP ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π TP
3. –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ –∏–ª–∏ `regime_managers`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `symbol_profiles[symbol][regime].tp_percent` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `symbol_profiles[symbol].tp_percent` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- `scalping_config.tp_percent` (fallback)

**–ü—Ä–∏–º–µ—Ä—ã:**
- BTC-USDT –≤ RANGING: TP = 5.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- ETH-USDT –≤ TRENDING: TP = 5.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)
- DOGE-USDT –≤ CHOPPY: TP = 4.0% (–∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞)

---

### ‚úÖ TSL (Trailing Stop Loss) - –†–ê–ë–û–¢–ê–ï–¢ –ü–†–ê–í–ò–õ–¨–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ú–µ—Ç–æ–¥ `get_trailing_sl_params(regime)` –≤ `ConfigManager`
2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Per-regime TSL ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π TSL
3. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑ `symbol_profiles[symbol][regime].trailing_sl`

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `trailing_sl.by_regime[regime].*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `trailing_sl.*` (fallback)
- `symbol_profiles[symbol][regime].trailing_sl.*` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è)

**–ü—Ä–∏–º–µ—Ä—ã:**
- RANGING: `loss_cut=4.0%`, `min_holding=60 –º–∏–Ω`, `timeout=120 –º–∏–Ω`
- CHOPPY: `loss_cut=1.2%`, `min_holding=0.5 –º–∏–Ω`, `timeout=3 –º–∏–Ω`
- TRENDING: `loss_cut=2.0%`, `min_holding=2 –º–∏–Ω`, `timeout=7 –º–∏–Ω`

---

### ‚úÖ –§–∏–ª—å—Ç—Ä—ã - –†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç:**
1. –§–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç `regime` –∏ `symbol` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ
2. –ú–µ—Ç–æ–¥ `_get_thresholds()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `regime` –∏ `symbol` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Per-regime thresholds ‚Üí Per-symbol thresholds ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–µ thresholds

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `symbol_profiles[symbol][regime].filters.*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `adaptive_regime.regimes[regime].*` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (fallback)

**–ü—Ä–∏–º–µ—Ä—ã:**
- LiquidityFilter: `min_best_bid_volume_usd`, `min_best_ask_volume_usd` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É
- OrderFlowFilter: `long_threshold`, `short_threshold` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É
- FundingFilter: `max_positive_rate`, `max_negative_rate` –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É

---

### ‚úÖ –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π - –†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–†–ê–ë–û–¢–ê–ï–¢ –ê–î–ê–ü–¢–ò–í–ù–û**

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ú–µ—Ç–æ–¥ `calculate_position_size()` –≤ `RiskManager`
2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Balance Profile ‚Üí Regime Multiplier ‚Üí Symbol Multiplier ‚Üí –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:**
- `balance_profiles[profile].base_position_usd` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- `adaptive_regime.regimes[regime].position_size_multiplier` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
- `symbol_profiles[symbol].position_multiplier` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä (fallback)

---

### ‚úÖ SL (Stop Loss) - –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TSL)**

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:**
- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Trailing Stop Loss** –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ Stop Loss
- SL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ (`sl_percent`) –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é
- –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `loss_cut_percent` –∏–∑ TSL –∫–æ–Ω—Ñ–∏–≥–∞

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ:
- ‚úÖ **TP**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Å–∏–º–≤–æ–ª—É –∏ —Ä–µ–∂–∏–º—É
- ‚úÖ **TSL**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ —Ä–µ–∂–∏–º—É (—Å –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø–æ —Å–∏–º–≤–æ–ª—É)
- ‚úÖ **–§–∏–ª—å—Ç—Ä—ã**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ —Ä–µ–∂–∏–º—É –∏ —Å–∏–º–≤–æ–ª—É
- ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π**: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ø–æ –±–∞–ª–∞–Ω—Å—É, —Ä–µ–∂–∏–º—É –∏ —Å–∏–º–≤–æ–ª—É

### ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚ö†Ô∏è **SL**: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è TSL –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ SL)
- ‚ö†Ô∏è **–§–∏–ª—å—Ç—Ä—ã**: –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç `regime` –∏ `symbol` –ø—Ä–∏ –≤—ã–∑–æ–≤–µ

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. ‚úÖ **TP –∏—Å–ø—Ä–∞–≤–ª–µ–Ω** - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π TP –≤–µ–∑–¥–µ
2. ‚úÖ **TSL —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
3. ‚ö†Ô∏è **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã** - —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–ª—É—á–∞—é—Ç `regime` –∏ `symbol`
4. ‚úÖ **–†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –ê–î–ê–ü–¢–ò–í–ù–´–ï –ò –†–ê–ë–û–¢–ê–Æ–¢ –ü–†–ê–í–ò–õ–¨–ù–û**


