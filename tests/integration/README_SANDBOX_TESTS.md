# üß™ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º Sandbox –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º

**–î–∞—Ç–∞:** 2026-01-05  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–Æ –¶–ï–ü–û–ß–ö–£ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ —Å –†–ï–ê–õ–¨–ù–´–ú –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ sandbox –±–∏—Ä–∂–µ

---

## ‚ö†Ô∏è –¢–†–ï–ë–û–í–ê–ù–ò–Ø:

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# Windows PowerShell
$env:OKX_API_KEY="your_sandbox_api_key"
$env:OKX_SECRET_KEY="your_sandbox_secret_key"
$env:OKX_PASSPHRASE="your_sandbox_passphrase"

# Linux/Mac
export OKX_API_KEY="your_sandbox_api_key"
export OKX_SECRET_KEY="your_sandbox_secret_key"
export OKX_PASSPHRASE="your_sandbox_passphrase"
```

### 2. –ü–æ–ª—É—á–∏—Ç—å Sandbox API –∫–ª—é—á–∏:

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ OKX
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ API Management
3. –°–æ–∑–¥–∞—Ç—å API –∫–ª—é—á–∏ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–ª—è Sandbox
4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –∫–ª—é—á–∏ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:

### 1. –ü—Ä–æ–±–ª–µ–º–∞ #2: –†–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏
**–§–∞–π–ª:** `test_position_size_real_sandbox.py`  
**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ sandbox API (get_ticker, get_instrument_details, get_balance)
- ‚úÖ RiskManager —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ –ú–û–ù–ï–¢–ê–•
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ DataRegistry
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –∏–∑ DataRegistry

**–¶–µ–ø–æ—á–∫–∞:**
```
Sandbox API ‚Üí OKXFuturesClient ‚Üí RiskManager ‚Üí —Ä–∞—Å—á–µ—Ç ‚Üí DataRegistry ‚Üí —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:

```bash
# –í—Å–µ sandbox —Ç–µ—Å—Ç—ã
pytest tests/integration/test_position_size_real_sandbox.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
pytest tests/integration/test_position_size_real_sandbox.py::TestPositionSizeRealSandbox::test_full_chain_sandbox_client_to_risk_manager -v

# –° –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º
pytest tests/integration/test_position_size_real_sandbox.py -v -s
```

---

## üìä –ß—Ç–æ –ù–ï –º–æ–∫–∏—Ä—É–µ—Ç—Å—è:

1. ‚úÖ **OKXFuturesClient** - –†–ï–ê–õ–¨–ù–û–ï –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ sandbox
2. ‚úÖ **RiskManager** - –†–ï–ê–õ–¨–ù–´–ô —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏
3. ‚úÖ **DataRegistry** - –†–ï–ê–õ–¨–ù–û–ï —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/—á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ **–ó–∞–ø—Ä–æ—Å—ã –∫ API** - –†–ï–ê–õ–¨–ù–´–ï –∑–∞–ø—Ä–æ—Å—ã –∫ sandbox –±–∏—Ä–∂–µ

---

## ‚ö†Ô∏è –ß—Ç–æ –º–æ–∫–∏—Ä—É–µ—Ç—Å—è (–º–∏–Ω–∏–º–∞–ª—å–Ω–æ):

1. ‚ö†Ô∏è **ConfigManager** - —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –º–æ–∫ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
2. ‚ö†Ô∏è **SignalGenerator** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ç–µ—Å—Ç–∞—Ö

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã:

–¢–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ sandbox API —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –†–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö (–º–æ–Ω–µ—Ç—ã)
- ‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–æ–Ω–µ—Ç—ã ‚Üí –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ DataRegistry —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **sandbox=True** (–±–µ–∑–æ–ø–∞—Å–Ω–æ, –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–µ–Ω–µ–≥)
- –¢–µ—Å—Ç—ã –º–æ–≥—É—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å—Å—è –µ—Å–ª–∏ –Ω–µ—Ç API –∫–ª—é—á–µ–π (skipTest)
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è —Å —Ä–µ–∞–ª—å–Ω–æ–π sandbox –±–∏—Ä–∂–∏
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –í–°–Ø —Ü–µ–ø–æ—á–∫–∞ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –º–æ–∫–æ–≤
