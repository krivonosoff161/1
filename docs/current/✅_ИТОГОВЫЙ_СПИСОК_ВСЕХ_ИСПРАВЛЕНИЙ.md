# ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–ü–ò–°–û–ö –í–°–ï–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´

### 1. ‚úÖ order_executor –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –∏–∑ config_futures.yaml
**–ü—Ä–æ–±–ª–µ–º–∞:** 
- `order_executor` –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ —Å–µ–∫—Ü–∏–∏ `futures_modules:`, –∞ –Ω–µ –≤ `scalping:`
- –ö–æ–¥ –∏—Å–∫–∞–ª `order_executor` –≤ `scalping_config`, –Ω–æ –æ–Ω –±—ã–ª –≤ `futures_modules`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω `order_executor` –∏–∑ `futures_modules:` (—Å—Ç—Ä–æ–∫–∞ 1164) –≤ `scalping:` (—Å—Ç—Ä–æ–∫–∞ ~957)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ `src/config.py` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å `{}`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

**–§–∞–π–ª—ã:**
- ‚úÖ `config/config_futures.yaml` - –ø–µ—Ä–µ–º–µ—â–µ–Ω `order_executor`
- ‚úÖ `src/config.py` - —É–ª—É—á—à–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞

### 2. ‚úÖ margin_calculator –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª fallback 'ranging' –∫–æ–≥–¥–∞ regime=None
**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –†–µ–∂–∏–º –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ –≤ `margin_calculator.is_position_safe()`
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è fallback 'ranging'

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ `regime` –∏–∑ –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º `margin_calculator`
- ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `is_position_safe()` –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `position_regime` –∏–ª–∏ `market_regime` (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∑–∏—Ü–∏–∏)

**–§–∞–π–ª—ã:**
- ‚úÖ `src/strategies/scalping/futures/position_manager.py` - –ø–µ—Ä–µ–¥–∞—á–∞ regime

### 3. ‚úÖ OrderCoordinator –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª fallback –¥–ª—è —Ä–µ–∂–∏–º–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** 
- `current_regime = "ranging"  # Fallback` –≤–º–µ—Å—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑ signal_generator
- –†–µ–∂–∏–º –Ω–µ –ø–æ–ª—É—á–∞–ª—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∏–∑ `signal_generator.regime_manager`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ fallback –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- ‚úÖ Fallback –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ä–µ–∂–∏–º –Ω–µ –Ω–∞–π–¥–µ–Ω

**–§–∞–π–ª—ã:**
- ‚úÖ `src/strategies/scalping/futures/coordinators/order_coordinator.py`

### 4. ‚úÖ LiquidityFilter –ø—Ä–æ–≤–µ—Ä—è–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–±—ä–µ–º—ã
**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ü—Ä–æ–≤–µ—Ä—è–ª ask volume –¥–ª—è LONG —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
- –ü—Ä–æ–≤–µ—Ä—è–ª bid volume –¥–ª—è SHORT —Å–∏–≥–Ω–∞–ª–æ–≤ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `signal_side` –≤ `evaluate()`
- ‚úÖ –î–ª—è LONG –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ bid volume
- ‚úÖ –î–ª—è SHORT –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ ask volume
- ‚úÖ –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏: –µ—Å–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–±–∞ –æ–±—ä–µ–º–∞

**–§–∞–π–ª—ã:**
- ‚úÖ `src/strategies/scalping/futures/filters/liquidity_filter.py`
- ‚úÖ `src/strategies/scalping/futures/signal_generator.py` - –ø–µ—Ä–µ–¥–∞—á–∞ signal_side

---

## üìã –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´

1. ‚úÖ `src/config.py` - —É–ª—É—á—à–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ `order_executor` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π —Å–ª–æ–≤–∞—Ä—å)
2. ‚úÖ `src/strategies/scalping/futures/position_manager.py` - –ø–µ—Ä–µ–¥–∞—á–∞ regime –≤ margin_calculator
3. ‚úÖ `src/strategies/scalping/futures/coordinators/order_coordinator.py` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
4. ‚úÖ `src/strategies/scalping/futures/filters/liquidity_filter.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—ä–µ–º–æ–≤ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é
5. ‚úÖ `src/strategies/scalping/futures/signal_generator.py` - –ø–µ—Ä–µ–¥–∞—á–∞ signal_side –≤ LiquidityFilter
6. ‚úÖ `config/config_futures.yaml` - –ø–µ—Ä–µ–º–µ—â–µ–Ω `order_executor` –≤ —Å–µ–∫—Ü–∏—é `scalping:`

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ `order_executor` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏ (`scalping:`)
- ‚úÖ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤–æ –≤—Å–µ –º–æ–¥—É–ª–∏ (margin_calculator, OrderCoordinator)
- ‚úÖ LiquidityFilter —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (LONG/SHORT)
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ

---

## üìã –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞:
1. ‚úÖ `‚úÖ order_executor –≤—Ä—É—á–Ω—É—é —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ scalping_config` - –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è
2. ‚úÖ `order_executor_config keys=['limit_order']` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ –ø—É—Å—Ç–æ
3. ‚úÖ `Per-symbol offset` –∏–ª–∏ `Per-regime offset` - –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–æ fallback
4. ‚úÖ `regime=ranging (fallback)` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∂–µ (—Ä–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–∑ –ø–æ–∑–∏—Ü–∏–∏)
5. ‚úÖ `LiquidityFilter: XRP-USDT –æ—Ç–∫–ª–æ–Ω—ë–Ω ‚Äî –æ–±—ä—ë–º –Ω–∞ –ª—É—á—à–µ–º bid/ask` - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ü–ï–†–ï–ó–ê–ü–£–°–ö–£ –ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ

