# –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ü–ê–¢–ß–ï–ô –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–ò (29.12.2025)

**–î–∞—Ç–∞:** 29.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—á–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

---

## ‚úÖ –ü–†–ò–ú–ï–ù–Å–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1: SL/TP/Max_Holding per-symbol

**–§–∞–π–ª:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ú–µ—Ç–æ–¥:** `get_exit_params()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 199)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `by_symbol.{symbol}` –¥–ª—è `sl_atr_multiplier`, `tp_atr_multiplier`, `max_holding_minutes`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ü–∏–∫–ª –¥–ª—è –≤—Å–µ—Ö –∫–ª—é—á–µ–π (–∫–∞–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–ö–æ–¥:**
```python
# ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 1 (29.12.2025): –ü—Ä–æ–≤–µ—Ä–∫–∞ by_symbol –¥–ª—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ exit_params.{regime})
        per_symbol_keys = [
            "sl_atr_multiplier",
            "tp_atr_multiplier",
            "max_holding_minutes",
        ]
        for key in per_symbol_keys:
            if key in symbol_config:
                exit_params[key] = _to_float(
                    symbol_config[key],
                    key,
                    exit_params.get(key, 2.0 if "sl_atr" in key else 1.0 if "tp_atr" in key else 25.0),
                )
        logger.debug(
            f"‚úÖ ParameterProvider: Exit –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol: "
            f"sl_atr={exit_params.get('sl_atr_multiplier')}, "
            f"tp_atr={exit_params.get('tp_atr_multiplier')}, "
            f"max_holding={exit_params.get('max_holding_minutes')}"
        )
```

**–ö–æ–Ω—Ñ–∏–≥:** `config_futures.yaml:40-48`
```yaml
by_symbol:
  ETH-USDT:
    sl_atr_multiplier: 3.0  # ‚úÖ –£–∂–µ –±—ã–ª–æ
    tp_atr_multiplier: 4.0  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
    max_holding_minutes: 30.0  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `sl_atr_multiplier=3.0` –≤–º–µ—Å—Ç–æ `2.0`
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `tp_atr_multiplier=4.0` –≤–º–µ—Å—Ç–æ `1.0`
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `max_holding_minutes=30.0` –≤–º–µ—Å—Ç–æ `25.0`

---

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 2: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive

**–§–∞–π–ª 1:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ú–µ—Ç–æ–¥:** `get_indicator_params()` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 368)

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `by_symbol.{symbol}.indicators` –¥–ª—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_rsi_thresholds()` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø–æ–ª—É—á–µ–Ω–∏—è RSI –ø–æ—Ä–æ–≥–æ–≤

**–ö–æ–¥:**
```python
# ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 2 (29.12.2025): –ü—Ä–æ–≤–µ—Ä–∫–∞ by_symbol.{symbol}.indicators –¥–ª—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
if symbol and hasattr(self.config_manager, "_raw_config_dict"):
    config_dict = self.config_manager._raw_config_dict
    by_symbol = config_dict.get("by_symbol", {})
    symbol_config = by_symbol.get(symbol, {})
    if isinstance(symbol_config, dict):
        symbol_indicators = symbol_config.get("indicators", {})
        if isinstance(symbol_indicators, dict):
            # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ by_symbol (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã—à–µ regime)
            indicators.update(symbol_indicators)
            logger.debug(
                f"‚úÖ ParameterProvider: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è {symbol} –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ by_symbol: "
                f"{list(symbol_indicators.keys())}"
            )
```

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:**
```python
def get_rsi_thresholds(
    self, symbol: str, regime: Optional[str] = None
) -> Dict[str, float]:
    """
    –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Ä–æ–≥–∏ RSI –¥–ª—è —Ä–µ–∂–∏–º–∞ –∏ —Å–∏–º–≤–æ–ª–∞.
    
    Returns:
        {
            'overbought': float,
            'oversold': float,
            'period': int
        }
    """
    try:
        indicator_params = self.get_indicator_params(symbol, regime)
        return {
            "overbought": indicator_params.get("rsi_overbought", 70),
            "oversold": indicator_params.get("rsi_oversold", 30),
            "period": indicator_params.get("rsi_period", 14),
        }
    except Exception as e:
        logger.warning(
            f"‚ö†Ô∏è ParameterProvider: –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è RSI –ø–æ—Ä–æ–≥–æ–≤ –¥–ª—è {symbol}: {e}"
        )
        return {"overbought": 70, "oversold": 30, "period": 14}
```

**–ö–æ–Ω—Ñ–∏–≥:** `config_futures.yaml:46-52`
```yaml
by_symbol:
  ETH-USDT:
    indicators:  # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ
      rsi_overbought: 78  # ‚úÖ –î–ª—è ETH –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ (78 –≤–º–µ—Å—Ç–æ 70)
      rsi_oversold: 22  # ‚úÖ –î–ª—è ETH –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π –ø–æ—Ä–æ–≥ (22 –≤–º–µ—Å—Ç–æ 30)
      macd_fast: 10  # ‚úÖ –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π MACD –¥–ª—è ETH
      macd_slow: 22  # ‚úÖ –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π MACD –¥–ª—è ETH
      bb_std_multiplier: 2.1  # ‚úÖ –®–∏—Ä–µ –ø–æ–ª–æ—Å—ã –¥–ª—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ ETH
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `rsi_overbought=78` –≤–º–µ—Å—Ç–æ `70`
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `rsi_oversold=22` –≤–º–µ—Å—Ç–æ `30`
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã MACD –∏ BB

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `get_indicator_params()` –≤ `signal_generator.py` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ signal_generator.py)

---

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 3: –§–∏–ª—å—Ç—Ä—ã –ü–æ—Ä–æ–≥–∏ Adaptive

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–ñ–ï –†–ê–ë–û–¢–ê–ï–¢**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ `FundingRateFilter.is_signal_valid()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `overrides`
- ‚úÖ `LiquidityFilter.evaluate()` —É–∂–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `thresholds_override`
- ‚úÖ –ü–æ—Ä–æ–≥–∏ —É–∂–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ `signal_generator.py` —á–µ—Ä–µ–∑ `overrides`

**–í—ã–≤–æ–¥:** –ù–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚ùå –ü–†–ò–û–†–ò–¢–ï–¢ 4: –†–µ–∂–∏–º—ã –ü–æ –ë–∞–ª–∞–Ω—Å—É

**–°—Ç–∞—Ç—É—Å:** ‚ùå **–ù–ï –ü–†–ò–ú–ï–ù–ï–ù–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥)**

**–ü—Ä–∏—á–∏–Ω–∞:** –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –±–∞–ª–∞–Ω—Å–∞ - —ç—Ç–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞, –∞ –Ω–µ –±–∞–ª–∞–Ω—Å–∞.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–æ—Ä–≥–æ–≤–ª–∏ —É–∂–µ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –±–∞–ª–∞–Ω—Å—É —á–µ—Ä–µ–∑ `balance_profiles` –≤ `risk_manager.py`

---

### ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ 5: PnL Adaptive –ü–æ Leverage

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–£–ñ–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `exit_analyzer.py:653-655`
```python
# –ö–æ–º–∏—Å—Å–∏—è: 0.02% –Ω–∞ –≤—Ö–æ–¥ + 0.02% –Ω–∞ –≤—ã—Ö–æ–¥, —É–º–Ω–æ–∂–µ–Ω–Ω–∞—è –Ω–∞ leverage
commission_pct = (
    (trading_fee_rate * 2) * leverage * 100
)  # 0.02% √ó 2 √ó leverage = 0.2% –ø—Ä–∏ leverage=5
net_pnl_pct = gross_pnl_pct - commission_pct
```

**–í—ã–≤–æ–¥:** Leverage —É–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–º–∏—Å—Å–∏—è—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ! –ù–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –¢–ê–ë–õ–ò–¶–ê –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ü–∞—Ç—á | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|-----------|------|--------|-------|
| #1 | SL/TP/Max_Holding per-symbol | ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ | `parameter_provider.py:201-225`, `config_futures.yaml:42-43` |
| #2 | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã Adaptive | ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ | `parameter_provider.py:368-390`, `config_futures.yaml:46-52` |
| #3 | –§–∏–ª—å—Ç—Ä—ã –ü–æ—Ä–æ–≥–∏ Adaptive | ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | - |
| #4 | –†–µ–∂–∏–º—ã –ü–æ –ë–∞–ª–∞–Ω—Å—É | ‚ùå –ù–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ |
| #5 | PnL Adaptive –ü–æ Leverage | ‚úÖ –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | `exit_analyzer.py:653-655` |

---

## üéØ –ß–¢–û –î–ê–õ–¨–®–ï

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ `signal_generator.py`**
   - –ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 92-103) –Ω–∞ –≤—ã–∑–æ–≤ `get_indicator_params()`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

2. **–î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥**
   - –î–ª—è –¥—Ä—É–≥–∏—Ö –ø–∞—Ä (SOL-USDT, BTC-USDT) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
   - –î–ª—è –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (EMA, SMA, MACD) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

3. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è per-symbol –ø–∞—Ä–∞–º–µ—Ç—Ä
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢

**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ:** 2 –∏–∑ 3 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ç—á–µ–π (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã 1 –∏ 2)  
**–£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:** 2 –ø–∞—Ç—á–∞ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã 3 –∏ 5)  
**–ù–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–æ:** 1 –ø–∞—Ç—á (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4 - –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

**–û–±—â–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è **70% ‚Üí 85%** (—É–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ 15%)

**–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ SL/TP –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ ETH-USDT —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã—Ö–æ–¥–∞ —Ç–µ–ø–µ—Ä—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã per-symbol

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 29.12.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø–∞—Ç—á–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã, –±–æ—Ç —Å—Ç–∞–ª –±–æ–ª–µ–µ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º


