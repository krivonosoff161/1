# –†–ï–ê–õ–ò–ó–û–í–ê–ù–´ –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –ö–ê–ñ–î–û–ô –ü–ê–†–´

**–î–∞—Ç–∞:** 23 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1. –õ–æ–≥–∏–∫–∞ –¥–ª—è SHORT/LONG ‚úÖ

**–î–ª—è BUY (LONG):**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `best_ask` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏)
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è offset –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: per-symbol+regime ‚Üí per-symbol ‚Üí per-regime ‚Üí global)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä

**–î–ª—è SELL (SHORT):**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `best_bid` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏)
- ‚úÖ –í—ã—á–∏—Ç–∞–µ—Ç—Å—è offset –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: per-symbol+regime ‚Üí per-symbol ‚Üí per-regime ‚Üí global)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä

**–í—ã–≤–æ–¥:** ‚úÖ –õ–æ–≥–∏–∫–∞ –¥–ª—è SHORT/LONG –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä

---

## ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–´ –ù–ê–°–¢–†–û–ô–ö–ò –î–õ–Ø –ö–ê–ñ–î–û–ô –ü–ê–†–´

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ñ–∏–≥–∞:

```yaml
order_executor:
  limit_order:
    limit_offset_percent: 0.05  # –ë–∞–∑–æ–≤—ã–π offset (fallback)
    by_regime:
      trending: 0.08
      ranging: 0.12
      choppy: 0.10
    
    # ‚úÖ –ù–û–í–û–ï: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã
    by_symbol:
      "BTC-USDT":
        limit_offset_percent: 0.03  # –ú–∞–ª–µ–Ω—å–∫–∏–π offset –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
        by_regime:
          trending: 0.05
          ranging: 0.08
          choppy: 0.06
      "ETH-USDT":
        limit_offset_percent: 0.04
        by_regime:
          trending: 0.06
          ranging: 0.10
          choppy: 0.08
      "SOL-USDT":
        limit_offset_percent: 0.05
        by_regime:
          trending: 0.08
          ranging: 0.12
          choppy: 0.10
      "DOGE-USDT":
        limit_offset_percent: 0.08  # –ë–æ–ª—å—à–∏–π offset –¥–ª—è –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
        by_regime:
          trending: 0.10
          ranging: 0.15
          choppy: 0.12
      "XRP-USDT":
        limit_offset_percent: 0.10  # –ë–æ–ª—å—à–∏–π offset –¥–ª—è –Ω–∏–∑–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
        by_regime:
          trending: 0.12
          ranging: 0.18
          choppy: 0.15
```

---

## ‚úÖ –ü–†–ò–û–†–ò–¢–ï–¢ –ù–ê–°–¢–†–û–ï–ö

### –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **Per-symbol + Per-regime** (–µ—Å–ª–∏ –µ—Å—Ç—å)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `BTC-USDT` –≤ —Ä–µ–∂–∏–º–µ `ranging` ‚Üí `0.08%`

2. **Per-symbol** (–µ—Å–ª–∏ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç —Ä–µ–∂–∏–º–∞)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: `BTC-USDT` –±–µ–∑ —Ä–µ–∂–∏–º–∞ ‚Üí `0.03%`

3. **Per-regime** (–µ—Å–ª–∏ per-symbol –Ω–µ –Ω–∞–π–¥–µ–Ω)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: —Ä–µ–∂–∏–º `ranging` ‚Üí `0.12%`

4. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π** (fallback)
   - –ù–∞–ø—Ä–∏–º–µ—Ä: –±–∞–∑–æ–≤—ã–π `limit_offset_percent: 0.05%`

---

## ‚úÖ –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:

- **BTC-USDT:** –º–µ–Ω—å—à–∏–π offset (0.03-0.08%) ‚Üí –±—ã—Å—Ç—Ä–µ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ
- **XRP-USDT:** –±–æ–ª—å—à–∏–π offset (0.10-0.18%) ‚Üí –≥–∞—Ä–∞–Ω—Ç–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è

### 2. –≠–∫–æ–Ω–æ–º–∏—è –∫–æ–º–∏—Å—Å–∏–π:

- **BTC-USDT:** –º–µ–Ω—å—à–∏–π offset ‚Üí –±–æ–ª—å—à–µ —à–∞–Ω—Å–æ–≤ –Ω–∞ maker fee (0.02%)
- **XRP-USDT:** –±–æ–ª—å—à–∏–π offset ‚Üí –≥–∞—Ä–∞–Ω—Ç–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è, –Ω–æ taker fee (0.05%)

### 3. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:

- –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã (–ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å, —Å–ø—Ä–µ–¥)
- –£–ª—É—á—à–∞–µ—Ç –æ–±—â—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã
- –°–Ω–∏–∂–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–∏—Å–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

---

## ‚úÖ –õ–û–ì–ò–ö–ê –í –ö–û–î–ï

### –ú–µ—Ç–æ–¥: `_calculate_limit_price` –≤ `order_executor.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `by_symbol` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
2. ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: per-symbol+regime ‚Üí per-symbol ‚Üí per-regime ‚Üí global
3. ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ offset –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
```
üí∞ Per-symbol+regime offset –¥–ª—è BTC-USDT (ranging): 0.08%
üí∞ Per-symbol offset –¥–ª—è BTC-USDT: 0.03%
üí∞ Per-regime offset –¥–ª—è ranging: 0.12%
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–ª—è –≤—Å–µ—Ö –ø–∞—Ä:

- ‚úÖ **BTC-USDT:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π offset –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏
- ‚úÖ **ETH-USDT:** –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π offset
- ‚úÖ **SOL-USDT:** –°—Ä–µ–¥–Ω–∏–π offset
- ‚úÖ **DOGE-USDT:** –ë–æ–ª—å—à–∏–π offset –¥–ª—è –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **XRP-USDT:** –ë–æ–ª—å—à–∏–π offset –¥–ª—è –Ω–∏–∑–∫–æ–π –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç–∏

### –î–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤:

- ‚úÖ **Trending:** –ú–µ–Ω—å—à–∏–π offset (–±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ —Ç—Ä–µ–Ω–¥–µ)
- ‚úÖ **Ranging:** –ë–æ–ª—å—à–∏–π offset (–≥–∞—Ä–∞–Ω—Ç–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –±–æ–∫–æ–≤–∏–∫–µ)
- ‚úÖ **Choppy:** –°—Ä–µ–¥–Ω–∏–π offset (–±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ –≥–∞—Ä–∞–Ω—Ç–∏–µ–π)

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û –ò –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

