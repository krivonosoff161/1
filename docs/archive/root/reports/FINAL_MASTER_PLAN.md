# –§–ò–ù–ê–õ–¨–ù–´–ô –ú–ê–°–¢–ï–†-–ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-12-20  
**–°—Ç–∞—Ç—É—Å:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

---

## üìä –°–í–û–î–ö–ê –ü–†–û–ë–õ–ï–ú –ò –†–ï–®–ï–ù–ò–ô

### üî¥ –ö–†–ò–¢–ò–ß–ù–û (–¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–º):

1. **–ü–†–û–ë–õ–ï–ú–ê #1: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–µ —É–±—ã—Ç–∫–∏ ($1-4), –º–∞–ª–µ–Ω—å–∫–∏–µ –ø—Ä–∏–±—ã–ª–∏ ($0.02, $0.3)
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `peak_profit` –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

2. **–ü–†–û–ë–õ–ï–ú–ê #2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** `allow_concurrent=false` –±–ª–æ–∫–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ 5 –ø–æ–∑–∏—Ü–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

3. **–ü–†–û–ë–õ–ï–ú–ê #3: –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤ (11.6%)**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–ª—å–∫–æ 204 –∏–∑ 1764 –æ—Ä–¥–µ—Ä–æ–≤ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è
   - **–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

4. **–ü–†–û–ë–õ–ï–ú–ê #4: –û—à–∏–±–∫–∏ 51006 (54 —Ä–∞–∑–∞)**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –¶–µ–Ω–∞ –≤–Ω–µ –ª–∏–º–∏—Ç–æ–≤ –±–∏—Ä–∂–∏
   - **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ù–û

### üü† –í–´–°–û–ö–ê–Ø (–¥–µ–ª–∞—Ç—å –≤—Ç–æ—Ä—ã–º):

5. **–ü–†–û–ë–õ–ï–ú–ê #5: –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏, –ª–æ–≥–∏–∫—É, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   - **–†–µ—à–µ–Ω–∏–µ:** –ê—É–¥–∏—Ç –≤—Å–µ—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ PnL, —Ä–∞–∑–º–µ—Ä–æ–≤, –∫–æ–º–∏—Å—Å–∏–π
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ê–Ø

6. **–ü–†–û–ë–õ–ï–ú–ê #6: –ê—É–¥–∏—Ç API –≤—ã–∑–æ–≤–æ–≤**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–ª–∫–∏–µ –æ—à–∏–±–∫–∏ API –≤—ã–∑–æ–≤–æ–≤
   - **–†–µ—à–µ–Ω–∏–µ:** –°–≤–µ—Ä–∏—Ç—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π OKX, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í–´–°–û–ö–ê–Ø

### üü° –°–†–ï–î–ù–Ø–Ø (–¥–µ–ª–∞—Ç—å —Ç—Ä–µ—Ç—å–∏–º):

7. **–ü–†–û–ë–õ–ï–ú–ê #7: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–Ω—Å—Ç—Ä-—Ñ–∞–π–ª–æ–≤**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** position_manager.py - 5928 —Å—Ç—Ä–æ–∫!
   - **–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–Ø–Ø

### üü¢ –ù–ò–ó–ö–ê–Ø (–ø–æ –∂–µ–ª–∞–Ω–∏—é):

8. **–ü–†–û–ë–õ–ï–ú–ê #8: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ª–µ–≤–µ—Ä–∏–¥–∂**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ: –ª–µ–≤–µ—Ä–∏–¥–∂ 3,5,10,20,30 –ø–æ –∫–∞—á–µ—Å—Ç–≤—É —Å–∏–≥–Ω–∞–ª–∞
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `risk/adaptive_leverage.py`
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ê–Ø

---

## ‚ùì –£–¢–û–ß–ù–Ø–Æ–©–ò–ï –í–û–ü–†–û–°–´

### –í–û–ü–†–û–° #1: –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

**–ù–∞–π–¥–µ–Ω–æ:**
- `_update_peak_profit()` –æ–±–Ω–æ–≤–ª—è–µ—Ç `peak_profit` –≤ `position["_big_profit_max"]`
- `big_profit_exit` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `profit_drawdown >= 30%` –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- **–ù–û:** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `peak_profit` –≤ ExitAnalyzer –∏ –æ–±—ã—á–Ω—ã—Ö TP/SL –ø—Ä–æ–≤–µ—Ä–∫–∞—Ö!

**–í–æ–ø—Ä–æ—Å—ã:**

1. **–ú–æ–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤?**
   - –ö–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ–∑–∏—Ü–∏—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –ø—Ä–∏–±—ã–ª—å—é ($0.02, $0.3)?
   - –ö–∞–∫–æ–π –±—ã–ª `peak_profit` (`_big_profit_max`) –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç?
   - –ö–∞–∫–æ–π –±—ã–ª —Ç–µ–∫—É—â–∏–π PnL?
   - –ü–æ –∫–∞–∫–æ–π –ø—Ä–∏—á–∏–Ω–µ –∑–∞–∫—Ä—ã–ª–∞—Å—å (TP, SL, ExitAnalyzer, timeout)?

2. **–ö–∞–∫–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å?**
   - –ö–∞–∫–æ–π –ø–æ—Ä–æ–≥ –¥–ª—è "–Ω–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –µ—Å–ª–∏ current_profit < peak_profit * X"? (–Ω–∞–ø—Ä–∏–º–µ—Ä, 70%)
   - –î–æ–ª–∂–µ–Ω –ª–∏ –±–æ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å `peak_profit` –≤–æ –í–°–ï–• –º–µ—Å—Ç–∞—Ö –∑–∞–∫—Ä—ã—Ç–∏—è (TP, SL, ExitAnalyzer)?

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/positions/exit_analyzer.py:_generate_exit_for_*()` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit
- `src/strategies/scalping/futures/position_manager.py:_check_tp_only()` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit
- `src/strategies/scalping/futures/position_manager.py:_check_sl()` - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit

---

### –í–û–ü–†–û–° #2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–æ–≤—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
- `signal_coordinator.py:1034-1046` - –±–ª–æ–∫–∏—Ä—É–µ—Ç –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞
- `allow_concurrent_positions: false` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

**–í–æ–ø—Ä–æ—Å—ã:**

1. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∂–µ–ª–∞–µ–º–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è:**
   - ‚úÖ –†–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ 5 –ø–æ–∑–∏—Ü–∏–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?
   - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ –ø—Ä–∏ –Ω–æ–≤–æ–º —Å–∏–≥–Ω–∞–ª–µ?
   - ‚úÖ –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –µ—Å–ª–∏ —Å–∏–≥–Ω–∞–ª –≤ —Ç–æ–º –∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏?
   - ‚úÖ –ò–ª–∏ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è —É–∂–µ –±–æ–ª—å—à–∞—è?

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `src/strategies/scalping/futures/coordinators/signal_coordinator.py:1034-1046`
- `config/config_futures.yaml:37` - –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `true`

---

### –í–û–ü–†–û–° #3: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤

**–í–æ–ø—Ä–æ—Å—ã:**

1. **–¢–µ–∫—É—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - –ö–∞–∫–æ–π `limit_offset_percent` –≤ –∫–æ–Ω—Ñ–∏–≥–µ? (–Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏)
   - –ö–∞–∫–æ–π `max_wait_seconds` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω? (–Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏)

2. **–ñ–µ–ª–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   - –ö–∞–∫–æ–π `limit_offset_percent` –æ–ø—Ç–∏–º–∞–ª–µ–Ω? (0.05%? 0.1%?)
   - –ö–∞–∫–æ–π `max_wait_seconds` –æ–ø—Ç–∏–º–∞–ª–µ–Ω? (15 —Å–µ–∫? 30 —Å–µ–∫?)

---

## üìã –î–ï–¢–ê–õ–¨–ù–´–ô –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### üî¥ –ó–ê–î–ê–ß–ê #1: –ò–°–ü–†–ê–í–ò–¢–¨ –õ–û–ì–ò–ö–£ –ó–ê–ö–†–´–¢–ò–Ø –ü–û–ó–ò–¶–ò–ô

#### –®–∞–≥ 1.1: –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
- [ ] –ù–∞–π—Ç–∏ –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `peak_profit` (`_big_profit_max`)
- [ ] –ù–∞–π—Ç–∏ –≤—Å–µ –≤—ã–∑–æ–≤—ã `close_position()` –∏ `_close_position_by_reason()`
- [ ] –°–æ—Å—Ç–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–µ—Å—Ç –≥–¥–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –æ –∑–∞–∫—Ä—ã—Ç–∏–∏

#### –®–∞–≥ 1.2: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit –≤ ExitAnalyzer
- [ ] –í `exit_analyzer.py:_generate_exit_for_trending()` –¥–æ–±–∞–≤–∏—Ç—å:
  ```python
  # –ü–æ–ª—É—á–∞–µ–º peak_profit –∏–∑ –ø–æ–∑–∏—Ü–∏–∏
  peak_profit = position.get("_big_profit_max", 0)
  if peak_profit > 0 and pnl_percent < peak_profit * 0.7:
      # –ù–µ –∑–∞–∫—Ä—ã–≤–∞—Ç—å - —Ç–µ—Ä—è–µ–º 30% –ø—Ä–∏–±—ã–ª–∏
      return {"action": "hold", "reason": "profit_too_low_vs_peak"}
  ```
- [ ] –¢–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è `_generate_exit_for_ranging()` –∏ `_generate_exit_for_choppy()`

#### –®–∞–≥ 1.3: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit –≤ TP/SL
- [ ] –í `position_manager.py:_check_tp_only()` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit
- [ ] –í `position_manager.py:_check_sl()` –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É peak_profit (—Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π)

#### –®–∞–≥ 1.4: –£–ª—É—á—à–∏—Ç—å SL –ª–æ–≥–∏–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—á–µ–º—É SL —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –±–æ–ª—å—à–∏—Ö —É–±—ã—Ç–∫–∞—Ö
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ SL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Ü–µ–Ω—É –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ SL

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø–æ–∑–∏—Ü–∏–∏ —Å –º–∞–ª–µ–Ω—å–∫–æ–π –ø—Ä–∏–±—ã–ª—å—é, –µ—Å–ª–∏ –±—ã–ª –±–æ–ª—å—à–∏–π peak_profit

---

### üî¥ –ó–ê–î–ê–ß–ê #2: –£–ë–†–ê–¢–¨ –ë–õ–û–ö–ò–†–û–í–ö–£ –ù–û–í–´–• –û–†–î–ï–†–û–í

#### –®–∞–≥ 2.1: –ò–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É –≤ signal_coordinator.py
- [ ] –£–±—Ä–∞—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –≤ —Å—Ç—Ä–æ–∫–∞—Ö 1034-1046
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π:
  ```python
  if has_opposite_position:
      # –ó–∞–∫—Ä—ã—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—É—é –ø–æ–∑–∏—Ü–∏—é
      await self.orchestrator.close_position(symbol, "signal_reversal")
  elif has_same_direction_position:
      # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä - —É–≤–µ–ª–∏—á–∏—Ç—å –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å
      if current_size < max_size:
          # –£–≤–µ–ª–∏—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é
      else:
          # –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å–∏–≥–Ω–∞–ª
  ```

#### –®–∞–≥ 2.2: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `allow_concurrent_positions: true` –≤ `config_futures.yaml:37`
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `max_open_positions: 5` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç —Å–º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–æ 5 –ø–æ–∑–∏—Ü–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ

---

### üî¥ –ó–ê–î–ê–ß–ê #3: –£–õ–£–ß–®–ò–¢–¨ –≠–§–§–ï–ö–¢–ò–í–ù–û–°–¢–¨ –û–†–î–ï–†–û–í

#### –®–∞–≥ 3.1: –£–ª—É—á—à–∏—Ç—å —Ä–∞—Å—á–µ—Ç –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã
- [ ] –ù–∞–π—Ç–∏ `limit_offset_percent` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- [ ] –£–º–µ–Ω—å—à–∏—Ç—å –µ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 0.2% –¥–æ 0.05%)
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∏–∑ —Å—Ç–∞–∫–∞–Ω–∞ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–≤–µ–∂–µ—Å—Ç–∏ —Ü–µ–Ω—ã (–Ω–µ —Å—Ç–∞—Ä—à–µ 1 —Å–µ–∫—É–Ω–¥—ã)

#### –®–∞–≥ 3.2: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã
- [ ] –ù–∞–π—Ç–∏ `max_wait_seconds` –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å –µ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 15 –¥–æ 30 —Å–µ–∫)
- [ ] –ù–µ –æ—Ç–º–µ–Ω—è—Ç—å –æ—Ä–¥–µ—Ä –µ—Å–ª–∏ —Ü–µ–Ω–∞ –±–ª–∏–∑–∫–∞ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é (< 0.1%)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤ —É–≤–µ–ª–∏—á–∏—Ç—Å—è —Å 11.6% –¥–æ 60%+

---

### üî¥ –ó–ê–î–ê–ß–ê #4: –ò–°–ü–†–ê–í–ò–¢–¨ –û–®–ò–ë–ö–ò 51006

#### –®–∞–≥ 4.1: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–º–∏—Ç–æ–≤
- [ ] –í `order_executor.py:_place_limit_order()` –¥–æ–±–∞–≤–∏—Ç—å:
  ```python
  # –ü–æ–ª—É—á–∞–µ–º –ª–∏–º–∏—Ç—ã –±–∏—Ä–∂–∏
  price_limits = await self.client.get_price_limits(symbol)
  if not price_limits:
      logger.warning(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ª–∏–º–∏—Ç—ã –¥–ª—è {symbol}, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–∫—É—â—É—é —Ü–µ–Ω—É")
  else:
      max_buy = price_limits.get("max_buy_price", 0)
      min_sell = price_limits.get("min_sell_price", 0)
      
      # –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º —Ü–µ–Ω—É –µ—Å–ª–∏ –æ–Ω–∞ –≤–Ω–µ –ª–∏–º–∏—Ç–æ–≤
      if side == "buy" and limit_price > max_buy:
          logger.warning(f"‚ö†Ô∏è –¶–µ–Ω–∞ {limit_price} > max_buy {max_buy}, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º")
          limit_price = max_buy * 0.999
      elif side == "sell" and limit_price < min_sell:
          logger.warning(f"‚ö†Ô∏è –¶–µ–Ω–∞ {limit_price} < min_sell {min_sell}, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º")
          limit_price = min_sell * 1.001
  ```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û—à–∏–±–∫–∏ 51006 –∏—Å—á–µ–∑–Ω—É—Ç

---

### üü† –ó–ê–î–ê–ß–ê #5: –ü–†–û–í–ï–†–ò–¢–¨ –ú–ê–¢–ï–ú–ê–¢–ò–ö–£

#### –®–∞–≥ 5.1: –ê—É–¥–∏—Ç —Ä–∞—Å—á–µ—Ç–æ–≤ PnL
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `trailing_stop_loss.py:get_profit_pct()` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –æ—Ç –º–∞—Ä–∂–∏?
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `exit_analyzer.py:_calculate_pnl_percent()` - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç?
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–æ–≤ (ctVal, size, notional)

#### –®–∞–≥ 5.2: –ê—É–¥–∏—Ç –ª–æ–≥–∏–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —É—Å–ª–æ–≤–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–π (regime, entry_time, etc.)
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –Ω–µ—Ç "—Ñ–∞–Ω—Ç–∞–∑–∏—Ä–æ–≤–∞–Ω–∏—è" –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

---

### üü† –ó–ê–î–ê–ß–ê #6: –ê–£–î–ò–¢ API –í–´–ó–û–í–û–í

#### –®–∞–≥ 6.1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –≤—ã–∑–æ–≤—ã
- [ ] –°–≤–µ—Ä–∏—Ç—å `futures_client.py` —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π OKX
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (clOrdId, —Ä–∞–∑–º–µ—Ä—ã, —Ü–µ–Ω—ã)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

---

### üü° –ó–ê–î–ê–ß–ê #7: –†–ï–§–ê–ö–¢–û–†–ò–ù–ì

#### –®–∞–≥ 7.1: –†–∞–∑–±–∏—Ç—å position_manager.py (5928 —Å—Ç—Ä–æ–∫)
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `_check_tp_only()` ‚Üí `positions/take_profit_manager.py`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `_check_sl()` ‚Üí `positions/stop_loss_manager.py`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `_check_profit_harvesting()` ‚Üí `positions/profit_harvester.py`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `_update_peak_profit()` ‚Üí `positions/peak_profit_tracker.py`
- [ ] –í—ã–Ω–µ—Å—Ç–∏ `_check_position_safety()` ‚Üí `risk/position_safety_checker.py`
- [ ] –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é –≤ `position_manager.py`

---

## üéØ –ü–û–†–Ø–î–û–ö –í–´–ü–û–õ–ù–ï–ù–ò–Ø

### –ù–µ–¥–µ–ª—è 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø
- **–î–µ–Ω—å 1-2:** –ó–∞–¥–∞—á–∞ #1 (–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π)
- **–î–µ–Ω—å 3:** –ó–∞–¥–∞—á–∞ #2 (–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Ä–¥–µ—Ä–æ–≤)
- **–î–µ–Ω—å 4:** –ó–∞–¥–∞—á–∞ #3 (—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ä–¥–µ—Ä–æ–≤)
- **–î–µ–Ω—å 5:** –ó–∞–¥–∞—á–∞ #4 (–æ—à–∏–±–∫–∏ 51006)

### –ù–µ–¥–µ–ª—è 2: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø
- **–î–µ–Ω—å 1-2:** –ó–∞–¥–∞—á–∞ #5 (–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑)
- **–î–µ–Ω—å 3-4:** –ó–∞–¥–∞—á–∞ #6 (–∞—É–¥–∏—Ç API)

### –ù–µ–¥–µ–ª—è 3-4: –†–ï–§–ê–ö–¢–û–†–ò–ù–ì
- **–î–µ–Ω—å 1-5:** –ó–∞–¥–∞—á–∞ #7 (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –º–æ–Ω—Å—Ç—Ä-—Ñ–∞–π–ª–æ–≤)

---

## ‚úÖ –ì–û–¢–û–í –ù–ê–ß–ê–¢–¨

**–ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞—á–Ω—É —Å –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ #1 (–∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–π)!**

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:**
1. –ú–æ–∂–Ω–æ –ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤ –∫–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ–∑–∏—Ü–∏—è —Å –º–∞–ª–µ–Ω—å–∫–æ–π –ø—Ä–∏–±—ã–ª—å—é?
2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –¥–æ 5 –ø–æ–∑–∏—Ü–∏–π, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω—ã–µ?

---

**–û–∂–∏–¥–∞—é –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã!** ‚úÖ



