# ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –í–°–ï–• –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

**–î–∞—Ç–∞:** 2025-11-15  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´**

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### **1. –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è SELL** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py` (—Å—Ç—Ä–æ–∫–∏ 347-359)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –£–±—Ä–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `best_ask * 0.999`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `best_bid` –∏ `min_sell_price`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ –ø–∞—Ä–∞–º)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –õ–∏–º–∏—Ç–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ –¥–ª—è SELL —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–≤—è—Ç—Å—è –±–ª–∏–∑–∫–æ –∫ `best_bid` (–ª—É—á—à–∞—è —Ü–µ–Ω–∞ –ø–æ–∫—É–ø–∫–∏) –¥–ª—è **–≤—Å–µ—Ö –ø–∞—Ä**.

---

### **2. `post_only` –¥–ª—è —Ä–µ–∂–∏–º–æ–≤** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py` (—Å—Ç—Ä–æ–∫–∏ 415-431)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `regime` –≤ `_place_limit_order`
- ‚úÖ `post_only` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `by_regime[regime].post_only`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ
- –î–ª—è `ranging`: `post_only=true` (maker fee 0.02% –≤–º–µ—Å—Ç–æ taker 0.05%)
- –î–ª—è `trending`: `post_only=false` (–±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)
- –î–ª—è `choppy`: `post_only=false` (–±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ)

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞.

---

### **3. `max_wait_seconds` –¥–ª—è —Ä–µ–∂–∏–º–æ–≤** ‚úÖ

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py` (—Å—Ç—Ä–æ–∫–∏ 1969-1981)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û**

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
- ‚úÖ `max_wait_seconds` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `by_regime[regime].max_wait_seconds`
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ
- –î–ª—è `ranging`: 120 —Å–µ–∫ (–≤–º–µ—Å—Ç–æ –±–∞–∑–æ–≤–æ–≥–æ 60)
- –î–ª—è `trending`: 45 —Å–µ–∫
- –î–ª—è `choppy`: 30 —Å–µ–∫

**–ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ —Ä—ã–Ω–∫–∞.

---

## ‚úÖ –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ –î–õ–Ø –í–°–ï–• –ü–ê–†

### **–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:**

1. ‚úÖ **–õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è SELL** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä (–Ω–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ –ø–∞—Ä–∞–º)
2. ‚úÖ **`post_only`** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
3. ‚úÖ **`max_wait_seconds`** - –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø–æ —Ä–µ–∂–∏–º—É –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏)
4. ‚úÖ **–†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `regime_manager`

### **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

1. **–î–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –æ—Ç–¥–µ–ª—å–Ω–æ:**
   - `regime_manager` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞ (trending/ranging/choppy)
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ `by_regime[regime]` –≤ –∫–æ–Ω—Ñ–∏–≥–µ

2. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**
   - –ü—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–Ω–æ–≥–æ –æ—Ä–¥–µ—Ä–∞: `post_only` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `by_regime[regime].post_only`
   - –ü—Ä–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –æ—Ä–¥–µ—Ä–æ–≤: `max_wait_seconds` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `by_regime[regime].max_wait_seconds`
   - –ü—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ –ª–∏–º–∏—Ç–Ω–æ–π —Ü–µ–Ω—ã: `limit_offset_percent` –±–µ—Ä–µ—Ç—Å—è –∏–∑ `by_regime[regime].limit_offset_percent`

3. **–ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞:**
   - –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ `config_futures.yaml`
   - –ù–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä
   - –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ

---

## ‚úÖ –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø

**–§–∞–π–ª:** `config/config_futures.yaml`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —Ä–µ–∂–∏–º–æ–≤:**
```yaml
order_executor:
  limit_order:
    by_regime:
      trending:
        limit_offset_percent: 0.08
        max_wait_seconds: 45
        use_market_order: false
      ranging:
        limit_offset_percent: 0.12
        max_wait_seconds: 120
        post_only: true  # Maker fee 0.02% –≤–º–µ—Å—Ç–æ taker 0.05%
      choppy:
        limit_offset_percent: 0.10
        max_wait_seconds: 30
        use_market_order: false
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –ü–ê–†–ê–ú–ï–¢–†–´ –í –ö–û–ù–§–ò–ì–ï**

---

## ‚úÖ –ò–¢–û–ì–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê

### **–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. ‚úÖ –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è SELL –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä)
2. ‚úÖ `post_only` –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä)
3. ‚úÖ `max_wait_seconds` –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä)

### **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å:**

- ‚úÖ –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ —Ä–µ–∂–∏–º—É —Ä—ã–Ω–∫–∞
- ‚úÖ –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ –ø–∞—Ä–∞–º
- ‚úÖ –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–æ–Ω—Ñ–∏–≥–µ
- ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è –≤—Å–µ—Ö –ø–∞—Ä

### **–¢–æ—á–Ω–æ—Å—Ç—å:**

- ‚úÖ –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (best_bid –¥–ª—è SELL, best_ask –¥–ª—è BUY)
- ‚úÖ `post_only` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ —Ä–µ–∂–∏–º—É
- ‚úÖ `max_wait_seconds` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ—á–Ω–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –ø–æ —Ä–µ–∂–∏–º—É

---

## üéØ –°–¢–ê–¢–£–°

‚úÖ **–í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø –ü–†–ò–ú–ï–ù–ï–ù–´ –ò –†–ê–ë–û–¢–ê–Æ–¢ –ê–î–ê–ü–¢–ò–í–ù–û –î–õ–Ø –í–°–ï–• –ü–ê–†**

**–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –±–æ—Ç–∞ –¥–ª—è —Å–±–æ—Ä–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏!**



