# üöÄ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –£–õ–£–ß–®–ï–ù–ò–ô –õ–û–ì–ò–†–û–í–ê–ù–ò–Ø

## üìã –ü–õ–ê–ù –†–ê–ë–û–¢–´ (–ü–†–ò–û–†–ò–¢–ï–¢ 1)

### ‚úÖ –ó–∞–¥–∞—á–∞ 1: JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏–π (30 –º–∏–Ω)
### ‚úÖ –ó–∞–¥–∞—á–∞ 2: –£–ª—É—á—à–µ–Ω–∏–µ orchestrator._close_position (15 –º–∏–Ω)
### üî¥ –ó–∞–¥–∞—á–∞ 3: Exchange-side closure detection (30 –º–∏–Ω) - **–ö–†–ò–¢–ò–ß–ù–û!**
### üî¥ –ó–∞–¥–∞—á–∞ 4: Partial TP logging (15 –º–∏–Ω) - **–ö–†–ò–¢–ò–ß–ù–û!**

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~1.5 —á–∞—Å–∞

---

## üî¥ –ó–ê–î–ê–ß–ê 3: Exchange-side closure detection

**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py`

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
1. –ú–µ—Ç–æ–¥ `_check_exchange_closures()` –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏–π –Ω–∞ –±–∏—Ä–∂–µ
2. –í—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π —Å –ø–æ–º–µ—Ç–∫–æ–π "EXCHANGE_SIDE"
4. JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–∫—Ä—ã—Ç–∏–π

---

## üî¥ –ó–ê–î–ê–ß–ê 4: Partial TP logging

**–§–∞–π–ª—ã:**
- `src/strategies/scalping/futures/position_manager.py` (–º–µ—Ç–æ–¥ `close_partial_position`)
- `src/strategies/scalping/futures/positions/exit_analyzer.py` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**
1. –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Partial TP (–∑–∞–∫—Ä—ã—Ç–æ/–æ—Å—Ç–∞–ª–æ—Å—å, PnL)
2. JSON-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `logs/futures/structured/partial_tp_YYYY-MM-DD.jsonl`
3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ Partial TP

---

**–°—Ç–∞—Ç—É—Å:** üî¥ –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏








