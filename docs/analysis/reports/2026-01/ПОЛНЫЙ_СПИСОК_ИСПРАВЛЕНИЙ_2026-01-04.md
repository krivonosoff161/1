# üìã –ü–û–õ–ù–´–ô –°–ü–ò–°–û–ö –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô - 04.01.2026

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 04.01.2026  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** –ê–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π —Ç–æ—Ä–≥–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∑–∞ 03-04.01.2026  
**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 50+  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|------------|-----------|
| üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ | 25+ | –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ |
| üü° –í–∞–∂–Ω—ã–µ | 20+ | –í –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è |
| üü¢ –£–ª—É—á—à–µ–Ω–∏—è | 10+ | –ü–æ –º–µ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ |

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (25+)

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #1: Market ‚Üí Limit –æ—Ä–¥–µ—Ä–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:272`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è market –æ—Ä–¥–µ—Ä–∞ –≤–º–µ—Å—Ç–æ limit, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∫–æ–º–∏—Å—Å–∏–∏ 0.05% –≤–º–µ—Å—Ç–æ 0.02%  
**–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—â–µ—Ä–±:** $108/–º–µ—Å—è—Ü –ø—Ä–∏ 200 —Å–¥–µ–ª–∫–∞—Ö/–¥–µ–Ω—å

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/order_executor.py:272
def _determine_order_type(self, signal: Dict[str, Any]) -> str:
    """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–≥–Ω–∞–ª–∞"""
    return "market"  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è market –≤–º–µ—Å—Ç–æ limit
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/order_executor.py:272
def _determine_order_type(self, signal: Dict[str, Any]) -> str:
    """–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∏–≥–Ω–∞–ª–∞"""
    return "limit"  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º limit –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –∫–æ–º–∏—Å—Å–∏–π
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
Market –æ—Ä–¥–µ—Ä–∞ –∏–º–µ—é—Ç –∫–æ–º–∏—Å—Å–∏—é 0.05% (taker), –∞ limit –æ—Ä–¥–µ—Ä–∞ - 0.02% (maker). –ü—Ä–∏ 200 —Å–¥–µ–ª–∫–∞—Ö –≤ –¥–µ–Ω—å –∏ —Å—Ä–µ–¥–Ω–µ–º —Ä–∞–∑–º–µ—Ä–µ $100 –Ω–∞ —Å–¥–µ–ª–∫—É, —ç–∫–æ–Ω–æ–º–∏—è —Å–æ—Å—Ç–∞–≤–∏—Ç $108/–º–µ—Å—è—Ü.

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2026-01-03 12:35:19.123 | INFO | üìä –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞: type=market, –∫–æ–º–∏—Å—Å–∏—è=0.05%
# ‚ùå –í—Å–µ –æ—Ä–¥–µ—Ä–∞ —Ä–∞–∑–º–µ—â–∞—é—Ç—Å—è –∫–∞–∫ market
```

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –≤ TSL

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py:38`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∏—Å—Å–∏—è 0.10% (taker) –≤–º–µ—Å—Ç–æ 0.04% (maker) –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ TSL  
**–í–ª–∏—è–Ω–∏–µ:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Ç–æ—á–∫–∏ –∑–∞–∫—Ä—ã—Ç–∏—è, –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–∫—Ä—ã—Ç–∏—è

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/indicators/trailing_stop_loss.py:38
trading_fee_rate: float = 0.0010,  # 0.10% –Ω–∞ –∫—Ä—É–≥ (0.05% –≤—Ö–æ–¥ + 0.05% –≤—ã—Ö–æ–¥ –¥–ª—è taker)
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/indicators/trailing_stop_loss.py:38
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–º–∏—Å—Å–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ—Ä–¥–µ—Ä–∞
trading_fee_rate: float = 0.0004,  # 0.04% –Ω–∞ –∫—Ä—É–≥ (0.02% –≤—Ö–æ–¥ + 0.02% –≤—ã—Ö–æ–¥ –¥–ª—è maker)
# –ò–õ–ò –∞–¥–∞–ø—Ç–∏–≤–Ω–æ:
order_type = signal.get("order_type", "limit")
trading_fee_rate: float = 0.0004 if order_type == "limit" else 0.0010
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
TSL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ—á–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è —Å —É—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–π. –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è, –ø–æ–∑–∏—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å—Å—è —Ä–∞–Ω—å—à–µ –∏–ª–∏ –ø–æ–∑–∂–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #3: OrderCoordinator - post_only –æ—Ä–¥–µ—Ä–∞ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/order_coordinator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** POST_ONLY –æ—Ä–¥–µ—Ä–∞ –º–æ–≥—É—Ç –≤–∏—Å–µ—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –Ω–µ –∑–∞–º–µ–Ω—è—è—Å—å –Ω–∞ market –ø—Ä–∏ timeout

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/order_coordinator.py
async def monitor_limit_orders(self):
    while True:
        await asyncio.sleep(self.monitor_interval)
        for order_id, order_info in self.pending_orders.items():
            wait_time = time.time() - order_info['timestamp']
            if wait_time > max_wait_seconds:
                await self.client.cancel_order(symbol, order_id)
                # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: POST_ONLY –æ—Ä–¥–µ—Ä–∞ –Ω–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/order_coordinator.py
async def monitor_limit_orders(self):
    while True:
        await asyncio.sleep(self.monitor_interval)
        for order_id, order_info in self.pending_orders.items():
            wait_time = time.time() - order_info['timestamp']
            order_type = order_info.get("order_type", "limit")
            
            if wait_time > max_wait_seconds:
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: POST_ONLY –æ—Ä–¥–µ—Ä–∞ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ market –ø—Ä–∏ timeout
                if order_type == "post_only":
                    logger.warning(
                        f"‚ö†Ô∏è Post-only –æ—Ä–¥–µ—Ä {order_id} –¥–ª—è {symbol} –≤–∏—Å–∏—Ç {wait_time:.0f} —Å–µ–∫, "
                        f"–∑–∞–º–µ–Ω—è–µ–º –Ω–∞ market..."
                    )
                    await self.client.cancel_order(symbol, order_id)
                    # –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ market –æ—Ä–¥–µ—Ä —á–µ—Ä–µ–∑ order_executor
                    if self.order_executor:
                        signal = order_info.get("signal", {})
                        await self.order_executor.execute_order(signal, order_type="market")
                else:
                    await self.client.cancel_order(symbol, order_id)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
POST_ONLY –æ—Ä–¥–µ—Ä–∞ –º–æ–≥—É—Ç –≤–∏—Å–µ—Ç—å –¥–æ–ª–≥–æ, –µ—Å–ª–∏ —Ü–µ–Ω–∞ —É—à–ª–∞. –ü—Ä–∏ timeout –∏—Ö –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω—è—Ç—å –Ω–∞ market –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #4: OrderCoordinator - timeout –Ω–µ –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –Ω–∞–¥ price proximity

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/order_coordinator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ä–¥–µ—Ä–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ –∏–∑-–∑–∞ price proximity, –¥–∞–∂–µ –µ—Å–ª–∏ timeout –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/order_coordinator.py
if should_cancel_early:  # –¶–µ–Ω–∞ —É—à–ª–∞ >0.5%
    await self.client.cancel_order(symbol, order_id)
elif wait_time > max_wait_seconds:  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Timeout –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ price proximity
    await self.client.cancel_order(symbol, order_id)
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/order_coordinator.py
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: Timeout –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ price proximity
if wait_time > max_wait_seconds:  # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: Timeout –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
    logger.warning(
        f"‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω—ã–π –æ—Ä–¥–µ—Ä {order_id} –¥–ª—è {symbol} –≤–∏—Å–∏—Ç {wait_time:.0f} —Å–µ–∫ "
        f"(–ª–∏–º–∏—Ç: {max_wait_seconds} —Å–µ–∫), –æ—Ç–º–µ–Ω—è–µ–º –í–°–ï–ì–î–ê "
        f"(–¥–∞–∂–µ –µ—Å–ª–∏ —Ü–µ–Ω–∞ –±–ª–∏–∑–∫–∞ –∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—é)"
    )
    await self.client.cancel_order(symbol, order_id)
    # –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ market –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
    if replace_with_market:
        await self.order_executor.execute_order(signal, order_type="market")
elif should_cancel_early:  # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ timeout –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—É–ø–∏–ª
    logger.info(f"üí® –ë—ã—Å—Ç—Ä–∞—è –æ—Ç–º–µ–Ω–∞: —Ü–µ–Ω–∞ —É—à–ª–∞ {price_drift_pct:.2f}% –æ—Ç –æ—Ä–¥–µ—Ä–∞ {order_id}")
    await self.client.cancel_order(symbol, order_id)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
Timeout –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –ø–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω–µ–µ, —á–µ–º –Ω–µ–±–æ–ª—å—à–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ —Ü–µ–Ω–µ.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #5: TSL - min_hold_seconds_before_sl –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/stop_loss_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ SL —Ä–∞–Ω—å—à–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/stop_loss_manager.py
async def check_stop_loss(self, symbol: str, position: Dict[str, Any]) -> bool:
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ min_hold_seconds_before_sl
    if current_price <= stop_loss_price:
        await self.close_position_callback(position, "sl")
        return True
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/stop_loss_manager.py
async def check_stop_loss(self, symbol: str, position: Dict[str, Any]) -> bool:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º min_hold_seconds_before_sl –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
    metadata = await self.position_registry.get_metadata(symbol)
    if metadata and metadata.min_holding_seconds:
        position_age = (datetime.now(timezone.utc) - metadata.entry_time).total_seconds()
        if position_age < metadata.min_holding_seconds:
            logger.debug(
                f"‚è±Ô∏è Stop Loss –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –ø–æ–∑–∏—Ü–∏—è –¥–µ—Ä–∂–∏—Ç—Å—è {position_age:.1f} —Å–µ–∫ "
                f"< {metadata.min_holding_seconds:.1f} —Å–µ–∫"
            )
            return False
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ SL ...
    if current_price <= stop_loss_price:
        await self.close_position_callback(position, "sl")
        return True
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç–∏–π –∏–∑-–∑–∞ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π —Ü–µ–Ω—ã.

**–ü—Ä–∏–º–µ—Ä—ã –∏–∑ –ª–æ–≥–æ–≤:**
```
2026-01-03 12:35:21.205 | INFO | üõë –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ ETH-USDT: sl_reached (time=0.98 –º–∏–Ω)
# ‚ùå –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ —á–µ—Ä–µ–∑ 0.98 –º–∏–Ω, —Ö–æ—Ç—è min_holding=1.0 –º–∏–Ω
```

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #6: StopLossManager –∏ TakeProfitManager - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ TSL –∏ SL

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/stop_loss_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–æ–≤–µ—Ä–∫–∞ TSL –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É SL, –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/stop_loss_manager.py
async def check_stop_loss(self, symbol: str, position: Dict[str, Any]) -> bool:
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º TSL, –ø–æ—Ç–æ–º SL (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
    tsl_result = await self.trailing_sl_coordinator.check_position(symbol, position)
    if tsl_result:
        return tsl_result  # –ï—Å–ª–∏ TSL —Å—Ä–∞–±–æ—Ç–∞–ª, SL –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
    
    sl_result = await self._check_static_sl(symbol, position)
    return sl_result
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/stop_loss_manager.py
async def check_stop_loss(self, symbol: str, position: Dict[str, Any]) -> bool:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º TSL –∏ SL –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –¥—Ä—É–≥ –¥—Ä—É–≥–∞
    tsl_result = await self.trailing_sl_coordinator.check_position(symbol, position)
    sl_result = await self._check_static_sl(symbol, position)
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π (–±–ª–∏–∂–∞–π—à–∏–π –∫ —Ü–µ–Ω–µ)
    if tsl_result and sl_result:
        tsl_price = tsl_result.get("stop_price")
        sl_price = sl_result.get("stop_price")
        if position["side"] == "long":
            # –î–ª—è –ª–æ–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —Å—Ç–æ–ø (–±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π)
            use_tsl = tsl_price > sl_price
        else:
            # –î–ª—è —à–æ—Ä—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π —Å—Ç–æ–ø (–±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π)
            use_tsl = tsl_price < sl_price
        return tsl_result if use_tsl else sl_result
    
    return tsl_result or sl_result
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
TSL –∏ SL –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π (–±–ª–∏–∂–∞–π—à–∏–π –∫ —Ü–µ–Ω–µ) —Å—Ç–æ–ø.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #7: TakeProfitManager - —É—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π –≤ TP

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/take_profit_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–º–∏—Å—Å–∏–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Ä–∞—Å—á–µ—Ç–µ TP, –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ TP

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/take_profit_manager.py
async def check_take_profit(self, symbol: str, position: Dict[str, Any]) -> bool:
    pnl_percent = (current_price - entry_price) / entry_price * 100.0
    tp_percent = 2.0  # –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ö–æ–º–∏—Å—Å–∏–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è
    if pnl_percent >= tp_percent:
        await self.close_position_callback(position, "tp")
        return True
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/take_profit_manager.py
async def check_take_profit(self, symbol: str, position: Dict[str, Any]) -> bool:
    pnl_percent = (current_price - entry_price) / entry_price * 100.0
    tp_percent = 2.0  # –ò–∑ –∫–æ–Ω—Ñ–∏–≥–∞
    
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£—á–∏—Ç—ã–≤–∞–µ–º –∫–æ–º–∏—Å—Å–∏–∏ –≤ —Ä–∞—Å—á–µ—Ç–µ TP
    commission_config = getattr(self.scalping_config, "commission", {})
    commission_rate = (
        commission_config.get("trading_fee_rate", 0.0002) 
        if isinstance(commission_config, dict) 
        else getattr(commission_config, "trading_fee_rate", 0.0002)
    )
    leverage_tp = getattr(self.scalping_config, "leverage", 5) or 5
    commission_pct_from_margin = commission_rate * leverage_tp * 2 * 100  # –í—Ö–æ–¥ + –≤—ã—Ö–æ–¥
    slippage_buffer_pct = (
        commission_config.get("slippage_buffer_percent", 0.15) 
        if isinstance(commission_config, dict) 
        else 0.15
    )
    tp_percent_with_commission = tp_percent + commission_pct_from_margin + slippage_buffer_pct
    
    if pnl_percent >= tp_percent_with_commission:
        net_pnl_percent = pnl_percent - commission_pct_from_margin
        if net_pnl_percent > 0:
            logger.info(
                f"üéØ TP –¥–æ—Å—Ç–∏–≥–Ω—É—Ç: Gross {pnl_percent:.2f}% >= TP {tp_percent:.2f}% + "
                f"–∫–æ–º–∏—Å—Å–∏—è {commission_pct_from_margin:.2f}% (Net: {net_pnl_percent:.2f}%)"
            )
            await self.close_position_callback(position, "tp")
            return True
    
    return False
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
TP –¥–æ–ª–∂–µ–Ω —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–º–∏—Å—Å–∏–∏, —á—Ç–æ–±—ã –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏ –ø–æ—Å–ª–µ –≤—Å–µ—Ö –∫–æ–º–∏—Å—Å–∏–π.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #8: TakeProfitManager - –ø—Ä–æ–≤–µ—Ä–∫–∞ peak_profit

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/take_profit_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –æ—Ç –ø–∏–∫–∞ –ø—Ä–∏–±—ã–ª–∏, –¥–∞–∂–µ –µ—Å–ª–∏ TP –µ—â–µ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/take_profit_manager.py
async def check_take_profit(self, symbol: str, position: Dict[str, Any]) -> bool:
    pnl_percent = (current_price - entry_price) / entry_price * 100.0
    tp_percent = 2.0
    
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: peak_profit –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
    if pnl_percent >= tp_percent:
        await self.close_position_callback(position, "tp")
        return True
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/take_profit_manager.py
async def check_take_profit(self, symbol: str, position: Dict[str, Any]) -> bool:
    pnl_percent = (current_price - entry_price) / entry_price * 100.0
    tp_percent = 2.0
    
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä—è–µ–º peak_profit –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º
    metadata = await self.position_registry.get_metadata(symbol)
    if metadata and metadata.peak_profit_usd > 0:
        margin_used = position.get("margin", 0) or position.get("notional", 0) / leverage
        peak_profit_pct = (metadata.peak_profit_usd / margin_used) * 100 if margin_used > 0 else 0
        drawdown_from_peak = peak_profit_pct - pnl_percent
        max_drawdown_allowed = 0.5  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ—Ç–∫–∞—Ç –æ—Ç –ø–∏–∫–∞ –≤ %
        
        if drawdown_from_peak > max_drawdown_allowed:
            logger.debug(
                f"üí∞ TP –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω: –æ—Ç–∫–∞—Ç –æ—Ç –ø–∏–∫–∞ {drawdown_from_peak:.2f}% > "
                f"{max_drawdown_allowed:.2f}% (peak: {peak_profit_pct:.2f}%, "
                f"current: {pnl_percent:.2f}%)"
            )
            return False
    
    if pnl_percent >= tp_percent:
        await self.close_position_callback(position, "tp")
        return True
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –≤ –ø—Ä–∏–±—ã–ª–∏, –Ω–æ –∑–∞—Ç–µ–º –æ—Ç–∫–∞—Ç–∏–ª–∞—Å—å, –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –µ–µ –ø–æ TP, –µ—Å–ª–∏ –æ—Ç–∫–∞—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #9: SmartExitCoordinator - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/exit_decision_coordinator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–µ—Ç–æ–¥ `should_close()` –≤–º–µ—Å—Ç–æ `check_position()`

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/exit_decision_coordinator.py
if self.smart_exit_coordinator and hasattr(self.smart_exit_coordinator, "should_close"):
    should_close = await self.smart_exit_coordinator.should_close(symbol, position)
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ú–µ—Ç–æ–¥ should_close() –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/exit_decision_coordinator.py
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ check_position()
if self.smart_exit_coordinator and hasattr(self.smart_exit_coordinator, "check_position"):
    should_close, reason = await self.smart_exit_coordinator.check_position(symbol, position)
    if should_close:
        return {"should_close": True, "reason": reason or "smart_exit"}
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
SmartExitCoordinator –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –º–µ—Ç–æ–¥–∞. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `check_position()`.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #10: WebSocketCoordinator - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—Ä–∞–±–æ—Ç–∫–∞ ticker –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/websocket_coordinator.py
async def _handle_ticker(self, symbol: str, ticker_data: Dict[str, Any]):
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π
    await self.signal_generator.generate_signals(symbol, ticker_data)
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/websocket_coordinator.py
async def _handle_ticker(self, symbol: str, ticker_data: Dict[str, Any]):
    # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π
    if self.orchestrator and not getattr(self.orchestrator, "all_modules_ready", False):
        logger.debug(
            f"‚è≥ WebSocketCoordinator: –ú–æ–¥—É–ª–∏ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤—ã, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º ticker –¥–ª—è {symbol}"
        )
        return
    
    if self.signal_generator and not hasattr(self.signal_generator, "regime_managers"):
        logger.debug(
            f"‚è≥ WebSocketCoordinator: SignalGenerator –µ—â–µ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω, "
            f"–ø—Ä–æ–ø—É—Å–∫–∞–µ–º ticker –¥–ª—è {symbol}"
        )
        return
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ ticker ...
    await self.signal_generator.generate_signals(symbol, ticker_data)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞ –º–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤—ã, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ ticker.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #11: WebSocketCoordinator - per-symbol FastADX

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/websocket_coordinator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä FastADX –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞—Å—á–µ—Ç–∞–º

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/websocket_coordinator.py
async def _update_fast_adx(self, symbol: str, ticker_data: Dict[str, Any]):
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –≤—Å–µ—Ö —Å–∏–º–≤–æ–ª–æ–≤
    if not self._fast_adx:
        self._fast_adx = FastADX(period=14, threshold=25.0)
    await self._fast_adx.update(ticker_data)
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/websocket_coordinator.py
async def _update_fast_adx(self, symbol: str, ticker_data: Dict[str, Any]):
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ–∑–¥–∞–µ–º per-symbol —ç–∫–∑–µ–º–ø–ª—è—Ä—ã FastADX
    if not self._fast_adx_template:
        return
    
    # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –ø–æ–ª—É—á–∞–µ–º per-symbol —ç–∫–∑–µ–º–ø–ª—è—Ä
    if not hasattr(self, "_fast_adx_by_symbol"):
        self._fast_adx_by_symbol = {}
    
    if symbol not in self._fast_adx_by_symbol:
        from src.strategies.scalping.futures.indicators.fast_adx import FastADX
        self._fast_adx_by_symbol[symbol] = FastADX(
            period=self._fast_adx_template.period,
            threshold=self._fast_adx_template.threshold
        )
        logger.debug(f"‚úÖ –°–æ–∑–¥–∞–Ω per-symbol FastADX –¥–ª—è {symbol}")
    
    fast_adx = self._fast_adx_by_symbol[symbol]
    # –û–±–Ω–æ–≤–ª—è–µ–º per-symbol —ç–∫–∑–µ–º–ø–ª—è—Ä
    await fast_adx.update(ticker_data)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ö–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å–≤–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä FastADX –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #12: MACDSignalGenerator - –ø—Ä–æ–≤–µ—Ä–∫–∞ ADX trend

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/signals/macd_signal_generator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–æ–Ω—Ç—Ä-—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –≤ trending —Ä–µ–∂–∏–º–µ

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/signals/macd_signal_generator.py
if macd_line > signal_line and histogram > 0:
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: ADX trend –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
    signals.append({
        "symbol": symbol,
        "side": "buy",
        "strength": 0.7
    })
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/signals/macd_signal_generator.py
if macd_line > signal_line and histogram > 0:
    # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º ADX trend
    adx_trend = await self._get_adx_trend(symbol, indicators)
    adx_value = (
        indicators.get("adx", {}).get("value", 0) 
        if isinstance(indicators.get("adx"), dict) 
        else 0
    )
    adx_threshold = 30.0
    
    if adx_trend == "bearish" and adx_value >= adx_threshold:
        logger.debug(
            f"üö´ MACD BULLISH —Å–∏–≥–Ω–∞–ª –û–¢–ú–ï–ù–ï–ù –¥–ª—è {symbol}: "
            f"ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥ (ADX={adx_value:.1f})"
        )
        continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–æ—Ç —Å–∏–≥–Ω–∞–ª
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ ...
    signals.append({
        "symbol": symbol,
        "side": "buy",
        "strength": 0.7
    })
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–í —Å–∏–ª—å–Ω–æ–º —Ç—Ä–µ–Ω–¥–µ (ADX > 30) –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –∫–æ–Ω—Ç—Ä-—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∏–º–µ—é—Ç –Ω–∏–∑–∫—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—Ö–∞.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #13: RSI SignalGenerator - –ø—Ä–æ–≤–µ—Ä–∫–∞ ADX trend

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/signals/rsi_signal_generator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ MACD, –∫–æ–Ω—Ç—Ä-—Ç—Ä–µ–Ω–¥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/signals/rsi_signal_generator.py
if rsi < rsi_oversold:
    # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º ADX trend
    adx_trend = await self._get_adx_trend(symbol, indicators)
    adx_value = (
        indicators.get("adx", {}).get("value", 0) 
        if isinstance(indicators.get("adx"), dict) 
        else 0
    )
    adx_threshold = 30.0
    
    if adx_trend == "bearish" and adx_value >= adx_threshold:
        logger.debug(
            f"üö´ RSI OVERSOLD —Å–∏–≥–Ω–∞–ª –û–¢–ú–ï–ù–ï–ù –¥–ª—è {symbol}: "
            f"ADX –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∏—Å—Ö–æ–¥—è—â–∏–π —Ç—Ä–µ–Ω–¥"
        )
        continue
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ MACD, RSI —Å–∏–≥–Ω–∞–ª—ã –¥–æ–ª–∂–Ω—ã –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Å–∏–ª—å–Ω–æ–º –∫–æ–Ω—Ç—Ä-—Ç—Ä–µ–Ω–¥–µ.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #14: –õ–æ–∂–Ω–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏)  
**–§–∞–π–ª:** `src/strategies/scalping/futures/orchestrator.py:2458-2462`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –ª–æ–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–Ω–µ—à–Ω–µ–º –∑–∞–∫—Ä—ã—Ç–∏–∏, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é —Å–∞–º

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2026-01-03 12:35:21.205 | INFO | üõë –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏ ETH-USDT: sl_reached
2026-01-03 12:35:21.843 | INFO | ‚úÖ –ü–æ–∑–∏—Ü–∏—è ETH-USDT —É—Å–ø–µ—à–Ω–æ –∑–∞–∫—Ä—ã—Ç–∞ —á–µ—Ä–µ–∑ API
2026-01-03 12:35:24.826 | CRITICAL | üö® –û–ë–ù–ê–†–£–ñ–ï–ù–û –ó–ê–ö–†–´–¢–ò–ï –ù–ê –ë–ò–†–ñ–ï: ETH-USDT
2026-01-03 12:35:24.827 | CRITICAL | ‚ö†Ô∏è –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –ù–ï —á–µ—Ä–µ–∑ –±–æ—Ç–∞!
# ‚ùå –õ–æ–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –ø–æ–∑–∏—Ü–∏—è –±—ã–ª–∞ –∑–∞–∫—Ä—ã—Ç–∞ –±–æ—Ç–æ–º
```

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/orchestrator.py:2458-2462
for symbol in list(stale_symbols):
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ _closing_positions_cache
    logger.critical("=" * 80)
    logger.critical(f"üö® –û–ë–ù–ê–†–£–ñ–ï–ù–û –ó–ê–ö–†–´–¢–ò–ï –ù–ê –ë–ò–†–ñ–ï: {symbol}")
    logger.critical(f"‚ö†Ô∏è –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –ù–ï —á–µ—Ä–µ–∑ –±–æ—Ç–∞!")
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/orchestrator.py:2458-2462
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (03.01.2026): –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –±–æ—Ç —Å–∞–º –∑–∞–∫—Ä—ã–ª –ø–æ–∑–∏—Ü–∏—é
for symbol in list(stale_symbols):
    if hasattr(self, "_closing_positions_cache") and symbol in self._closing_positions_cache:
        logger.debug(
            f"üîç {symbol}: –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –±–æ—Ç–æ–º (–≤ _closing_positions_cache), "
            f"–Ω–µ –ª–æ–≥–∏—Ä—É–µ–º –∫–∞–∫ –≤–Ω–µ—à–Ω–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ"
        )
        # –£–¥–∞–ª—è–µ–º –∏–∑ –∫—ç—à–∞, —Ç–∞–∫ –∫–∞–∫ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏
        try:
            del self._closing_positions_cache[symbol]
        except KeyError:
            pass
        continue  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–∞–∫ –≤–Ω–µ—à–Ω–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
    
    # –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –ù–ï –≤ –∫—ç—à–µ - —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –≤–Ω–µ—à–Ω–µ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ
    logger.critical("=" * 80)
    logger.critical(f"üö® –û–ë–ù–ê–†–£–ñ–ï–ù–û –ó–ê–ö–†–´–¢–ò–ï –ù–ê –ë–ò–†–ñ–ï: {symbol}")
    logger.critical(f"‚ö†Ô∏è –ü–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –Ω–∞ –±–∏—Ä–∂–µ, –Ω–æ –ù–ï —á–µ—Ä–µ–∑ –±–æ—Ç–∞!")
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** –î–æ–±–∞–≤–∏—Ç—å —Å–∏–º–≤–æ–ª –≤ cache –ü–ï–†–ï–î –∑–∞–∫—Ä—ã—Ç–∏–µ–º:
```python
# –§–∞–π–ª: src/strategies/scalping/futures/orchestrator.py:4363
# ‚úÖ –ù–û–í–û–ï (03.01.2026): –î–æ–±–∞–≤–ª—è–µ–º —Å–∏–º–≤–æ–ª –≤ cache –ü–ï–†–ï–î –≤—ã–∑–æ–≤–æ–º API
if not hasattr(self, "_closing_positions_cache"):
    self._closing_positions_cache = {}
self._closing_positions_cache[symbol] = time.time()  # TTL 60 —Å–µ–∫—É–Ω–¥

# –í—ã–∑—ã–≤–∞–µ–º API –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏
await self.client.close_position(...)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
Race condition: –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –±–æ—Ç–æ–º, –Ω–æ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–æ—Ç –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç, —á—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏–µ –±—ã–ª–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –∏–º —Å–∞–º–∏–º.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #15: –î–≤–æ–π–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è TSL

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py:3397-3433`  
**–ü—Ä–æ–±–ª–µ–º–∞:** TSL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã - —Å–Ω–∞—á–∞–ª–∞ —Å –æ–±—ã—á–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –ø–æ—Ç–æ–º —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
11:06:00 | TSL INIT –¥–ª—è SOL-USDT: regime=ranging, trail=3.00%, loss_cut=4.00%
11:06:02 | TSL AGGRESSIVE –¥–ª—è SOL-USDT: strength=1.00 > 0.8, trail=0.40%, losscut=1.00%
# ‚ùå –î–≤–æ–π–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/signal_coordinator.py:3397-3433
# ‚ùå –ü–†–û–ë–õ–ï–ú–ê: TSL –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
await self.initialize_trailing_stop_callback(
    symbol=symbol,
    entry_price=entry_price,
    side=side,
    signal=signal,  # signal –º–æ–∂–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å strength
    regime=regime
)
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/signal_coordinator.py:3397-3433
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π TSL –ø–µ—Ä–µ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
existing_tsl = self.trailing_sl_coordinator.get_tsl(symbol)
if existing_tsl:
    logger.debug(
        f"üîç TSL —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è {symbol}, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–≤—Ç–æ—Ä–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é"
    )
    return

# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –°–æ–∑–¥–∞–µ–º signal —Å strength –¥–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
signal_with_strength = signal.copy() if signal else {}
if "strength" not in signal_with_strength and signal:
    signal_strength = signal.get("strength", 0.5)
    signal_with_strength["strength"] = signal_strength

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º TSL —Å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º —Å—Ä–∞–∑—É (–µ—Å–ª–∏ strength > 0.8)
await self.initialize_trailing_stop_callback(
    symbol=symbol,
    entry_price=entry_price,
    side=side,
    signal=signal_with_strength,  # –ü–µ—Ä–µ–¥–∞–µ–º signal —Å strength
    regime=regime
)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
TSL –¥–æ–ª–∂–µ–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–º–∏, –µ—Å–ª–∏ strength > 0.8).

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #16: POST_ONLY –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω –ø–æ –¥—Ä—É–≥–æ–π —Ü–µ–Ω–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/order_executor.py:1228-1295`  
**–ü—Ä–æ–±–ª–µ–º–∞:** POST_ONLY –æ—Ä–¥–µ—Ä —Ä–∞–∑–º–µ—â–µ–Ω –ø–æ –æ–¥–Ω–æ–π —Ü–µ–Ω–µ, –Ω–æ –∏—Å–ø–æ–ª–Ω–µ–Ω –ø–æ –¥—Ä—É–≥–æ–π (–≤—ã—à–µ/–Ω–∏–∂–µ)

**–ü—Ä–∏–º–µ—Ä –∏–∑ –ª–æ–≥–æ–≤:**
```
2026-01-02 11:05:52.123 | INFO | üìä –†–∞–∑–º–µ—â–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞ SOL-USDT: type=limit, post_only=True, price=$127.21
2026-01-02 11:05:52.125 | INFO | ‚úÖ –û—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω: avgPx=$128.90 (+1.33%)
# ‚ùå POST_ONLY –æ—Ä–¥–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω –ø–æ —Ü–µ–Ω–µ –≤—ã—à–µ –ª–∏–º–∏—Ç–Ω–æ–π
```

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/order_executor.py:1228-1295
if post_only:
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≤–µ–∂–µ—Å—Ç–∏ —Ü–µ–Ω—ã –∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
    order_result = await self.client.place_limit_order(
        symbol=symbol,
        side=side,
        size=size,
        price=price,
        post_only=True
    )
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/order_executor.py:1228-1295
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏ —Ü–µ–Ω—ã –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º POST_ONLY –æ—Ä–¥–µ—Ä–∞
if post_only:
    price_limits = await self.client.get_price_limits(symbol)
    if price_limits:
        price_timestamp = price_limits.get("timestamp", 0)
        current_price = price_limits.get("current_price", 0)
        
        if price_timestamp > 0:
            price_age = time.time() - price_timestamp
            if price_age > 1.0:  # –¶–µ–Ω–∞ —Å—Ç–∞—Ä—à–µ 1 —Å–µ–∫—É–Ω–¥—ã
                logger.warning(f"‚ö†Ô∏è –¶–µ–Ω–∞ —É—Å—Ç–∞—Ä–µ–ª–∞ ({price_age:.2f}—Å), –æ—Ç–∫–ª—é—á–∞–µ–º POST_ONLY")
                post_only = False
            
            if current_price > 0 and price > 0:
                price_diff_pct = abs(price - current_price) / current_price * 100.0
                if price_diff_pct > 0.5:  # –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ > 0.5%
                    logger.warning(
                        f"‚ö†Ô∏è –õ–∏–º–∏—Ç–Ω–∞—è —Ü–µ–Ω–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –Ω–∞ {price_diff_pct:.2f}%, –æ—Ç–∫–ª—é—á–∞–µ–º POST_ONLY"
                    )
                    post_only = False
    
    order_result = await self.client.place_limit_order(
        symbol=symbol,
        side=side,
        size=size,
        price=price,
        post_only=post_only  # –ú–æ–∂–µ—Ç –±—ã—Ç—å False –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–æ–∫
    )
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
POST_ONLY –æ—Ä–¥–µ—Ä–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–≤–µ–∂–µ–π —Ü–µ–Ω–µ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –±–æ–ª—å—à–æ–≥–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è, –∏–Ω–∞—á–µ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª–Ω–µ–Ω—ã –ø–æ –Ω–µ–≤—ã–≥–æ–¥–Ω–æ–π —Ü–µ–Ω–µ.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #17-19: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å STUB –º–æ–¥—É–ª–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª—ã:** 
- `src/strategies/scalping/futures/indicators/futures_volume_profile.py` (STUB)
- `src/strategies/scalping/futures/risk/liquidation_protector.py` (STUB)
- `src/strategies/scalping/futures/risk/position_sizer.py` (STUB, DEPRECATED)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–¥—É–ª–∏ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è FuturesVolumeProfile:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/indicators/futures_volume_profile.py
class FuturesVolumeProfile:
    def __init__(self, client=None):
        self.client = client
        self._cache = {}
        self._cache_ttl = 300.0  # 5 –º–∏–Ω—É—Ç
    
    async def get_volume_profile(
        self, symbol: str, timeframe: str = "1H"
    ) -> Dict[str, Any]:
        """–ü–æ–ª—É—á–∞–µ—Ç volume profile —á–µ—Ä–µ–∑ OKX API"""
        cache_key = f"{symbol}_{timeframe}"
        if cache_key in self._cache:
            cached_data, timestamp = self._cache[cache_key]
            if time.time() - timestamp < self._cache_ttl:
                return cached_data
        
        try:
            # –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ OKX API
            # TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ volume profile
            volume_profile = await self._fetch_volume_profile(symbol, timeframe)
            
            self._cache[cache_key] = (volume_profile, time.time())
            return volume_profile
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è volume profile –¥–ª—è {symbol}: {e}")
            return {}
    
    async def _fetch_volume_profile(self, symbol: str, timeframe: str) -> Dict[str, Any]:
        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è volume profile —á–µ—Ä–µ–∑ OKX API
        pass
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è LiquidationProtector:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/risk/liquidation_protector.py
class LiquidationProtector:
    def __init__(self, config_manager=None, margin_calculator=None):
        self.config_manager = config_manager
        self.margin_calculator = margin_calculator
        self.safety_threshold = 0.5  # 50% –æ—Ç –ª–∏–∫–≤–∏–¥–∞—Ü–∏–æ–Ω–Ω–æ–π —Ü–µ–Ω—ã
    
    async def check_liquidation_risk(
        self, symbol: str, position: Dict[str, Any], balance: float
    ) -> Tuple[bool, Dict[str, Any]]:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∏—Å–∫ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–∏"""
        if not self.margin_calculator:
            return True, {"safe": True, "reason": "margin_calculator_not_available"}
        
        liquidation_price = await self.margin_calculator.calculate_liquidation_price(
            symbol=symbol,
            position=position,
            balance=balance
        )
        
        current_price = position.get("mark_price", 0)
        if not current_price or not liquidation_price:
            return False, {"safe": False, "reason": "price_not_available"}
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ª–∏–∫–≤–∏–¥–∞—Ü–∏–∏
        if position["side"] == "long":
            distance_pct = (current_price - liquidation_price) / current_price * 100.0
        else:
            distance_pct = (liquidation_price - current_price) / current_price * 100.0
        
        is_safe = distance_pct > (self.safety_threshold * 100.0)
        
        return is_safe, {
            "safe": is_safe,
            "liquidation_price": liquidation_price,
            "current_price": current_price,
            "distance_pct": distance_pct,
            "safety_threshold": self.safety_threshold * 100.0
        }
```

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è PositionSizer (—É–¥–∞–ª–∏—Ç—å, —Ç–∞–∫ –∫–∞–∫ DEPRECATED):**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/risk/position_sizer.py
# ‚úÖ –£–î–ê–õ–ï–ù: –ú–æ–¥—É–ª—å DEPRECATED, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ RiskManager
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ, –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ RiskManager.calculate_position_size()
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
STUB –º–æ–¥—É–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–ª–∏ —É–¥–∞–ª–µ–Ω—ã, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #20: MarginCalculator - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π safety_threshold

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/calculations/margin_calculator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** safety_threshold –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ –∫–æ–Ω—Ñ–∏–≥–µ, fallback –Ω–∞ 0.5 –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/calculations/margin_calculator.py
def is_position_safe(self, ..., safety_threshold: Optional[float] = None, ...):
    if safety_threshold is None:
        safety_threshold = 0.5  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Fallback –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–º
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/calculations/margin_calculator.py
def is_position_safe(self, ..., safety_threshold: Optional[float] = None, ...):
    if safety_threshold is None:
        # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback, —Ç—Ä–µ–±—É–µ–º —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è
        logger.error(
            f"‚ùå safety_threshold –Ω–µ —É–∫–∞–∑–∞–Ω –¥–ª—è {symbol}, –ø–æ–∑–∏—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π"
        )
        return False, {"safe": False, "reason": "safety_threshold_not_specified"}
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å safety_threshold ...
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
safety_threshold –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–π, –ø–æ—ç—Ç–æ–º—É –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #21: MarginMonitor - —É–±—Ä–∞—Ç—å fallback –±–∞–ª–∞–Ω—Å

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/risk/margin_monitor.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback –±–∞–ª–∞–Ω—Å 1000.0, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –±–∞–ª–∞–Ω—Å—É

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/risk/margin_monitor.py
current_balance = await self.get_current_balance()
if current_balance == 0.0:
    current_balance = 1000.0  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Fallback –±–∞–ª–∞–Ω—Å
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/risk/margin_monitor.py
current_balance = await self.get_current_balance()
if current_balance == 0.0:
    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback, –ª–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
    logger.error("‚ùå MarginMonitor: –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å, –ø–æ–∑–∏—Ü–∏—è —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π")
    return False  # –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback 1000.0
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
Fallback –±–∞–ª–∞–Ω—Å –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–∞—Å—á–µ—Ç–∞–º —Ä–∏—Å–∫–∞.

---

## üü° –í–ê–ñ–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (20+)

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #22: ParameterProvider - —É–ª—É—á—à–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/config/parameter_provider.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** Fallback –Ω–∞ "ranging" —Ä–µ–∂–∏–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/config/parameter_provider.py
def _get_current_regime(self, symbol: str) -> str:
    try:
        if self.data_registry:
            regime = self.data_registry.get_regime_name_sync(symbol)
            if regime:
                return regime.lower()
    except Exception:
        pass
    
    return "ranging"  # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Fallback –±–µ–∑ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/config/parameter_provider.py
def _get_current_regime(self, symbol: str) -> str:
    try:
        if self.data_registry:
            regime = self.data_registry.get_regime_name_sync(symbol)
            if regime:
                return regime.lower()
        
        if self.regime_manager:
            regime = self.regime_manager.get_current_regime()
            if regime:
                return regime.lower() if isinstance(regime, str) else str(regime).lower()
    except Exception as e:
        logger.warning(f"‚ö†Ô∏è ParameterProvider: –û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ –¥–ª—è {symbol}: {e}")
    
    # ‚úÖ –õ–û–ì–ò–†–û–í–ê–¢–¨ fallback
    logger.warning(
        f"‚ö†Ô∏è ParameterProvider: –†–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è {symbol}, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback 'ranging'"
    )
    return "ranging"
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
Fallback —Ä–µ–∂–∏–º –¥–æ–ª–∂–µ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ–±—ã –±—ã–ª–æ –≤–∏–¥–Ω–æ, –∫–æ–≥–¥–∞ —Ä–µ–∂–∏–º –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #23: –£–º–µ–Ω—å—à–∏—Ç—å TTL –∫—ç—à–∞

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª—ã:** 
- `src/strategies/scalping/futures/indicators/atr_provider.py`
- `src/strategies/scalping/futures/adaptivity/filter_parameters.py`

**–ü—Ä–æ–±–ª–µ–º–∞:** TTL 20-60 —Å–µ–∫—É–Ω–¥ —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–∏–π –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ä—ã–Ω–∫–æ–≤

**–ö–æ–¥ –î–û:**
```python
# ATRProvider:
self._cache_ttl_seconds = 60.0  # ‚ùå –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ

# FilterParameters:
self._cache_ttl_seconds = 20.0  # ‚ùå –°–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# ATRProvider:
self._cache_ttl_seconds = 30.0  # ‚úÖ –ë—ã–ª–æ 60.0

# FilterParameters:
self._cache_ttl_seconds = 15.0  # ‚úÖ –ë—ã–ª–æ 20-60
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫—ç—à–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏—è–º.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #24: WebSocketManager - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Å–µ—Å—Å–∏—é

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/websocket_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** "Unclosed client session" warnings –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –±–æ—Ç–∞

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/websocket_manager.py
async def disconnect(self):
    # ... –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á ...
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –°–µ—Å—Å–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/websocket_manager.py
async def disconnect(self):
    # ... –æ—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á ...
    if self.session and not self.session.closed:
        try:
            await self.session.close()  # ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï: –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–µ—Å—Å–∏—é
            await asyncio.sleep(0.1)
            logger.debug("‚úÖ WebSocket —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞")
        except Exception as e:
            logger.debug(f"‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ WebSocket —Å–µ—Å—Å–∏–∏: {e}")
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ù–µ–∑–∞–∫—Ä—ã—Ç—ã–µ —Å–µ—Å—Å–∏–∏ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ warnings –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —É—Ç–µ—á–∫–∞–º —Ä–µ—Å—É—Ä—Å–æ–≤.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #25: PrivateWebSocketManager - –∏—Å–ø—Ä–∞–≤–∏—Ç—å ws_url

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/private_websocket_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** ws_url –∑–∞–≤–∏—Å–∏—Ç –æ—Ç sandbox, –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/private_websocket_manager.py
if sandbox:
    self.ws_url = "wss://wspap.okx.com:8443/ws/v5/private"
else:
    self.ws_url = "wss://ws.okx.com:8443/ws/v5/private"  # ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/private_websocket_manager.py
if sandbox:
    self.ws_url = "wss://wspap.okx.com:8443/ws/v5/private"
else:
    self.ws_url = "wss://ws.okx.com:8443/ws/v5/private"  # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å URL
    logger.debug(f"‚úÖ Private WebSocket URL: {self.ws_url}")
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –æ—à–∏–±–∫–∞–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #26: ExitDecisionLogger - —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è datetime

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/exit_decision_logger.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** datetime –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–æ–π –≤ JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/exit_decision_logger.py
def _serialize_datetime(obj: Any) -> Any:
    """–°–µ—Ä–∏–∞–ª–∏–∑—É–µ—Ç datetime –≤ ISO —Ñ–æ—Ä–º–∞—Ç"""
    if isinstance(obj, datetime):
        return obj.isoformat()
    elif isinstance(obj, dict):
        return {key: _serialize_datetime(value) for key, value in obj.items()}
    elif isinstance(obj, (list, tuple)):
        return [_serialize_datetime(item) for item in obj]
    return obj

# –í log_decision:
log_entry = _serialize_datetime(log_entry)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
JSON –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç datetime –Ω–∞–ø—Ä—è–º—É—é, –Ω—É–∂–Ω–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä–æ–∫—É.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #27: PeakProfitTracker - –ø—Ä–æ–≤–µ—Ä–∫–∞ None

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/positions/peak_profit_tracker.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** None –∑–Ω–∞—á–µ–Ω–∏—è –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è, –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º

**–ö–æ–¥ –î–û:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/peak_profit_tracker.py
if float(unrealized_pnl) > float(peak_profit_usd):
    # ‚ùå –ü–†–û–ë–õ–ï–ú–ê: None –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
    peak_profit_usd = unrealized_pnl
```

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/positions/peak_profit_tracker.py
if current_price is None or current_price <= 0:
    logger.warning(f"‚ö†Ô∏è PeakProfitTracker: –ù–µ–≤–∞–ª–∏–¥–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è {symbol}: {current_price}")
    return None

if unrealized_pnl is not None and peak_profit_usd is not None:
    if float(unrealized_pnl) > float(peak_profit_usd):
        # ... –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ...
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
None –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ TypeError –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #28: –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/filters/filter_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ñ–∏–ª—å—Ç—Ä—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ —Å–∏–≥–Ω–∞–ª

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/filters/filter_manager.py
async def apply_all_filters(self, symbol: str, signal: Dict[str, Any], regime: str = "ranging") -> bool:
    """–ü—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –∫ —Å–∏–≥–Ω–∞–ª—É —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º"""
    
    # ADX Filter
    adx_result = await self.adx_filter.filter(signal, regime)
    if not adx_result:
        adx_value = signal.get("adx", 0)
        threshold = self.adx_filter.threshold
        logger.info(
            f"üìä [FILTER] {symbol}: ADX Filter - BLOCKED | "
            f"ADX={adx_value:.2f} < threshold={threshold:.2f}, trend={regime}"
        )
        return False
    else:
        logger.debug(f"üìä [FILTER] {symbol}: ADX Filter - PASSED")
    
    # MTF Filter
    mtf_result = await self.mtf_filter.filter(signal, regime)
    if not mtf_result:
        logger.info(
            f"üìä [FILTER] {symbol}: MTF Filter - BLOCKED | "
            f"H1={mtf_result.get('h1_trend', 'unknown')}, H4={mtf_result.get('h4_trend', 'unknown')}"
        )
        return False
    else:
        logger.debug(f"üìä [FILTER] {symbol}: MTF Filter - PASSED")
    
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã ...
    
    return True
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Å–∏–≥–Ω–∞–ª—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #29: –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ "–ù–ï–¢ –°–ò–ì–ù–ê–õ–û–í"

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py:1654-1667`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í —Å–æ–æ–±—â–µ–Ω–∏–∏ "–ù–ï–¢ –°–ò–ì–ù–ê–õ–û–í" —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ ADX –∏ RSI, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/signal_coordinator.py:1654-1667
if not signals or len(signals) == 0:
    # –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    rsi = await self.data_registry.get_indicator(symbol, "rsi")
    macd = await self.data_registry.get_indicator(symbol, "macd")
    adx = await self.data_registry.get_indicator(symbol, "adx")
    regime = await self.data_registry.get_regime(symbol) or "ranging"
    
    # –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç—É—Å—ã —Ñ–∏–ª—å—Ç—Ä–æ–≤
    filter_statuses = await self._get_filter_statuses(symbol, regime)
    
    logger.warning(
        f"üö´ –ù–ï–¢ –°–ò–ì–ù–ê–õ–û–í: {symbol} - signal_generator.generate_signals() –≤–µ—Ä–Ω—É–ª 0 —Å–∏–≥–Ω–∞–ª–æ–≤\n"
        f"  –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã: RSI={rsi:.2f if rsi else 'N/A'} "
        f"(no signal, range=30-70), "
        f"MACD={macd:.4f if macd else 'N/A'} (no crossover), "
        f"ADX={adx:.2f if adx else 'N/A'} ({regime}, threshold=20)\n"
        f"  –§–∏–ª—å—Ç—Ä—ã: {', '.join(filter_statuses)}\n"
        f"  –†–µ–∂–∏–º: {regime}"
    )
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è.

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #30: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –í–ê–ñ–ù–´–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py` –∏–ª–∏ `entry_manager.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/signal_coordinator.py
# –ü–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
logger.info("=" * 80)
logger.info(f"üìä [PARAMS] {symbol} ({regime}): –†–ê–°–ß–ï–¢ –†–ê–ó–ú–ï–†–ê –ü–û–ó–ò–¶–ò–ò")
logger.info(f"  –ë–∞–ª–∞–Ω—Å: ${balance:.2f} (–ø—Ä–æ—Ñ–∏–ª—å: {balance_profile})")
logger.info(f"  –ë–∞–∑–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä: ${base_size:.2f} USD")
logger.info(f"  Per-symbol multiplier: {multiplier}x")
logger.info(f"  Strength multiplier: {strength_mult:.2f}x")
logger.info(f"  Final size: ${final_size:.2f} USD ({size_coins:.6f} –º–æ–Ω–µ—Ç)")
logger.info(f"  Leverage: {leverage}x")
logger.info(f"  Margin required: ${margin:.2f} USD")
logger.info(f"  –ò—Å—Ç–æ—á–Ω–∏–∫: RiskManager.calculate_position_size()")
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**  
–ï–¥–∏–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞—Å—á–µ—Ç—ã –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

---

## üü¢ –£–õ–£–ß–®–ï–ù–ò–Ø (10+)

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #31: –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/signal_generator.py`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–Ω–∞—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/signal_generator.py
logger.debug(
    f"üìä [INDICATORS] {symbol}: ADX={adx:.2f} ({regime}), "
    f"RSI={rsi:.2f}, MACD_hist={macd_hist:.4f}, ATR={atr:.2f}"
)
```

---

### –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï #32: –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ validate_signal

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô  
**–§–∞–π–ª:** `src/strategies/scalping/futures/coordinators/signal_coordinator.py:687`  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ DEBUG, –Ω–æ –Ω–µ –≤—Å–µ

**–ö–æ–¥ –ü–û–°–õ–ï:**
```python
# –§–∞–π–ª: src/strategies/scalping/futures/coordinators/signal_coordinator.py:687
if existing_position:
    logger.warning(
        f"üö´ [VALIDATION] {symbol}: –°–∏–≥–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - –ø–æ–∑–∏—Ü–∏—è —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç "
        f"(size={existing_position.get('size', 0)}, side={existing_position.get('side', 'unknown')})"
    )
    return False

if active_orders:
    logger.warning(
        f"üö´ [VALIDATION] {symbol}: –°–∏–≥–Ω–∞–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω - –∞–∫—Ç–∏–≤–Ω—ã–µ –æ—Ä–¥–µ—Ä–∞ (count={len(active_orders)})"
    )
    return False
```

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –°–í–û–î–ö–ê

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º:
- üî¥ **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ:** 25+ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- üü° **–í–∞–∂–Ω—ã–µ:** 20+ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- üü¢ **–£–ª—É—á—à–µ–Ω–∏—è:** 10+ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
- **–û—Ä–¥–µ—Ä–∞ –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ:** 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Trailing Stop Loss:** 3 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏—è–º–∏:** 5 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä—ã:** 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–§–∏–ª—å—Ç—Ä—ã –∏ —Å–∏–≥–Ω–∞–ª—ã:** 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–†–∏—Å–∫ –∏ –º–∞—Ä–∂–∞:** 4 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** 6 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- **STUB –º–æ–¥—É–ª–∏:** 3 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ü—Ä–æ—á–µ–µ:** 10+ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 04.01.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è–º–∏ –∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ –ª–æ–≥–æ–≤
