# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π

**–î–∞—Ç–∞:** 29.11.2025  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∑–∏—Ü–∏–∏ –≤–∏—Å—è—Ç 6+ —á–∞—Å–æ–≤, —É–ø—É—â–µ–Ω–∞ –ø—Ä–∏–±—ã–ª—å 6+ USDT

---

## üìä –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –£–ø—É—â–µ–Ω–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
- **DOGE-USDT:** –ú–∞–∫—Å–∏–º—É–º **3.35 USDT** (05:40:52) ‚Üí –¢–µ–∫—É—â–∏–π **0.23 USDT** (**-3.12 USDT**)
- **BTC-USDT:** –ú–∞–∫—Å–∏–º—É–º **2.40 USDT** (05:43:07) ‚Üí –¢–µ–∫—É—â–∏–π **0.68 USDT** (**-1.72 USDT**)
- **XRP-USDT:** –ú–∞–∫—Å–∏–º—É–º **1.05 USDT** (05:09:15) ‚Üí –¢–µ–∫—É—â–∏–π **-0.14 USDT** (**-1.19 USDT**)

**–ò—Ç–æ–≥–æ —É–ø—É—â–µ–Ω–æ:** **6.03 USDT** üí∏

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #1: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏ ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/core/position_registry.py`

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- `peak_profit_usd` - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å –≤ USD
- `peak_profit_time` - –≤—Ä–µ–º—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–∞–∫—Å–∏–º—É–º–∞
- `peak_profit_price` - —Ü–µ–Ω–∞ –ø—Ä–∏ –º–∞–∫—Å–∏–º—É–º–µ –ø—Ä–∏–±—ã–ª–∏
- `tp_extension_count` - —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–¥–ª–µ–Ω–∏–π TP

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–∏–±—ã–ª—å –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏.

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #2: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `_check_profit_drawdown()`

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å —É–ø–∞–ª–∞ –Ω–∞ X% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º
- **Trending:** 40% –æ—Ç–∫–∞—Ç (—Ç—Ä–µ–Ω–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è)
- **Ranging:** 30% –æ—Ç–∫–∞—Ç (–±–æ–∫–æ–≤–∏–∫)
- **Choppy:** 20% –æ—Ç–∫–∞—Ç (–±—ã—Å—Ç—Ä–æ —Ñ–∏–∫—Å–∏—Ä—É–µ–º)

**–ü—Ä–∏–º–µ—Ä:**
- DOGE –¥–æ—Å—Ç–∏–≥ 3.35 USDT
- –ï—Å–ª–∏ —É–ø–∞–¥–µ—Ç –¥–æ 2.35 USDT (30% –æ—Ç–∫–∞—Ç) ‚Üí –∑–∞–∫—Ä–æ–µ—Ç—Å—è
- **–°–ø–∞—Å–µ—Ç:** ~1.00 USDT –≤–º–µ—Å—Ç–æ —É–ø—É—â–µ–Ω–Ω—ã—Ö 3.12 USDT

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –í—ã—Å–æ–∫–∏–π (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ—Å–ª–µ PH, –ø–µ—Ä–µ–¥ TP)

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω MIN_HOLDING –¥–ª—è PH ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ë—ã–ª–æ:**
```python
min_holding_minutes = 35.0  # –°–õ–ò–®–ö–û–ú –î–û–õ–ì–û!
```

**–°—Ç–∞–ª–æ:**
```python
# –ê–¥–∞–ø—Ç–∏–≤–Ω–æ –ø–æ —Ä–µ–∂–∏–º—É:
# Trending: 5 –º–∏–Ω—É—Ç
# Ranging: 3 –º–∏–Ω—É—Ç—ã
# Choppy: 1 –º–∏–Ω—É—Ç–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** PH —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 1-5 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 35 –º–∏–Ω—É—Ç!

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #4: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ MAX_HOLDING ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ù–æ–≤—ã–π –º–µ—Ç–æ–¥:** `_check_max_holding()`

**–õ–æ–≥–∏–∫–∞:**
- –ó–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –µ—Å–ª–∏ –æ–Ω–∞ –¥–µ—Ä–∂–∏—Ç—Å—è –¥–æ–ª—å—à–µ max_holding_minutes
- **Trending:** 60 –º–∏–Ω—É—Ç
- **Ranging:** 120 –º–∏–Ω—É—Ç (2 —á–∞—Å–∞)
- **Choppy:** 30 –º–∏–Ω—É—Ç

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–∑–∏—Ü–∏–∏ –Ω–µ –±—É–¥—É—Ç –≤–∏—Å–µ—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ!

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #5: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/position_manager.py`

**–ë—ã–ª–æ:**
```python
# –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º TP –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
new_tp = min(current_tp + extension_step, max_tp)
```

**–°—Ç–∞–ª–æ:**
```python
max_tp_extensions = 3  # –ú–∞–∫—Å–∏–º—É–º 3 –ø—Ä–æ–¥–ª–µ–Ω–∏—è
if tp_extension_count >= max_tp_extensions:
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ TP
else:
    # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º –∫–∞–∫ —Ä–∞–Ω—å—à–µ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** TP –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 3 —Ä–∞–∑–∞, –∑–∞—Ç–µ–º –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

---

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ #6: Timeout –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π ‚úÖ
**–§–∞–π–ª:** `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`

**–ë—ã–ª–æ:**
```python
# Timeout —Ç–æ–ª—å–∫–æ –¥–ª—è —É–±—ã—Ç–∫–æ–≤
if profit_pct <= -timeout_loss_from_price:
    return True, "timeout"
```

**–°—Ç–∞–ª–æ:**
```python
# Timeout –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
if minutes_in_position >= timeout_minutes:
    # –î–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö: –∑–∞–∫—Ä—ã–≤–∞–µ–º –µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å < 0.5%
    if profit_pct > 0 and profit_pct < 0.005:
        return True, "timeout_low_profit"
    # –î–ª—è —É–±—ã—Ç–æ—á–Ω—ã—Ö: –∫–∞–∫ —Ä–∞–Ω—å—à–µ
    elif profit_pct <= -timeout_loss_from_price:
        return True, "timeout"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏–±—ã–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Ç–æ–∂–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ timeout!

---

## üìã –ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∑–∞–∫—Ä—ã—Ç–∏—è

```
1. _check_position_safety()      ‚Üí Emergency close (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä–∂–∞)
2. _check_profit_harvesting()    ‚Üí PH (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π min_holding: 1-5 –º–∏–Ω) ‚úÖ
3. _update_peak_profit()         ‚Üí ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞ –ø—Ä–∏–±—ã–ª–∏
4. _check_profit_drawdown()      ‚Üí ‚úÖ –ù–û–í–û–ï: –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
5. _check_tp_only()              ‚Üí TP (—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –ø—Ä–æ–¥–ª–µ–Ω–∏–π: –º–∞–∫—Å 3) ‚úÖ
6. _check_max_holding()          ‚Üí ‚úÖ –ù–û–í–û–ï: MAX_HOLDING (30-120 –º–∏–Ω)
7. _check_sl()                    ‚Üí SL
8. TrailingStopLoss               ‚Üí TSL + timeout (–¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π) ‚úÖ
9. ExitAnalyzer                   ‚Üí –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑
```

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå –ü–æ–∑–∏—Ü–∏–∏ –≤–∏—Å—è—Ç 6+ —á–∞—Å–æ–≤
- ‚ùå –£–ø—É—â–µ–Ω–∞ –ø—Ä–∏–±—ã–ª—å 6+ USDT
- ‚ùå MIN_HOLDING = 35 –º–∏–Ω—É—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç PH
- ‚ùå –ù–ï–¢ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∞–∫—Å–∏–º—É–º–∞
- ‚ùå –ù–ï–¢ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ
- ‚ùå –ù–ï–¢ MAX_HOLDING

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 30-120 –º–∏–Ω—É—Ç (MAX_HOLDING)
- ‚úÖ –ü—Ä–∏–±—ã–ª—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ 20-40% –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- ‚úÖ PH —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 1-5 –º–∏–Ω—É—Ç (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–∏–±—ã–ª—å
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞
- ‚úÖ Timeout —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
- ‚úÖ TP –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 3 —Ä–∞–∑–∞

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –Ω–æ–≤—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π: DOGE-USDT SHORT

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. –û—Ç–∫—Ä—ã—Ç–∞ –≤ 23:31:17
2. –ú–∞–∫—Å–∏–º—É–º 3.35 USDT –≤ 05:40:52
3. –¢–µ–∫—É—â–∏–π 0.23 USDT
4. **–£–ø—É—â–µ–Ω–æ:** 3.12 USDT

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
1. –û—Ç–∫—Ä—ã—Ç–∞ –≤ 23:31:17
2. –ú–∞–∫—Å–∏–º—É–º 3.35 USDT –≤ 05:40:52 ‚Üí **–∑–∞–ø–æ–º–Ω–µ–Ω**
3. –ü—Ä–∏ –æ—Ç–∫–∞—Ç–µ –¥–æ 2.35 USDT (30%) ‚Üí **–∑–∞–∫—Ä—ã—Ç–∞ –ø–æ drawdown**
4. **–°–ø–∞—Å–µ–Ω–æ:** ~1.00 USDT –≤–º–µ—Å—Ç–æ —É–ø—É—â–µ–Ω–Ω—ã—Ö 3.12 USDT

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –Ω—É–∂–Ω–æ:
1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –≤–æ–≤—Ä–µ–º—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–∏–±—ã–ª—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ MAX_HOLDING —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `src/strategies/scalping/futures/core/position_registry.py`
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–±—ã–ª–∏

2. `src/strategies/scalping/futures/position_manager.py`
   - –î–æ–±–∞–≤–ª–µ–Ω `_update_peak_profit()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º—É–º–∞
   - –î–æ–±–∞–≤–ª–µ–Ω `_check_profit_drawdown()` - –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –æ—Ç–∫–∞—Ç–µ
   - –î–æ–±–∞–≤–ª–µ–Ω `_check_max_holding()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω MIN_HOLDING (35 –º–∏–Ω ‚Üí –∞–¥–∞–ø—Ç–∏–≤–Ω–æ 1-5 –º–∏–Ω)
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP (–º–∞–∫—Å–∏–º—É–º 3 —Ä–∞–∑–∞)

3. `src/strategies/scalping/futures/indicators/trailing_stop_loss.py`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω timeout –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω:** 29.11.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

