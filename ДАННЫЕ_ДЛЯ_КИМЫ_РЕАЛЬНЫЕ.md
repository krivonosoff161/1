# üìé –†–ï–ê–õ–¨–ù–´–ï –î–ê–ù–ù–´–ï –î–õ–Ø –ê–ù–ê–õ–ò–ó–ê –ö–ò–ú–ï

**–î–∞—Ç–∞:** 2025-12-07  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** `logs/futures/archived/logs_2025-12-07_19-42-03/`  
**–ü—Ä–æ–±–ª–µ–º–∞:** 4 –ø–æ–∑–∏—Ü–∏–∏ –≤–∏—Å—è—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º PnL –∏ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ç–æ—Ä–≥–æ–≤–ª—é

---

## 1Ô∏è‚É£ –í–°–ï –°–¢–†–û–ö–ò –ò–ó positions_open.csv –ì–î–ï net_pnl < 0

### –§–∞–π–ª: `logs/futures/archived/logs_2025-12-07_19-42-03/positions_open_2025-12-07.csv`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í CSV —Ñ–∞–π–ª–µ –Ω–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ `net_pnl`, –Ω–æ –¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ—á–µ–Ω—ã –∏–∑ –ª–æ–≥–æ–≤.

### –û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (6 –ø–æ–∑–∏—Ü–∏–π):

| timestamp | symbol | side | entry_price | size | regime | order_id | order_type |
|-----------|--------|------|-------------|------|--------|----------|------------|
| 2025-12-07T14:44:36.823096 | XRP-USDT | short | 2.00291957 | 46.00000000 | ranging | 3107686514660282368 | limit |
| 2025-12-07T14:44:50.484778 | DOGE-USDT | short | 0.13535000 | 510.00000000 | ranging | 3107686972376289280 | limit |
| 2025-12-07T14:45:09.966982 | SOL-USDT | long | 128.52840000 | 0.73000000 | ranging | 3107687598200000512 | limit |
| 2025-12-07T14:45:38.862644 | BTC-USDT | short | 88165.31128000 | 0.00070000 | ranging | 3107688552018284544 | limit |
| 2025-12-07T14:52:34.749176 | XRP-USDT | short | 1.99899900 | 46.00000000 | ranging | 3107682522271830016 | limit |
| 2025-12-07T14:57:36.471084 | ETH-USDT | short | 2946.57000000 | 0.02300000 | ranging | 3107712672319737856 | limit |

### –í–∏—Å—è—â–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (–∏–∑ –ª–æ–≥–æ–≤, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ 19:41:50):

#### 1. SOL-USDT (LONG)
- **Entry price:** 137.54 (–∏–ª–∏ 128.5284 –∏–∑ CSV)
- **Current price:** 132.46 (19:26:16)
- **Side:** LONG
- **Regime:** ranging
- **Entry time:** 2025-12-07 14:46:08
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** ~100-115 –º–∏–Ω—É—Ç (–ø—Ä–µ–≤—ã—à–µ–Ω max_holding_minutes: 20)
- **Gross PnL%:** -3.69%
- **Net PnL%:** -19.34% (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)
- **Unrealized PnL (USDT):** -3.59 USDT (19:26:19)
- **Margin:** 19.36 USDT
- **Reason:** `max_holding_exceeded_but_loss`
- **Action:** `hold` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è)
- **TP:** 3.50% (–Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç)
- **SL:** 2.0% (–¥–ª—è ranging —Ä–µ–∂–∏–º–∞)

#### 2. BTC-USDT (SHORT)
- **Entry price:** 87941.80 (–∏–ª–∏ 88165.31 –∏–∑ CSV)
- **Current price:** 89360.00 (19:26:16)
- **Side:** SHORT
- **Regime:** ranging
- **Entry time:** 2025-12-07 14:46:33
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** ~99-108 –º–∏–Ω—É—Ç (–ø—Ä–µ–≤—ã—à–µ–Ω max_holding_minutes: 20)
- **Gross PnL%:** -1.61%
- **Net PnL%:** -6.82% (–∏–ª–∏ -8.37%) (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)
- **Unrealized PnL (USDT):** -0.83 USDT (19:26:19)
- **Margin:** 12.13 USDT
- **Reason:** `max_holding_exceeded_but_loss`
- **Action:** `hold` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è)
- **TP:** 5.00% (–Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç)
- **SL:** 2.0% (–¥–ª—è ranging —Ä–µ–∂–∏–º–∞)

#### 3. XRP-USDT (SHORT)
- **Entry price:** 1.99 (–∏–ª–∏ 1.999 –∏–∑ CSV, –∏–ª–∏ 2.0029)
- **Current price:** 2.03 (19:26:16)
- **Side:** SHORT
- **Regime:** ranging
- **Entry time:** 2025-12-07 14:53:29
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** ~92-108 –º–∏–Ω—É—Ç (–ø—Ä–µ–≤—ã—à–µ–Ω max_holding_minutes: 20)
- **Gross PnL%:** -1.72% (–∏–ª–∏ -1.34%)
- **Net PnL%:** -11.46% (–∏–ª–∏ -12.46%) (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)
- **Unrealized PnL (USDT):** -2.11 USDT (19:26:19)
- **Margin:** 18.31 USDT
- **Reason:** `max_holding_exceeded_but_loss`
- **Action:** `hold` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è)
- **TP:** 3.00% (–Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç)
- **SL:** 2.0% (–¥–ª—è ranging —Ä–µ–∂–∏–º–∞)

#### 4. ETH-USDT (SHORT)
- **Entry price:** 2946.57
- **Current price:** 2990.93 (19:26:16) –∏–ª–∏ 2997.00 (19:41:50)
- **Side:** SHORT
- **Regime:** ranging
- **Entry time:** 2025-12-07 14:57:34
- **–í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏:** ~88-104 –º–∏–Ω—É—Ç (–ø—Ä–µ–≤—ã—à–µ–Ω max_holding_minutes: 20)
- **Gross PnL%:** -1.51% (–∏–ª–∏ -1.71%)
- **Net PnL%:** -18.63% (–∏–ª–∏ -14.72%) (—Å –∫–æ–º–∏—Å—Å–∏–µ–π)
- **Unrealized PnL (USDT):** -2.58 USDT (19:26:19) –∏–ª–∏ -1.98 USDT (19:41:50)
- **Margin:** 13.66 USDT
- **Reason:** `max_holding_exceeded_but_loss`
- **Action:** `hold` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è)
- **TP:** 3.50% (–Ω–µ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç)
- **SL:** 2.0% (–¥–ª—è ranging —Ä–µ–∂–∏–º–∞)

### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã:

1. **–í—Å–µ 4 –ø–æ–∑–∏—Ü–∏–∏ –≤ —É–±—ã—Ç–∫–µ:**
   - SOL-USDT: -19.34%
   - BTC-USDT: -6.82%
   - XRP-USDT: -11.46%
   - ETH-USDT: -18.63%

2. **–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ max_holding_minutes (20 –º–∏–Ω—É—Ç):**
   - SOL: ~100-115 –º–∏–Ω—É—Ç
   - BTC: ~99-108 –º–∏–Ω—É—Ç
   - XRP: ~92-108 –º–∏–Ω—É—Ç
   - ETH: ~88-104 –º–∏–Ω—É—Ç

3. **–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –ù–ï –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è:**
   - Reason: `max_holding_exceeded_but_loss`
   - Action: `hold`
   - –û–∂–∏–¥–∞–µ—Ç—Å—è SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

4. **SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
   - SL –¥–ª—è ranging: 2.0%
   - –ù–æ Net PnL% –Ω–∞–º–Ω–æ–≥–æ —Ö—É–∂–µ (-6.82% –¥–æ -19.34%)
   - **–ü–†–û–ë–õ–ï–ú–ê:** SL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏, –Ω–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≥–ª—É–±–æ–∫–æ –≤ —É–±—ã—Ç–∫–µ

---

## 2Ô∏è‚É£ –ü–û–°–õ–ï–î–ù–ò–ï 10 –°–¢–†–û–ö trades.csv –° –ö–û–õ–û–ù–ö–û–ô reason

### –§–∞–π–ª: `logs/futures/archived/logs_2025-12-07_19-42-03/trades_2025-12-07.csv`

**–í—Å–µ–≥–æ –∑–∞–∫—Ä—ã—Ç—ã—Ö —Å–¥–µ–ª–æ–∫:** 1

| timestamp | symbol | side | entry_price | exit_price | size | gross_pnl | commission | net_pnl | duration_sec | reason | win_rate |
|-----------|--------|------|-------------|------------|------|-----------|------------|---------|--------------|--------|----------|
| 2025-12-07T14:57:39.058958+00:00 | DOGE-USDT | short | 0.1353 | 0.1350 | 30.00000000 | 0.0099 | 0.0041 | 0.0058 | 769.593168 | **profit_drawdown** | 100.00 |

### –ê–Ω–∞–ª–∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–π —Å–¥–µ–ª–∫–∏:

- **Symbol:** DOGE-USDT
- **Side:** SHORT
- **Entry price:** 0.1353
- **Exit price:** 0.1350
- **Net PnL:** +0.0058 USDT (–ø—Ä–∏–±—ã–ª—å)
- **Duration:** 769.59 —Å–µ–∫—É–Ω–¥ (~12.8 –º–∏–Ω—É—Ç)
- **Reason:** `profit_drawdown` - –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ Profit Drawdown Protection
- **Win rate:** 100.00%

### –í—ã–≤–æ–¥—ã:

1. **–ó–∞–∫—Ä—ã–ª–∞—Å—å —Ç–æ–ª—å–∫–æ 1 –ø–æ–∑–∏—Ü–∏—è** (DOGE-USDT) - –æ–Ω–∞ –±—ã–ª–∞ –≤ –ø—Ä–∏–±—ã–ª–∏
2. **–ü—Ä–∏—á–∏–Ω–∞ –∑–∞–∫—Ä—ã—Ç–∏—è:** `profit_drawdown` - —Å—Ä–∞–±–æ—Ç–∞–ª–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç–∫–∞—Ç–∞ –ø—Ä–∏–±—ã–ª–∏
3. **4 –ø–æ–∑–∏—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –æ—Ç–∫—Ä—ã—Ç—ã–º–∏** - –≤—Å–µ –≤ —É–±—ã—Ç–∫–µ, –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è

---

## 3Ô∏è‚É£ –ó–ù–ê–ß–ï–ù–ò–Ø SL/–í–´–•–û–î–ê –ò–ó config_futures.yaml

### –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```yaml
scalping:
  tp_percent: 2.4  # Take Profit 2.4%
  sl_percent: 1.2  # Stop Loss 1.2% (–±–∞–∑–æ–≤—ã–π)
```

### –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ —Ä–µ–∂–∏–º–∞–º (RANGING - –≤—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –≤ ranging):

```yaml
scalping:
  adaptive_regime:
    ranging:
      tp_percent: 2.0      # TP –¥–ª—è ranging
      sl_percent: 2.0       # SL –¥–ª—è ranging (–∂–µ—Å—Ç–∫–∏–π —Å—Ç–æ–ø –ø–æ—Å–ª–µ min_holding)
      max_holding_minutes: 20  # –ú–∞–∫—Å–∏–º—É–º 20 –º–∏–Ω—É—Ç —É–¥–µ—Ä–∂–∞–Ω–∏—è
      extend_time_if_profitable: true  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –≤—Ä–µ–º—è –µ—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏
      min_profit_for_extension: 0.5  # –ú–∏–Ω–∏–º—É–º 0.5% –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è
      extension_percent: 100  # –ü—Ä–æ–¥–ª–µ–≤–∞—Ç—å –Ω–∞ 100% –≤—Ä–µ–º–µ–Ω–∏ (—É–¥–≤–∞–∏–≤–∞–µ–º –≤—Ä–µ–º—è)
```

### Profit Drawdown Protection:

```yaml
scalping:
  profit_drawdown:
    enabled: true
    drawdown_percent: 0.35  # 35% –æ—Ç–∫–∞—Ç –æ—Ç –º–∞–∫—Å–∏–º—É–º–∞ –ø—Ä–∏–±—ã–ª–∏
    min_profit_to_activate_usd: 0.5  # –ú–∏–Ω–∏–º—É–º $0.5 –ø—Ä–∏–±—ã–ª–∏ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
```

### Trailing Stop Loss –¥–ª—è RANGING:

```yaml
futures_modules:
  trailing_sl:
    by_regime:
      ranging:
        loss_cut_percent: 4.0  # 4% –º–∞–∫—Å —É–±—ã—Ç–æ–∫ (–±—ã–ª–æ 3.0%)
        timeout_loss_percent: 2.0  # 2% —Ç–∞–π–º–∞—É—Ç —É–±—ã—Ç–æ–∫ (–±—ã–ª–æ 1.0%)
        timeout_minutes: 120  # 120 –º–∏–Ω—É—Ç —Ç–∞–π–º–∞—É—Ç (–±—ã–ª–æ 90)
        min_holding_minutes: 35.0  # 35 –º–∏–Ω—É—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ
```

### –ü—Ä–æ–±–ª–µ–º–∞ —Å SL:

- **SL –¥–ª—è ranging:** 2.0%
- **–ù–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≤ —É–±—ã—Ç–∫–µ:** -6.82% –¥–æ -19.34%
- **SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç**, –ø–æ—Ç–æ–º—É —á—Ç–æ:
  1. SL —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç –º–∞—Ä–∂–∏, –∞ –Ω–µ –æ—Ç —Ü–µ–Ω—ã
  2. –ü–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≥–ª—É–±–æ–∫–æ –≤ —É–±—ã—Ç–∫–µ
  3. –ö–æ–¥ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ (—Å–º. –∫–æ–¥ –Ω–∏–∂–µ)

---

## 4Ô∏è‚É£ 30 –°–¢–†–û–ö –ö–û–î–ê –ò–ó exit_analyzer.py ‚Äî –ì–î–ï –†–ï–®–ê–ï–¢–°–Ø, –ó–ê–ö–†–´–í–ê–¢–¨ –£–ë–´–¢–û–ß–ù–£–Æ –ò–õ–ò –ù–ï–¢

### –§–∞–π–ª: `src/strategies/scalping/futures/positions/exit_analyzer.py`

### –ö–æ–¥ –¥–ª—è RANGING —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1592-1605):

```python
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding
                # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
                if pnl_percent < 0:
                    logger.info(
                        f"‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {actual_max_holding:.1f} –º–∏–Ω, "
                        f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                    )
                    return {
                        "action": "hold",
                        "reason": "max_holding_exceeded_but_loss",
                        "pnl_pct": pnl_percent,
                        "minutes_in_position": minutes_in_position,
                        "max_holding_minutes": actual_max_holding,
                    }

                # –í—Ä–µ–º—è –ø—Ä–µ–≤—ã—à–µ–Ω–æ –∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ - –∑–∞–∫—Ä—ã–≤–∞–µ–º
                logger.info(
                    f"‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {actual_max_holding:.1f} –º–∏–Ω "
                    f"(–±–∞–∑–æ–≤–æ–µ: {max_holding_minutes:.1f} –º–∏–Ω), –ø—Ä–∏–±—ã–ª—å={pnl_percent:.2f}% - –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ –≤—Ä–µ–º–µ–Ω–∏"
                )
```

### –ö–æ–¥ –¥–ª—è TRENDING —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1294-1307):

```python
                else:
                    # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding
                    # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è
                    if pnl_percent < 0:
                        logger.info(
                            f"‚è∞ ExitAnalyzer TRENDING: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                            f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                        )
                        return {
                            "action": "hold",
                            "reason": "max_holding_exceeded_but_loss_trending",
                            "pnl_pct": pnl_percent,
                            "trend_strength": trend_strength,
                            "minutes_in_position": minutes_in_position,
                        }
```

### –ö–æ–¥ –¥–ª—è CHOPPY —Ä–µ–∂–∏–º–∞ (—Å—Ç—Ä–æ–∫–∏ 1821-1834):

```python
                # ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ max_holding –¥–∞–∂–µ –≤ choppy
                # –ü–æ–∑–≤–æ–ª—è–µ–º –∏–º –¥–æ–π—Ç–∏ –¥–æ SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
                if pnl_percent < 0:
                    logger.info(
                        f"‚è∞ ExitAnalyzer CHOPPY: –í—Ä–µ–º—è {minutes_in_position:.1f} –º–∏–Ω >= {max_holding_minutes:.1f} –º–∏–Ω, "
                        f"–Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ ({pnl_percent:.2f}%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è"
                    )
                    return {
                        "action": "hold",
                        "reason": "max_holding_exceeded_but_loss_choppy",
                        "pnl_pct": pnl_percent,
                        "minutes_in_position": minutes_in_position,
                        "max_holding_minutes": max_holding_minutes,
                    }
```

### –ö–ª—é—á–µ–≤–∞—è –ª–æ–≥–∏–∫–∞:

**–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ `max_holding_minutes` –ò `pnl_percent < 0`:**
- ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è `action: "hold"` (–ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º)
- ‚úÖ Reason: `"max_holding_exceeded_but_loss"` (–∏–ª–∏ `*_trending`/`*_choppy`)
- ‚úÖ –ü–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π, –æ–∂–∏–¥–∞–µ—Ç—Å—è SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:**
- SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≥–ª—É–±–æ–∫–æ –≤ —É–±—ã—Ç–∫–µ (-6.82% –¥–æ -19.34%)
- SL –¥–ª—è ranging: 2.0%, –Ω–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –ø—Ä–æ—à–ª–∏ —ç—Ç–æ—Ç —É—Ä–æ–≤–µ–Ω—å
- –ü–æ–∑–∏—Ü–∏–∏ –≤–∏—Å—è—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ, –±–ª–æ–∫–∏—Ä—É—è –Ω–æ–≤—ã–µ –≤—Ö–æ–¥—ã

---

## üîç –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ò–ó –õ–û–ì–û–í

### –°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ª–æ–≥–æ–≤ (19:41:50):

```
‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è 108.3 –º–∏–Ω >= 20.0 –º–∏–Ω, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ (-12.46%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
üìä ExitAnalyzer: –†–µ—à–µ–Ω–∏–µ –¥–ª—è XRP-USDT (—Ä–µ–∂–∏–º=ranging): action=hold, reason=max_holding_exceeded_but_loss, PnL=-12.46%

‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è 104.3 –º–∏–Ω >= 20.0 –º–∏–Ω, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ (-14.72%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
üìä ExitAnalyzer: –†–µ—à–µ–Ω–∏–µ –¥–ª—è ETH-USDT (—Ä–µ–∂–∏–º=ranging): action=hold, reason=max_holding_exceeded_but_loss, PnL=-14.72%

‚è∞ ExitAnalyzer RANGING: –í—Ä–µ–º—è 115.3 –º–∏–Ω >= 20.0 –º–∏–Ω, –Ω–æ –ø–æ–∑–∏—Ü–∏—è –≤ —É–±—ã—Ç–∫–µ (-8.37%) - –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –∂–¥–µ–º SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
üìä ExitAnalyzer: –†–µ—à–µ–Ω–∏–µ –¥–ª—è BTC-USDT (—Ä–µ–∂–∏–º=ranging): action=hold, reason=max_holding_exceeded_but_loss, PnL=-8.37%

üéØ PositionMonitor: –†–µ—à–µ–Ω–∏–µ –¥–ª—è SOL-USDT: action=hold, reason=max_holding_exceeded_but_loss, pnl=-19.64%
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–π (19:26:19):

```
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.10, pnl=-3.72, liq_price=163.6726 (SOL-USDT)
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.10, pnl=-2.08, liq_price=2.3710 (XRP-USDT)
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.50, pnl=-0.81, liq_price=104650.7420 (BTC-USDT)
–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏: safe=False, margin_ratio=0.10, pnl=-2.53, liq_price=3506.4183 (ETH-USDT)
```

### ADL (Auto-Deleveraging) Rank:

```
üìä ADL –¥–ª—è ETH-USDT: rank=1 (üü¢ –ù–ò–ó–ö–ò–ô) (PnL=-2.58 USDT, margin=13.66 USDT)
üìä ADL –¥–ª—è XRP-USDT: rank=1 (üü¢ –ù–ò–ó–ö–ò–ô) (PnL=-2.11 USDT, margin=18.31 USDT)
üìä ADL –¥–ª—è BTC-USDT: rank=1 (üü¢ –ù–ò–ó–ö–ò–ô) (PnL=-0.83 USDT, margin=12.13 USDT)
üìä ADL –¥–ª—è SOL-USDT: rank=1 (üü¢ –ù–ò–ó–ö–ò–ô) (PnL=-3.59 USDT, margin=19.36 USDT)
```

---

## üéØ –í–´–í–û–î–´ –ò –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–æ–±–ª–µ–º–∞:

1. **4 –ø–æ–∑–∏—Ü–∏–∏ –≤–∏—Å—è—Ç —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º PnL:**
   - SOL-USDT: -19.34%
   - BTC-USDT: -6.82%
   - XRP-USDT: -11.46%
   - ETH-USDT: -18.63%

2. **–í—Å–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–µ–≤—ã—Å–∏–ª–∏ max_holding_minutes (20 –º–∏–Ω—É—Ç):**
   - –í—Ä–µ–º—è –≤ –ø–æ–∑–∏—Ü–∏–∏: 88-115 –º–∏–Ω—É—Ç (–≤ 4-5 —Ä–∞–∑ –±–æ–ª—å—à–µ –ª–∏–º–∏—Ç–∞!)

3. **–ü–æ–∑–∏—Ü–∏–∏ –ù–ï –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è:**
   - –ö–æ–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `action: "hold"` –ø—Ä–∏ `pnl_percent < 0`
   - –û–∂–∏–¥–∞–µ—Ç—Å—è SL –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
   - –ù–æ SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≥–ª—É–±–æ–∫–æ –≤ —É–±—ã—Ç–∫–µ

4. **SL –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
   - SL –¥–ª—è ranging: 2.0%
   - –ù–æ Net PnL% —É–∂–µ -6.82% –¥–æ -19.34%
   - –ü–æ–∑–∏—Ü–∏–∏ –ø—Ä–æ—à–ª–∏ —É—Ä–æ–≤–µ–Ω—å SL, –Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–ª–∏—Å—å

5. **–¢–æ—Ä–≥–æ–≤–ª—è –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è:**
   - `max_open_positions: 5`
   - –û—Ç–∫—Ä—ã—Ç–æ 6 –ø–æ–∑–∏—Ü–∏–π (4 –≤–∏—Å—è—â–∏—Ö + –≤–æ–∑–º–æ–∂–Ω–æ –µ—â–µ 2)
   - –ù–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–µ –º–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å—Å—è

### –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ö–∏–º—ã:

1. **–ü–æ—á–µ–º—É SL –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª?**
   - SL –¥–æ–ª–∂–µ–Ω –±—ã–ª –∑–∞–∫—Ä—ã—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ -2.0%
   - –ù–æ –ø–æ–∑–∏—Ü–∏–∏ —É–∂–µ –≤ -6.82% –¥–æ -19.34%
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É Trailing Stop Loss

2. **–ü–æ—á–µ–º—É –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏?**
   - –ö–æ–¥ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —É–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
   - –ù–æ –æ–Ω–∏ –≤–∏—Å—è—Ç —É–∂–µ 88-115 –º–∏–Ω—É—Ç (–≤ 4-5 —Ä–∞–∑ –±–æ–ª—å—à–µ –ª–∏–º–∏—Ç–∞)
   - –ù—É–∂–Ω–æ –ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —É–±—ã—Ç–∫–µ?

3. **–ì–¥–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è?**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `max_open_positions: 5`
   - –°–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π –æ—Ç–∫—Ä—ã—Ç–æ —Å–µ–π—á–∞—Å?
   - –ï—Å—Ç—å –ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã?

4. **–ü–æ—á–µ–º—É –∑–∞–∫—Ä—ã–ª–∞—Å—å —Ç–æ–ª—å–∫–æ 1 –ø–æ–∑–∏—Ü–∏—è (DOGE)?**
   - DOGE –±—ã–ª–∞ –≤ –ø—Ä–∏–±—ã–ª–∏ ‚Üí –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ `profit_drawdown`
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ 4 –≤ —É–±—ã—Ç–∫–µ ‚Üí –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-12-07  
**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:** `logs/futures/archived/logs_2025-12-07_19-42-03/`  
**–î–ª—è:** –ö–∏–º—ã  
**–¶–µ–ª—å:** –ù–∞–π—Ç–∏ —Ç–æ—á–∫—É –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –ø—Ä–∏—á–∏–Ω—É –≤–∏—Å—è—â–∏—Ö –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π



