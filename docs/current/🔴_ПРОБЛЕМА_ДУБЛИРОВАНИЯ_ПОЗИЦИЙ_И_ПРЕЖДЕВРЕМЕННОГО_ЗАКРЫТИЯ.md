# üî¥ –ü–†–û–ë–õ–ï–ú–ê: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

## –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –æ—Ç–∫—Ä—ã–ª **–¥–≤–µ –ø–æ–∑–∏—Ü–∏–∏ SOLUSDT** –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π:
1. **–ü–æ–∑–∏—Ü–∏—è 1**: –û—Ç–∫—Ä—ã—Ç–∞ 23:52:06, –∑–∞–∫—Ä—ã—Ç–∞ 23:57:14 (5 –º–∏–Ω—É—Ç) ‚Üí +4.76% (+1.61 USDT)
2. **–ü–æ–∑–∏—Ü–∏—è 2**: –û—Ç–∫—Ä—ã—Ç–∞ 23:59:56, –∑–∞–∫—Ä—ã—Ç–∞ 00:06:13 (6 –º–∏–Ω—É—Ç) ‚Üí +4.77% (+1.63 USDT)

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. ‚úÖ –û–±–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ, –Ω–æ **–¥–≤–æ–π–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è**
2. ‚ùå –ë–æ—Ç **–Ω–µ –ø—Ä–æ–¥–ª–∏–ª** —É–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏, –∞ –æ—Ç–∫—Ä—ã–ª –≤—Ç–æ—Ä—É—é
3. ‚ùå –í–º–µ—Å—Ç–æ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏ ‚Üí **–ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ** –æ–±–µ–∏—Ö –ø–æ–∑–∏—Ü–∏–π
4. ‚ùå –°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏ **–Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç** –∫–∞–∫ –æ–∂–∏–¥–∞–ª–æ—Å—å

## –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. –ü–æ—á–µ–º—É –æ—Ç–∫—Ä—ã–ª–∞—Å—å –≤—Ç–æ—Ä–∞—è –ø–æ–∑–∏—Ü–∏—è?

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- `max_positions_per_symbol: 1` ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ —Å–∏–º–≤–æ–ª
- `allow_concurrent_positions: false` ‚Üí –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–∑–∏—Ü–∏–π
- Signal coordinator –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ –±–∏—Ä–∂–µ –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º (—Å—Ç—Ä–æ–∫–∏ 201-249)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

**A. –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–∑–∏—Ü–∏–π:**
- –ü–µ—Ä–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã–ª–∞—Å—å –≤ 23:52:06
- –í—Ç–æ—Ä–∞—è –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã–ª–∞—Å—å –≤ 23:59:56 (—á–µ—Ä–µ–∑ 7 –º–∏–Ω—É—Ç)
- –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–æ–∑–∏—Ü–∏–π –Ω–∞ –±–∏—Ä–∂–µ –ø–µ—Ä–≤–∞—è –ø–æ–∑–∏—Ü–∏—è –µ—â–µ –Ω–µ –±—ã–ª–∞ –≤–∏–¥–Ω–∞ (–∑–∞–¥–µ—Ä–∂–∫–∞ API)

**B. Partial TP –∑–∞–∫—Ä—ã–ª –ø–æ–∑–∏—Ü–∏—é —á–∞—Å—Ç–∏—á–Ω–æ:**
- Partial TP –∑–∞–∫—Ä—ã–≤–∞–µ—Ç 60% –ø–æ–∑–∏—Ü–∏–∏ (–Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é)
- –ü–æ—Å–ª–µ Partial TP —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è

**C. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
- Signal coordinator –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —á–µ—Ä–µ–∑ `get_positions()`
- –í–æ–∑–º–æ–∂–Ω–æ, –ø–æ–∑–∏—Ü–∏—è —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞ –ø–æ TP, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –µ—â–µ –Ω–µ —É–≤–∏–¥–µ–ª–∞ –∑–∞–∫—Ä—ã—Ç–∏–µ
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –ø–æ–∑–∏—Ü–∏—è

### 2. –ü–æ—á–µ–º—É –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–ª–∏—Å—å –ø—Ä–∏ 4.76%?

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- **Big Profit Exit –¥–ª—è –∞–ª—å—Ç–æ–≤**: 2.0% (–ø–æ—Ä–æ–≥ –¥–ª—è SOL/DOGE/XRP)
- **TP –¥–ª—è SOL** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞):
  - Trending: ~4.5%
  - Ranging: ~4.0%
  - Choppy: ~4.5%

**–ï—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å 4.76%:**
- –ú–æ–∂–µ—Ç –±—ã—Ç—å **Full TP** (–Ω–µ Big Profit Exit)
- –ò–ª–∏ **Partial TP** —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –∑–∞–∫—Ä—ã—Ç–∏–µ–º –æ—Å—Ç–∞—Ç–∫–∞

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

**A. Full TP —Å—Ä–∞–±–æ—Ç–∞–ª:**
- –ï—Å–ª–∏ —Ä–µ–∂–∏–º Ranging: TP = 4.0% ‚Üí –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–ª–∞—Å—å –ø–æ Full TP
- –ü—Ä–∏–±—ã–ª—å 4.76% > 4.0% ‚Üí TP —Å—Ä–∞–±–æ—Ç–∞–ª

**B. Big Profit Exit —Å—Ä–∞–±–æ—Ç–∞–ª —Ä–∞–Ω—å—à–µ:**
- –ü–æ—Ä–æ–≥ –¥–ª—è –∞–ª—å—Ç–æ–≤: 2.0%
- –ù–æ –ø–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–ª–∏—Å—å –ø—Ä–∏ 4.76% ‚Üí –≤–æ–∑–º–æ–∂–Ω–æ Full TP —Å—Ä–∞–±–æ—Ç–∞–ª —Ä–∞–Ω—å—à–µ Big Profit Exit

**C. Partial TP + –∑–∞–∫—Ä—ã—Ç–∏–µ –æ—Å—Ç–∞—Ç–∫–∞:**
- Partial TP –∑–∞–∫—Ä—ã–≤–∞–µ—Ç 60% –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ 0.4-0.6% –ø—Ä–∏–±—ã–ª–∏
- –ü–æ—Å–ª–µ Partial TP –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ–∑–∏—Ü–∏–∏ –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å—Å—è –ø–æ Full TP
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –í—Å—è –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞ –ø—Ä–∏ 4.76%

### 3. –ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —É–¥–µ—Ä–∂–∞–Ω–∏—è?

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- **TP Extension**: –ü—Ä–æ–¥–ª–µ–≤–∞–µ—Ç TP –ø—Ä–∏ —Ç—Ä–µ–Ω–¥–µ (min_trend_strength=0.7)
- **Big Profit Exit**: –£–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø–æ–º –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞
- **Extended time on profit**: –ü—Ä–æ–¥–ª–µ–≤–∞–µ—Ç –≤—Ä–µ–º—è —É–¥–µ—Ä–∂–∞–Ω–∏—è –¥–ª—è –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

**A. TP Extension –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- TP Extension —Ç—Ä–µ–±—É–µ—Ç `trend_strength > 0.7` –∏ `use_indicators: true`
- –í–æ–∑–º–æ–∂–Ω–æ, —Å–∏–ª–∞ —Ç—Ä–µ–Ω–¥–∞ < 0.7 ‚Üí –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**B. Big Profit Exit –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ:**
- Big Profit Exit –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø –ø–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ—Ä–æ–≥–∞
- –ù–æ –µ—Å–ª–∏ Full TP —Å—Ä–∞–±–æ—Ç–∞–ª —Ä–∞–Ω—å—à–µ ‚Üí Big Profit Exit –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –≤–∫–ª—é—á–∏—Ç—å—Å—è

**C. –†–µ–∂–∏–º —Ä—ã–Ω–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ trending:**
- –ï—Å–ª–∏ —Ä–µ–∂–∏–º Ranging/Choppy ‚Üí TP Extension –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∑–∏—Ü–∏–∏ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É TP

## –†–µ—à–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–∑–∏—Ü–∏–π –ø–µ—Ä–µ–¥ –æ—Ç–∫—Ä—ã—Ç–∏–µ–º

**–ü—Ä–æ–±–ª–µ–º–∞:** –ó–∞–¥–µ—Ä–∂–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ Partial TP

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–∑–∏—Ü–∏–∏ –î–û –∏ –ü–û–°–õ–ï Partial TP
# –ü–æ—Å–ª–µ Partial TP –ø–æ–∑–∏—Ü–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç–æ–π (40% –æ—Å—Ç–∞–µ—Ç—Å—è), –Ω–æ —Ä–∞–∑–º–µ—Ä —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è
# –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –†–ê–ó–ú–ï–† –ø–æ–∑–∏—Ü–∏–∏, –∞ –Ω–µ –Ω–∞–ª–∏—á–∏–µ –ø–æ–∑–∏—Ü–∏–∏

if position_in_signal_direction:
    pos_size = abs(float(position_in_signal_direction.get("pos", "0")))
    
    # ‚úÖ –ù–û–í–û–ï: –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è (–æ—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ Partial TP), —Ä–∞–∑—Ä–µ—à–∞–µ–º –Ω–æ–≤—É—é
    min_size_threshold = 0.01  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–ª—è —Å—á–∏—Ç–∞–Ω–∏—è –ø–æ–∑–∏—Ü–∏–∏ "–æ—Ç–∫—Ä—ã—Ç–æ–π"
    if pos_size < min_size_threshold:
        logger.info(
            f"üìå –ü–æ–∑–∏—Ü–∏—è {symbol} –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è ({pos_size:.6f}), "
            f"—Ä–∞–∑—Ä–µ—à–∞–µ–º –Ω–æ–≤—É—é –ø–æ–∑–∏—Ü–∏—é (–≤–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞—Ç–æ–∫ –ø–æ—Å–ª–µ Partial TP)"
        )
    else:
        logger.warning(
            f"‚ö†Ô∏è –ü–æ–∑–∏—Ü–∏—è {symbol} {signal_position_side.upper()} –£–ñ–ï –û–¢–ö–†–´–¢–ê (size={pos_size}), "
            f"–ë–õ–û–ö–ò–†–£–ï–ú –Ω–æ–≤—ã–π –æ—Ä–¥–µ—Ä"
        )
        continue
```

### 2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ —É–¥–µ—Ä–∂–∞–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** TP Extension –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ Full TP —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–Ω—å—à–µ

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä—è—Ç—å TP Extension –ü–ï–†–ï–î Full TP
# –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –≤ –ø—Ä–∏–±—ã–ª–∏ –∏ —Ç—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π ‚Üí –ø—Ä–æ–¥–ª–µ–≤–∞—Ç—å TP –≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è

if pnl_percent >= current_tp:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–æ–¥–ª–µ–Ω–∏–µ TP –ü–ï–†–ï–î –∑–∞–∫—Ä—ã—Ç–∏–µ–º
    if tp_extension_enabled and pnl_percent > 0:
        trend_strength = calculate_trend_strength(...)  # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Å–∏–ª—É —Ç—Ä–µ–Ω–¥–∞
        if trend_strength >= min_trend_strength:
            # –ü—Ä–æ–¥–ª–µ–≤–∞–µ–º TP –≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è
            new_tp = min(current_tp + extension_step, max_tp)
            logger.info(
                f"üìà –ü—Ä–æ–¥–ª–µ–Ω–∏–µ TP –¥–ª—è {symbol}: {current_tp:.2f}% ‚Üí {new_tp:.2f}% "
                f"(–ø—Ä–∏–±—ã–ª—å={pnl_percent:.2f}%, —Ç—Ä–µ–Ω–¥={trend_strength:.2f})"
            )
            # –û–±–Ω–æ–≤–ª—è–µ–º TP –≤–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è
            await update_tp(symbol, new_tp)
            return  # –ù–ï –∑–∞–∫—Ä—ã–≤–∞–µ–º, –ø—Ä–æ–¥–ª–µ–≤–∞–µ–º
    
    # –ï—Å–ª–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ ‚Üí –∑–∞–∫—Ä—ã–≤–∞–µ–º –ø–æ Full TP
    await self._close_position_by_reason(position, "tp")
```

### 3. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏:**

1. **TP Extension** (–µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å >= TP –∏ —Ç—Ä–µ–Ω–¥ —Å–∏–ª—å–Ω—ã–π) ‚Üí **–ü–†–û–î–õ–ï–í–ê–ï–ú TP**
2. **Big Profit Exit** (–µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å >= –ø–æ—Ä–æ–≥–∞) ‚Üí **–í–ö–õ–Æ–ß–ê–ï–ú –¢–†–ï–ô–õ–ò–ù–ì –°–¢–û–ü**
3. **Partial TP** (–µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å >= trigger –∏ –ø—Ä–æ—à–ª–æ min_holding) ‚Üí **–ó–ê–ö–†–´–í–ê–ï–ú 60%**
4. **Full TP** (–µ—Å–ª–∏ –ø—Ä–∏–±—ã–ª—å >= TP –∏ –Ω–µ—Ç –ø—Ä–æ–¥–ª–µ–Ω–∏—è) ‚Üí **–ó–ê–ö–†–´–í–ê–ï–ú –í–°–ï**
5. **SL / loss_cut** (–µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ >= –ø–æ—Ä–æ–≥–∞) ‚Üí **–ó–ê–ö–†–´–í–ê–ï–ú**

**–¢–µ–∫—É—â–∏–π –ø–æ—Ä—è–¥–æ–∫:** TP Extension –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ü–û–°–õ–ï Full TP ‚Üí –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 4. –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–∑–∏—Ü–∏–π –ø–æ—Å–ª–µ Partial TP

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ Partial TP —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å –ø–æ–∑–∏—Ü–∏—é –∑–∞–∫—Ä—ã—Ç–æ–π

**–†–µ—à–µ–Ω–∏–µ:**
```python
# ‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ü–æ—Å–ª–µ Partial TP –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ active_positions
# –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å size –ø–æ–∑–∏—Ü–∏–∏ –ø–æ—Å–ª–µ Partial TP, —á—Ç–æ–±—ã —Å–∏—Å—Ç–µ–º–∞ –∑–Ω–∞–ª–∞ —á—Ç–æ –ø–æ–∑–∏—Ü–∏—è –≤—Å–µ –µ—â–µ –æ—Ç–∫—Ä—ã—Ç–∞

async def execute_partial_tp(...):
    # –ó–∞–∫—Ä—ã–≤–∞–µ–º —á–∞—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏
    await close_partial_position(...)
    
    # ‚úÖ –ù–û–í–û–ï: –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ –≤ active_positions
    if symbol in self.active_positions:
        remaining_size = original_size * (1 - ptp_fraction)
        self.active_positions[symbol]["size"] = remaining_size
        self.active_positions[symbol]["partial_tp_done"] = True
        logger.info(
            f"üîÑ –û–±–Ω–æ–≤–ª–µ–Ω —Ä–∞–∑–º–µ—Ä –ø–æ–∑–∏—Ü–∏–∏ {symbol} –ø–æ—Å–ª–µ Partial TP: "
            f"{original_size:.6f} ‚Üí {remaining_size:.6f}"
        )
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –¢–æ–ª—å–∫–æ **–æ–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è** –Ω–∞ —Å–∏–º–≤–æ–ª (–±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
- ‚úÖ –ü–æ–∑–∏—Ü–∏–∏ **–ø—Ä–æ–¥–ª–µ–≤–∞—é—Ç—Å—è** –ø—Ä–∏ —Ç—Ä–µ–Ω–¥–µ (TP Extension —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ Big Profit Exit **–≤–∫–ª—é—á–∞–µ—Ç —Ç—Ä–µ–π–ª–∏–Ω–≥ —Å—Ç–æ–ø** (—É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏–±—ã–ª—å)
- ‚úÖ Partial TP **–Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏—é –ø–æ–ª–Ω–æ—Å—Ç—å—é** (–æ—Å—Ç–∞—Ç–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è)
- ‚úÖ –°–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏—è–º–∏ **—Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ**

## –°—Ç–∞—Ç—É—Å

üî¥ **–¢–†–ï–ë–£–ï–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø**: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –∏ –ø—Ä–µ–∂–¥–µ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ










